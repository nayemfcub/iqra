function $p(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function _p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rc={exports:{}},Qr={},$c={exports:{}},_={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs=Symbol.for("react.element"),Op=Symbol.for("react.portal"),Up=Symbol.for("react.fragment"),Bp=Symbol.for("react.strict_mode"),Hp=Symbol.for("react.profiler"),Wp=Symbol.for("react.provider"),Vp=Symbol.for("react.context"),Gp=Symbol.for("react.forward_ref"),Qp=Symbol.for("react.suspense"),qp=Symbol.for("react.memo"),Yp=Symbol.for("react.lazy"),ri=Symbol.iterator;function Kp(e){return e===null||typeof e!="object"?null:(e=ri&&e[ri]||e["@@iterator"],typeof e=="function"?e:null)}var _c={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oc=Object.assign,Uc={};function Hn(e,t,n){this.props=e,this.context=t,this.refs=Uc,this.updater=n||_c}Hn.prototype.isReactComponent={};Hn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bc(){}Bc.prototype=Hn.prototype;function ql(e,t,n){this.props=e,this.context=t,this.refs=Uc,this.updater=n||_c}var Yl=ql.prototype=new Bc;Yl.constructor=ql;Oc(Yl,Hn.prototype);Yl.isPureReactComponent=!0;var ai=Array.isArray,Hc=Object.prototype.hasOwnProperty,Kl={current:null},Wc={key:!0,ref:!0,__self:!0,__source:!0};function Vc(e,t,n){var r,a={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Hc.call(t,r)&&!Wc.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var i=Array(c),d=0;d<c;d++)i[d]=arguments[d+2];a.children=i}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)a[r]===void 0&&(a[r]=c[r]);return{$$typeof:Fs,type:e,key:l,ref:o,props:a,_owner:Kl.current}}function Zp(e,t){return{$$typeof:Fs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fs}function Xp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var li=/\/+/g;function ha(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xp(""+e.key):t.toString(36)}function lr(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Fs:case Op:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+ha(o,0):r,ai(a)?(n="",e!=null&&(n=e.replace(li,"$&/")+"/"),lr(a,t,n,"",function(d){return d})):a!=null&&(Zl(a)&&(a=Zp(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(li,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",ai(e))for(var c=0;c<e.length;c++){l=e[c];var i=r+ha(l,c);o+=lr(l,t,n,i,a)}else if(i=Kp(e),typeof i=="function")for(e=i.call(e),c=0;!(l=e.next()).done;)l=l.value,i=r+ha(l,c++),o+=lr(l,t,n,i,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bs(e,t,n){if(e==null)return e;var r=[],a=0;return lr(e,r,"","",function(l){return t.call(n,l,a++)}),r}function Jp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ne={current:null},or={transition:null},em={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:or,ReactCurrentOwner:Kl};function Gc(){throw Error("act(...) is not supported in production builds of React.")}_.Children={map:Bs,forEach:function(e,t,n){Bs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bs(e,function(){t++}),t},toArray:function(e){return Bs(e,function(t){return t})||[]},only:function(e){if(!Zl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_.Component=Hn;_.Fragment=Up;_.Profiler=Hp;_.PureComponent=ql;_.StrictMode=Bp;_.Suspense=Qp;_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=em;_.act=Gc;_.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Oc({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Kl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(i in t)Hc.call(t,i)&&!Wc.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&c!==void 0?c[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){c=Array(i);for(var d=0;d<i;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Fs,type:e.type,key:a,ref:l,props:r,_owner:o}};_.createContext=function(e){return e={$$typeof:Vp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Wp,_context:e},e.Consumer=e};_.createElement=Vc;_.createFactory=function(e){var t=Vc.bind(null,e);return t.type=e,t};_.createRef=function(){return{current:null}};_.forwardRef=function(e){return{$$typeof:Gp,render:e}};_.isValidElement=Zl;_.lazy=function(e){return{$$typeof:Yp,_payload:{_status:-1,_result:e},_init:Jp}};_.memo=function(e,t){return{$$typeof:qp,type:e,compare:t===void 0?null:t}};_.startTransition=function(e){var t=or.transition;or.transition={};try{e()}finally{or.transition=t}};_.unstable_act=Gc;_.useCallback=function(e,t){return Ne.current.useCallback(e,t)};_.useContext=function(e){return Ne.current.useContext(e)};_.useDebugValue=function(){};_.useDeferredValue=function(e){return Ne.current.useDeferredValue(e)};_.useEffect=function(e,t){return Ne.current.useEffect(e,t)};_.useId=function(){return Ne.current.useId()};_.useImperativeHandle=function(e,t,n){return Ne.current.useImperativeHandle(e,t,n)};_.useInsertionEffect=function(e,t){return Ne.current.useInsertionEffect(e,t)};_.useLayoutEffect=function(e,t){return Ne.current.useLayoutEffect(e,t)};_.useMemo=function(e,t){return Ne.current.useMemo(e,t)};_.useReducer=function(e,t,n){return Ne.current.useReducer(e,t,n)};_.useRef=function(e){return Ne.current.useRef(e)};_.useState=function(e){return Ne.current.useState(e)};_.useSyncExternalStore=function(e,t,n){return Ne.current.useSyncExternalStore(e,t,n)};_.useTransition=function(){return Ne.current.useTransition()};_.version="18.3.1";$c.exports=_;var f=$c.exports;const Xl=_p(f),tm=$p({__proto__:null,default:Xl},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=f,sm=Symbol.for("react.element"),rm=Symbol.for("react.fragment"),am=Object.prototype.hasOwnProperty,lm=nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,om={key:!0,ref:!0,__self:!0,__source:!0};function Qc(e,t,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)am.call(t,r)&&!om.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:sm,type:e,key:l,ref:o,props:a,_owner:lm.current}}Qr.Fragment=rm;Qr.jsx=Qc;Qr.jsxs=Qc;Rc.exports=Qr;var s=Rc.exports,Va={},qc={exports:{}},Fe={},Yc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,D){var z=M.length;M.push(D);e:for(;0<z;){var H=z-1>>>1,Z=M[H];if(0<a(Z,D))M[H]=D,M[z]=Z,z=H;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var D=M[0],z=M.pop();if(z!==D){M[0]=z;e:for(var H=0,Z=M.length,un=Z>>>1;H<un;){var Ht=2*(H+1)-1,fa=M[Ht],Wt=Ht+1,Us=M[Wt];if(0>a(fa,z))Wt<Z&&0>a(Us,fa)?(M[H]=Us,M[Wt]=z,H=Wt):(M[H]=fa,M[Ht]=z,H=Ht);else if(Wt<Z&&0>a(Us,z))M[H]=Us,M[Wt]=z,H=Wt;else break e}}return D}function a(M,D){var z=M.sortIndex-D.sortIndex;return z!==0?z:M.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var i=[],d=[],u=1,m=null,x=3,b=!1,y=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(M){for(var D=n(d);D!==null;){if(D.callback===null)r(d);else if(D.startTime<=M)r(d),D.sortIndex=D.expirationTime,t(i,D);else break;D=n(d)}}function j(M){if(v=!1,h(M),!y)if(n(i)!==null)y=!0,oe(S);else{var D=n(d);D!==null&&he(j,D.startTime-M)}}function S(M,D){y=!1,v&&(v=!1,g(C),C=-1),b=!0;var z=x;try{for(h(D),m=n(i);m!==null&&(!(m.expirationTime>D)||M&&!L());){var H=m.callback;if(typeof H=="function"){m.callback=null,x=m.priorityLevel;var Z=H(m.expirationTime<=D);D=e.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(i)&&r(i),h(D)}else r(i);m=n(i)}if(m!==null)var un=!0;else{var Ht=n(d);Ht!==null&&he(j,Ht.startTime-D),un=!1}return un}finally{m=null,x=z,b=!1}}var w=!1,E=null,C=-1,P=5,k=-1;function L(){return!(e.unstable_now()-k<P)}function A(){if(E!==null){var M=e.unstable_now();k=M;var D=!0;try{D=E(!0,M)}finally{D?$():(w=!1,E=null)}}else w=!1}var $;if(typeof p=="function")$=function(){p(A)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,U=F.port2;F.port1.onmessage=A,$=function(){U.postMessage(null)}}else $=function(){N(A,0)};function oe(M){E=M,w||(w=!0,$())}function he(M,D){C=N(function(){M(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,oe(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(M){switch(x){case 1:case 2:case 3:var D=3;break;default:D=x}var z=x;x=D;try{return M()}finally{x=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,D){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var z=x;x=M;try{return D()}finally{x=z}},e.unstable_scheduleCallback=function(M,D,z){var H=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,M){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,M={id:u++,callback:D,priorityLevel:M,startTime:z,expirationTime:Z,sortIndex:-1},z>H?(M.sortIndex=z,t(d,M),n(i)===null&&M===n(d)&&(v?(g(C),C=-1):v=!0,he(j,z-H))):(M.sortIndex=Z,t(i,M),y||b||(y=!0,oe(S))),M},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(M){var D=x;return function(){var z=x;x=D;try{return M.apply(this,arguments)}finally{x=z}}}})(Kc);Yc.exports=Kc;var im=Yc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=f,ze=im;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zc=new Set,fs={};function ln(e,t){Tn(e,t),Tn(e+"Capture",t)}function Tn(e,t){for(fs[e]=t,e=0;e<t.length;e++)Zc.add(t[e])}var ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=Object.prototype.hasOwnProperty,dm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oi={},ii={};function um(e){return Ga.call(ii,e)?!0:Ga.call(oi,e)?!1:dm.test(e)?ii[e]=!0:(oi[e]=!0,!1)}function pm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mm(e,t,n,r){if(t===null||typeof t>"u"||pm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Se(e,t,n,r,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fe[e]=new Se(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fe[t]=new Se(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fe[e]=new Se(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fe[e]=new Se(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fe[e]=new Se(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fe[e]=new Se(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fe[e]=new Se(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fe[e]=new Se(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fe[e]=new Se(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jl=/[\-:]([a-z])/g;function eo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jl,eo);fe[t]=new Se(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jl,eo);fe[t]=new Se(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jl,eo);fe[t]=new Se(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fe[e]=new Se(e,1,!1,e.toLowerCase(),null,!1,!1)});fe.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fe[e]=new Se(e,1,!1,e.toLowerCase(),null,!0,!0)});function to(e,t,n,r){var a=fe.hasOwnProperty(t)?fe[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mm(t,n,a,r)&&(n=null),r||a===null?um(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ft=cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hs=Symbol.for("react.element"),mn=Symbol.for("react.portal"),xn=Symbol.for("react.fragment"),no=Symbol.for("react.strict_mode"),Qa=Symbol.for("react.profiler"),Xc=Symbol.for("react.provider"),Jc=Symbol.for("react.context"),so=Symbol.for("react.forward_ref"),qa=Symbol.for("react.suspense"),Ya=Symbol.for("react.suspense_list"),ro=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),ed=Symbol.for("react.offscreen"),ci=Symbol.iterator;function Qn(e){return e===null||typeof e!="object"?null:(e=ci&&e[ci]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,ga;function ns(e){if(ga===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ga=t&&t[1]||""}return`
`+ga+e}var ya=!1;function va(e,t){if(!e||ya)return"";ya=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,c=l.length-1;1<=o&&0<=c&&a[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==l[c]){var i=`
`+a[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=c);break}}}finally{ya=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ns(e):""}function xm(e){switch(e.tag){case 5:return ns(e.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 2:case 15:return e=va(e.type,!1),e;case 11:return e=va(e.type.render,!1),e;case 1:return e=va(e.type,!0),e;default:return""}}function Ka(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xn:return"Fragment";case mn:return"Portal";case Qa:return"Profiler";case no:return"StrictMode";case qa:return"Suspense";case Ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jc:return(e.displayName||"Context")+".Consumer";case Xc:return(e._context.displayName||"Context")+".Provider";case so:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ro:return t=e.displayName||null,t!==null?t:Ka(e.type)||"Memo";case wt:t=e._payload,e=e._init;try{return Ka(e(t))}catch{}}return null}function fm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ka(t);case 8:return t===no?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $t(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function td(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hm(e){var t=td(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ws(e){e._valueTracker||(e._valueTracker=hm(e))}function nd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=td(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function yr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Za(e,t){var n=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function di(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$t(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sd(e,t){t=t.checked,t!=null&&to(e,"checked",t,!1)}function Xa(e,t){sd(e,t);var n=$t(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ja(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ja(e,t.type,$t(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ui(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ja(e,t,n){(t!=="number"||yr(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ss=Array.isArray;function kn(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$t(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function el(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pi(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(ss(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$t(n)}}function rd(e,t){var n=$t(t.value),r=$t(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mi(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ad(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ad(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vs,ld=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gm=["Webkit","ms","Moz","O"];Object.keys(ls).forEach(function(e){gm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ls[t]=ls[e]})});function od(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ls.hasOwnProperty(e)&&ls[e]?(""+t).trim():t+"px"}function id(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=od(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var ym=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nl(e,t){if(t){if(ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function sl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rl=null;function ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var al=null,Cn=null,En=null;function xi(e){if(e=_s(e)){if(typeof al!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Xr(t),al(e.stateNode,e.type,t))}}function cd(e){Cn?En?En.push(e):En=[e]:Cn=e}function dd(){if(Cn){var e=Cn,t=En;if(En=Cn=null,xi(e),t)for(e=0;e<t.length;e++)xi(t[e])}}function ud(e,t){return e(t)}function pd(){}var ba=!1;function md(e,t,n){if(ba)return e(t,n);ba=!0;try{return ud(e,t,n)}finally{ba=!1,(Cn!==null||En!==null)&&(pd(),dd())}}function gs(e,t){var n=e.stateNode;if(n===null)return null;var r=Xr(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var ll=!1;if(ut)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){ll=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{ll=!1}function vm(e,t,n,r,a,l,o,c,i){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var os=!1,vr=null,br=!1,ol=null,bm={onError:function(e){os=!0,vr=e}};function jm(e,t,n,r,a,l,o,c,i){os=!1,vr=null,vm.apply(bm,arguments)}function wm(e,t,n,r,a,l,o,c,i){if(jm.apply(this,arguments),os){if(os){var d=vr;os=!1,vr=null}else throw Error(I(198));br||(br=!0,ol=d)}}function on(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fi(e){if(on(e)!==e)throw Error(I(188))}function Nm(e){var t=e.alternate;if(!t){if(t=on(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return fi(a),e;if(l===r)return fi(a),t;l=l.sibling}throw Error(I(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=l;break}if(c===r){o=!0,r=a,n=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===n){o=!0,n=l,r=a;break}if(c===r){o=!0,r=l,n=a;break}c=c.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function fd(e){return e=Nm(e),e!==null?hd(e):null}function hd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hd(e);if(t!==null)return t;e=e.sibling}return null}var gd=ze.unstable_scheduleCallback,hi=ze.unstable_cancelCallback,Sm=ze.unstable_shouldYield,km=ze.unstable_requestPaint,re=ze.unstable_now,Cm=ze.unstable_getCurrentPriorityLevel,lo=ze.unstable_ImmediatePriority,yd=ze.unstable_UserBlockingPriority,jr=ze.unstable_NormalPriority,Em=ze.unstable_LowPriority,vd=ze.unstable_IdlePriority,qr=null,st=null;function Mm(e){if(st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(qr,e,void 0,(e.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:Dm,Pm=Math.log,Im=Math.LN2;function Dm(e){return e>>>=0,e===0?32:31-(Pm(e)/Im|0)|0}var Gs=64,Qs=4194304;function rs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wr(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~a;c!==0?r=rs(c):(l&=o,l!==0&&(r=rs(l)))}else o=n&~a,o!==0?r=rs(o):l!==0&&(r=rs(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ye(t),a=1<<n,r|=e[n],t&=~a;return r}function Tm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Am(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Ye(l),c=1<<o,i=a[o];i===-1?(!(c&n)||c&r)&&(a[o]=Tm(c,t)):i<=t&&(e.expiredLanes|=c),l&=~c}}function il(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bd(){var e=Gs;return Gs<<=1,!(Gs&4194240)&&(Gs=64),e}function ja(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ye(t),e[t]=n}function Lm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ye(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function oo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ye(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var W=0;function jd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wd,io,Nd,Sd,kd,cl=!1,qs=[],Pt=null,It=null,Dt=null,ys=new Map,vs=new Map,St=[],zm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gi(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(t.pointerId)}}function Yn(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=_s(t),t!==null&&io(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Fm(e,t,n,r,a){switch(t){case"focusin":return Pt=Yn(Pt,e,t,n,r,a),!0;case"dragenter":return It=Yn(It,e,t,n,r,a),!0;case"mouseover":return Dt=Yn(Dt,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return ys.set(l,Yn(ys.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,vs.set(l,Yn(vs.get(l)||null,e,t,n,r,a)),!0}return!1}function Cd(e){var t=Yt(e.target);if(t!==null){var n=on(t);if(n!==null){if(t=n.tag,t===13){if(t=xd(n),t!==null){e.blockedOn=t,kd(e.priority,function(){Nd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ir(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);rl=r,n.target.dispatchEvent(r),rl=null}else return t=_s(n),t!==null&&io(t),e.blockedOn=n,!1;t.shift()}return!0}function yi(e,t,n){ir(e)&&n.delete(t)}function Rm(){cl=!1,Pt!==null&&ir(Pt)&&(Pt=null),It!==null&&ir(It)&&(It=null),Dt!==null&&ir(Dt)&&(Dt=null),ys.forEach(yi),vs.forEach(yi)}function Kn(e,t){e.blockedOn===t&&(e.blockedOn=null,cl||(cl=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,Rm)))}function bs(e){function t(a){return Kn(a,e)}if(0<qs.length){Kn(qs[0],e);for(var n=1;n<qs.length;n++){var r=qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pt!==null&&Kn(Pt,e),It!==null&&Kn(It,e),Dt!==null&&Kn(Dt,e),ys.forEach(t),vs.forEach(t),n=0;n<St.length;n++)r=St[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&(n=St[0],n.blockedOn===null);)Cd(n),n.blockedOn===null&&St.shift()}var Mn=ft.ReactCurrentBatchConfig,Nr=!0;function $m(e,t,n,r){var a=W,l=Mn.transition;Mn.transition=null;try{W=1,co(e,t,n,r)}finally{W=a,Mn.transition=l}}function _m(e,t,n,r){var a=W,l=Mn.transition;Mn.transition=null;try{W=4,co(e,t,n,r)}finally{W=a,Mn.transition=l}}function co(e,t,n,r){if(Nr){var a=dl(e,t,n,r);if(a===null)Da(e,t,r,Sr,n),gi(e,r);else if(Fm(a,e,t,n,r))r.stopPropagation();else if(gi(e,r),t&4&&-1<zm.indexOf(e)){for(;a!==null;){var l=_s(a);if(l!==null&&wd(l),l=dl(e,t,n,r),l===null&&Da(e,t,r,Sr,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else Da(e,t,r,null,n)}}var Sr=null;function dl(e,t,n,r){if(Sr=null,e=ao(r),e=Yt(e),e!==null)if(t=on(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sr=e,null}function Ed(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cm()){case lo:return 1;case yd:return 4;case jr:case Em:return 16;case vd:return 536870912;default:return 16}default:return 16}}var Ct=null,uo=null,cr=null;function Md(){if(cr)return cr;var e,t=uo,n=t.length,r,a="value"in Ct?Ct.value:Ct.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[l-r];r++);return cr=a.slice(e,1<r?1-r:void 0)}function dr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ys(){return!0}function vi(){return!1}function Re(e){function t(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ys:vi,this.isPropagationStopped=vi,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),t}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=Re(Wn),$s=ne({},Wn,{view:0,detail:0}),Om=Re($s),wa,Na,Zn,Yr=ne({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zn&&(Zn&&e.type==="mousemove"?(wa=e.screenX-Zn.screenX,Na=e.screenY-Zn.screenY):Na=wa=0,Zn=e),wa)},movementY:function(e){return"movementY"in e?e.movementY:Na}}),bi=Re(Yr),Um=ne({},Yr,{dataTransfer:0}),Bm=Re(Um),Hm=ne({},$s,{relatedTarget:0}),Sa=Re(Hm),Wm=ne({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vm=Re(Wm),Gm=ne({},Wn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qm=Re(Gm),qm=ne({},Wn,{data:0}),ji=Re(qm),Ym={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Km={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zm[e])?!!t[e]:!1}function mo(){return Xm}var Jm=ne({},$s,{key:function(e){if(e.key){var t=Ym[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Km[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(e){return e.type==="keypress"?dr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ex=Re(Jm),tx=ne({},Yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wi=Re(tx),nx=ne({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),sx=Re(nx),rx=ne({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ax=Re(rx),lx=ne({},Yr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ox=Re(lx),ix=[9,13,27,32],xo=ut&&"CompositionEvent"in window,is=null;ut&&"documentMode"in document&&(is=document.documentMode);var cx=ut&&"TextEvent"in window&&!is,Pd=ut&&(!xo||is&&8<is&&11>=is),Ni=" ",Si=!1;function Id(e,t){switch(e){case"keyup":return ix.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fn=!1;function dx(e,t){switch(e){case"compositionend":return Dd(t);case"keypress":return t.which!==32?null:(Si=!0,Ni);case"textInput":return e=t.data,e===Ni&&Si?null:e;default:return null}}function ux(e,t){if(fn)return e==="compositionend"||!xo&&Id(e,t)?(e=Md(),cr=uo=Ct=null,fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pd&&t.locale!=="ko"?null:t.data;default:return null}}var px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ki(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!px[e.type]:t==="textarea"}function Td(e,t,n,r){cd(r),t=kr(t,"onChange"),0<t.length&&(n=new po("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var cs=null,js=null;function mx(e){Hd(e,0)}function Kr(e){var t=yn(e);if(nd(t))return e}function xx(e,t){if(e==="change")return t}var Ad=!1;if(ut){var ka;if(ut){var Ca="oninput"in document;if(!Ca){var Ci=document.createElement("div");Ci.setAttribute("oninput","return;"),Ca=typeof Ci.oninput=="function"}ka=Ca}else ka=!1;Ad=ka&&(!document.documentMode||9<document.documentMode)}function Ei(){cs&&(cs.detachEvent("onpropertychange",Ld),js=cs=null)}function Ld(e){if(e.propertyName==="value"&&Kr(js)){var t=[];Td(t,js,e,ao(e)),md(mx,t)}}function fx(e,t,n){e==="focusin"?(Ei(),cs=t,js=n,cs.attachEvent("onpropertychange",Ld)):e==="focusout"&&Ei()}function hx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kr(js)}function gx(e,t){if(e==="click")return Kr(t)}function yx(e,t){if(e==="input"||e==="change")return Kr(t)}function vx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ze=typeof Object.is=="function"?Object.is:vx;function ws(e,t){if(Ze(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Ga.call(t,a)||!Ze(e[a],t[a]))return!1}return!0}function Mi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pi(e,t){var n=Mi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mi(n)}}function zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fd(){for(var e=window,t=yr();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yr(e.document)}return t}function fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bx(e){var t=Fd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zd(n.ownerDocument.documentElement,n)){if(r!==null&&fo(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=Pi(n,l);var o=Pi(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jx=ut&&"documentMode"in document&&11>=document.documentMode,hn=null,ul=null,ds=null,pl=!1;function Ii(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pl||hn==null||hn!==yr(r)||(r=hn,"selectionStart"in r&&fo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ds&&ws(ds,r)||(ds=r,r=kr(ul,"onSelect"),0<r.length&&(t=new po("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hn)))}function Ks(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gn={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},Ea={},Rd={};ut&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function Zr(e){if(Ea[e])return Ea[e];if(!gn[e])return e;var t=gn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rd)return Ea[e]=t[n];return e}var $d=Zr("animationend"),_d=Zr("animationiteration"),Od=Zr("animationstart"),Ud=Zr("transitionend"),Bd=new Map,Di="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ot(e,t){Bd.set(e,t),ln(t,[e])}for(var Ma=0;Ma<Di.length;Ma++){var Pa=Di[Ma],wx=Pa.toLowerCase(),Nx=Pa[0].toUpperCase()+Pa.slice(1);Ot(wx,"on"+Nx)}Ot($d,"onAnimationEnd");Ot(_d,"onAnimationIteration");Ot(Od,"onAnimationStart");Ot("dblclick","onDoubleClick");Ot("focusin","onFocus");Ot("focusout","onBlur");Ot(Ud,"onTransitionEnd");Tn("onMouseEnter",["mouseout","mouseover"]);Tn("onMouseLeave",["mouseout","mouseover"]);Tn("onPointerEnter",["pointerout","pointerover"]);Tn("onPointerLeave",["pointerout","pointerover"]);ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ln("onBeforeInput",["compositionend","keypress","textInput","paste"]);ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function Ti(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,wm(r,t,void 0,e),e.currentTarget=null}function Hd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],i=c.instance,d=c.currentTarget;if(c=c.listener,i!==l&&a.isPropagationStopped())break e;Ti(a,c,d),l=i}else for(o=0;o<r.length;o++){if(c=r[o],i=c.instance,d=c.currentTarget,c=c.listener,i!==l&&a.isPropagationStopped())break e;Ti(a,c,d),l=i}}}if(br)throw e=ol,br=!1,ol=null,e}function Q(e,t){var n=t[gl];n===void 0&&(n=t[gl]=new Set);var r=e+"__bubble";n.has(r)||(Wd(t,e,2,!1),n.add(r))}function Ia(e,t,n){var r=0;t&&(r|=4),Wd(n,e,r,t)}var Zs="_reactListening"+Math.random().toString(36).slice(2);function Ns(e){if(!e[Zs]){e[Zs]=!0,Zc.forEach(function(n){n!=="selectionchange"&&(Sx.has(n)||Ia(n,!1,e),Ia(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zs]||(t[Zs]=!0,Ia("selectionchange",!1,t))}}function Wd(e,t,n,r){switch(Ed(t)){case 1:var a=$m;break;case 4:a=_m;break;default:a=co}n=a.bind(null,t,n,e),a=void 0,!ll||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Da(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===a||i.nodeType===8&&i.parentNode===a))return;o=o.return}for(;c!==null;){if(o=Yt(c),o===null)return;if(i=o.tag,i===5||i===6){r=l=o;continue e}c=c.parentNode}}r=r.return}md(function(){var d=l,u=ao(n),m=[];e:{var x=Bd.get(e);if(x!==void 0){var b=po,y=e;switch(e){case"keypress":if(dr(n)===0)break e;case"keydown":case"keyup":b=ex;break;case"focusin":y="focus",b=Sa;break;case"focusout":y="blur",b=Sa;break;case"beforeblur":case"afterblur":b=Sa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=sx;break;case $d:case _d:case Od:b=Vm;break;case Ud:b=ax;break;case"scroll":b=Om;break;case"wheel":b=ox;break;case"copy":case"cut":case"paste":b=Qm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=wi}var v=(t&4)!==0,N=!v&&e==="scroll",g=v?x!==null?x+"Capture":null:x;v=[];for(var p=d,h;p!==null;){h=p;var j=h.stateNode;if(h.tag===5&&j!==null&&(h=j,g!==null&&(j=gs(p,g),j!=null&&v.push(Ss(p,j,h)))),N)break;p=p.return}0<v.length&&(x=new b(x,y,null,n,u),m.push({event:x,listeners:v}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",x&&n!==rl&&(y=n.relatedTarget||n.fromElement)&&(Yt(y)||y[pt]))break e;if((b||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,b?(y=n.relatedTarget||n.toElement,b=d,y=y?Yt(y):null,y!==null&&(N=on(y),y!==N||y.tag!==5&&y.tag!==6)&&(y=null)):(b=null,y=d),b!==y)){if(v=bi,j="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=wi,j="onPointerLeave",g="onPointerEnter",p="pointer"),N=b==null?x:yn(b),h=y==null?x:yn(y),x=new v(j,p+"leave",b,n,u),x.target=N,x.relatedTarget=h,j=null,Yt(u)===d&&(v=new v(g,p+"enter",y,n,u),v.target=h,v.relatedTarget=N,j=v),N=j,b&&y)t:{for(v=b,g=y,p=0,h=v;h;h=pn(h))p++;for(h=0,j=g;j;j=pn(j))h++;for(;0<p-h;)v=pn(v),p--;for(;0<h-p;)g=pn(g),h--;for(;p--;){if(v===g||g!==null&&v===g.alternate)break t;v=pn(v),g=pn(g)}v=null}else v=null;b!==null&&Ai(m,x,b,v,!1),y!==null&&N!==null&&Ai(m,N,y,v,!0)}}e:{if(x=d?yn(d):window,b=x.nodeName&&x.nodeName.toLowerCase(),b==="select"||b==="input"&&x.type==="file")var S=xx;else if(ki(x))if(Ad)S=yx;else{S=hx;var w=fx}else(b=x.nodeName)&&b.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(S=gx);if(S&&(S=S(e,d))){Td(m,S,n,u);break e}w&&w(e,x,d),e==="focusout"&&(w=x._wrapperState)&&w.controlled&&x.type==="number"&&Ja(x,"number",x.value)}switch(w=d?yn(d):window,e){case"focusin":(ki(w)||w.contentEditable==="true")&&(hn=w,ul=d,ds=null);break;case"focusout":ds=ul=hn=null;break;case"mousedown":pl=!0;break;case"contextmenu":case"mouseup":case"dragend":pl=!1,Ii(m,n,u);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":Ii(m,n,u)}var E;if(xo)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else fn?Id(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Pd&&n.locale!=="ko"&&(fn||C!=="onCompositionStart"?C==="onCompositionEnd"&&fn&&(E=Md()):(Ct=u,uo="value"in Ct?Ct.value:Ct.textContent,fn=!0)),w=kr(d,C),0<w.length&&(C=new ji(C,e,null,n,u),m.push({event:C,listeners:w}),E?C.data=E:(E=Dd(n),E!==null&&(C.data=E)))),(E=cx?dx(e,n):ux(e,n))&&(d=kr(d,"onBeforeInput"),0<d.length&&(u=new ji("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=E))}Hd(m,t)})}function Ss(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kr(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=gs(e,n),l!=null&&r.unshift(Ss(e,l,a)),l=gs(e,t),l!=null&&r.push(Ss(e,l,a))),e=e.return}return r}function pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ai(e,t,n,r,a){for(var l=t._reactName,o=[];n!==null&&n!==r;){var c=n,i=c.alternate,d=c.stateNode;if(i!==null&&i===r)break;c.tag===5&&d!==null&&(c=d,a?(i=gs(n,l),i!=null&&o.unshift(Ss(n,i,c))):a||(i=gs(n,l),i!=null&&o.push(Ss(n,i,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var kx=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function Li(e){return(typeof e=="string"?e:""+e).replace(kx,`
`).replace(Cx,"")}function Xs(e,t,n){if(t=Li(t),Li(e)!==t&&n)throw Error(I(425))}function Cr(){}var ml=null,xl=null;function fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,Ex=typeof clearTimeout=="function"?clearTimeout:void 0,zi=typeof Promise=="function"?Promise:void 0,Mx=typeof queueMicrotask=="function"?queueMicrotask:typeof zi<"u"?function(e){return zi.resolve(null).then(e).catch(Px)}:hl;function Px(e){setTimeout(function(){throw e})}function Ta(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),bs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);bs(t)}function Tt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),nt="__reactFiber$"+Vn,ks="__reactProps$"+Vn,pt="__reactContainer$"+Vn,gl="__reactEvents$"+Vn,Ix="__reactListeners$"+Vn,Dx="__reactHandles$"+Vn;function Yt(e){var t=e[nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pt]||n[nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fi(e);e!==null;){if(n=e[nt])return n;e=Fi(e)}return t}e=n,n=e.parentNode}return null}function _s(e){return e=e[nt]||e[pt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Xr(e){return e[ks]||null}var yl=[],vn=-1;function Ut(e){return{current:e}}function Y(e){0>vn||(e.current=yl[vn],yl[vn]=null,vn--)}function G(e,t){vn++,yl[vn]=e.current,e.current=t}var _t={},be=Ut(_t),Pe=Ut(!1),en=_t;function An(e,t){var n=e.type.contextTypes;if(!n)return _t;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ie(e){return e=e.childContextTypes,e!=null}function Er(){Y(Pe),Y(be)}function Ri(e,t,n){if(be.current!==_t)throw Error(I(168));G(be,t),G(Pe,n)}function Vd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(I(108,fm(e)||"Unknown",a));return ne({},n,r)}function Mr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_t,en=be.current,G(be,e),G(Pe,Pe.current),!0}function $i(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=Vd(e,t,en),r.__reactInternalMemoizedMergedChildContext=e,Y(Pe),Y(be),G(be,e)):Y(Pe),G(Pe,n)}var ot=null,Jr=!1,Aa=!1;function Gd(e){ot===null?ot=[e]:ot.push(e)}function Tx(e){Jr=!0,Gd(e)}function Bt(){if(!Aa&&ot!==null){Aa=!0;var e=0,t=W;try{var n=ot;for(W=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ot=null,Jr=!1}catch(a){throw ot!==null&&(ot=ot.slice(e+1)),gd(lo,Bt),a}finally{W=t,Aa=!1}}return null}var bn=[],jn=0,Pr=null,Ir=0,$e=[],_e=0,tn=null,it=1,ct="";function Vt(e,t){bn[jn++]=Ir,bn[jn++]=Pr,Pr=e,Ir=t}function Qd(e,t,n){$e[_e++]=it,$e[_e++]=ct,$e[_e++]=tn,tn=e;var r=it;e=ct;var a=32-Ye(r)-1;r&=~(1<<a),n+=1;var l=32-Ye(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,it=1<<32-Ye(t)+a|n<<a|r,ct=l+e}else it=1<<l|n<<a|r,ct=e}function ho(e){e.return!==null&&(Vt(e,1),Qd(e,1,0))}function go(e){for(;e===Pr;)Pr=bn[--jn],bn[jn]=null,Ir=bn[--jn],bn[jn]=null;for(;e===tn;)tn=$e[--_e],$e[_e]=null,ct=$e[--_e],$e[_e]=null,it=$e[--_e],$e[_e]=null}var Le=null,Ae=null,X=!1,qe=null;function qd(e,t){var n=Oe(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _i(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Le=e,Ae=Tt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Le=e,Ae=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=tn!==null?{id:it,overflow:ct}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Oe(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Le=e,Ae=null,!0):!1;default:return!1}}function vl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(X){var t=Ae;if(t){var n=t;if(!_i(e,t)){if(vl(e))throw Error(I(418));t=Tt(n.nextSibling);var r=Le;t&&_i(e,t)?qd(r,n):(e.flags=e.flags&-4097|2,X=!1,Le=e)}}else{if(vl(e))throw Error(I(418));e.flags=e.flags&-4097|2,X=!1,Le=e}}}function Oi(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Le=e}function Js(e){if(e!==Le)return!1;if(!X)return Oi(e),X=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fl(e.type,e.memoizedProps)),t&&(t=Ae)){if(vl(e))throw Yd(),Error(I(418));for(;t;)qd(e,t),t=Tt(t.nextSibling)}if(Oi(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ae=Tt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ae=null}}else Ae=Le?Tt(e.stateNode.nextSibling):null;return!0}function Yd(){for(var e=Ae;e;)e=Tt(e.nextSibling)}function Ln(){Ae=Le=null,X=!1}function yo(e){qe===null?qe=[e]:qe.push(e)}var Ax=ft.ReactCurrentBatchConfig;function Xn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=a.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function er(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ui(e){var t=e._init;return t(e._payload)}function Kd(e){function t(g,p){if(e){var h=g.deletions;h===null?(g.deletions=[p],g.flags|=16):h.push(p)}}function n(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=Ft(g,p),g.index=0,g.sibling=null,g}function l(g,p,h){return g.index=h,e?(h=g.alternate,h!==null?(h=h.index,h<p?(g.flags|=2,p):h):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,p,h,j){return p===null||p.tag!==6?(p=Oa(h,g.mode,j),p.return=g,p):(p=a(p,h),p.return=g,p)}function i(g,p,h,j){var S=h.type;return S===xn?u(g,p,h.props.children,j,h.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===wt&&Ui(S)===p.type)?(j=a(p,h.props),j.ref=Xn(g,p,h),j.return=g,j):(j=gr(h.type,h.key,h.props,null,g.mode,j),j.ref=Xn(g,p,h),j.return=g,j)}function d(g,p,h,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==h.containerInfo||p.stateNode.implementation!==h.implementation?(p=Ua(h,g.mode,j),p.return=g,p):(p=a(p,h.children||[]),p.return=g,p)}function u(g,p,h,j,S){return p===null||p.tag!==7?(p=Jt(h,g.mode,j,S),p.return=g,p):(p=a(p,h),p.return=g,p)}function m(g,p,h){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Oa(""+p,g.mode,h),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Hs:return h=gr(p.type,p.key,p.props,null,g.mode,h),h.ref=Xn(g,null,p),h.return=g,h;case mn:return p=Ua(p,g.mode,h),p.return=g,p;case wt:var j=p._init;return m(g,j(p._payload),h)}if(ss(p)||Qn(p))return p=Jt(p,g.mode,h,null),p.return=g,p;er(g,p)}return null}function x(g,p,h,j){var S=p!==null?p.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return S!==null?null:c(g,p,""+h,j);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Hs:return h.key===S?i(g,p,h,j):null;case mn:return h.key===S?d(g,p,h,j):null;case wt:return S=h._init,x(g,p,S(h._payload),j)}if(ss(h)||Qn(h))return S!==null?null:u(g,p,h,j,null);er(g,h)}return null}function b(g,p,h,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(h)||null,c(p,g,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Hs:return g=g.get(j.key===null?h:j.key)||null,i(p,g,j,S);case mn:return g=g.get(j.key===null?h:j.key)||null,d(p,g,j,S);case wt:var w=j._init;return b(g,p,h,w(j._payload),S)}if(ss(j)||Qn(j))return g=g.get(h)||null,u(p,g,j,S,null);er(p,j)}return null}function y(g,p,h,j){for(var S=null,w=null,E=p,C=p=0,P=null;E!==null&&C<h.length;C++){E.index>C?(P=E,E=null):P=E.sibling;var k=x(g,E,h[C],j);if(k===null){E===null&&(E=P);break}e&&E&&k.alternate===null&&t(g,E),p=l(k,p,C),w===null?S=k:w.sibling=k,w=k,E=P}if(C===h.length)return n(g,E),X&&Vt(g,C),S;if(E===null){for(;C<h.length;C++)E=m(g,h[C],j),E!==null&&(p=l(E,p,C),w===null?S=E:w.sibling=E,w=E);return X&&Vt(g,C),S}for(E=r(g,E);C<h.length;C++)P=b(E,g,C,h[C],j),P!==null&&(e&&P.alternate!==null&&E.delete(P.key===null?C:P.key),p=l(P,p,C),w===null?S=P:w.sibling=P,w=P);return e&&E.forEach(function(L){return t(g,L)}),X&&Vt(g,C),S}function v(g,p,h,j){var S=Qn(h);if(typeof S!="function")throw Error(I(150));if(h=S.call(h),h==null)throw Error(I(151));for(var w=S=null,E=p,C=p=0,P=null,k=h.next();E!==null&&!k.done;C++,k=h.next()){E.index>C?(P=E,E=null):P=E.sibling;var L=x(g,E,k.value,j);if(L===null){E===null&&(E=P);break}e&&E&&L.alternate===null&&t(g,E),p=l(L,p,C),w===null?S=L:w.sibling=L,w=L,E=P}if(k.done)return n(g,E),X&&Vt(g,C),S;if(E===null){for(;!k.done;C++,k=h.next())k=m(g,k.value,j),k!==null&&(p=l(k,p,C),w===null?S=k:w.sibling=k,w=k);return X&&Vt(g,C),S}for(E=r(g,E);!k.done;C++,k=h.next())k=b(E,g,C,k.value,j),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?C:k.key),p=l(k,p,C),w===null?S=k:w.sibling=k,w=k);return e&&E.forEach(function(A){return t(g,A)}),X&&Vt(g,C),S}function N(g,p,h,j){if(typeof h=="object"&&h!==null&&h.type===xn&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Hs:e:{for(var S=h.key,w=p;w!==null;){if(w.key===S){if(S=h.type,S===xn){if(w.tag===7){n(g,w.sibling),p=a(w,h.props.children),p.return=g,g=p;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===wt&&Ui(S)===w.type){n(g,w.sibling),p=a(w,h.props),p.ref=Xn(g,w,h),p.return=g,g=p;break e}n(g,w);break}else t(g,w);w=w.sibling}h.type===xn?(p=Jt(h.props.children,g.mode,j,h.key),p.return=g,g=p):(j=gr(h.type,h.key,h.props,null,g.mode,j),j.ref=Xn(g,p,h),j.return=g,g=j)}return o(g);case mn:e:{for(w=h.key;p!==null;){if(p.key===w)if(p.tag===4&&p.stateNode.containerInfo===h.containerInfo&&p.stateNode.implementation===h.implementation){n(g,p.sibling),p=a(p,h.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else t(g,p);p=p.sibling}p=Ua(h,g.mode,j),p.return=g,g=p}return o(g);case wt:return w=h._init,N(g,p,w(h._payload),j)}if(ss(h))return y(g,p,h,j);if(Qn(h))return v(g,p,h,j);er(g,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,p!==null&&p.tag===6?(n(g,p.sibling),p=a(p,h),p.return=g,g=p):(n(g,p),p=Oa(h,g.mode,j),p.return=g,g=p),o(g)):n(g,p)}return N}var zn=Kd(!0),Zd=Kd(!1),Dr=Ut(null),Tr=null,wn=null,vo=null;function bo(){vo=wn=Tr=null}function jo(e){var t=Dr.current;Y(Dr),e._currentValue=t}function jl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pn(e,t){Tr=e,vo=wn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Me=!0),e.firstContext=null)}function Be(e){var t=e._currentValue;if(vo!==e)if(e={context:e,memoizedValue:t,next:null},wn===null){if(Tr===null)throw Error(I(308));wn=e,Tr.dependencies={lanes:0,firstContext:e}}else wn=wn.next=e;return t}var Kt=null;function wo(e){Kt===null?Kt=[e]:Kt.push(e)}function Xd(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,wo(t)):(n.next=a.next,a.next=n),t.interleaved=n,mt(e,r)}function mt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Nt=!1;function No(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function At(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,mt(e,n)}return a=r.interleaved,a===null?(t.next=t,wo(r)):(t.next=a.next,a.next=t),r.interleaved=t,mt(e,n)}function ur(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oo(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ar(e,t,n,r){var a=e.updateQueue;Nt=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var i=c,d=i.next;i.next=null,o===null?l=d:o.next=d,o=i;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==o&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=i))}if(l!==null){var m=a.baseState;o=0,u=d=i=null,c=l;do{var x=c.lane,b=c.eventTime;if((r&x)===x){u!==null&&(u=u.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,v=c;switch(x=t,b=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){m=y.call(b,m,x);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,x=typeof y=="function"?y.call(b,m,x):y,x==null)break e;m=ne({},m,x);break e;case 2:Nt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[c]:x.push(c))}else b={eventTime:b,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=b,i=m):u=u.next=b,o|=x;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;x=c,c=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(u===null&&(i=m),a.baseState=i,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);sn|=o,e.lanes=o,e.memoizedState=m}}function Hi(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(I(191,a));a.call(r)}}}var Os={},rt=Ut(Os),Cs=Ut(Os),Es=Ut(Os);function Zt(e){if(e===Os)throw Error(I(174));return e}function So(e,t){switch(G(Es,t),G(Cs,e),G(rt,Os),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=tl(t,e)}Y(rt),G(rt,t)}function Fn(){Y(rt),Y(Cs),Y(Es)}function eu(e){Zt(Es.current);var t=Zt(rt.current),n=tl(t,e.type);t!==n&&(G(Cs,e),G(rt,n))}function ko(e){Cs.current===e&&(Y(rt),Y(Cs))}var J=Ut(0);function Lr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var La=[];function Co(){for(var e=0;e<La.length;e++)La[e]._workInProgressVersionPrimary=null;La.length=0}var pr=ft.ReactCurrentDispatcher,za=ft.ReactCurrentBatchConfig,nn=0,ee=null,ie=null,ue=null,zr=!1,us=!1,Ms=0,Lx=0;function ge(){throw Error(I(321))}function Eo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ze(e[n],t[n]))return!1;return!0}function Mo(e,t,n,r,a,l){if(nn=l,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pr.current=e===null||e.memoizedState===null?$x:_x,e=n(r,a),us){l=0;do{if(us=!1,Ms=0,25<=l)throw Error(I(301));l+=1,ue=ie=null,t.updateQueue=null,pr.current=Ox,e=n(r,a)}while(us)}if(pr.current=Fr,t=ie!==null&&ie.next!==null,nn=0,ue=ie=ee=null,zr=!1,t)throw Error(I(300));return e}function Po(){var e=Ms!==0;return Ms=0,e}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?ee.memoizedState=ue=e:ue=ue.next=e,ue}function He(){if(ie===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=ie.next;var t=ue===null?ee.memoizedState:ue.next;if(t!==null)ue=t,ie=e;else{if(e===null)throw Error(I(310));ie=e,e={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},ue===null?ee.memoizedState=ue=e:ue=ue.next=e}return ue}function Ps(e,t){return typeof t=="function"?t(e):t}function Fa(e){var t=He(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=ie,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var c=o=null,i=null,d=l;do{var u=d.lane;if((nn&u)===u)i!==null&&(i=i.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};i===null?(c=i=m,o=r):i=i.next=m,ee.lanes|=u,sn|=u}d=d.next}while(d!==null&&d!==l);i===null?o=r:i.next=c,Ze(r,t.memoizedState)||(Me=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,ee.lanes|=l,sn|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ra(e){var t=He(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);Ze(l,t.memoizedState)||(Me=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function tu(){}function nu(e,t){var n=ee,r=He(),a=t(),l=!Ze(r.memoizedState,a);if(l&&(r.memoizedState=a,Me=!0),r=r.queue,Io(au.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ue!==null&&ue.memoizedState.tag&1){if(n.flags|=2048,Is(9,ru.bind(null,n,r,a,t),void 0,null),pe===null)throw Error(I(349));nn&30||su(n,t,a)}return a}function su(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ru(e,t,n,r){t.value=n,t.getSnapshot=r,lu(t)&&ou(e)}function au(e,t,n){return n(function(){lu(t)&&ou(e)})}function lu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ze(e,n)}catch{return!0}}function ou(e){var t=mt(e,1);t!==null&&Ke(t,e,1,-1)}function Wi(e){var t=tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=Rx.bind(null,ee,e),[t.memoizedState,e]}function Is(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function iu(){return He().memoizedState}function mr(e,t,n,r){var a=tt();ee.flags|=e,a.memoizedState=Is(1|t,n,void 0,r===void 0?null:r)}function ea(e,t,n,r){var a=He();r=r===void 0?null:r;var l=void 0;if(ie!==null){var o=ie.memoizedState;if(l=o.destroy,r!==null&&Eo(r,o.deps)){a.memoizedState=Is(t,n,l,r);return}}ee.flags|=e,a.memoizedState=Is(1|t,n,l,r)}function Vi(e,t){return mr(8390656,8,e,t)}function Io(e,t){return ea(2048,8,e,t)}function cu(e,t){return ea(4,2,e,t)}function du(e,t){return ea(4,4,e,t)}function uu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pu(e,t,n){return n=n!=null?n.concat([e]):null,ea(4,4,uu.bind(null,t,e),n)}function Do(){}function mu(e,t){var n=He();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xu(e,t){var n=He();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fu(e,t,n){return nn&21?(Ze(n,t)||(n=bd(),ee.lanes|=n,sn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Me=!0),e.memoizedState=n)}function zx(e,t){var n=W;W=n!==0&&4>n?n:4,e(!0);var r=za.transition;za.transition={};try{e(!1),t()}finally{W=n,za.transition=r}}function hu(){return He().memoizedState}function Fx(e,t,n){var r=zt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gu(e))yu(t,n);else if(n=Xd(e,t,n,r),n!==null){var a=we();Ke(n,e,r,a),vu(n,t,r)}}function Rx(e,t,n){var r=zt(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gu(e))yu(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,n);if(a.hasEagerState=!0,a.eagerState=c,Ze(c,o)){var i=t.interleaved;i===null?(a.next=a,wo(t)):(a.next=i.next,i.next=a),t.interleaved=a;return}}catch{}finally{}n=Xd(e,t,a,r),n!==null&&(a=we(),Ke(n,e,r,a),vu(n,t,r))}}function gu(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function yu(e,t){us=zr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vu(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oo(e,n)}}var Fr={readContext:Be,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useInsertionEffect:ge,useLayoutEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useMutableSource:ge,useSyncExternalStore:ge,useId:ge,unstable_isNewReconciler:!1},$x={readContext:Be,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:Be,useEffect:Vi,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,mr(4194308,4,uu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mr(4194308,4,e,t)},useInsertionEffect:function(e,t){return mr(4,2,e,t)},useMemo:function(e,t){var n=tt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=tt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Fx.bind(null,ee,e),[r.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:Wi,useDebugValue:Do,useDeferredValue:function(e){return tt().memoizedState=e},useTransition:function(){var e=Wi(!1),t=e[0];return e=zx.bind(null,e[1]),tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ee,a=tt();if(X){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),pe===null)throw Error(I(349));nn&30||su(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Vi(au.bind(null,r,l,e),[e]),r.flags|=2048,Is(9,ru.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=tt(),t=pe.identifierPrefix;if(X){var n=ct,r=it;n=(r&~(1<<32-Ye(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ms++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Lx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_x={readContext:Be,useCallback:mu,useContext:Be,useEffect:Io,useImperativeHandle:pu,useInsertionEffect:cu,useLayoutEffect:du,useMemo:xu,useReducer:Fa,useRef:iu,useState:function(){return Fa(Ps)},useDebugValue:Do,useDeferredValue:function(e){var t=He();return fu(t,ie.memoizedState,e)},useTransition:function(){var e=Fa(Ps)[0],t=He().memoizedState;return[e,t]},useMutableSource:tu,useSyncExternalStore:nu,useId:hu,unstable_isNewReconciler:!1},Ox={readContext:Be,useCallback:mu,useContext:Be,useEffect:Io,useImperativeHandle:pu,useInsertionEffect:cu,useLayoutEffect:du,useMemo:xu,useReducer:Ra,useRef:iu,useState:function(){return Ra(Ps)},useDebugValue:Do,useDeferredValue:function(e){var t=He();return ie===null?t.memoizedState=e:fu(t,ie.memoizedState,e)},useTransition:function(){var e=Ra(Ps)[0],t=He().memoizedState;return[e,t]},useMutableSource:tu,useSyncExternalStore:nu,useId:hu,unstable_isNewReconciler:!1};function Ge(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ta={isMounted:function(e){return(e=e._reactInternals)?on(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=we(),a=zt(e),l=dt(r,a);l.payload=t,n!=null&&(l.callback=n),t=At(e,l,a),t!==null&&(Ke(t,e,a,r),ur(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=we(),a=zt(e),l=dt(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=At(e,l,a),t!==null&&(Ke(t,e,a,r),ur(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=we(),r=zt(e),a=dt(n,r);a.tag=2,t!=null&&(a.callback=t),t=At(e,a,r),t!==null&&(Ke(t,e,r,n),ur(t,e,r))}};function Gi(e,t,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!ws(n,r)||!ws(a,l):!0}function bu(e,t,n){var r=!1,a=_t,l=t.contextType;return typeof l=="object"&&l!==null?l=Be(l):(a=Ie(t)?en:be.current,r=t.contextTypes,l=(r=r!=null)?An(e,a):_t),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ta,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Qi(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ta.enqueueReplaceState(t,t.state,null)}function Nl(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},No(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Be(l):(l=Ie(t)?en:be.current,a.context=An(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(wl(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ta.enqueueReplaceState(a,a.state,null),Ar(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Rn(e,t){try{var n="",r=t;do n+=xm(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function $a(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ux=typeof WeakMap=="function"?WeakMap:Map;function ju(e,t,n){n=dt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$r||($r=!0,Ll=r),Sl(e,t)},n}function wu(e,t,n){n=dt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Sl(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Sl(e,t),typeof r!="function"&&(Lt===null?Lt=new Set([this]):Lt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function qi(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ux;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=tf.bind(null,e,t,n),t.then(e,e))}function Yi(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ki(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dt(-1,1),t.tag=2,At(n,t,1))),n.lanes|=1),e)}var Bx=ft.ReactCurrentOwner,Me=!1;function je(e,t,n,r){t.child=e===null?Zd(t,null,n,r):zn(t,e.child,n,r)}function Zi(e,t,n,r,a){n=n.render;var l=t.ref;return Pn(t,a),r=Mo(e,t,n,r,l,a),n=Po(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xt(e,t,a)):(X&&n&&ho(t),t.flags|=1,je(e,t,r,a),t.child)}function Xi(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!_o(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Nu(e,t,l,r,a)):(e=gr(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:ws,n(o,r)&&e.ref===t.ref)return xt(e,t,a)}return t.flags|=1,e=Ft(l,r),e.ref=t.ref,e.return=t,t.child=e}function Nu(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(ws(l,r)&&e.ref===t.ref)if(Me=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(Me=!0);else return t.lanes=e.lanes,xt(e,t,a)}return kl(e,t,n,r,a)}function Su(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(Sn,Te),Te|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,G(Sn,Te),Te|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,G(Sn,Te),Te|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,G(Sn,Te),Te|=r;return je(e,t,a,n),t.child}function ku(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kl(e,t,n,r,a){var l=Ie(n)?en:be.current;return l=An(t,l),Pn(t,a),n=Mo(e,t,n,r,l,a),r=Po(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xt(e,t,a)):(X&&r&&ho(t),t.flags|=1,je(e,t,n,a),t.child)}function Ji(e,t,n,r,a){if(Ie(n)){var l=!0;Mr(t)}else l=!1;if(Pn(t,a),t.stateNode===null)xr(e,t),bu(t,n,r),Nl(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var i=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Be(d):(d=Ie(n)?en:be.current,d=An(t,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||i!==d)&&Qi(t,o,r,d),Nt=!1;var x=t.memoizedState;o.state=x,Ar(t,r,o,a),i=t.memoizedState,c!==r||x!==i||Pe.current||Nt?(typeof u=="function"&&(wl(t,n,u,r),i=t.memoizedState),(c=Nt||Gi(t,n,c,r,x,i,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Jd(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:Ge(t.type,c),o.props=d,m=t.pendingProps,x=o.context,i=n.contextType,typeof i=="object"&&i!==null?i=Be(i):(i=Ie(n)?en:be.current,i=An(t,i));var b=n.getDerivedStateFromProps;(u=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||x!==i)&&Qi(t,o,r,i),Nt=!1,x=t.memoizedState,o.state=x,Ar(t,r,o,a);var y=t.memoizedState;c!==m||x!==y||Pe.current||Nt?(typeof b=="function"&&(wl(t,n,b,r),y=t.memoizedState),(d=Nt||Gi(t,n,d,r,x,y,i)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=i,r=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return Cl(e,t,n,r,l,a)}function Cl(e,t,n,r,a,l){ku(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&$i(t,n,!1),xt(e,t,l);r=t.stateNode,Bx.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=zn(t,e.child,null,l),t.child=zn(t,null,c,l)):je(e,t,c,l),t.memoizedState=r.state,a&&$i(t,n,!0),t.child}function Cu(e){var t=e.stateNode;t.pendingContext?Ri(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(e,t.context,!1),So(e,t.containerInfo)}function ec(e,t,n,r,a){return Ln(),yo(a),t.flags|=256,je(e,t,n,r),t.child}var El={dehydrated:null,treeContext:null,retryLane:0};function Ml(e){return{baseLanes:e,cachePool:null,transitions:null}}function Eu(e,t,n){var r=t.pendingProps,a=J.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),G(J,a&1),e===null)return bl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=ra(o,r,0,null),e=Jt(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ml(n),t.memoizedState=El,e):To(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return Hx(e,t,o,r,c,a,n);if(l){l=r.fallback,o=t.mode,a=e.child,c=a.sibling;var i={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=Ft(a,i),r.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Ft(c,l):(l=Jt(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?Ml(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=El,r}return l=e.child,e=l.sibling,r=Ft(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function To(e,t){return t=ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tr(e,t,n,r){return r!==null&&yo(r),zn(t,e.child,null,n),e=To(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Hx(e,t,n,r,a,l,o){if(n)return t.flags&256?(t.flags&=-257,r=$a(Error(I(422))),tr(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=ra({mode:"visible",children:r.children},a,0,null),l=Jt(l,a,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&zn(t,e.child,null,o),t.child.memoizedState=Ml(o),t.memoizedState=El,l);if(!(t.mode&1))return tr(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;return r=c,l=Error(I(419)),r=$a(l,r,void 0),tr(e,t,o,r)}if(c=(o&e.childLanes)!==0,Me||c){if(r=pe,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,mt(e,a),Ke(r,e,a,-1))}return $o(),r=$a(Error(I(421))),tr(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=nf.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ae=Tt(a.nextSibling),Le=t,X=!0,qe=null,e!==null&&($e[_e++]=it,$e[_e++]=ct,$e[_e++]=tn,it=e.id,ct=e.overflow,tn=t),t=To(t,r.children),t.flags|=4096,t)}function tc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jl(e.return,t,n)}function _a(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Mu(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(je(e,t,r.children,n),r=J.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tc(e,n,t);else if(e.tag===19)tc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(G(J,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Lr(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),_a(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Lr(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}_a(t,!0,n,null,l);break;case"together":_a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=Ft(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ft(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Wx(e,t,n){switch(t.tag){case 3:Cu(t),Ln();break;case 5:eu(t);break;case 1:Ie(t.type)&&Mr(t);break;case 4:So(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;G(Dr,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(G(J,J.current&1),t.flags|=128,null):n&t.child.childLanes?Eu(e,t,n):(G(J,J.current&1),e=xt(e,t,n),e!==null?e.sibling:null);G(J,J.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Mu(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(J,J.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return xt(e,t,n)}var Pu,Pl,Iu,Du;Pu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pl=function(){};Iu=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Zt(rt.current);var l=null;switch(n){case"input":a=Za(e,a),r=Za(e,r),l=[];break;case"select":a=ne({},a,{value:void 0}),r=ne({},r,{value:void 0}),l=[];break;case"textarea":a=el(e,a),r=el(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cr)}nl(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var c=a[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fs.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var i=r[d];if(c=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&i!==c&&(i!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in i)i.hasOwnProperty(o)&&c[o]!==i[o]&&(n||(n={}),n[o]=i[o])}else n||(l||(l=[]),l.push(d,n)),n=i;else d==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,c=c?c.__html:void 0,i!=null&&c!==i&&(l=l||[]).push(d,i)):d==="children"?typeof i!="string"&&typeof i!="number"||(l=l||[]).push(d,""+i):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fs.hasOwnProperty(d)?(i!=null&&d==="onScroll"&&Q("scroll",e),l||c===i||(l=[])):(l=l||[]).push(d,i))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Du=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jn(e,t){if(!X)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vx(e,t,n){var r=t.pendingProps;switch(go(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(t),null;case 1:return Ie(t.type)&&Er(),ye(t),null;case 3:return r=t.stateNode,Fn(),Y(Pe),Y(be),Co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Js(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qe!==null&&(Rl(qe),qe=null))),Pl(e,t),ye(t),null;case 5:ko(t);var a=Zt(Es.current);if(n=t.type,e!==null&&t.stateNode!=null)Iu(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return ye(t),null}if(e=Zt(rt.current),Js(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[nt]=t,r[ks]=l,e=(t.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(a=0;a<as.length;a++)Q(as[a],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":di(r,l),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Q("invalid",r);break;case"textarea":pi(r,l),Q("invalid",r)}nl(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?r.textContent!==c&&(l.suppressHydrationWarning!==!0&&Xs(r.textContent,c,e),a=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Xs(r.textContent,c,e),a=["children",""+c]):fs.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Q("scroll",r)}switch(n){case"input":Ws(r),ui(r,l,!0);break;case"textarea":Ws(r),mi(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Cr)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ad(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[nt]=t,e[ks]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(o=sl(n,r),n){case"dialog":Q("cancel",e),Q("close",e),a=r;break;case"iframe":case"object":case"embed":Q("load",e),a=r;break;case"video":case"audio":for(a=0;a<as.length;a++)Q(as[a],e);a=r;break;case"source":Q("error",e),a=r;break;case"img":case"image":case"link":Q("error",e),Q("load",e),a=r;break;case"details":Q("toggle",e),a=r;break;case"input":di(e,r),a=Za(e,r),Q("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=ne({},r,{value:void 0}),Q("invalid",e);break;case"textarea":pi(e,r),a=el(e,r),Q("invalid",e);break;default:a=r}nl(n,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var i=c[l];l==="style"?id(e,i):l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&ld(e,i)):l==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&hs(e,i):typeof i=="number"&&hs(e,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fs.hasOwnProperty(l)?i!=null&&l==="onScroll"&&Q("scroll",e):i!=null&&to(e,l,i,o))}switch(n){case"input":Ws(e),ui(e,r,!1);break;case"textarea":Ws(e),mi(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$t(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?kn(e,!!r.multiple,l,!1):r.defaultValue!=null&&kn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Cr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ye(t),null;case 6:if(e&&t.stateNode!=null)Du(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=Zt(Es.current),Zt(rt.current),Js(t)){if(r=t.stateNode,n=t.memoizedProps,r[nt]=t,(l=r.nodeValue!==n)&&(e=Le,e!==null))switch(e.tag){case 3:Xs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xs(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nt]=t,t.stateNode=r}return ye(t),null;case 13:if(Y(J),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(X&&Ae!==null&&t.mode&1&&!(t.flags&128))Yd(),Ln(),t.flags|=98560,l=!1;else if(l=Js(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(I(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(I(317));l[nt]=t}else Ln(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ye(t),l=!1}else qe!==null&&(Rl(qe),qe=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||J.current&1?ce===0&&(ce=3):$o())),t.updateQueue!==null&&(t.flags|=4),ye(t),null);case 4:return Fn(),Pl(e,t),e===null&&Ns(t.stateNode.containerInfo),ye(t),null;case 10:return jo(t.type._context),ye(t),null;case 17:return Ie(t.type)&&Er(),ye(t),null;case 19:if(Y(J),l=t.memoizedState,l===null)return ye(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Jn(l,!1);else{if(ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Lr(e),o!==null){for(t.flags|=128,Jn(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return G(J,J.current&1|2),t.child}e=e.sibling}l.tail!==null&&re()>$n&&(t.flags|=128,r=!0,Jn(l,!1),t.lanes=4194304)}else{if(!r)if(e=Lr(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!X)return ye(t),null}else 2*re()-l.renderingStartTime>$n&&n!==1073741824&&(t.flags|=128,r=!0,Jn(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=re(),t.sibling=null,n=J.current,G(J,r?n&1|2:n&1),t):(ye(t),null);case 22:case 23:return Ro(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Te&1073741824&&(ye(t),t.subtreeFlags&6&&(t.flags|=8192)):ye(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function Gx(e,t){switch(go(t),t.tag){case 1:return Ie(t.type)&&Er(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fn(),Y(Pe),Y(be),Co(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ko(t),null;case 13:if(Y(J),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));Ln()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Y(J),null;case 4:return Fn(),null;case 10:return jo(t.type._context),null;case 22:case 23:return Ro(),null;case 24:return null;default:return null}}var nr=!1,ve=!1,Qx=typeof WeakSet=="function"?WeakSet:Set,T=null;function Nn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function Il(e,t,n){try{n()}catch(r){se(e,t,r)}}var nc=!1;function qx(e,t){if(ml=Nr,e=Fd(),fo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,c=-1,i=-1,d=0,u=0,m=e,x=null;t:for(;;){for(var b;m!==n||a!==0&&m.nodeType!==3||(c=o+a),m!==l||r!==0&&m.nodeType!==3||(i=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)x=m,m=b;for(;;){if(m===e)break t;if(x===n&&++d===a&&(c=o),x===l&&++u===r&&(i=o),(b=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=b}n=c===-1||i===-1?null:{start:c,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(xl={focusedElem:e,selectionRange:n},Nr=!1,T=t;T!==null;)if(t=T,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,T=e;else for(;T!==null;){t=T;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,N=y.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ge(t.type,v),N);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(j){se(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,T=e;break}T=t.return}return y=nc,nc=!1,y}function ps(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Il(t,n,l)}a=a.next}while(a!==r)}}function na(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Dl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Tu(e){var t=e.alternate;t!==null&&(e.alternate=null,Tu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nt],delete t[ks],delete t[gl],delete t[Ix],delete t[Dx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Au(e){return e.tag===5||e.tag===3||e.tag===4}function sc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cr));else if(r!==4&&(e=e.child,e!==null))for(Tl(e,t,n),e=e.sibling;e!==null;)Tl(e,t,n),e=e.sibling}function Al(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Al(e,t,n),e=e.sibling;e!==null;)Al(e,t,n),e=e.sibling}var me=null,Qe=!1;function jt(e,t,n){for(n=n.child;n!==null;)Lu(e,t,n),n=n.sibling}function Lu(e,t,n){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(qr,n)}catch{}switch(n.tag){case 5:ve||Nn(n,t);case 6:var r=me,a=Qe;me=null,jt(e,t,n),me=r,Qe=a,me!==null&&(Qe?(e=me,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(Qe?(e=me,n=n.stateNode,e.nodeType===8?Ta(e.parentNode,n):e.nodeType===1&&Ta(e,n),bs(e)):Ta(me,n.stateNode));break;case 4:r=me,a=Qe,me=n.stateNode.containerInfo,Qe=!0,jt(e,t,n),me=r,Qe=a;break;case 0:case 11:case 14:case 15:if(!ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Il(n,t,o),a=a.next}while(a!==r)}jt(e,t,n);break;case 1:if(!ve&&(Nn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){se(n,t,c)}jt(e,t,n);break;case 21:jt(e,t,n);break;case 22:n.mode&1?(ve=(r=ve)||n.memoizedState!==null,jt(e,t,n),ve=r):jt(e,t,n);break;default:jt(e,t,n)}}function rc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qx),t.forEach(function(r){var a=sf.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Ve(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:me=c.stateNode,Qe=!1;break e;case 3:me=c.stateNode.containerInfo,Qe=!0;break e;case 4:me=c.stateNode.containerInfo,Qe=!0;break e}c=c.return}if(me===null)throw Error(I(160));Lu(l,o,a),me=null,Qe=!1;var i=a.alternate;i!==null&&(i.return=null),a.return=null}catch(d){se(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zu(t,e),t=t.sibling}function zu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ve(t,e),et(e),r&4){try{ps(3,e,e.return),na(3,e)}catch(v){se(e,e.return,v)}try{ps(5,e,e.return)}catch(v){se(e,e.return,v)}}break;case 1:Ve(t,e),et(e),r&512&&n!==null&&Nn(n,n.return);break;case 5:if(Ve(t,e),et(e),r&512&&n!==null&&Nn(n,n.return),e.flags&32){var a=e.stateNode;try{hs(a,"")}catch(v){se(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,c=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&sd(a,l),sl(c,o);var d=sl(c,l);for(o=0;o<i.length;o+=2){var u=i[o],m=i[o+1];u==="style"?id(a,m):u==="dangerouslySetInnerHTML"?ld(a,m):u==="children"?hs(a,m):to(a,u,m,d)}switch(c){case"input":Xa(a,l);break;case"textarea":rd(a,l);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var b=l.value;b!=null?kn(a,!!l.multiple,b,!1):x!==!!l.multiple&&(l.defaultValue!=null?kn(a,!!l.multiple,l.defaultValue,!0):kn(a,!!l.multiple,l.multiple?[]:"",!1))}a[ks]=l}catch(v){se(e,e.return,v)}}break;case 6:if(Ve(t,e),et(e),r&4){if(e.stateNode===null)throw Error(I(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(v){se(e,e.return,v)}}break;case 3:if(Ve(t,e),et(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bs(t.containerInfo)}catch(v){se(e,e.return,v)}break;case 4:Ve(t,e),et(e);break;case 13:Ve(t,e),et(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(zo=re())),r&4&&rc(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(ve=(d=ve)||u,Ve(t,e),ve=d):Ve(t,e),et(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(T=e,u=e.child;u!==null;){for(m=T=u;T!==null;){switch(x=T,b=x.child,x.tag){case 0:case 11:case 14:case 15:ps(4,x,x.return);break;case 1:Nn(x,x.return);var y=x.stateNode;if(typeof y.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){se(r,n,v)}}break;case 5:Nn(x,x.return);break;case 22:if(x.memoizedState!==null){lc(m);continue}}b!==null?(b.return=x,T=b):lc(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=m.stateNode,i=m.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,c.style.display=od("display",o))}catch(v){se(e,e.return,v)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(v){se(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ve(t,e),et(e),r&4&&rc(e);break;case 21:break;default:Ve(t,e),et(e)}}function et(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Au(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(hs(a,""),r.flags&=-33);var l=sc(e);Al(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,c=sc(e);Tl(e,c,o);break;default:throw Error(I(161))}}catch(i){se(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yx(e,t,n){T=e,Fu(e)}function Fu(e,t,n){for(var r=(e.mode&1)!==0;T!==null;){var a=T,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||nr;if(!o){var c=a.alternate,i=c!==null&&c.memoizedState!==null||ve;c=nr;var d=ve;if(nr=o,(ve=i)&&!d)for(T=a;T!==null;)o=T,i=o.child,o.tag===22&&o.memoizedState!==null?oc(a):i!==null?(i.return=o,T=i):oc(a);for(;l!==null;)T=l,Fu(l),l=l.sibling;T=a,nr=c,ve=d}ac(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,T=l):ac(e)}}function ac(e){for(;T!==null;){var t=T;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ve||na(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ve)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ge(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Hi(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hi(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&bs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}ve||t.flags&512&&Dl(t)}catch(x){se(t,t.return,x)}}if(t===e){T=null;break}if(n=t.sibling,n!==null){n.return=t.return,T=n;break}T=t.return}}function lc(e){for(;T!==null;){var t=T;if(t===e){T=null;break}var n=t.sibling;if(n!==null){n.return=t.return,T=n;break}T=t.return}}function oc(e){for(;T!==null;){var t=T;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{na(4,t)}catch(i){se(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(i){se(t,a,i)}}var l=t.return;try{Dl(t)}catch(i){se(t,l,i)}break;case 5:var o=t.return;try{Dl(t)}catch(i){se(t,o,i)}}}catch(i){se(t,t.return,i)}if(t===e){T=null;break}var c=t.sibling;if(c!==null){c.return=t.return,T=c;break}T=t.return}}var Kx=Math.ceil,Rr=ft.ReactCurrentDispatcher,Ao=ft.ReactCurrentOwner,Ue=ft.ReactCurrentBatchConfig,B=0,pe=null,le=null,xe=0,Te=0,Sn=Ut(0),ce=0,Ds=null,sn=0,sa=0,Lo=0,ms=null,Ee=null,zo=0,$n=1/0,lt=null,$r=!1,Ll=null,Lt=null,sr=!1,Et=null,_r=0,xs=0,zl=null,fr=-1,hr=0;function we(){return B&6?re():fr!==-1?fr:fr=re()}function zt(e){return e.mode&1?B&2&&xe!==0?xe&-xe:Ax.transition!==null?(hr===0&&(hr=bd()),hr):(e=W,e!==0||(e=window.event,e=e===void 0?16:Ed(e.type)),e):1}function Ke(e,t,n,r){if(50<xs)throw xs=0,zl=null,Error(I(185));Rs(e,n,r),(!(B&2)||e!==pe)&&(e===pe&&(!(B&2)&&(sa|=n),ce===4&&kt(e,xe)),De(e,r),n===1&&B===0&&!(t.mode&1)&&($n=re()+500,Jr&&Bt()))}function De(e,t){var n=e.callbackNode;Am(e,t);var r=wr(e,e===pe?xe:0);if(r===0)n!==null&&hi(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&hi(n),t===1)e.tag===0?Tx(ic.bind(null,e)):Gd(ic.bind(null,e)),Mx(function(){!(B&6)&&Bt()}),n=null;else{switch(jd(r)){case 1:n=lo;break;case 4:n=yd;break;case 16:n=jr;break;case 536870912:n=vd;break;default:n=jr}n=Wu(n,Ru.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ru(e,t){if(fr=-1,hr=0,B&6)throw Error(I(327));var n=e.callbackNode;if(In()&&e.callbackNode!==n)return null;var r=wr(e,e===pe?xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Or(e,r);else{t=r;var a=B;B|=2;var l=_u();(pe!==e||xe!==t)&&(lt=null,$n=re()+500,Xt(e,t));do try{Jx();break}catch(c){$u(e,c)}while(!0);bo(),Rr.current=l,B=a,le!==null?t=0:(pe=null,xe=0,t=ce)}if(t!==0){if(t===2&&(a=il(e),a!==0&&(r=a,t=Fl(e,a))),t===1)throw n=Ds,Xt(e,0),kt(e,r),De(e,re()),n;if(t===6)kt(e,r);else{if(a=e.current.alternate,!(r&30)&&!Zx(a)&&(t=Or(e,r),t===2&&(l=il(e),l!==0&&(r=l,t=Fl(e,l))),t===1))throw n=Ds,Xt(e,0),kt(e,r),De(e,re()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:Gt(e,Ee,lt);break;case 3:if(kt(e,r),(r&130023424)===r&&(t=zo+500-re(),10<t)){if(wr(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){we(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=hl(Gt.bind(null,e,Ee,lt),t);break}Gt(e,Ee,lt);break;case 4:if(kt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Ye(r);l=1<<o,o=t[o],o>a&&(a=o),r&=~l}if(r=a,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kx(r/1960))-r,10<r){e.timeoutHandle=hl(Gt.bind(null,e,Ee,lt),r);break}Gt(e,Ee,lt);break;case 5:Gt(e,Ee,lt);break;default:throw Error(I(329))}}}return De(e,re()),e.callbackNode===n?Ru.bind(null,e):null}function Fl(e,t){var n=ms;return e.current.memoizedState.isDehydrated&&(Xt(e,t).flags|=256),e=Or(e,t),e!==2&&(t=Ee,Ee=n,t!==null&&Rl(t)),e}function Rl(e){Ee===null?Ee=e:Ee.push.apply(Ee,e)}function Zx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Ze(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kt(e,t){for(t&=~Lo,t&=~sa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ye(t),r=1<<n;e[n]=-1,t&=~r}}function ic(e){if(B&6)throw Error(I(327));In();var t=wr(e,0);if(!(t&1))return De(e,re()),null;var n=Or(e,t);if(e.tag!==0&&n===2){var r=il(e);r!==0&&(t=r,n=Fl(e,r))}if(n===1)throw n=Ds,Xt(e,0),kt(e,t),De(e,re()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gt(e,Ee,lt),De(e,re()),null}function Fo(e,t){var n=B;B|=1;try{return e(t)}finally{B=n,B===0&&($n=re()+500,Jr&&Bt())}}function rn(e){Et!==null&&Et.tag===0&&!(B&6)&&In();var t=B;B|=1;var n=Ue.transition,r=W;try{if(Ue.transition=null,W=1,e)return e()}finally{W=r,Ue.transition=n,B=t,!(B&6)&&Bt()}}function Ro(){Te=Sn.current,Y(Sn)}function Xt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ex(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(go(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Er();break;case 3:Fn(),Y(Pe),Y(be),Co();break;case 5:ko(r);break;case 4:Fn();break;case 13:Y(J);break;case 19:Y(J);break;case 10:jo(r.type._context);break;case 22:case 23:Ro()}n=n.return}if(pe=e,le=e=Ft(e.current,null),xe=Te=t,ce=0,Ds=null,Lo=sa=sn=0,Ee=ms=null,Kt!==null){for(t=0;t<Kt.length;t++)if(n=Kt[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}Kt=null}return e}function $u(e,t){do{var n=le;try{if(bo(),pr.current=Fr,zr){for(var r=ee.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}zr=!1}if(nn=0,ue=ie=ee=null,us=!1,Ms=0,Ao.current=null,n===null||n.return===null){ce=1,Ds=t,le=null;break}e:{var l=e,o=n.return,c=n,i=t;if(t=xe,c.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var d=i,u=c,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var b=Yi(o);if(b!==null){b.flags&=-257,Ki(b,o,c,l,t),b.mode&1&&qi(l,d,t),t=b,i=d;var y=t.updateQueue;if(y===null){var v=new Set;v.add(i),t.updateQueue=v}else y.add(i);break e}else{if(!(t&1)){qi(l,d,t),$o();break e}i=Error(I(426))}}else if(X&&c.mode&1){var N=Yi(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Ki(N,o,c,l,t),yo(Rn(i,c));break e}}l=i=Rn(i,c),ce!==4&&(ce=2),ms===null?ms=[l]:ms.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=ju(l,i,t);Bi(l,g);break e;case 1:c=i;var p=l.type,h=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Lt===null||!Lt.has(h)))){l.flags|=65536,t&=-t,l.lanes|=t;var j=wu(l,c,t);Bi(l,j);break e}}l=l.return}while(l!==null)}Uu(n)}catch(S){t=S,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function _u(){var e=Rr.current;return Rr.current=Fr,e===null?Fr:e}function $o(){(ce===0||ce===3||ce===2)&&(ce=4),pe===null||!(sn&268435455)&&!(sa&268435455)||kt(pe,xe)}function Or(e,t){var n=B;B|=2;var r=_u();(pe!==e||xe!==t)&&(lt=null,Xt(e,t));do try{Xx();break}catch(a){$u(e,a)}while(!0);if(bo(),B=n,Rr.current=r,le!==null)throw Error(I(261));return pe=null,xe=0,ce}function Xx(){for(;le!==null;)Ou(le)}function Jx(){for(;le!==null&&!Sm();)Ou(le)}function Ou(e){var t=Hu(e.alternate,e,Te);e.memoizedProps=e.pendingProps,t===null?Uu(e):le=t,Ao.current=null}function Uu(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Gx(n,t),n!==null){n.flags&=32767,le=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ce=6,le=null;return}}else if(n=Vx(n,t,Te),n!==null){le=n;return}if(t=t.sibling,t!==null){le=t;return}le=t=e}while(t!==null);ce===0&&(ce=5)}function Gt(e,t,n){var r=W,a=Ue.transition;try{Ue.transition=null,W=1,ef(e,t,n,r)}finally{Ue.transition=a,W=r}return null}function ef(e,t,n,r){do In();while(Et!==null);if(B&6)throw Error(I(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Lm(e,l),e===pe&&(le=pe=null,xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sr||(sr=!0,Wu(jr,function(){return In(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ue.transition,Ue.transition=null;var o=W;W=1;var c=B;B|=4,Ao.current=null,qx(e,n),zu(n,e),bx(xl),Nr=!!ml,xl=ml=null,e.current=n,Yx(n),km(),B=c,W=o,Ue.transition=l}else e.current=n;if(sr&&(sr=!1,Et=e,_r=a),l=e.pendingLanes,l===0&&(Lt=null),Mm(n.stateNode),De(e,re()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if($r)throw $r=!1,e=Ll,Ll=null,e;return _r&1&&e.tag!==0&&In(),l=e.pendingLanes,l&1?e===zl?xs++:(xs=0,zl=e):xs=0,Bt(),null}function In(){if(Et!==null){var e=jd(_r),t=Ue.transition,n=W;try{if(Ue.transition=null,W=16>e?16:e,Et===null)var r=!1;else{if(e=Et,Et=null,_r=0,B&6)throw Error(I(331));var a=B;for(B|=4,T=e.current;T!==null;){var l=T,o=l.child;if(T.flags&16){var c=l.deletions;if(c!==null){for(var i=0;i<c.length;i++){var d=c[i];for(T=d;T!==null;){var u=T;switch(u.tag){case 0:case 11:case 15:ps(8,u,l)}var m=u.child;if(m!==null)m.return=u,T=m;else for(;T!==null;){u=T;var x=u.sibling,b=u.return;if(Tu(u),u===d){T=null;break}if(x!==null){x.return=b,T=x;break}T=b}}}var y=l.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var N=v.sibling;v.sibling=null,v=N}while(v!==null)}}T=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,T=o;else e:for(;T!==null;){if(l=T,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ps(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,T=g;break e}T=l.return}}var p=e.current;for(T=p;T!==null;){o=T;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,T=h;else e:for(o=p;T!==null;){if(c=T,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:na(9,c)}}catch(S){se(c,c.return,S)}if(c===o){T=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,T=j;break e}T=c.return}}if(B=a,Bt(),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(qr,e)}catch{}r=!0}return r}finally{W=n,Ue.transition=t}}return!1}function cc(e,t,n){t=Rn(n,t),t=ju(e,t,1),e=At(e,t,1),t=we(),e!==null&&(Rs(e,1,t),De(e,t))}function se(e,t,n){if(e.tag===3)cc(e,e,n);else for(;t!==null;){if(t.tag===3){cc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lt===null||!Lt.has(r))){e=Rn(n,e),e=wu(t,e,1),t=At(t,e,1),e=we(),t!==null&&(Rs(t,1,e),De(t,e));break}}t=t.return}}function tf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=we(),e.pingedLanes|=e.suspendedLanes&n,pe===e&&(xe&n)===n&&(ce===4||ce===3&&(xe&130023424)===xe&&500>re()-zo?Xt(e,0):Lo|=n),De(e,t)}function Bu(e,t){t===0&&(e.mode&1?(t=Qs,Qs<<=1,!(Qs&130023424)&&(Qs=4194304)):t=1);var n=we();e=mt(e,t),e!==null&&(Rs(e,t,n),De(e,n))}function nf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bu(e,n)}function sf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),Bu(e,n)}var Hu;Hu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pe.current)Me=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Me=!1,Wx(e,t,n);Me=!!(e.flags&131072)}else Me=!1,X&&t.flags&1048576&&Qd(t,Ir,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xr(e,t),e=t.pendingProps;var a=An(t,be.current);Pn(t,n),a=Mo(null,t,r,e,a,n);var l=Po();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ie(r)?(l=!0,Mr(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,No(t),a.updater=ta,t.stateNode=a,a._reactInternals=t,Nl(t,r,e,n),t=Cl(null,t,r,!0,l,n)):(t.tag=0,X&&l&&ho(t),je(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xr(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=af(r),e=Ge(r,e),a){case 0:t=kl(null,t,r,e,n);break e;case 1:t=Ji(null,t,r,e,n);break e;case 11:t=Zi(null,t,r,e,n);break e;case 14:t=Xi(null,t,r,Ge(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ge(r,a),kl(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ge(r,a),Ji(e,t,r,a,n);case 3:e:{if(Cu(t),e===null)throw Error(I(387));r=t.pendingProps,l=t.memoizedState,a=l.element,Jd(e,t),Ar(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Rn(Error(I(423)),t),t=ec(e,t,r,n,a);break e}else if(r!==a){a=Rn(Error(I(424)),t),t=ec(e,t,r,n,a);break e}else for(Ae=Tt(t.stateNode.containerInfo.firstChild),Le=t,X=!0,qe=null,n=Zd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ln(),r===a){t=xt(e,t,n);break e}je(e,t,r,n)}t=t.child}return t;case 5:return eu(t),e===null&&bl(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,fl(r,a)?o=null:l!==null&&fl(r,l)&&(t.flags|=32),ku(e,t),je(e,t,o,n),t.child;case 6:return e===null&&bl(t),null;case 13:return Eu(e,t,n);case 4:return So(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zn(t,null,r,n):je(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ge(r,a),Zi(e,t,r,a,n);case 7:return je(e,t,t.pendingProps,n),t.child;case 8:return je(e,t,t.pendingProps.children,n),t.child;case 12:return je(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,G(Dr,r._currentValue),r._currentValue=o,l!==null)if(Ze(l.value,o)){if(l.children===a.children&&!Pe.current){t=xt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var i=c.firstContext;i!==null;){if(i.context===r){if(l.tag===1){i=dt(-1,n&-n),i.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?i.next=i:(i.next=u.next,u.next=i),d.pending=i}}l.lanes|=n,i=l.alternate,i!==null&&(i.lanes|=n),jl(l.return,n,t),c.lanes|=n;break}i=i.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(I(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),jl(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}je(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Pn(t,n),a=Be(a),r=r(a),t.flags|=1,je(e,t,r,n),t.child;case 14:return r=t.type,a=Ge(r,t.pendingProps),a=Ge(r.type,a),Xi(e,t,r,a,n);case 15:return Nu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ge(r,a),xr(e,t),t.tag=1,Ie(r)?(e=!0,Mr(t)):e=!1,Pn(t,n),bu(t,r,a),Nl(t,r,a,n),Cl(null,t,r,!0,e,n);case 19:return Mu(e,t,n);case 22:return Su(e,t,n)}throw Error(I(156,t.tag))};function Wu(e,t){return gd(e,t)}function rf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oe(e,t,n,r){return new rf(e,t,n,r)}function _o(e){return e=e.prototype,!(!e||!e.isReactComponent)}function af(e){if(typeof e=="function")return _o(e)?1:0;if(e!=null){if(e=e.$$typeof,e===so)return 11;if(e===ro)return 14}return 2}function Ft(e,t){var n=e.alternate;return n===null?(n=Oe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gr(e,t,n,r,a,l){var o=2;if(r=e,typeof e=="function")_o(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case xn:return Jt(n.children,a,l,t);case no:o=8,a|=8;break;case Qa:return e=Oe(12,n,t,a|2),e.elementType=Qa,e.lanes=l,e;case qa:return e=Oe(13,n,t,a),e.elementType=qa,e.lanes=l,e;case Ya:return e=Oe(19,n,t,a),e.elementType=Ya,e.lanes=l,e;case ed:return ra(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xc:o=10;break e;case Jc:o=9;break e;case so:o=11;break e;case ro:o=14;break e;case wt:o=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=Oe(o,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function Jt(e,t,n,r){return e=Oe(7,e,r,t),e.lanes=n,e}function ra(e,t,n,r){return e=Oe(22,e,r,t),e.elementType=ed,e.lanes=n,e.stateNode={isHidden:!1},e}function Oa(e,t,n){return e=Oe(6,e,null,t),e.lanes=n,e}function Ua(e,t,n){return t=Oe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lf(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Oo(e,t,n,r,a,l,o,c,i){return e=new lf(e,t,n,c,i),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Oe(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},No(l),e}function of(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Vu(e){if(!e)return _t;e=e._reactInternals;e:{if(on(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ie(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(Ie(n))return Vd(e,n,t)}return t}function Gu(e,t,n,r,a,l,o,c,i){return e=Oo(n,r,!0,e,a,l,o,c,i),e.context=Vu(null),n=e.current,r=we(),a=zt(n),l=dt(r,a),l.callback=t??null,At(n,l,a),e.current.lanes=a,Rs(e,a,r),De(e,r),e}function aa(e,t,n,r){var a=t.current,l=we(),o=zt(a);return n=Vu(n),t.context===null?t.context=n:t.pendingContext=n,t=dt(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=At(a,t,o),e!==null&&(Ke(e,a,o,l),ur(e,a,o)),o}function Ur(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Uo(e,t){dc(e,t),(e=e.alternate)&&dc(e,t)}function cf(){return null}var Qu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bo(e){this._internalRoot=e}la.prototype.render=Bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));aa(e,t,null,null)};la.prototype.unmount=Bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rn(function(){aa(null,e,null,null)}),t[pt]=null}};function la(e){this._internalRoot=e}la.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<St.length&&t!==0&&t<St[n].priority;n++);St.splice(n,0,e),n===0&&Cd(e)}};function Ho(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uc(){}function df(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var d=Ur(o);l.call(d)}}var o=Gu(t,r,e,0,null,!1,!1,"",uc);return e._reactRootContainer=o,e[pt]=o.current,Ns(e.nodeType===8?e.parentNode:e),rn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var c=r;r=function(){var d=Ur(i);c.call(d)}}var i=Oo(e,0,!1,null,null,!1,!1,"",uc);return e._reactRootContainer=i,e[pt]=i.current,Ns(e.nodeType===8?e.parentNode:e),rn(function(){aa(t,i,n,r)}),i}function ia(e,t,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var c=a;a=function(){var i=Ur(o);c.call(i)}}aa(t,o,e,a)}else o=df(n,t,e,a,r);return Ur(o)}wd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rs(t.pendingLanes);n!==0&&(oo(t,n|1),De(t,re()),!(B&6)&&($n=re()+500,Bt()))}break;case 13:rn(function(){var r=mt(e,1);if(r!==null){var a=we();Ke(r,e,1,a)}}),Uo(e,1)}};io=function(e){if(e.tag===13){var t=mt(e,134217728);if(t!==null){var n=we();Ke(t,e,134217728,n)}Uo(e,134217728)}};Nd=function(e){if(e.tag===13){var t=zt(e),n=mt(e,t);if(n!==null){var r=we();Ke(n,e,t,r)}Uo(e,t)}};Sd=function(){return W};kd=function(e,t){var n=W;try{return W=e,t()}finally{W=n}};al=function(e,t,n){switch(t){case"input":if(Xa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Xr(r);if(!a)throw Error(I(90));nd(r),Xa(r,a)}}}break;case"textarea":rd(e,n);break;case"select":t=n.value,t!=null&&kn(e,!!n.multiple,t,!1)}};ud=Fo;pd=rn;var uf={usingClientEntryPoint:!1,Events:[_s,yn,Xr,cd,dd,Fo]},es={findFiberByHostInstance:Yt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pf={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fd(e),e===null?null:e.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||cf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rr.isDisabled&&rr.supportsFiber)try{qr=rr.inject(pf),st=rr}catch{}}Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uf;Fe.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ho(t))throw Error(I(200));return of(e,t,null,n)};Fe.createRoot=function(e,t){if(!Ho(e))throw Error(I(299));var n=!1,r="",a=Qu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Oo(e,1,!1,null,null,n,!1,r,a),e[pt]=t.current,Ns(e.nodeType===8?e.parentNode:e),new Bo(t)};Fe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=fd(t),e=e===null?null:e.stateNode,e};Fe.flushSync=function(e){return rn(e)};Fe.hydrate=function(e,t,n){if(!oa(t))throw Error(I(200));return ia(null,e,t,!0,n)};Fe.hydrateRoot=function(e,t,n){if(!Ho(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=Qu;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Gu(t,null,e,1,n??null,a,!1,l,o),e[pt]=t.current,Ns(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new la(t)};Fe.render=function(e,t,n){if(!oa(t))throw Error(I(200));return ia(null,e,t,!1,n)};Fe.unmountComponentAtNode=function(e){if(!oa(e))throw Error(I(40));return e._reactRootContainer?(rn(function(){ia(null,null,e,!1,function(){e._reactRootContainer=null,e[pt]=null})}),!0):!1};Fe.unstable_batchedUpdates=Fo;Fe.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oa(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return ia(e,t,n,!1,r)};Fe.version="18.3.1-next-f1338f8080-20240426";function qu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qu)}catch(e){console.error(e)}}qu(),qc.exports=Fe;var mf=qc.exports,pc=mf;Va.createRoot=pc.createRoot,Va.hydrateRoot=pc.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ts(){return Ts=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ts.apply(this,arguments)}var Mt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mt||(Mt={}));const mc="popstate";function xf(e){e===void 0&&(e={});function t(a,l){let{pathname:o="/",search:c="",hash:i=""}=cn(a.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),$l("",{pathname:o,search:c,hash:i},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let o=a.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let i=a.location.href,d=i.indexOf("#");c=d===-1?i:i.slice(0,d)}return c+"#"+(typeof l=="string"?l:Br(l))}function r(a,l){ca(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return hf(t,n,r,e)}function te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ca(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ff(){return Math.random().toString(36).substr(2,8)}function xc(e,t){return{usr:e.state,key:e.key,idx:t}}function $l(e,t,n,r){return n===void 0&&(n=null),Ts({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?cn(t):t,{state:n,key:t&&t.key||r||ff()})}function Br(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function cn(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function hf(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,c=Mt.Pop,i=null,d=u();d==null&&(d=0,o.replaceState(Ts({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){c=Mt.Pop;let N=u(),g=N==null?null:N-d;d=N,i&&i({action:c,location:v.location,delta:g})}function x(N,g){c=Mt.Push;let p=$l(v.location,N,g);n&&n(p,N),d=u()+1;let h=xc(p,d),j=v.createHref(p);try{o.pushState(h,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(j)}l&&i&&i({action:c,location:v.location,delta:1})}function b(N,g){c=Mt.Replace;let p=$l(v.location,N,g);n&&n(p,N),d=u();let h=xc(p,d),j=v.createHref(p);o.replaceState(h,"",j),l&&i&&i({action:c,location:v.location,delta:0})}function y(N){let g=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof N=="string"?N:Br(N);return p=p.replace(/ $/,"%20"),te(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let v={get action(){return c},get location(){return e(a,o)},listen(N){if(i)throw new Error("A history only accepts one active listener");return a.addEventListener(mc,m),i=N,()=>{a.removeEventListener(mc,m),i=null}},createHref(N){return t(a,N)},createURL:y,encodeLocation(N){let g=y(N);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:x,replace:b,go(N){return o.go(N)}};return v}var fc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fc||(fc={}));function gf(e,t,n){return n===void 0&&(n="/"),yf(e,t,n)}function yf(e,t,n,r){let a=typeof t=="string"?cn(t):t,l=_n(a.pathname||"/",n);if(l==null)return null;let o=Yu(e);vf(o);let c=null;for(let i=0;c==null&&i<o.length;++i){let d=If(l);c=Mf(o[i],d)}return c}function Yu(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,c)=>{let i={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};i.relativePath.startsWith("/")&&(te(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let d=Rt([r,i.relativePath]),u=n.concat(i);l.children&&l.children.length>0&&(te(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Yu(l.children,t,u,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Cf(d,l.index),routesMeta:u})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let i of Ku(l.path))a(l,o,i)}),t}function Ku(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Ku(r.join("/")),c=[];return c.push(...o.map(i=>i===""?l:[l,i].join("/"))),a&&c.push(...o),c.map(i=>e.startsWith("/")&&i===""?"/":i)}function vf(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ef(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bf=/^:[\w-]+$/,jf=3,wf=2,Nf=1,Sf=10,kf=-2,hc=e=>e==="*";function Cf(e,t){let n=e.split("/"),r=n.length;return n.some(hc)&&(r+=kf),t&&(r+=wf),n.filter(a=>!hc(a)).reduce((a,l)=>a+(bf.test(l)?jf:l===""?Nf:Sf),r)}function Ef(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Mf(e,t,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let c=0;c<r.length;++c){let i=r[c],d=c===r.length-1,u=l==="/"?t:t.slice(l.length)||"/",m=_l({path:i.relativePath,caseSensitive:i.caseSensitive,end:d},u),x=i.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Rt([l,m.pathname]),pathnameBase:zf(Rt([l,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(l=Rt([l,m.pathnameBase]))}return o}function _l(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Pf(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((d,u,m)=>{let{paramName:x,isOptional:b}=u;if(x==="*"){let v=c[m]||"";o=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const y=c[m];return b&&!y?d[x]=void 0:d[x]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Pf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ca(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,i)=>(r.push({paramName:c,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function If(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ca(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _n(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Df=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tf=e=>Df.test(e);function Af(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?cn(e):e,l;if(n)if(Tf(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ca(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=gc(n.substring(1),"/"):l=gc(n,t)}else l=t;return{pathname:l,search:Ff(r),hash:Rf(a)}}function gc(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Ba(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lf(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Wo(e,t){let n=Lf(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vo(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=cn(e):(a=Ts({},e),te(!a.pathname||!a.pathname.includes("?"),Ba("?","pathname","search",a)),te(!a.pathname||!a.pathname.includes("#"),Ba("#","pathname","hash",a)),te(!a.search||!a.search.includes("#"),Ba("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),m-=1;a.pathname=x.join("/")}c=m>=0?t[m]:"/"}let i=Af(a,c),d=o&&o!=="/"&&o.endsWith("/"),u=(l||o===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(d||u)&&(i.pathname+="/"),i}const Rt=e=>e.join("/").replace(/\/\/+/g,"/"),zf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ff=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Rf=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $f(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zu=["post","put","patch","delete"];new Set(Zu);const _f=["get",...Zu];new Set(_f);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},As.apply(this,arguments)}const da=f.createContext(null),Xu=f.createContext(null),ht=f.createContext(null),ua=f.createContext(null),gt=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Ju=f.createContext(null);function Of(e,t){let{relative:n}=t===void 0?{}:t;Gn()||te(!1);let{basename:r,navigator:a}=f.useContext(ht),{hash:l,pathname:o,search:c}=pa(e,{relative:n}),i=o;return r!=="/"&&(i=o==="/"?r:Rt([r,o])),a.createHref({pathname:i,search:c,hash:l})}function Gn(){return f.useContext(ua)!=null}function dn(){return Gn()||te(!1),f.useContext(ua).location}function ep(e){f.useContext(ht).static||f.useLayoutEffect(e)}function Go(){let{isDataRoute:e}=f.useContext(gt);return e?th():Uf()}function Uf(){Gn()||te(!1);let e=f.useContext(da),{basename:t,future:n,navigator:r}=f.useContext(ht),{matches:a}=f.useContext(gt),{pathname:l}=dn(),o=JSON.stringify(Wo(a,n.v7_relativeSplatPath)),c=f.useRef(!1);return ep(()=>{c.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=Vo(d,JSON.parse(o),l,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Rt([t,m.pathname])),(u.replace?r.replace:r.push)(m,u.state,u)},[t,r,o,l,e])}const Bf=f.createContext(null);function Hf(e){let t=f.useContext(gt).outlet;return t&&f.createElement(Bf.Provider,{value:e},t)}function pa(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=f.useContext(ht),{matches:a}=f.useContext(gt),{pathname:l}=dn(),o=JSON.stringify(Wo(a,r.v7_relativeSplatPath));return f.useMemo(()=>Vo(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function Wf(e,t){return Vf(e,t)}function Vf(e,t,n,r){Gn()||te(!1);let{navigator:a}=f.useContext(ht),{matches:l}=f.useContext(gt),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let i=o?o.pathnameBase:"/";o&&o.route;let d=dn(),u;if(t){var m;let N=typeof t=="string"?cn(t):t;i==="/"||(m=N.pathname)!=null&&m.startsWith(i)||te(!1),u=N}else u=d;let x=u.pathname||"/",b=x;if(i!=="/"){let N=i.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let y=gf(e,{pathname:b}),v=Kf(y&&y.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Rt([i,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?i:Rt([i,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,r);return t&&v?f.createElement(ua.Provider,{value:{location:As({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Mt.Pop}},v):v}function Gf(){let e=eh(),t=$f(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:a},n):null,null)}const Qf=f.createElement(Gf,null);class qf extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(gt.Provider,{value:this.props.routeContext},f.createElement(Ju.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yf(e){let{routeContext:t,match:n,children:r}=e,a=f.useContext(da);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(gt.Provider,{value:t},r)}function Kf(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let u=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);u>=0||te(!1),o=o.slice(0,Math.min(o.length,u+1))}let i=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:x,errors:b}=n,y=m.route.loader&&x[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||y){i=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,x)=>{let b,y=!1,v=null,N=null;n&&(b=c&&m.route.id?c[m.route.id]:void 0,v=m.route.errorElement||Qf,i&&(d<0&&x===0?(nh("route-fallback"),y=!0,N=null):d===x&&(y=!0,N=m.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,x+1)),p=()=>{let h;return b?h=v:y?h=N:m.route.Component?h=f.createElement(m.route.Component,null):m.route.element?h=m.route.element:h=u,f.createElement(Yf,{match:m,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:h})};return n&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?f.createElement(qf,{location:n.location,revalidation:n.revalidation,component:v,error:b,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var tp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(tp||{}),np=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(np||{});function Zf(e){let t=f.useContext(da);return t||te(!1),t}function Xf(e){let t=f.useContext(Xu);return t||te(!1),t}function Jf(e){let t=f.useContext(gt);return t||te(!1),t}function sp(e){let t=Jf(),n=t.matches[t.matches.length-1];return n.route.id||te(!1),n.route.id}function eh(){var e;let t=f.useContext(Ju),n=Xf(),r=sp();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function th(){let{router:e}=Zf(tp.UseNavigateStable),t=sp(np.UseNavigateStable),n=f.useRef(!1);return ep(()=>{n.current=!0}),f.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,As({fromRouteId:t},l)))},[e,t])}const yc={};function nh(e,t,n){yc[e]||(yc[e]=!0)}function sh(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function qt(e){let{to:t,replace:n,state:r,relative:a}=e;Gn()||te(!1);let{future:l,static:o}=f.useContext(ht),{matches:c}=f.useContext(gt),{pathname:i}=dn(),d=Go(),u=Vo(t,Wo(c,l.v7_relativeSplatPath),i,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:a}),[d,m,a,n,r]),null}function Qo(e){return Hf(e.context)}function q(e){te(!1)}function rh(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Mt.Pop,navigator:l,static:o=!1,future:c}=e;Gn()&&te(!1);let i=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:i,navigator:l,static:o,future:As({v7_relativeSplatPath:!1},c)}),[i,c,l,o]);typeof r=="string"&&(r=cn(r));let{pathname:u="/",search:m="",hash:x="",state:b=null,key:y="default"}=r,v=f.useMemo(()=>{let N=_n(u,i);return N==null?null:{location:{pathname:N,search:m,hash:x,state:b,key:y},navigationType:a}},[i,u,m,x,b,y,a]);return v==null?null:f.createElement(ht.Provider,{value:d},f.createElement(ua.Provider,{children:n,value:v}))}function ah(e){let{children:t,location:n}=e;return Wf(Ol(t),n)}new Promise(()=>{});function Ol(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,a)=>{if(!f.isValidElement(r))return;let l=[...t,a];if(r.type===f.Fragment){n.push.apply(n,Ol(r.props.children,l));return}r.type!==q&&te(!1),!r.props.index||!r.props.children||te(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ol(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hr(){return Hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hr.apply(this,arguments)}function rp(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function lh(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function oh(e,t){return e.button===0&&(!t||t==="_self")&&!lh(e)}const ih=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ch=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],dh="6";try{window.__reactRouterVersion=dh}catch{}const uh=f.createContext({isTransitioning:!1}),ph="startTransition",vc=tm[ph];function mh(e){let{basename:t,children:n,future:r,window:a}=e,l=f.useRef();l.current==null&&(l.current=xf({window:a,v5Compat:!0}));let o=l.current,[c,i]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},u=f.useCallback(m=>{d&&vc?vc(()=>i(m)):i(m)},[i,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>sh(r),[r]),f.createElement(rh,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const xh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,On=f.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:c,target:i,to:d,preventScrollReset:u,viewTransition:m}=t,x=rp(t,ih),{basename:b}=f.useContext(ht),y,v=!1;if(typeof d=="string"&&fh.test(d)&&(y=d,xh))try{let h=new URL(window.location.href),j=d.startsWith("//")?new URL(h.protocol+d):new URL(d),S=_n(j.pathname,b);j.origin===h.origin&&S!=null?d=S+j.search+j.hash:v=!0}catch{}let N=Of(d,{relative:a}),g=yh(d,{replace:o,state:c,target:i,preventScrollReset:u,relative:a,viewTransition:m});function p(h){r&&r(h),h.defaultPrevented||g(h)}return f.createElement("a",Hr({},x,{href:y||N,onClick:v||l?r:p,ref:n,target:i}))}),hh=f.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:o=!1,style:c,to:i,viewTransition:d,children:u}=t,m=rp(t,ch),x=pa(i,{relative:m.relative}),b=dn(),y=f.useContext(Xu),{navigator:v,basename:N}=f.useContext(ht),g=y!=null&&vh(x)&&d===!0,p=v.encodeLocation?v.encodeLocation(x).pathname:x.pathname,h=b.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(h=h.toLowerCase(),j=j?j.toLowerCase():null,p=p.toLowerCase()),j&&N&&(j=_n(j,N)||j);const S=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let w=h===p||!o&&h.startsWith(p)&&h.charAt(S)==="/",E=j!=null&&(j===p||!o&&j.startsWith(p)&&j.charAt(p.length)==="/"),C={isActive:w,isPending:E,isTransitioning:g},P=w?r:void 0,k;typeof l=="function"?k=l(C):k=[l,w?"active":null,E?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(C):c;return f.createElement(On,Hr({},m,{"aria-current":P,className:k,ref:n,style:L,to:i,viewTransition:d}),typeof u=="function"?u(C):u)});var Ul;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ul||(Ul={}));var bc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bc||(bc={}));function gh(e){let t=f.useContext(da);return t||te(!1),t}function yh(e,t){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:c}=t===void 0?{}:t,i=Go(),d=dn(),u=pa(e,{relative:o});return f.useCallback(m=>{if(oh(m,n)){m.preventDefault();let x=r!==void 0?r:Br(d)===Br(u);i(e,{replace:x,state:a,preventScrollReset:l,relative:o,viewTransition:c})}},[d,i,u,r,a,n,e,l,o,c])}function vh(e,t){t===void 0&&(t={});let n=f.useContext(uh);n==null&&te(!1);let{basename:r}=gh(Ul.useViewTransitionState),a=pa(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=_n(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=_n(n.nextLocation.pathname,r)||n.nextLocation.pathname;return _l(a.pathname,o)!=null||_l(a.pathname,l)!=null}const bh="https://script.google.com/macros/s/AKfycbxINImH5EUG3rmEryZk5zJ6mp-O8qYw6TRQcDPNKjOIkrn24NONj1jc-G6PfbXL5IpS/exec",jh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),s.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),s.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),s.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]}),at=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),wh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),s.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),qo=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("polyline",{points:"9 11 12 14 22 4"}),s.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),Nh=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:s.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"})}),ap=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),s.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Bl=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:s.jsx("path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"})}),Hl=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M8 6v6"}),s.jsx("path",{d:"M16 6v6"}),s.jsx("path",{d:"M2 12h19.6"}),s.jsx("path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"}),s.jsx("circle",{cx:"7",cy:"18",r:"2"}),s.jsx("path",{d:"M9 18h5"}),s.jsx("circle",{cx:"16",cy:"18",r:"2"})]}),lp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v2"}),s.jsx("path",{d:"M21 14v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),s.jsx("polyline",{points:"3 10 12 15 21 10"}),s.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"15"})]}),op=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"}),s.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),s.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),s.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),Un=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Sh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),s.jsx("line",{x1:"12",x2:"12",y1:"14",y2:"20"}),s.jsx("line",{x1:"9",x2:"15",y1:"17",y2:"17"})]}),Yo=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Ko=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),s.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),s.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]}),ip=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),s.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),yt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),s.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),s.jsx("rect",{width:"12",height:"8",x:"6",y:"14"})]}),Xe=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),s.jsx("path",{d:"m15 5 4 4"})]}),kh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M3 6h18"}),s.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),s.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),s.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]}),cp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M2 17h6a4 4 0 0 0 4-4V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2z"}),s.jsx("path",{d:"M22 17h-6a4 4 0 0 1-4-4V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2z"})]}),dp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),s.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),s.jsx("path",{d:"m9 14 2 2 4-4"})]}),Wr=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),s.jsx("path",{d:"M12 8v4"}),s.jsx("path",{d:"M12 16h.01"})]}),Ch=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),s.jsx("polyline",{points:"10 17 15 12 10 7"}),s.jsx("line",{x1:"15",x2:"3",y1:"12",y2:"12"})]}),up=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),s.jsx("polyline",{points:"16 17 21 12 16 7"}),s.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Zo=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"8"}),s.jsx("path",{d:"m21 21-4.3-4.3"})]}),pp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("polyline",{points:"16 11 18 13 22 9"})]}),Eh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("line",{x1:"17",y1:"8",x2:"22",y2:"13"}),s.jsx("line",{x1:"22",y1:"8",x2:"17",y2:"13"})]}),Mh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"8",cy:"8",r:"6"}),s.jsx("path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}),s.jsx("path",{d:"M7 6h1v4"}),s.jsx("path",{d:"m16.71 13.88.7.71-2.82 2.82-.71-.71A3.9 3.9 0 0 1 12 16a4 4 0 0 1 4-4 3.9 3.9 0 0 1 .88 1.29z"})]}),mp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"21",x2:"14",y1:"4",y2:"4"}),s.jsx("line",{x1:"10",x2:"3",y1:"4",y2:"4"}),s.jsx("line",{x1:"21",x2:"12",y1:"12",y2:"12"}),s.jsx("line",{x1:"8",x2:"3",y1:"12",y2:"12"}),s.jsx("line",{x1:"21",x2:"16",y1:"20",y2:"20"}),s.jsx("line",{x1:"12",x2:"3",y1:"20",y2:"20"}),s.jsx("line",{x1:"14",x2:"14",y1:"2",y2:"6"}),s.jsx("line",{x1:"8",x2:"8",y1:"10",y2:"14"}),s.jsx("line",{x1:"16",x2:"16",y1:"18",y2:"22"})]}),Ph=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:s.jsx("polyline",{points:"20 6 9 17 4 12"})}),vt=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Ih=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),s.jsx("path",{d:"M21 3v5h-5"}),s.jsx("path",{d:"M3 21v-5h5"}),s.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"})]}),xp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),s.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),Dh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),s.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),fp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),s.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),s.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),s.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),s.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),s.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),s.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),s.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),hp=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:s.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Th=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),s.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),s.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),Ha=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),s.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),jc=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:s.jsx("path",{d:"m9 18 6-6-6-6"})}),gp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Ah=[{href:"/app/dashboard",label:"Dashboard",icon:jh,roles:["Admin","Teacher","Student"]},{href:"/app/students",label:"Students",icon:at,roles:["Admin","Teacher","Student"]},{href:"/app/staff",label:"Staff",icon:at,roles:["Admin"]},{href:"/app/classes",label:"Classes",icon:cp,roles:["Admin","Teacher"]},{href:"/app/academics",label:"Academics",icon:wh,roles:["Admin","Teacher","Student"]},{href:"/app/attendance",label:"Attendance",icon:qo,roles:["Admin","Teacher","Student"]},{href:"/app/finance",label:"Finance",icon:ap,roles:["Admin","Student"]},{href:"/app/communication",label:"Communication",icon:Bl,roles:["Admin","Teacher"]},{href:"/app/transport",label:"Transport",icon:Hl,roles:["Admin"]},{href:"/app/inventory",label:"Inventory",icon:lp,roles:["Admin"]},{href:"/app/exams",label:"Exams & Results",icon:op,roles:["Admin","Teacher","Student"]},{href:"/app/events",label:"Events",icon:Un,roles:["Admin","Teacher","Student"]},{href:"/app/leave",label:"Leave",icon:Sh,roles:["Admin","Teacher"]},{href:"/app/id-cards",label:"ID Cards",icon:ip,roles:["Admin"]},{href:"/app/administration",label:"Administration",icon:mp,roles:["Admin"]}],R=async e=>{const t=new URL(bh);t.searchParams.append("v",Date.now().toString());try{const n=await fetch(t.toString(),{method:"POST",mode:"cors",body:JSON.stringify(e)});if(!n.ok){const a=await n.text();throw new Error(`Request failed with status ${n.status}. Response: ${a}`)}const r=await n.json();if(r.error)throw new Error(`Google Apps Script Error: ${r.error}`);return r}catch(n){if(console.error("Full error in gsPost:",n),n instanceof TypeError&&n.message==="Failed to fetch"){const r=`A "Failed to fetch" network error occurred. This is almost always a configuration issue with your Google Apps Script deployment.

Please perform these steps EXACTLY:
1. Open your Google Sheet and go to Extensions > Apps Script.
2. Make sure the Code.gs file contains the LATEST script provided.
3. Click the BLUE "Deploy" button and select "New deployment".
4. For "Who has access", you MUST select "Anyone".
5. Click "Deploy". Authorize if it asks.
6. You will get a NEW Web app URL ending in /exec. COPY this new URL.
7. Paste the NEW URL into the 'constants.tsx' file.

Your current URL might be old or have the wrong permissions. Creating a NEW deployment is essential.`;throw alert(r),new Error(r)}throw n}},V=async e=>{try{const t=await R({action:"read",sheetName:e});if(t.error)throw new Error(t.error);return t}catch(t){throw console.error(`Error fetching from sheet "${e}":`,t),t}},yp=e=>{if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string"){const t=e.trim();if(t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch(n){return console.error("Failed to parse paidItems JSON string:",t,n),[]}if(t.length>0)return t.split(",").map(n=>n.trim())}return[]},Vr=(e,t=100)=>{if(e===null||e<0)return{grade:"N/A",gpa:"0.00",point:0,color:"#a0aec0"};const n=e/t*100;return n>=80?{grade:"A+",gpa:"5.00",point:5,color:"#38a169"}:n>=70?{grade:"A",gpa:"4.00",point:4,color:"#38a169"}:n>=60?{grade:"A-",gpa:"3.50",point:3.5,color:"#ecc94b"}:n>=50?{grade:"B",gpa:"3.00",point:3,color:"#ed8936"}:n>=40?{grade:"C",gpa:"2.00",point:2,color:"#f56565"}:n>=33?{grade:"D",gpa:"1.00",point:1,color:"#f56565"}:{grade:"F",gpa:"0.00",point:0,color:"#e53e3e"}},vp=e=>{let t=0,n=0,r=!1;for(const i of e){const d=Vr(i.marks,i.totalMarks);d.grade==="F"&&(r=!0),i.marks!==null&&(t+=d.point,n++)}if(n===0)return{grade:"N/A",gpa:"0.00",color:"#a0aec0"};if(r)return{grade:"F",gpa:"0.00",color:"#e53e3e"};const a=t/n,l=a.toFixed(2);let o="F",c="#e53e3e";return a>=5?(o="A+",c="#38a169"):a>=4?(o="A",c="#38a169"):a>=3.5?(o="A-",c="#ecc94b"):a>=3?(o="B",c="#ed8936"):a>=2?(o="C",c="#f56565"):a>=1&&(o="D",c="#f56565"),{grade:o,gpa:l,color:c}},Bn={students:null,staff:null,classes:null,users:null,subjects:null,timetable:null,homework:null,exams:null,events:null,leaveRequests:null,academicSessions:null,vehicles:null,inventory:null,notices:null,disciplineIncidents:null,attendance:null,expenses:null,feeStructure:null,feePayments:null,salaryPayments:null,syllabusStatus:null},Wl="madrasa_app_data",Vl="madrasa_app_expiry",Lh=1e3*60*60;async function zh(){console.log("Initializing cache...");try{const e=localStorage.getItem(Wl),t=localStorage.getItem(Vl),n=Date.now();if(e&&t&&n<parseInt(t)){const r=JSON.parse(e);Object.keys(r).forEach(a=>{a in Bn&&(Bn[a]=r[a])}),console.log("Loaded data from LocalStorage (Offline Cache).");return}else console.log("Cache expired or empty. Data will be fetched on demand."),localStorage.removeItem(Wl),localStorage.removeItem(Vl)}catch(e){console.warn("Failed to load from LocalStorage",e)}}function bp(){try{localStorage.setItem(Wl,JSON.stringify(Bn)),localStorage.setItem(Vl,(Date.now()+Lh).toString())}catch(e){console.warn("LocalStorage quota exceeded. Cache not persisted.",e)}}function K(e){return Bn[e]}function ae(e,t){Bn[e]=t,bp()}function O(e){console.log(`Cache invalidated for: ${e}`),Bn[e]=null,bp()}const Fh=async()=>await V("Institution"),Rh=async e=>(await R({action:"create",sheetName:"Institution",data:e}),e),$h=async e=>(await R({action:"update",sheetName:"Institution",id:e.id,data:e}),e),_h=async()=>{let e=K("academicSessions");return e||(e=await V("AcademicSessions"),ae("academicSessions",e)),e},Oh=async e=>{const t={...e,id:`SESS${Date.now()}`,isActive:!1};return await R({action:"create",sheetName:"AcademicSessions",data:t}),O("academicSessions"),t},Uh=async e=>(await R({action:"update",sheetName:"AcademicSessions",id:e.id,data:e}),O("academicSessions"),e),Bh=async e=>{await R({action:"setActiveSession",sheetName:"AcademicSessions",id:e}),O("academicSessions")},an="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXVzZXItcm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNSIvPjxwYXRoIGQ9Ik0yMCAyMWE4IDggMCAwIDAtMTYgMCIvPjwvc3ZnPg==",jp=async()=>{let e=K("users");return e||(e=await V("Users"),ae("users",e)),e},Hh=async(e,t)=>(await jp()).find(a=>a.username.toLowerCase()===e.toLowerCase()&&a.password===t)||null,Wh=async e=>{const t=K("users")??await V("Users"),n=`A${String(t.filter(a=>a.role==="Admin").length+1).padStart(3,"0")}`,r={...e,id:n,photo:e.photo||an};return await R({action:"create",sheetName:"Users",data:r}),O("users"),r},Vh=async e=>(await R({action:"update",sheetName:"Users",id:e.id,data:e}),O("users"),e),ke=async e=>{let t=K("students");return t||(t=await V("Students"),ae("students",t)),e!=null&&e.class&&(t=t.filter(n=>n.class===e.class)),e!=null&&e.section&&(t=t.filter(n=>n.section===e.section)),t},Gh=async e=>{const t=K("students")??await V("Students"),n=`S${String(t.length+1).padStart(3,"0")}`,r={...e,id:n,admissionDate:e.admissionDate||new Date().toISOString().split("T")[0]};return await R({action:"create",sheetName:"Students",data:r}),await R({action:"create",sheetName:"Users",data:{id:n,username:n,password:n.toLowerCase(),name:e.name,role:"Student",photo:e.photo}}),O("students"),O("users"),r},Qh=async e=>(await R({action:"update",sheetName:"Students",id:e.id,data:e}),await R({action:"update",sheetName:"Users",id:e.id,data:{name:e.name,photo:e.photo}}),O("students"),O("users"),e),Je=async()=>{let e=K("staff");return e||(e=await V("Staff"),ae("staff",e)),e},qh=async e=>{const t=K("staff")??await V("Staff"),n=`T${String(t.length+1).padStart(2,"0")}`,r={...e,id:n,joiningDate:e.joiningDate||new Date().toISOString().split("T")[0]};await R({action:"create",sheetName:"Staff",data:r});const a=`Mr${e.name.split(" ").join("")}`;return await R({action:"create",sheetName:"Users",data:{id:n,username:a,password:"password123",name:e.name,role:e.role,photo:e.photo}}),O("staff"),O("users"),r},Yh=async e=>(await R({action:"update",sheetName:"Staff",id:e.id,data:e}),await R({action:"update",sheetName:"Users",id:e.id,data:{name:e.name,photo:e.photo,role:e.role}}),O("staff"),O("users"),e),bt=async()=>{let e=K("classes");return e||(e=await V("Classes"),ae("classes",e)),e},Kh=async e=>{const t=K("classes")??await V("Classes"),n={...e,id:`C${String(t.length+1).padStart(2,"0")}`};return await R({action:"create",sheetName:"Classes",data:n}),O("classes"),n},Zh=async e=>(await R({action:"update",sheetName:"Classes",id:e.id,data:e}),O("classes"),e),wp=async()=>{let e=K("feeStructure");return e||(e=await V("FeeStructure"),ae("feeStructure",e)),e},Np=async()=>{let e=K("feePayments");return e||(e=await V("FeePayments"),ae("feePayments",e)),e},Xh=async()=>{let e=K("salaryPayments");return e||(e=await V("salaryPayments"),ae("salaryPayments",e)),e},Jh=async()=>{let e=K("expenses");return e||(e=await V("Expenses"),ae("expenses",e)),e},eg=async(e,t)=>(await Jh()).filter(r=>{const a=new Date(r.date);return a.getFullYear()===e&&a.getMonth()+1===t}),tg=async e=>{const t={...e,id:`EXP${Date.now()}`,date:new Date().toISOString().split("T")[0]};return await R({action:"create",sheetName:"Expenses",data:t}),O("expenses"),t},ma=async(e,t)=>{const n=new Date(e,t-1).toLocaleString("default",{month:"long"}),[r,a,l]=await Promise.all([ke(),wp(),Np()]);return r.map(o=>{const c=a.filter(v=>String(v.class)===String(o.class)),i=c.reduce((v,N)=>{const g=parseFloat(String(N.amount));return v+(isNaN(g)?0:g)},0),u=l.filter(v=>String(v.id).trim().toLowerCase()===String(o.id).trim().toLowerCase()&&v.monthKey===n).reduce((v,N)=>(yp(N==null?void 0:N.paidItems).forEach(p=>v.add(p)),v),new Set),m=Array.from(u),x=c.map(v=>({type:v.type,amount:parseFloat(String(v.amount))||0,paid:m.includes(v.type)})),b=x.filter(v=>v.paid).reduce((v,N)=>v+N.amount,0);let y="Unpaid";return b<=0?y="Unpaid":b>=i?y="Paid":y="Partially Paid",{studentId:o.id,studentName:o.name,class:o.class,section:o.section,status:y,totalDue:i,totalPaid:b,breakdown:x}})},ng=async(e,t)=>{const n=new Date(e,t-1).toLocaleString("default",{month:"long"}),[r,a]=await Promise.all([Je(),Xh()]);return r.map(l=>{const o=a.find(i=>String(i.id).trim().toLowerCase()===String(l.id).trim().toLowerCase()&&i.monthKey===n),c=parseFloat(String(l.salary))||5e3;return{staffId:l.id,staffName:l.name,role:l.role,salaryAmount:c,status:o?"Paid":"Unpaid",paidAmount:o==null?void 0:o.amount,paymentDate:o==null?void 0:o.date}})},sg=async(e,t,n,r)=>{const a=new Date(n,r-1).toLocaleString("default",{month:"long"}),c=(await Np()).filter(p=>String(p.id).trim().toLowerCase()===String(e).trim().toLowerCase()&&p.monthKey===a).reduce((p,h)=>(yp(h==null?void 0:h.paidItems).forEach(S=>p.add(S)),p),new Set),i=[...new Set([...Array.from(c),...t])],d={monthKey:a,id:e,paidItems:i,date:new Date().toISOString().split("T")[0]};await R({action:"batchDeleteAndCreate",sheetName:"FeePayments",batchData:{deleteFilter:{column:"id",value:e,andColumn:"monthKey",andValue:a},createData:[d]}}),O("feePayments");const[u,m]=await Promise.all([ke(),wp()]),x=u.find(p=>p.id===e);if(!x)throw new Error("Could not find student to recalculate fee status.");const b=m.filter(p=>String(p.class)===String(x.class)),y=b.reduce((p,h)=>{const j=parseFloat(String(h.amount));return p+(isNaN(j)?0:j)},0),v=b.map(p=>({type:p.type,amount:parseFloat(String(p.amount))||0,paid:i.includes(p.type)})),N=v.filter(p=>p.paid).reduce((p,h)=>p+h.amount,0);let g="Unpaid";return N<=0?g="Unpaid":N>=y?g="Paid":g="Partially Paid",{studentId:x.id,studentName:x.name,class:x.class,section:x.section,status:g,totalDue:y,totalPaid:N,breakdown:v}},rg=async(e,t,n,r)=>{const a=new Date(n,r-1).toLocaleString("default",{month:"long"}),l={monthKey:a,id:e,amount:t,date:new Date().toISOString().split("T")[0]};await R({action:"batchDeleteAndCreate",sheetName:"SalaryPayments",batchData:{deleteFilter:{column:"id",value:e,andColumn:"monthKey",andValue:a},createData:[l]}}),O("salaryPayments");const o=(await Je()).find(i=>i.id===e);if(!o)throw new Error("Could not find staff member to update salary status.");const c=parseFloat(String(o.salary))||5e3;return{staffId:o.id,staffName:o.name,role:o.role,salaryAmount:c,status:"Paid",paidAmount:t,paymentDate:l.date}},ag=async()=>{const[e,t,n]=await Promise.all([ke(),Je(),ma(new Date().getFullYear(),new Date().getMonth()+1)]),r=n.filter(a=>a.status!=="Paid").length;return{totalStudents:e.length,totalStaff:t.length,unpaidStudentsCount:r}},Xo=async()=>{let e=K("timetable");return e||(e=await V("Timetable"),ae("timetable",e)),e},lg=async e=>{const t={...e,id:`TT${Date.now()}`};return await R({action:"create",sheetName:"Timetable",data:t}),O("timetable"),t},og=async e=>(await R({action:"update",sheetName:"Timetable",criteria:{id:e.id},data:e}),O("timetable"),e),ig=async()=>{let e=K("subjects");return e||(e=await V("Subjects"),ae("subjects",e)),e},cg=async e=>{const t={...e,id:`SUB${Date.now()}`};return await R({action:"create",sheetName:"Subjects",data:t}),O("subjects"),t},dg=async e=>(await R({action:"update",sheetName:"Subjects",criteria:{id:e.id},data:e}),O("subjects"),e),Sp=async()=>{let e=K("homework");return e||(e=await V("Homework"),ae("homework",e)),e},ug=async e=>{const t={...e,id:`HW${Date.now()}`};return await R({action:"create",sheetName:"Homework",data:t}),O("homework"),t},pg=async e=>(await R({action:"update",sheetName:"Homework",criteria:{id:e.id},data:e}),O("homework"),e),Ls=e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);if(isNaN(t.getTime()))return e;const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${a}`},mg=async(e,t)=>{let n=K("attendance");n||(n=await V("Attendance"),ae("attendance",n));const r=Ls(t),a=n.filter(d=>Ls(d.date)===r&&String(d.classId)===String(e)),l=(await bt()).find(d=>String(d.id)===String(e));if(!l)return[];const o=await ke({class:l.name,section:l.section}),c=new Map(a.map(d=>[d.studentId,d]));return o.map(d=>{const u=c.get(d.id);return{studentId:d.id,studentName:d.name,status:u?u.status:"Present",remark:u?u.remark:""}}).sort((d,u)=>d.studentName.localeCompare(u.studentName))},xg=async e=>{let t=K("attendance");t||(t=await V("Attendance"),ae("attendance",t));const n=Ls(e),r=t.filter(c=>Ls(c.date)===n&&c.classId==="STAFF"),a=await Je(),l=new Map(r.map(c=>[c.studentId,c]));return a.map(c=>{const i=l.get(c.id);return{studentId:c.id,studentName:c.name,status:i?i.status:"Present",remark:i?i.remark:""}}).sort((c,i)=>c.studentName.localeCompare(i.studentName))},kp=async e=>{let t=K("attendance");t||(t=await V("Attendance"),ae("attendance",t));const n=t.filter(l=>String(l.studentId)===String(e)),r=n.filter(l=>l.status==="Present"||l.status==="Late").length,a=n.filter(l=>l.status==="Absent").length;return n.length===0?{totalWorkingDays:0,present:0,absent:0}:{totalWorkingDays:n.length,present:r,absent:a}},wc=async(e,t,n)=>{const r=Ls(t),a=n.map(l=>({...l,classId:e,date:r}));await R({action:"batchDeleteAndCreate",sheetName:"Attendance",batchData:{deleteFilter:{column:"date",value:r,andColumn:"classId",andValue:e},createData:a}}),O("attendance")},Cp=async()=>{let e=K("disciplineIncidents");return e||(e=await V("DisciplineIncidents"),ae("disciplineIncidents",e)),e},fg=async e=>{const t={...e,id:`D${Date.now()}`};return await R({action:"create",sheetName:"DisciplineIncidents",data:t}),O("disciplineIncidents"),t},hg=async()=>{let e=K("vehicles");return e||(e=await V("Vehicles"),e=e.map(t=>{if(typeof t.studentIds=="string")try{return{...t,studentIds:JSON.parse(t.studentIds)}}catch{return{...t,studentIds:[]}}return{...t,studentIds:t.studentIds||[]}}),ae("vehicles",e)),e},gg=async e=>{const t={...e,id:`V${Date.now()}`,studentIds:e.studentIds||[]},n={...t,studentIds:JSON.stringify(t.studentIds)};return await R({action:"create",sheetName:"Vehicles",data:n}),O("vehicles"),t},Ep=async e=>{const t={...e,studentIds:JSON.stringify(e.studentIds||[])};return await R({action:"update",sheetName:"Vehicles",id:e.id,data:t}),O("vehicles"),e},yg=async()=>{let e=K("inventory");return e||(e=await V("Inventory"),ae("inventory",e)),e},vg=async e=>{const t={...e,id:`INV${Date.now()}`};return await R({action:"create",sheetName:"Inventory",data:t}),O("inventory"),t},bg=async e=>(await R({action:"update",sheetName:"Inventory",id:e.id,data:e}),O("inventory"),e),xa=async()=>{let e=K("exams");return e||(e=await V("Exams"),ae("exams",e)),e},jg=async e=>{const t={...e,id:`EX${Date.now()}`};return await R({action:"create",sheetName:"Exams",data:t}),O("exams"),t},Mp=async e=>(await R({action:"update",sheetName:"Exams",id:e.id,data:e}),O("exams"),e),Jo=async(e,t)=>{const r=(await V("Results")).filter(l=>l.examId===e);return(await ke({class:t})).map(l=>{const o=r.find(i=>i.studentId===l.id),c=i=>{const d=parseFloat(i);return isNaN(d)?void 0:d};return{studentId:l.id,studentName:l.name,marks:o?c(o.marks)??null:null,ct:o?c(o.ct):void 0,mcq:o?c(o.mcq):void 0,cq:o?c(o.cq):void 0,viva:o?c(o.viva):void 0}})},wg=async(e,t)=>{const n=t.map(r=>({...r,examId:e}));await R({action:"batchDeleteAndCreate",sheetName:"Results",batchData:{deleteFilter:{column:"examId",value:e},createData:n}})},Ng=async(e,t,n)=>{const r=await xa(),a=await ke(),l=a.find(p=>p.id.toUpperCase()===n.toUpperCase()&&p.class===t);if(!l)return null;const o=r.filter(p=>p.title===e&&p.class===t);if(o.length===0)return null;const c=await V("Results"),i={};o.forEach(p=>{const h=c.filter(S=>S.examId===p.id);let j=0;h.forEach(S=>{const w=parseFloat(String(S.marks));!isNaN(w)&&w>j&&(j=w)}),i[p.subject]=j});const d=a.filter(p=>p.class===t).map(p=>p.id),u=new Map;d.forEach(p=>u.set(p,0)),o.forEach(p=>{c.filter(j=>j.examId===p.id).forEach(j=>{if(u.has(j.studentId)){const S=parseFloat(String(j.marks));isNaN(S)||u.set(j.studentId,(u.get(j.studentId)||0)+S)}})});const x=Array.from(u.entries()).sort((p,h)=>h[1]-p[1]).findIndex(p=>p[0]===l.id),b=x!==-1?x+1:void 0,y=[];for(const p of o){const h=c.find(C=>C.examId===p.id&&C.studentId.toUpperCase()===n.toUpperCase()),j=C=>{const P=parseFloat(C);return isNaN(P)?void 0:P},S=j(h==null?void 0:h.marks),w={ct:parseFloat(String(p.totalMarksCT||0)),mcq:parseFloat(String(p.totalMarksMCQ||0)),cq:parseFloat(String(p.totalMarksCQ||0)),viva:parseFloat(String(p.totalMarksViva||0))},E=w.ct+w.mcq+w.cq+w.viva||100;y.push({subject:p.subject,marks:S??null,totalMarks:E,ct:j(h==null?void 0:h.ct),mcq:j(h==null?void 0:h.mcq),cq:j(h==null?void 0:h.cq),viva:j(h==null?void 0:h.viva),highestMark:i[p.subject]||0,fullMarks:w})}if(y.length===0)return null;const v=y.reduce((p,h)=>p+(h.marks||0),0),N=y.reduce((p,h)=>p+h.totalMarks,0),g=N>0?v/N*100:0;return{studentName:l.name,studentId:l.id,className:l.class,section:l.section,group:l.group,guardianName:l.guardianName,examTitle:e,results:y,totalMarksObtained:v,overallTotalMarks:N,percentage:g,rank:b,totalStudents:d.length}},ei=async()=>{let e=K("events");return e||(e=await V("Events"),ae("events",e)),e},Sg=async e=>{const t={...e,id:`EVT${Date.now()}`};return await R({action:"create",sheetName:"Events",data:t}),O("events"),t},kg=async e=>{const t=(await ke()).find(N=>N.id===e);if(!t)return null;const[n,r,a,l,o,c]=await Promise.all([ma(new Date().getFullYear(),new Date().getMonth()+1),xa(),Cp(),ei(),Xo(),Sp()]),i=n.find(N=>N.studentId===e),d=a.filter(N=>N.studentId===e),u=o.filter(N=>N.class===t.class),m=c.filter(N=>N.class===t.class);let x=[];for(const N of(r||[]).filter(g=>g.class===t.class)){const p=(await Jo(N.id,N.class)).find(h=>h.studentId===e);p&&x.push({examId:N.id,examTitle:N.title,subject:N.subject,marks:p.marks})}const b=new Date;b.setHours(0,0,0,0);const y=(r||[]).filter(N=>N.class===t.class&&new Date(N.date)>=b).sort((N,g)=>new Date(N.date).getTime()-new Date(g.date).getTime());return{student:t,attendance:{present:15,absent:2,late:1,total:18},fees:{paid:(i==null?void 0:i.totalPaid)||0,due:((i==null?void 0:i.totalDue)||0)-((i==null?void 0:i.totalPaid)||0),status:(i==null?void 0:i.status)||"Unpaid"},results:x,discipline:d,events:l,timetable:u,homework:m,upcomingExams:y}},Pp=async()=>{let e=K("leaveRequests");return e||(e=await V("LeaveRequests"),ae("leaveRequests",e)),e},Cg=async e=>{const t={...e,id:`LR${Date.now()}`,status:"Pending",appliedDate:new Date().toISOString().split("T")[0]};return await R({action:"create",sheetName:"LeaveRequests",data:t}),O("leaveRequests"),t},Eg=async(e,t)=>(await R({action:"update",sheetName:"LeaveRequests",id:e,data:{status:t}}),O("leaveRequests"),(await Pp()).find(a=>a.id===e)),Ip=f.createContext(void 0),Mg=({children:e})=>{const[t,n]=f.useState(null),r=Go(),a=async(o,c)=>{const i=await Hh(o,c);if(i)n(i),i.role==="Student"?r("/app/student-dashboard"):r("/app/dashboard");else throw new Error("Invalid credentials. Please try again.")},l=()=>{n(null),r("/login")};return s.jsx(Ip.Provider,{value:{user:t,login:a,logout:l},children:e})},Ce=()=>{const e=f.useContext(Ip);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Dp=f.createContext(void 0),Pg=({children:e})=>{const[t,n]=f.useState(()=>{const a=localStorage.getItem("theme");return a==="light"||a==="dark"?a:"dark"});f.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)},[t]);const r=()=>{n(a=>a==="dark"?"light":"dark")};return s.jsx(Dp.Provider,{value:{theme:t,toggleTheme:r},children:e})},Tp=()=>{const e=f.useContext(Dp);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Ap=()=>Ah.map(e=>({...e,roles:[...e.roles]}));let ti=Ap();const Gl=new Set,Lp=()=>{Gl.forEach(e=>e())},Ig=e=>(Gl.add(e),()=>Gl.delete(e)),Gr=()=>ti,Dg=e=>{ti=e,Lp()},Tg=()=>{ti=Ap(),Lp()},ni=()=>{const[e,t]=f.useState(Gr());return f.useEffect(()=>Ig(()=>{t([...Gr()])}),[]),e},Ag="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMzOGIyYWMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjEgMTZWOEEyIDIgMCAwIDAtMS0xLjczbC03LTRhMiAyIDAgMCAwLTIgMGwtNyA0QTIgMiAwIDAgMCAzIDh2OGEyIDIgMCAwIDAgMSA1LjczbDcgNGEyIDIgMCAwIDAgMiAwbDctNEEyIDIgMCAwIDAgMjEgMTZ6Ij48L3BhdGg+PHBvbHlsaW5lIHBvaW50cz0iMy4yNyA2Ljk2IDEyIDEyLjAxIDIwLjczIDYuOTYiPjwvcG9seWxpbmU+PGxpbmUgeDE9IjEyIiB5MT0iMjIuMDgiIHgyPSIxMiIgeTI9IjEyIj48L2xpbmU+PC9zdmc+",Ql={id:"INST-01",name:"Madrasa Modern System",tagline:"Excellence in Education",logo:Ag,address:"123 Islamic Center, Knowledge City, 90210",phone:"(123) 456-7890",email:"contact@madrasams.com"};let zs={...Ql};const Lg=async()=>{try{let t=(await Fh())[0]||null;t||(console.warn("Institution sheet is empty. Creating a default entry."),t=await Rh(Ql)),zs=t}catch(e){console.error("Failed to initialize institution store from Google Sheet, using defaults.",e),zs={...Ql}}},We=()=>zs,zg=async e=>{await $h(e),zs=e},Fg=({isOpen:e,onClose:t})=>{const n=dn(),{user:r}=Ce(),a=ni(),l=r?a.filter(o=>o.roles.includes(r.role)):[];return s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 md:hidden",onClick:t}),s.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-primary p-4 border-r border-secondary transform transition-transform duration-300 ease-in-out
        ${e?"translate-x-0":"-translate-x-full"}
        md:relative md:translate-x-0 md:block
      `,children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-xl font-bold text-white",children:"I"})}),s.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"IICM"})]}),s.jsx("button",{onClick:t,className:"md:hidden text-text-secondary hover:text-text-primary",children:s.jsx(vt,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"h-[calc(100vh-100px)] overflow-y-auto",children:s.jsx("ul",{children:l.map(o=>s.jsx("li",{className:"mb-1",children:s.jsxs(hh,{to:o.href,onClick:()=>{window.innerWidth<768&&t&&t()},className:`flex items-center px-3 py-2.5 rounded-lg transition-colors duration-200 ${n.pathname.startsWith(o.href)?"bg-accent text-white":"text-text-secondary hover:bg-secondary hover:text-text-primary"}`,children:[s.jsx(o.icon,{className:"w-5 h-5 mr-3"}),s.jsx("span",{className:"font-medium",children:o.label})]})},o.href))})})]})]})},Rg=({onMenuClick:e})=>{const{user:t,logout:n}=Ce(),{theme:r,toggleTheme:a}=Tp();return s.jsxs("header",{className:"bg-primary p-4 flex justify-between md:justify-end items-center border-b border-secondary sticky top-0 z-40",children:[e&&s.jsx("button",{onClick:e,className:"md:hidden p-2 text-text-primary hover:bg-secondary rounded-md",children:s.jsx(Th,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:a,className:"p-2 rounded-full text-text-secondary hover:text-accent hover:bg-secondary transition-colors",title:r==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:r==="dark"?s.jsx(fp,{className:"w-5 h-5"}):s.jsx(hp,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3 border-l border-secondary pl-4",children:[s.jsx("img",{src:t==null?void 0:t.photo,alt:t==null?void 0:t.name,className:"w-8 h-8 md:w-10 md:h-10 rounded-full object-cover border border-secondary"}),s.jsxs("div",{className:"hidden md:block",children:[s.jsx("p",{className:"font-semibold text-text-primary text-sm",children:t==null?void 0:t.name}),s.jsx("p",{className:"text-xs text-text-secondary",children:t==null?void 0:t.role})]}),s.jsx("button",{onClick:n,className:"p-2 text-text-secondary hover:text-red-400 transition-colors",title:"Logout",children:s.jsx(up,{className:"w-5 h-5"})})]})]})]})},de=({roles:e,children:t})=>{const{user:n}=Ce();return n?e.includes(n.role)?t?s.jsx(s.Fragment,{children:t}):s.jsx(Qo,{}):s.jsx(qt,{to:"/unauthorized",replace:!0}):s.jsx(qt,{to:"/login",replace:!0})},$g=()=>{const{user:e,logout:t}=Ce(),{theme:n,toggleTheme:r}=Tp();return s.jsxs("header",{className:"bg-primary p-4 flex justify-between items-center border-b border-secondary sticky top-0 z-40",children:[s.jsx("h1",{className:"text-lg md:text-xl font-bold text-text-primary truncate mr-2",children:"Student Portal"}),s.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[s.jsx("button",{onClick:r,className:"p-2 rounded-full text-text-secondary hover:text-accent hover:bg-secondary transition-colors",title:n==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:n==="dark"?s.jsx(fp,{className:"w-5 h-5"}):s.jsx(hp,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 border-l border-secondary pl-2 md:pl-4",children:[s.jsx("img",{src:e==null?void 0:e.photo,alt:e==null?void 0:e.name,className:"w-8 h-8 rounded-full object-cover border border-secondary"}),s.jsxs("div",{className:"hidden md:block",children:[s.jsx("p",{className:"font-semibold text-text-primary text-sm",children:e==null?void 0:e.name}),s.jsx("p",{className:"text-xs text-text-secondary",children:"Student"})]}),s.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-red-400",title:"Logout",children:s.jsx(up,{className:"w-5 h-5"})})]})]})]})},_g=()=>s.jsxs("div",{className:"flex flex-col h-screen bg-background font-sans",children:[s.jsx($g,{}),s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-background p-4 md:p-6 transition-all duration-300",children:s.jsx(Qo,{})})]}),Wa=({title:e,value:t,icon:n,color:r})=>s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg flex items-center",children:[s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mr-6 ${r}`,children:s.jsx(n,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium uppercase",children:e}),s.jsx("p",{className:"text-3xl font-bold text-text-primary",children:t})]})]}),Nc=e=>{const t=e.getDate(),n=e.getMonth(),r=e.getFullYear(),a=["Boishakh","Jyoishtho","Asharh","Srabon","Bhadro","Ashshin","Kartik","Ogrohayon","Poush","Magh","Falgun","Chaitra"],l=[14,15,15,16,16,16,16,15,15,14,13,15];let o=0,c=0,i=n>3||n===3&&t>=14?r-593:r-594;if(t>=l[n])n<3?o=n+9:o=n-3,c=t-l[n]+1;else{n<3?o=n+8:o=n-4;let u=n===0?11:n-1,m=l[u];c=new Date(r,n,0).getDate()-m+t+1}const d=u=>u.toString().replace(/\d/g,m=>""[parseInt(m)]);return`${a[o]} ${d(c)}, ${d(i)}`},Sc=e=>{const t=new Date(e);return t.setDate(t.getDate()-1),new Intl.DateTimeFormat("en-US-u-ca-islamic-umalqura",{day:"numeric",month:"long",year:"numeric"}).format(t)},kc=(e,t)=>{const n=e.getMonth()+1,r=e.getDate(),a=`${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,l={"02-21":"Int'l Mother Language Day","03-17":"Sheikh Mujib's Birthday","03-26":"Independence Day","04-14":"Pohela Boishakh (Bengali New Year)","05-01":"May Day","08-15":"National Mourning Day","12-16":"Victory Day","12-25":"Christmas Day"};return l[a]?l[a]:t.includes("Ramadan 1,")?"Start of Ramadan":t.includes("Shawwal 1,")?"Eid ul-Fitr":t.includes("Dhu al-Hijjah 10,")?"Eid ul-Adha":t.includes("Rabi I 12,")?"Eid-e-Miladunnabi":t.includes("Muharram 10,")?"Ashura":t.includes("Rajab 27,")?"Shab-e-Meraj":t.includes("Shaban 15,")?"Shab-e-Barat":null},ts=e=>{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]},Og=()=>{const[e,t]=f.useState(null),[n,r]=f.useState([]),[a,l]=f.useState(!0),[o]=f.useState(We()),[c,i]=f.useState(new Date),[d,u]=f.useState(null);f.useEffect(()=>{(async()=>{try{l(!0);const[j,S]=await Promise.all([ag(),ei()]);t(j),r(S.filter(w=>w.date))}catch(j){console.error("Failed to fetch dashboard data",j)}finally{l(!1)}})()},[]);const m=f.useMemo(()=>{const h=c.getFullYear(),j=c.getMonth();return new Date(h,j+1,0).getDate()},[c]),x=f.useMemo(()=>{const h=c.getFullYear(),j=c.getMonth();return new Date(h,j,1).getDay()},[c]),b=f.useMemo(()=>{const h=[],j=c.getFullYear(),S=c.getMonth();for(let w=0;w<x;w++)h.push(null);for(let w=1;w<=m;w++)h.push(new Date(j,S,w));return h},[c,m,x]),y=()=>i(new Date(c.getFullYear(),c.getMonth()-1,1)),v=()=>i(new Date(c.getFullYear(),c.getMonth()+1,1)),N=h=>{switch(h){case"Academic":return"bg-blue-500";case"Sports":return"bg-green-500";case"Cultural":return"bg-purple-500";case"Holiday":return"bg-red-500";default:return"bg-gray-500"}},g=f.useMemo(()=>{const h=new Date;return h.setHours(0,0,0,0),n.filter(j=>new Date(j.date)>=h).sort((j,S)=>new Date(j.date).getTime()-new Date(S.date).getTime())},[n]),p=h=>{const j=Sc(h),S=Nc(h),w=kc(h,j),E=ts(h.toISOString()),C=n.filter(P=>ts(P.date)===E);u({date:h,hijri:j,bengali:S,holiday:w,events:C})};return a?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl",children:"Loading Dashboard..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(Wa,{title:"Total Students",value:(e==null?void 0:e.totalStudents)??0,icon:at,color:"bg-blue-500"}),s.jsx(Wa,{title:"Total Staff",value:(e==null?void 0:e.totalStaff)??0,icon:Ko,color:"bg-green-500"}),s.jsx(Wa,{title:"Unpaid Students",value:(e==null?void 0:e.unpaidStudentsCount)??0,icon:ap,color:"bg-red-500"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-secondary pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-primary",children:[s.jsx(Un,{className:"w-6 h-6 text-accent"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Academic Calendar"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:y,className:"text-text-secondary hover:text-accent font-bold text-xl",children:"<"}),s.jsx("span",{className:"text-lg font-bold text-text-primary w-40 text-center",children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:v,className:"text-text-secondary hover:text-accent font-bold text-xl",children:">"})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2 text-center mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>s.jsx("div",{className:"font-bold text-text-secondary text-sm",children:h},h))}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:b.map((h,j)=>{if(!h)return s.jsx("div",{className:"h-32 bg-transparent"},`empty-${j}`);const S=ts(h.toISOString()),w=Sc(h),E=w.split(",")[0],C=Nc(h),P=kc(h,w),k=n.filter(F=>ts(F.date)===S),L=k.length>0,A=h.toDateString()===new Date().toDateString(),$=h.getDay()===5;return s.jsxs("div",{onClick:()=>p(h),className:`h-32 p-1 rounded-md border border-secondary flex flex-col relative overflow-hidden transition-all hover:bg-secondary/50 cursor-pointer
                                        ${A?"ring-2 ring-accent bg-secondary/30":""}
                                        ${$?"bg-red-900/10":""}
                                    `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`font-bold text-lg ${$?"text-red-400":"text-text-primary"}`,children:h.getDate()}),L&&s.jsx("div",{className:"flex gap-0.5 pt-1",children:k.slice(0,3).map((F,U)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${N(F.type)}`,title:F.title},U))})]}),s.jsxs("div",{className:"flex flex-col text-[10px] text-text-secondary leading-tight opacity-90 gap-0.5",children:[s.jsx("span",{className:"text-green-600/90 font-medium truncate",children:E}),s.jsx("span",{className:"font-bengali text-yellow-600/90 truncate",children:C.split(",")[0]})]}),(P||L)&&s.jsx("div",{className:"mt-auto pt-1 w-full text-[9px] text-center font-bold",children:P?s.jsx("span",{className:"text-red-300 bg-red-500/20 block rounded-sm px-1 py-0.5 truncate",children:P}):s.jsx("span",{className:"text-blue-300 bg-blue-500/20 block rounded-sm px-1 py-0.5 truncate",children:k[0].title})})]},S)})}),s.jsxs("div",{className:"mt-4 flex gap-4 text-xs text-text-secondary justify-center flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})," Academic"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})," Sports"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})," Cultural"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})," Holiday"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-red-400 font-bold",children:"Fri"})," Weekend"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[s.jsx(Un,{className:"w-5 h-5 text-accent"})," Upcoming Events"]}),s.jsx("span",{className:"text-xs bg-accent text-white px-2 py-1 rounded-full",children:g.length})]}),s.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:g.length===0?s.jsx("p",{className:"text-text-secondary text-sm",children:"No upcoming events scheduled."}):g.map(h=>s.jsxs("div",{className:`p-4 bg-secondary rounded-md border-l-4 ${N(h.type).replace("bg-","border-")}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:h.title}),s.jsx("span",{className:"text-xs text-text-secondary bg-primary px-2 py-1 rounded",children:ts(h.date)})]}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:h.description}),s.jsx("span",{className:`mt-2 inline-block px-2 py-0.5 text-[10px] rounded-full text-white ${N(h.type)} opacity-80`,children:h.type})]},h.id))})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Institution Details"}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("img",{src:o.logo,alt:"logo",className:"w-16 h-16 rounded-full mr-4 bg-white p-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text-primary text-lg",children:o.name}),s.jsx("p",{className:"text-text-secondary text-sm",children:o.tagline})]})]}),s.jsxs("div",{className:"text-sm text-text-secondary space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Address:"})," ",o.address]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",o.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",o.email]})]})]}),s.jsx("div",{className:"bg-primary p-6 rounded-lg shadow-lg"})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg shadow-2xl w-full max-w-md border border-secondary",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-secondary",children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Date Details"}),s.jsx("button",{onClick:()=>u(null),className:"text-text-secondary hover:text-red-400",children:s.jsx(vt,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"text-center bg-secondary p-4 rounded-lg",children:[s.jsx("h4",{className:"text-3xl font-bold text-accent",children:d.date.getDate()}),s.jsx("p",{className:"text-lg text-text-primary",children:d.date.toLocaleString("default",{month:"long",year:"numeric"})}),s.jsx("p",{className:"text-text-secondary",children:d.date.toLocaleString("default",{weekday:"long"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-green-400 font-semibold block mb-1",children:"Hijri Date"}),s.jsx("p",{className:"text-sm text-text-primary",children:d.hijri})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-yellow-400 font-semibold block mb-1",children:"Bengali Date"}),s.jsx("p",{className:"text-sm text-text-primary font-bengali",children:d.bengali})]})]}),s.jsxs("div",{className:"border-t border-secondary pt-4",children:[s.jsx("h5",{className:"font-semibold text-text-primary mb-2",children:"Holidays & Events"}),d.holiday?s.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg mb-2",children:s.jsxs("p",{className:"text-red-400 font-bold flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),d.holiday]})}):d.events.length===0&&s.jsx("p",{className:"text-text-secondary text-sm italic",children:"No holidays or events for this day."}),d.events.map(h=>s.jsxs("div",{className:`p-3 rounded-lg mb-2 border ${N(h.type).replace("bg-","border-").replace("500","500/50")} bg-secondary`,children:[s.jsx("p",{className:"text-text-primary font-semibold",children:h.title}),s.jsx("p",{className:"text-xs text-text-secondary",children:h.description}),s.jsx("span",{className:`inline-block mt-1 text-[10px] px-2 py-0.5 rounded-full text-white ${N(h.type)}`,children:h.type})]},h.id))]})]})]})})]})},Ug=({students:e,onEdit:t,onView:n,onPrint:r})=>{const{user:a}=Ce();return s.jsx("div",{className:"overflow-x-auto bg-primary rounded-lg shadow-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Class"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Guardian Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Guardian Phone"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(l=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap flex items-center gap-3",children:[s.jsx("img",{src:l.photo,alt:l.name,className:"w-8 h-8 rounded-full object-cover"}),l.name]}),s.jsx("td",{className:"px-6 py-4",children:l.id}),s.jsxs("td",{className:"px-6 py-4",children:[l.class," - ",l.section,l.group&&s.jsxs("span",{className:"block text-xs text-text-secondary",children:["(",l.group,")"]})]}),s.jsx("td",{className:"px-6 py-4",children:l.guardianName}),s.jsx("td",{className:"px-6 py-4",children:l.guardianPhone}),s.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[s.jsx("button",{onClick:()=>n(l),className:"p-1.5 bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 rounded",title:"View Profile",children:s.jsx(gp,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(l),className:"p-1.5 bg-green-500/10 text-green-400 hover:bg-green-500/20 rounded",title:"Print Profile",children:s.jsx(yt,{className:"w-4 h-4"})}),(a==null?void 0:a.role)==="Admin"&&s.jsx("button",{onClick:()=>t(l),className:"p-1.5 bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20 rounded",title:"Edit",children:s.jsx(Xe,{className:"w-4 h-4"})})]})]},l.id))})]})})},Cc=35*1024,Bg=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[a,l]=f.useState({name:"",class:"",section:"",group:"",guardianName:"",guardianPhone:"",photo:"",address:"",gender:"Male",bloodGroup:"",fathersName:"",mothersName:"",dob:"",birthCertificateNo:"",previousEducation:"",permanentAddress:"",admissionDate:new Date().toISOString().split("T")[0]}),[o,c]=f.useState(null);if(f.useEffect(()=>{r?(l(r),c(r.photo)):(l({name:"",class:"",section:"",group:"",guardianName:"",guardianPhone:"",photo:"",address:"",gender:"Male",bloodGroup:"",fathersName:"",mothersName:"",dob:"",birthCertificateNo:"",previousEducation:"",permanentAddress:"",admissionDate:new Date().toISOString().split("T")[0]}),c(an))},[r]),!e)return null;const i=m=>{l({...a,[m.target.name]:m.target.value})},d=m=>{var b;const x=(b=m.target.files)==null?void 0:b[0];if(x){if(x.size>Cc){alert(`File is too large. Please select an image smaller than ${Cc/1024}KB to avoid errors.`);return}const y=new FileReader;y.onloadend=()=>{const v=y.result;l(N=>({...N,photo:v})),c(v)},y.readAsDataURL(x)}},u=m=>{m.preventDefault(),n(r?{...r,...a}:a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-4xl h-[90vh] overflow-y-auto",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Student"]}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"w-full md:w-1/4 space-y-4 flex flex-col items-center",children:[s.jsx("img",{src:o||an,alt:"preview",className:"w-32 h-32 rounded-full object-cover border-2 border-accent"}),s.jsxs("div",{className:"w-full text-center",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"text-sm text-text-secondary w-full"}),s.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Max Image Size: 35KB"})]})]}),s.jsxs("div",{className:"w-full md:w-3/4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("h3",{className:"col-span-2 text-lg font-semibold text-accent border-b border-secondary pb-1 mt-2",children:"Student Information"}),s.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:a.name,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary col-span-2",required:!0}),s.jsxs("select",{name:"gender",value:a.gender,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",children:[s.jsx("option",{value:"Male",children:"Male"}),s.jsx("option",{value:"Female",children:"Female"}),s.jsx("option",{value:"Other",children:"Other"})]}),s.jsx("input",{type:"text",name:"bloodGroup",placeholder:"Blood Group",value:a.bloodGroup,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Date of Birth"}),s.jsx("input",{type:"date",name:"dob",value:a.dob,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary w-full"})]}),s.jsx("input",{type:"text",name:"birthCertificateNo",placeholder:"Birth Certificate No.",value:a.birthCertificateNo,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsx("h3",{className:"col-span-2 text-lg font-semibold text-accent border-b border-secondary pb-1 mt-4",children:"Family Information"}),s.jsx("input",{type:"text",name:"fathersName",placeholder:"Father's Name",value:a.fathersName,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsx("input",{type:"text",name:"mothersName",placeholder:"Mother's Name",value:a.mothersName,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsx("input",{type:"text",name:"guardianName",placeholder:"Guardian Name",value:a.guardianName,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"tel",name:"guardianPhone",placeholder:"Guardian Phone",value:a.guardianPhone,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("h3",{className:"col-span-2 text-lg font-semibold text-accent border-b border-secondary pb-1 mt-4",children:"Address Details"}),s.jsx("textarea",{name:"address",placeholder:"Present / Temporary Address",value:a.address,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",rows:2}),s.jsx("textarea",{name:"permanentAddress",placeholder:"Permanent Address",value:a.permanentAddress,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",rows:2}),s.jsx("h3",{className:"col-span-2 text-lg font-semibold text-accent border-b border-secondary pb-1 mt-4",children:"Academic Details"}),s.jsxs("div",{className:"flex gap-2 col-span-2",children:[s.jsx("input",{type:"text",name:"class",placeholder:"Class",value:a.class,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary flex-1",required:!0}),s.jsx("input",{type:"text",name:"section",placeholder:"Section",value:a.section,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary w-24",required:!0}),s.jsx("input",{type:"text",name:"group",placeholder:"Group (e.g. Science)",value:a.group,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary flex-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Admission Date"}),s.jsx("input",{type:"date",name:"admissionDate",value:a.admissionDate,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary w-full",required:!0})]}),s.jsx("input",{type:"text",name:"previousEducation",placeholder:"Previous Educational History",value:a.previousEducation,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4 pb-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Student"})]})]})]})})},Dn=e=>{if(!e)return"-";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]},si=(e,t)=>{const n=We(),r=window.open("","_blank");if(!r){alert("Please allow popups to print.");return}const a=t==="student",l=e,o=e,c=`
        <html>
        <head>
            <title>${e.name} - Profile</title>
            <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Cinzel:wght@700&display=swap" rel="stylesheet">
            <style>
                @media print {
                    @page { size: A4; margin: 0; }
                    body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                }
                body { font-family: 'Roboto', sans-serif; background: #fff; color: #333; margin: 0; padding: 20px; }
                .container { width: 190mm; margin: 0 auto; border: 2px solid #1E5631; padding: 20px; position: relative; min-height: 270mm; box-sizing: border-box; }
                
                .header { text-align: center; border-bottom: 2px solid #D4AF37; padding-bottom: 15px; margin-bottom: 20px; }
                .logo { width: 80px; height: 80px; display: block; margin: 0 auto 10px; }
                .inst-name { font-family: 'Cinzel', serif; font-size: 24px; color: #1E5631; font-weight: bold; text-transform: uppercase; }
                .inst-addr { font-size: 12px; color: #555; margin-top: 5px; }
                
                .profile-header { display: flex; gap: 20px; margin-bottom: 30px; align-items: flex-start; }
                .photo-box { width: 120px; height: 140px; border: 1px solid #ccc; padding: 3px; }
                .photo-box img { width: 100%; height: 100%; object-fit: cover; }
                
                .main-info { flex: 1; }
                .name { font-size: 26px; font-weight: bold; color: #1E5631; margin: 0 0 5px 0; }
                .role { display: inline-block; background: #D4AF37; color: #fff; padding: 4px 12px; border-radius: 4px; font-size: 14px; font-weight: bold; text-transform: uppercase; }
                
                .section-title { font-size: 16px; font-weight: bold; color: #1E5631; border-bottom: 1px solid #ccc; margin: 20px 0 10px 0; padding-bottom: 5px; text-transform: uppercase; }
                
                .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 14px; }
                .row { display: flex; border-bottom: 1px dotted #eee; padding-bottom: 3px; }
                .label { width: 140px; font-weight: bold; color: #666; }
                .val { flex: 1; font-weight: 500; color: #000; }
                
                .footer { position: absolute; bottom: 20px; left: 20px; right: 20px; text-align: center; font-size: 10px; color: #999; border-top: 1px solid #eee; padding-top: 10px; }
            </style>
        </head>
        <body>
            <div class="container">
                <div class="header">
                    <img src="${n.logo}" class="logo"/>
                    <div class="inst-name">${n.name}</div>
                    <div class="inst-addr">${n.address} | ${n.phone}</div>
                </div>

                <div class="profile-header">
                    <div class="photo-box">
                        <img src="${e.photo}" />
                    </div>
                    <div class="main-info">
                        <h1 class="name">${e.name}</h1>
                        <span class="role">${a?"Student":o.role}</span>
                        <div style="margin-top: 10px; font-size: 14px;">
                            ID Number: <strong>${e.id}</strong><br/>
                            ${a?`Class: <strong>${l.class} - ${l.section}</strong>`:`Joined: <strong>${Dn(o.joiningDate)}</strong>`}
                        </div>
                    </div>
                </div>

                <div class="section-title">Personal Information</div>
                <div class="grid">
                    <div class="row"><span class="label">Gender:</span><span class="val">${e.gender||"-"}</span></div>
                    <div class="row"><span class="label">Blood Group:</span><span class="val">${e.bloodGroup||"-"}</span></div>
                    <div class="row"><span class="label">Date of Birth:</span><span class="val">${Dn(e.dob)}</span></div>
                    <div class="row"><span class="label">${a?"Birth Cert No:":"NID No:"}</span><span class="val">${a?l.birthCertificateNo:o.nid||"-"}</span></div>
                    <div class="row"><span class="label">Father's Name:</span><span class="val">${a?l.fathersName:o.fatherOrHusbandName||"-"}</span></div>
                    ${a?`<div class="row"><span class="label">Mother's Name:</span><span class="val">${l.mothersName||"-"}</span></div>`:""}
                </div>

                <div class="section-title">Contact Information</div>
                <div class="grid">
                    ${a?`
                    <div class="row"><span class="label">Guardian Name:</span><span class="val">${l.guardianName}</span></div>
                    <div class="row"><span class="label">Guardian Phone:</span><span class="val">${l.guardianPhone}</span></div>
                    `:`
                    <div class="row"><span class="label">Phone:</span><span class="val">${o.phone}</span></div>
                    <div class="row"><span class="label">Email:</span><span class="val">${o.email||"-"}</span></div>
                    `}
                    <div class="row"><span class="label">Present Address:</span><span class="val">${(a?l.address:o.temporaryAddress)||"-"}</span></div>
                    <div class="row"><span class="label">Permanent Address:</span><span class="val">${e.permanentAddress||"-"}</span></div>
                </div>

                <div class="section-title">${a?"Academic History":"Professional Details"}</div>
                <div class="grid">
                    ${a?`
                    <div class="row"><span class="label">Admission Date:</span><span class="val">${Dn(l.admissionDate)}</span></div>
                    <div class="row"><span class="label">Group:</span><span class="val">${l.group||"N/A"}</span></div>
                    <div class="row"><span class="label">Previous School:</span><span class="val">${l.previousEducation||"-"}</span></div>
                    `:`
                    <div class="row"><span class="label">Designation:</span><span class="val">${o.role}</span></div>
                    <div class="row"><span class="label">Subject:</span><span class="val">${o.subject||"N/A"}</span></div>
                    <div class="row"><span class="label">Education:</span><span class="val">${o.education||"-"}</span></div>
                    <div class="row"><span class="label">Specialization:</span><span class="val">${o.specialization||"-"}</span></div>
                    `}
                </div>

                <div class="footer">
                    Generated on ${new Date().toLocaleDateString()} | ${n.name} Management System
                </div>
            </div>
            <script>window.onload = function() { window.print(); window.close(); }<\/script>
        </body>
        </html>
    `;r.document.write(c),r.document.close()},zp=({isOpen:e,onClose:t,person:n,type:r})=>{if(!e)return null;const a=r==="student",l=n,o=n;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg shadow-2xl w-full max-w-3xl h-[90vh] flex flex-col relative animate-[fadeIn_0.2s]",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-text-secondary hover:text-red-400 p-2 rounded-full hover:bg-secondary",children:s.jsx(vt,{className:"w-6 h-6"})}),s.jsxs("div",{className:"p-8 overflow-y-auto flex-grow",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start border-b border-secondary pb-6 mb-6",children:[s.jsx("div",{className:"w-32 h-32 rounded-lg border-4 border-secondary overflow-hidden shadow-md flex-shrink-0",children:s.jsx("img",{src:n.photo,alt:n.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"text-center md:text-left flex-grow",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:n.name}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start mb-2",children:[s.jsx("span",{className:"bg-accent text-white px-3 py-1 rounded-full text-sm font-semibold uppercase",children:a?"Student":o.role}),s.jsxs("span",{className:"bg-secondary text-text-primary px-3 py-1 rounded-full text-sm",children:["ID: ",n.id]})]}),s.jsx("p",{className:"text-text-secondary",children:a?`${l.class} - ${l.section} ${l.group?`(${l.group})`:""}`:o.subject?`Subject: ${o.subject}`:`Joined: ${Dn(o.joiningDate)}`})]}),s.jsxs("button",{onClick:()=>si(n,r),className:"bg-accent text-white px-6 py-2 rounded-lg font-semibold hover:bg-accent/90 flex items-center gap-2 shadow-lg transition-transform hover:-translate-y-0.5",children:[s.jsx(yt,{className:"w-5 h-5"})," Print Profile"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-4 border-b border-secondary pb-1",children:"Personal Details"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Gender"}),s.jsx("span",{className:"text-text-primary font-medium",children:n.gender||"-"})]}),s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Blood Group"}),s.jsx("span",{className:"text-text-primary font-medium",children:n.bloodGroup||"-"})]}),s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Date of Birth"}),s.jsx("span",{className:"text-text-primary font-medium",children:Dn(n.dob)})]}),a&&s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Admission Date"}),s.jsx("span",{className:"text-text-primary font-medium",children:Dn(l.admissionDate)})]}),s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:a?"Birth Cert.":"NID"}),s.jsx("span",{className:"text-text-primary font-medium",children:a?l.birthCertificateNo:o.nid||"-"})]}),s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Father's Name"}),s.jsx("span",{className:"text-text-primary font-medium",children:a?l.fathersName:o.fatherOrHusbandName||"-"})]}),a&&s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Mother's Name"}),s.jsx("span",{className:"text-text-primary font-medium",children:l.mothersName||"-"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-accent mb-4 border-b border-secondary pb-1",children:"Contact Info"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Guardian"}),s.jsx("span",{className:"text-text-primary font-medium",children:l.guardianName})]}),s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Phone"}),s.jsx("span",{className:"text-text-primary font-medium",children:l.guardianPhone})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Phone"}),s.jsx("span",{className:"text-text-primary font-medium",children:o.phone})]}),s.jsxs("div",{className:"flex justify-between border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary",children:"Email"}),s.jsx("span",{className:"text-text-primary font-medium",children:o.email||"-"})]})]}),s.jsxs("div",{className:"flex flex-col border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary text-xs mb-1",children:"Present Address"}),s.jsx("span",{className:"text-text-primary font-medium",children:(a?l.address:o.temporaryAddress)||"-"})]}),s.jsxs("div",{className:"flex flex-col border-b border-secondary/30 pb-1",children:[s.jsx("span",{className:"text-text-secondary text-xs mb-1",children:"Permanent Address"}),s.jsx("span",{className:"text-text-primary font-medium",children:n.permanentAddress||"-"})]})]})]})]})]})]})})},Hg=()=>{const{user:e}=Ce(),[t,n]=f.useState([]),[r,a]=f.useState(!0),[l,o]=f.useState(!1),[c,i]=f.useState(null),[d,u]=f.useState(!1),[m,x]=f.useState(null),[b,y]=f.useState(""),v=f.useCallback(async()=>{try{a(!0);const w=await ke();n(w)}catch(w){console.error("Failed to fetch students",w)}finally{a(!1)}},[]);f.useEffect(()=>{v()},[v]);const N=async w=>{"id"in w?await Qh(w):await Gh(w),v(),p()},g=(w=null)=>{i(w),o(!0)},p=()=>{i(null),o(!1)},h=w=>{x(w),u(!0)},j=w=>{si(w,"student")},S=f.useMemo(()=>b?t.filter(w=>w.name.toLowerCase().includes(b.toLowerCase())||w.id.toLowerCase().includes(b.toLowerCase())||w.guardianName.toLowerCase().includes(b.toLowerCase())):t,[t,b]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Student Management"}),(e==null?void 0:e.role)==="Admin"&&s.jsx("button",{onClick:()=>g(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors",children:"Add New Student"})]}),s.jsx("div",{className:"bg-primary p-4 rounded-lg shadow-lg",children:s.jsx("input",{type:"text",placeholder:"Search by name, ID, or guardian...",value:b,onChange:w=>y(w.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})}),r?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading students..."}):s.jsx(Ug,{students:S,onEdit:g,onView:h,onPrint:j}),l&&s.jsx(Bg,{isOpen:l,onClose:p,onSave:N,initialData:c}),m&&s.jsx(zp,{isOpen:d,onClose:()=>u(!1),person:m,type:"student"})]})},Wg=({staff:e,onEdit:t,onView:n,onPrint:r})=>{const{user:a}=Ce();return s.jsx("div",{className:"overflow-x-auto bg-primary rounded-lg shadow-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Staff Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Staff ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Subject"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Phone"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(l=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap flex items-center gap-3",children:[s.jsx("img",{src:l.photo,alt:l.name,className:"w-8 h-8 rounded-full object-cover"}),l.name]}),s.jsx("td",{className:"px-6 py-4",children:l.id}),s.jsx("td",{className:"px-6 py-4",children:l.role}),s.jsx("td",{className:"px-6 py-4",children:l.subject||"N/A"}),s.jsx("td",{className:"px-6 py-4",children:l.phone}),s.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[s.jsx("button",{onClick:()=>n(l),className:"p-1.5 bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 rounded",title:"View Profile",children:s.jsx(gp,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(l),className:"p-1.5 bg-green-500/10 text-green-400 hover:bg-green-500/20 rounded",title:"Print Profile",children:s.jsx(yt,{className:"w-4 h-4"})}),(a==null?void 0:a.role)==="Admin"&&s.jsx("button",{onClick:()=>t(l),className:"p-1.5 bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20 rounded",title:"Edit",children:s.jsx(Xe,{className:"w-4 h-4"})})]})]},l.id))})]})})},Ec=35*1024,Vg=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[a,l]=f.useState({name:"",role:"Teacher",subject:"",phone:"",photo:"",gender:"Male",bloodGroup:"",fatherOrHusbandName:"",dob:"",nid:"",education:"",specialization:"",previousEmployment:"",salary:0,joiningDate:new Date().toISOString().split("T")[0],permanentAddress:"",temporaryAddress:""}),[o,c]=f.useState(null);if(f.useEffect(()=>{r?(l(r),c(r.photo)):(l({name:"",role:"Teacher",subject:"",phone:"",photo:"",gender:"Male",bloodGroup:"",fatherOrHusbandName:"",dob:"",nid:"",education:"",specialization:"",previousEmployment:"",salary:0,joiningDate:new Date().toISOString().split("T")[0],permanentAddress:"",temporaryAddress:""}),c(an))},[r]),!e)return null;const i=m=>{l({...a,[m.target.name]:m.target.value})},d=m=>{var b;const x=(b=m.target.files)==null?void 0:b[0];if(x){if(x.size>Ec){alert(`File is too large. Please select an image smaller than ${Ec/1024}KB to avoid errors.`);return}const y=new FileReader;y.onloadend=()=>{const v=y.result;l(N=>({...N,photo:v})),c(v)},y.readAsDataURL(x)}},u=m=>{m.preventDefault();const x={...a};x.role!=="Teacher"&&delete x.subject,n(r?{...r,...x}:x)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-4xl h-[90vh] overflow-y-auto",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Staff Member"]}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"w-full md:w-1/4 space-y-4 flex flex-col items-center",children:[s.jsx("img",{src:o||an,alt:"preview",className:"w-32 h-32 rounded-full object-cover border-2 border-accent"}),s.jsxs("div",{className:"w-full text-center",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"text-sm text-text-secondary w-full"}),s.jsx("p",{className:"text-xs text-red-400 mt-1",children:"Max Image Size: 35KB"})]})]}),s.jsxs("div",{className:"w-full md:w-3/4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("h3",{className:"col-span-2 text-lg font-semibold text-accent border-b border-secondary pb-1 mt-2",children:"Personal Information"}),s.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:a.name,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"text",name:"fatherOrHusbandName",placeholder:"Father/Husband Name",value:a.fatherOrHusbandName,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsxs("select",{name:"gender",value:a.gender,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",children:[s.jsx("option",{value:"Male",children:"Male"}),s.jsx("option",{value:"Female",children:"Female"}),s.jsx("option",{value:"Other",children:"Other"})]}),s.jsx("input",{type:"text",name:"bloodGroup",placeholder:"Blood Group (e.g. A+)",value:a.bloodGroup,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Date of Birth"}),s.jsx("input",{type:"date",name:"dob",value:a.dob,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary w-full"})]}),s.jsx("input",{type:"text",name:"nid",placeholder:"NID Number",value:a.nid,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsx("h3",{className:"col-span-2 text-lg font-semibold text-accent border-b border-secondary pb-1 mt-4",children:"Contact Details"}),s.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:a.phone,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("textarea",{name:"temporaryAddress",placeholder:"Present / Temporary Address",value:a.temporaryAddress,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",rows:2}),s.jsx("textarea",{name:"permanentAddress",placeholder:"Permanent Address",value:a.permanentAddress,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",rows:2}),s.jsx("h3",{className:"col-span-2 text-lg font-semibold text-accent border-b border-secondary pb-1 mt-4",children:"Professional Details"}),s.jsxs("select",{name:"role",value:a.role,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",children:[s.jsx("option",{value:"Teacher",children:"Teacher"}),s.jsx("option",{value:"Admin",children:"Admin"}),s.jsx("option",{value:"Support Staff",children:"Support Staff"})]}),a.role==="Teacher"&&s.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:a.subject,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary",children:"Date of Joining"}),s.jsx("input",{type:"date",name:"joiningDate",value:a.joiningDate,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary w-full",required:!0})]}),s.jsx("input",{type:"number",name:"salary",placeholder:"Salary Amount",value:a.salary,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsx("input",{type:"text",name:"education",placeholder:"Educational Qualification (e.g. MA, B.Ed)",value:a.education,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsx("input",{type:"text",name:"specialization",placeholder:"Specialized Qualification",value:a.specialization,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary"}),s.jsx("textarea",{name:"previousEmployment",placeholder:"Previous Employment History",value:a.previousEmployment,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary col-span-2",rows:2})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4 pb-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Staff"})]})]})]})})},Gg=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,l]=f.useState(!1),[o,c]=f.useState(null),[i,d]=f.useState(!1),[u,m]=f.useState(null),[x,b]=f.useState(""),y=f.useCallback(async()=>{try{r(!0);const S=await Je();t(S)}catch(S){console.error("Failed to fetch staff",S)}finally{r(!1)}},[]);f.useEffect(()=>{y()},[y]);const v=async S=>{"id"in S?await Yh(S):await qh(S),y(),g()},N=(S=null)=>{c(S),l(!0)},g=()=>{c(null),l(!1)},p=S=>{m(S),d(!0)},h=S=>{si(S,"staff")},j=f.useMemo(()=>x?e.filter(S=>S.name.toLowerCase().includes(x.toLowerCase())||S.id.toLowerCase().includes(x.toLowerCase())||S.role.toLowerCase().includes(x.toLowerCase())||S.subject&&S.subject.toLowerCase().includes(x.toLowerCase())):e,[e,x]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Staff Management"}),s.jsx("button",{onClick:()=>N(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors",children:"Add New Staff"})]}),s.jsx("div",{className:"bg-primary p-4 rounded-lg shadow-lg",children:s.jsx("input",{type:"text",placeholder:"Search by name, ID, role, or subject...",value:x,onChange:S=>b(S.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})}),n?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading staff..."}):s.jsx(Wg,{staff:j,onEdit:N,onView:p,onPrint:h}),a&&s.jsx(Vg,{isOpen:a,onClose:g,onSave:v,initialData:o}),u&&s.jsx(zp,{isOpen:i,onClose:()=>d(!1),person:u,type:"staff"})]})},Qg=({onClose:e,onSave:t,initialData:n})=>{const[r,a]=f.useState({day:(n==null?void 0:n.day)||"Monday",time:(n==null?void 0:n.time)||"",subject:(n==null?void 0:n.subject)||"",teacher:(n==null?void 0:n.teacher)||"",class:(n==null?void 0:n.class)||""}),[l,o]=f.useState([]);f.useEffect(()=>{bt().then(u=>{o(u),!n&&u.length>0&&a(m=>({...m,class:u[0].name}))})},[n]);const c=u=>{const{name:m,value:x}=u.target;a(b=>({...b,[m]:x}))},i=async u=>{u.preventDefault(),n?await og({...r,id:n.id}):await lg(r),t()},d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Timetable Period"]}),s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("select",{name:"day",value:r.day,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:d.map(u=>s.jsx("option",{value:u,children:u},u))}),s.jsx("input",{type:"time",name:"time",value:r.time,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:r.subject,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"text",name:"teacher",placeholder:"Teacher",value:r.teacher,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("select",{name:"class",value:r.class,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:[s.jsx("option",{value:"",children:"Select Class"}),l.map(u=>s.jsxs("option",{value:u.name,children:[u.name," - ",u.section]},u.id))]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},qg=({onClose:e,onSave:t,initialData:n,teachers:r})=>{const[a,l]=f.useState((n==null?void 0:n.name)||""),[o,c]=f.useState((n==null?void 0:n.teacherIds)||[]),i=u=>{c(m=>m.includes(u)?m.filter(x=>x!==u):[...m,u])},d=async u=>{u.preventDefault();const m={name:a,teacherIds:o};n?await dg({...m,id:n.id}):await cg(m),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Subject"]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Subject Name",value:a,onChange:u=>l(u.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"text-text-secondary mb-2 block",children:"Assign Teachers"}),s.jsx("div",{className:"max-h-48 overflow-y-auto bg-secondary p-2 rounded-md space-y-1",children:r.map(u=>s.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-md hover:bg-background cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.includes(u.id),onChange:()=>i(u.id),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent"}),s.jsx("span",{className:"text-text-primary",children:u.name})]},u.id))})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},Yg=({onClose:e,onSave:t,initialData:n,classes:r,subjects:a})=>{var d,u;const[l,o]=f.useState({class:(n==null?void 0:n.class)||((d=r[0])==null?void 0:d.name)||"",subject:(n==null?void 0:n.subject)||((u=a[0])==null?void 0:u.name)||"",title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",dueDate:(n==null?void 0:n.dueDate)||""}),c=m=>{o(x=>({...x,[m.target.name]:m.target.value}))},i=async m=>{m.preventDefault(),n?await pg({...l,id:n.id}):await ug(l),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Homework"]}),s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("select",{name:"class",value:l.class,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:r.map(m=>s.jsxs("option",{value:m.name,children:["Class ",m.name," - ",m.section]},m.id))}),s.jsx("select",{name:"subject",value:l.subject,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:a.map(m=>s.jsx("option",{value:m.name,children:m.name},m.id))})]}),s.jsx("input",{type:"text",name:"title",placeholder:"Homework Title",value:l.title,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("textarea",{name:"description",placeholder:"Description",value:l.description,onChange:c,rows:4,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"text-text-secondary text-sm",children:"Due Date"}),s.jsx("input",{type:"date",name:"dueDate",value:l.dueDate,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},Kg=e=>{if(!e)return"N/A";if(/^\d{2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),a=new Date;return a.setHours(n,r,0,0),a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},Zg=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]}catch{return e}},Xg=()=>{const{user:e}=Ce(),t=(e==null?void 0:e.role)==="Admin",[n,r]=f.useState("timetable"),[a,l]=f.useState([]),[o,c]=f.useState([]),[i,d]=f.useState([]),[u,m]=f.useState([]),[x,b]=f.useState([]),[y,v]=f.useState(""),[N,g]=f.useState(!0),[p,h]=f.useState(null),[j,S]=f.useState(null),w=f.useCallback(async()=>{try{g(!0);const[k,L,A,$,F]=await Promise.all([Xo(),bt(),ig(),Sp(),Je()]);l(k),c(L),d(A),m($),b(F),L.length>0&&!y&&v(L[0].id)}catch(k){console.error("Failed to fetch academic data",k)}finally{g(!1)}},[y]);f.useEffect(()=>{w()},[]);const E=()=>{w(),h(null),S(null)},C=(k,L=null)=>{S(L),h(k)},P=[{id:"timetable",label:"Timetable",icon:Yo},{id:"subjects",label:"Subjects",icon:cp},{id:"homework",label:"Homework",icon:dp}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Academic Management"}),s.jsx("div",{children:s.jsx("select",{value:y,onChange:k=>v(k.target.value),className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:o.map(k=>s.jsxs("option",{value:k.id,children:["Class ",k.name," - ",k.section]},k.id))})})]}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:P.map(k=>s.jsxs("button",{onClick:()=>r(k.id),className:`flex items-center gap-2 px-4 py-3 font-medium text-sm -mb-px border-b-2 ${n===k.id?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[s.jsx(k.icon,{className:"w-5 h-5"}),k.label]},k.id))}),s.jsx("div",{className:"p-6 min-h-[500px]",children:N?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading..."}):s.jsxs(s.Fragment,{children:[n==="timetable"&&s.jsx(Jg,{timetable:a,classes:o,selectedClassId:y,onEdit:k=>C("timetable",k),onAdd:()=>C("timetable"),isAdmin:t}),n==="subjects"&&s.jsx(ey,{subjects:i,staff:x,onEdit:k=>C("subject",k),onAdd:()=>C("subject"),isAdmin:t}),n==="homework"&&s.jsx(ty,{homework:u,classes:o,selectedClassId:y,onEdit:k=>C("homework",k),onAdd:()=>C("homework"),isAdmin:t})]})})]}),p==="timetable"&&s.jsx(Qg,{onClose:()=>h(null),onSave:E,initialData:j}),p==="subject"&&s.jsx(qg,{onClose:()=>h(null),onSave:E,initialData:j,teachers:x.filter(k=>k.role==="Teacher")}),p==="homework"&&s.jsx(Yg,{onClose:()=>h(null),onSave:E,initialData:j,classes:o,subjects:i})]})},Jg=({timetable:e,classes:t,selectedClassId:n,onEdit:r,onAdd:a,isAdmin:l})=>{const o=f.useMemo(()=>{var u;return((u=t.find(m=>m.id===n))==null?void 0:u.name)||""},[t,n]),c=f.useMemo(()=>e.filter(u=>u.class===o),[e,o]),i=f.useMemo(()=>{var m;const u={};for(const x of c)u[x.day]||(u[x.day]=[]),(m=u[x.day])==null||m.push(x);return Object.values(u).forEach(x=>{x&&x.sort((b,y)=>b.time.localeCompare(y.time))}),u},[c]),d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["Timetable: Class ",o]}),l&&s.jsx("button",{onClick:a,className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"Add Period"})]}),s.jsx("div",{className:"overflow-x-auto pb-4",children:s.jsx("div",{className:"flex space-x-4",children:d.filter(u=>{var m;return((m=i[u])==null?void 0:m.length)??!1}).map(u=>{var m;return s.jsxs("div",{className:"flex-shrink-0 w-60 bg-secondary p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-accent text-center mb-2",children:u}),s.jsx("div",{className:"space-y-2",children:(m=i[u])==null?void 0:m.map(x=>s.jsxs("div",{className:"bg-background p-2 rounded-md text-sm group relative",children:[l&&s.jsx("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:()=>r(x),className:"p-1 hover:bg-secondary rounded",children:s.jsx(Xe,{className:"w-3 h-3 text-yellow-400"})})}),s.jsxs("p",{className:"font-semibold text-text-primary",children:[Kg(x.time)," - ",x.subject]}),s.jsx("p",{className:"text-text-secondary",children:x.teacher})]},x.id))})]},u)})})})]})},ey=({subjects:e,staff:t,onAdd:n,onEdit:r,isAdmin:a})=>{const l=f.useMemo(()=>new Map(t.map(o=>[o.id,o.name])),[t]);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Subject Management"}),a&&s.jsx("button",{onClick:n,className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"Add Subject"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Subject"}),s.jsx("th",{className:"px-4 py-2",children:"Teachers"}),s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(o=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-2 font-medium text-text-primary",children:o.name}),s.jsx("td",{className:"px-4 py-2",children:o.teacherIds.map(c=>l.get(c)).join(", ")}),s.jsx("td",{className:"px-4 py-2 flex gap-2",children:a&&s.jsx("button",{onClick:()=>r(o),className:"p-1 hover:bg-background rounded",children:s.jsx(Xe,{className:"w-4 h-4 text-yellow-400"})})})]},o.id))})]})})]})},ty=({homework:e,classes:t,selectedClassId:n,onAdd:r,onEdit:a,isAdmin:l})=>{const o=f.useMemo(()=>{var i;return((i=t.find(d=>d.id===n))==null?void 0:i.name)||""},[t,n]),c=f.useMemo(()=>e.filter(i=>i.class===o),[e,o]);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["Homework: Class ",o]}),l&&s.jsx("button",{onClick:r,className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"New Homework"})]}),s.jsx("div",{className:"space-y-4",children:c.map(i=>s.jsx("div",{className:"bg-secondary p-4 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-accent font-semibold",children:i.subject}),s.jsx("h4",{className:"font-semibold text-text-primary",children:i.title}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:i.description})]}),s.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[s.jsxs("p",{className:"text-sm font-semibold text-text-primary",children:["Due: ",Zg(i.dueDate)]}),l&&s.jsx("div",{className:"flex gap-2 justify-end mt-2",children:s.jsx("button",{onClick:()=>a(i),className:"p-1 hover:bg-background rounded",children:s.jsx(Xe,{className:"w-4 h-4 text-yellow-400"})})})]})]})},i.id))})]})},ny=({isOpen:e,onClose:t,onSave:n,selectedClass:r})=>{const[a,l]=f.useState({studentId:"",incidentType:"Misbehavior",description:"",actionTaken:""}),[o,c]=f.useState([]);if(f.useEffect(()=>{r&&ke({class:r.name,section:r.section}).then(u=>{c(u),u.length>0&&l(m=>({...m,studentId:u[0].id}))})},[r]),!e)return null;const i=u=>{l(m=>({...m,[u.target.name]:u.target.value}))},d=async u=>{u.preventDefault();const m=o.find(x=>x.id===a.studentId);!m||!r||(await fg({...a,studentName:m.name,class:r.name,date:new Date().toISOString().split("T")[0]}),n())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Log New Discipline Incident"}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Student"}),s.jsx("select",{name:"studentId",value:a.studentId,onChange:i,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:o.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Incident Type"}),s.jsxs("select",{name:"incidentType",value:a.incidentType,onChange:i,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:[s.jsx("option",{children:"Misbehavior"}),s.jsx("option",{children:"Uniform Violation"}),s.jsx("option",{children:"Late Submission"}),s.jsx("option",{children:"Other"})]})]}),s.jsx("textarea",{name:"description",placeholder:"Description of Incident",value:a.description,onChange:i,rows:3,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"text",name:"actionTaken",placeholder:"Action Taken (e.g., Verbal Warning)",value:a.actionTaken,onChange:i,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Log Incident"})]})]})]})})},sy=()=>{const{user:e}=Ce(),t=(e==null?void 0:e.role)==="Admin",[n,r]=f.useState("attendance"),[a,l]=f.useState("student"),[o,c]=f.useState([]),[i,d]=f.useState([]),[u,m]=f.useState([]),[x,b]=f.useState(!1),[y,v]=f.useState(""),[N,g]=f.useState(()=>{const k=new Date;return`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`}),[p,h]=f.useState(!1),[j,S]=f.useState(!1),w=f.useMemo(()=>u.find(k=>k.id===y),[u,y]),E=f.useCallback(async()=>{b(!0);try{if(n==="discipline"){const k=await Cp();d(k)}else{let k=[];a==="student"?y&&(k=await mg(y,N)):k=await xg(N),c(k)}S(!1)}catch(k){console.error("Failed to fetch data",k)}finally{b(!1)}},[y,N,a,n]);f.useEffect(()=>{bt().then(k=>{m(k),k.length>0&&v(k[0].id)})},[]),f.useEffect(()=>{E()},[E]);const C=async()=>{b(!0);try{if(a==="student"){if(!y)return;await wc(y,N,o)}else await wc("STAFF",N,o);alert("Attendance saved successfully!"),S(!1)}catch{alert("Failed to save attendance. Please try again.")}finally{b(!1)}},P=[{id:"attendance",label:"Attendance",icon:qo},{id:"discipline",label:"Discipline",icon:Wr}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Attendance & Discipline"}),s.jsx("div",{className:"bg-primary p-4 rounded-lg shadow-lg",children:s.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[n==="attendance"&&t&&s.jsxs("div",{className:"flex bg-secondary rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>l("student"),className:`px-3 py-1.5 rounded-md text-sm font-semibold transition-all flex items-center gap-2 ${a==="student"?"bg-primary text-accent shadow-sm":"text-text-secondary"}`,children:[s.jsx(pp,{className:"w-4 h-4"})," Students"]}),s.jsxs("button",{onClick:()=>l("staff"),className:`px-3 py-1.5 rounded-md text-sm font-semibold transition-all flex items-center gap-2 ${a==="staff"?"bg-primary text-accent shadow-sm":"text-text-secondary"}`,children:[s.jsx(at,{className:"w-4 h-4"})," Staff"]})]}),n==="attendance"&&a==="student"&&s.jsx("div",{children:s.jsx("select",{value:y,onChange:k=>v(k.target.value),className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent text-sm",children:u.map(k=>s.jsxs("option",{value:k.id,children:[k.name," - ",k.section]},k.id))})}),n==="attendance"&&s.jsx("div",{children:s.jsx("input",{type:"date",value:N,onChange:k=>g(k.target.value),className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent text-sm"})}),n==="discipline"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mr-2",children:"Filter Class:"}),s.jsx("select",{value:y,onChange:k=>v(k.target.value),className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent text-sm",children:u.map(k=>s.jsxs("option",{value:k.id,children:[k.name," - ",k.section]},k.id))})]})]})})}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:P.map(k=>s.jsxs("button",{onClick:()=>r(k.id),className:`flex items-center gap-2 px-4 py-3 font-medium text-sm -mb-px border-b-2 ${n===k.id?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[s.jsx(k.icon,{className:"w-5 h-5"}),k.label]},k.id))}),s.jsx("div",{className:"p-6 min-h-[500px]",children:x?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading..."}):s.jsxs(s.Fragment,{children:[n==="attendance"&&s.jsx(ry,{attendance:o,setAttendance:c,onSave:C,isDirty:j,setIsDirty:S,type:a}),n==="discipline"&&s.jsx(ay,{incidents:i,selectedClass:w,onAddIncident:()=>h(!0)})]})})]}),p&&s.jsx(ny,{isOpen:p,onClose:()=>h(!1),onSave:()=>{E(),h(!1)},selectedClass:w||null})]})},ry=({attendance:e,setAttendance:t,onSave:n,isDirty:r,setIsDirty:a,type:l})=>{const o=f.useMemo(()=>e.reduce((u,m)=>(m.status==="Present"?u.present++:m.status==="Absent"?u.absent++:m.status==="Late"&&u.late++,u),{present:0,absent:0,late:0}),[e]),c=(u,m)=>{t(x=>x.map(b=>b.studentId===u?{...b,status:m}:b)),a(!0)},i=(u,m)=>{t(x=>x.map(b=>b.studentId===u?{...b,remark:m}:b)),a(!0)},d=()=>{t(u=>u.map(m=>({...m,status:"Present"}))),a(!0)};return e.length===0?s.jsxs("div",{className:"text-center py-10 text-text-secondary",children:["No ",l," records found. Please ensure users are added."]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-text-primary",children:e.length}),s.jsxs("p",{className:"text-sm text-text-secondary",children:["Total ",l==="student"?"Students":"Staff"]})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-green-400",children:o.present}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Present"})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-red-400",children:o.absent}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Absent"})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:o.late}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Late"})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:d,className:"bg-secondary text-text-primary px-3 py-1.5 text-sm rounded-lg font-semibold hover:bg-secondary/80",children:"Mark All Present"}),r&&s.jsx("button",{onClick:n,className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 animate-bounce",children:"Save Attendance"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsxs("th",{scope:"col",className:"px-6 py-3",children:[l==="student"?"Student":"Staff"," Name"]}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Remarks"})]})}),s.jsx("tbody",{children:e.map(u=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("td",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap",children:[u.studentName," ",s.jsxs("span",{className:"text-xs text-text-secondary ml-1",children:["(",u.studentId,")"]})]}),s.jsx("td",{className:"px-6 py-4 flex justify-center gap-2",children:["Present","Absent","Late"].map(m=>s.jsx("button",{onClick:()=>c(u.studentId,m),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${u.status===m?m==="Present"?"bg-green-500 text-white shadow-md scale-105":m==="Absent"?"bg-red-500 text-white shadow-md scale-105":"bg-yellow-500 text-white shadow-md scale-105":"bg-secondary text-text-secondary hover:bg-opacity-70"}`,children:m},m))}),s.jsx("td",{className:"px-6 py-4",children:u.status==="Absent"||u.status==="Late"?s.jsx("input",{type:"text",placeholder:"Add a remark...",value:u.remark||"",onChange:m=>i(u.studentId,m.target.value),className:"w-full bg-background p-1.5 rounded-md text-text-primary text-xs focus:outline-none focus:ring-1 focus:ring-accent"}):s.jsx("span",{className:"text-xs text-text-secondary italic",children:"N/A"})})]},u.studentId))})]})})]})},ay=({incidents:e,selectedClass:t,onAddIncident:n})=>{const r=f.useMemo(()=>t?e.filter(a=>a.class===t.name):[],[e,t]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["Discipline Log: Class ",t==null?void 0:t.name]}),s.jsx("button",{onClick:n,className:"bg-accent text-white px-3 py-1.5 rounded-lg font-semibold hover:bg-accent/90 text-sm",children:"Log New Incident"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Incident Type"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action Taken"})]})}),s.jsx("tbody",{children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center py-4",children:"No incidents logged for this class."})}):r.map(a=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:a.studentName}),s.jsx("td",{className:"px-6 py-4",children:a.date}),s.jsx("td",{className:"px-6 py-4",children:a.incidentType}),s.jsx("td",{className:"px-6 py-4 text-xs max-w-xs truncate",children:a.description}),s.jsx("td",{className:"px-6 py-4 font-medium",children:a.actionTaken})]},a.id))})]})})]})},ly=({isOpen:e,onClose:t,onSuccess:n,studentStatus:r,year:a,month:l})=>{const[o,c]=f.useState(()=>r.breakdown.filter(b=>!b.paid).map(b=>b.type)),[i,d]=f.useState(!1),u=b=>{c(y=>y.includes(b)?y.filter(v=>v!==b):[...y,b])},m=f.useMemo(()=>r.breakdown.filter(b=>o.includes(b.type)).reduce((b,y)=>b+y.amount,0),[o,r]),x=async()=>{if(o.length!==0){d(!0);try{const b=await sg(r.studentId,o,a,l),y=We(),v=window.open("","_blank"),N=b.breakdown.filter(p=>o.includes(p.type)).map(p=>`
                <tr>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; color: #1E5631;">${p.type}</td>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: right; font-weight: bold;">${p.amount.toLocaleString()}</td>
                </tr>
            `).join(""),g=`
            <html><head><title>Fee Receipt - ${r.studentId}</title>
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
            <style>
              @media print {
                html, body {
                  -webkit-print-color-adjust: exact !important;
                  print-color-adjust: exact !important;
                  height: 100%;
                  overflow: hidden;
                }
                @page {
                    size: A4;
                    margin: 0; 
                }
              }
              body { font-family: 'Playfair Display', serif; color: #1E3A29; margin: 0; padding: 20px; background-color: #fff; box-sizing: border-box; }
              .container {
                border: 3px solid #1E5631;
                outline: 1px solid #D4AF37;
                outline-offset: -5px;
                padding: 25px;
                max-width: 800px;
                margin: 0 auto;
                position: relative;
                background-color: #fdfbf7;
                height: 95vh;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
              }
              .watermark { 
                position: absolute;
                top: 50%; left: 50%;
                transform: translate(-50%, -50%);
                opacity: 0.06;
                background-image: url('${y.logo}');
                background-repeat: no-repeat;
                background-position: center;
                background-size: contain;
                width: 60%; height: 60%;
                z-index: 0;
              }
              .bismillah {
                text-align: center; font-family: 'Amiri', serif; font-size: 18px; color: #1E5631; margin-bottom: 5px;
              }
              .header {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                border-bottom: 2px solid #D4AF37;
                padding-bottom: 10px;
                margin-bottom: 15px;
                position: relative; 
                z-index: 1;
              }
              .header img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #D4AF37; }
              .header-text { text-align: center; }
              .header h1 { font-family: 'Cinzel', serif; margin: 0; color: #1E5631; font-size: 22px; text-shadow: 1px 1px 0 #D4AF37; }
              .header p { margin: 2px 0 0; font-style: italic; color: #555; font-size: 12px; }
              
              .receipt-title {
                text-align: center; font-family: 'Cinzel', serif; font-size: 18px; color: #D4AF37; 
                margin-bottom: 20px; font-weight: bold; text-decoration: underline; text-underline-offset: 4px;
              }
              
              .info-grid {
                display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; position: relative; z-index: 1; font-size: 14px;
              }
              .label { font-weight: bold; color: #1E5631; margin-right: 5px; }
              
              table { width: 100%; border-collapse: collapse; margin-bottom: auto; position: relative; z-index: 1; font-size: 14px; }
              th { 
                background-color: #1E5631; color: #D4AF37; padding: 8px; text-align: left; 
                font-family: 'Cinzel', serif; border: 1px solid #D4AF37; font-size: 12px;
              }
              
              .total-row { background-color: #1E5631; color: #fff; font-weight: bold; }
              .total-row td { padding: 8px 10px; border: 1px solid #D4AF37; }
              
              .footer-info { 
                margin-top: 20px; border-top: 1px solid #D4AF37; padding-top: 10px;
                display: flex; justify-content: space-between; font-size: 12px; position: relative; z-index: 1;
              }
            </style>
            </head>
            <body>
                <div class="container">
                    <div class="watermark"></div>
                    <div class="bismillah">   </div>
                    
                    <div class="header">
                        <img src="${y.logo}" alt="logo">
                        <div class="header-text">
                            <h1>${y.name}</h1>
                            <p>${y.address}</p>
                        </div>
                    </div>
                    
                    <div class="receipt-title">Payment Receipt</div>
                    
                    <div class="info-grid">
                        <div class="info-item"><span class="label">Date:</span> ${new Date().toLocaleDateString()}</div>
                        <div class="info-item"><span class="label">Receipt No:</span> #${Date.now().toString().slice(-6)}</div>
                        <div class="info-item"><span class="label">Student Name:</span> ${r.studentName}</div>
                        <div class="info-item"><span class="label">Student ID:</span> ${r.studentId}</div>
                        <div class="info-item"><span class="label">Month:</span> ${new Date(a,l-1).toLocaleString("default",{month:"long",year:"numeric"})}</div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th style="text-align: right;">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${N}
                            <tr class="total-row">
                                <td>Total Paid</td>
                                <td style="text-align: right; color: #D4AF37;">${m.toLocaleString()}</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="footer-info">
                        <div>Status: <span style="font-weight: bold; color: #1E5631;">${b.status.toUpperCase()}</span></div>
                        <div>Authorized Signature</div>
                    </div>
                </div>
                <script>
                    window.onload = function() {
                        setTimeout(function() {
                            window.print();
                            window.close();
                        }, 500);
                    }
                <\/script>
            </body></html>
        `;v==null||v.document.write(g),v==null||v.document.close(),n(b)}catch(b){console.error("Failed to collect fee",b),alert("An error occurred during payment collection. Please check your connection and try again.")}finally{d(!1)}}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-2 text-text-primary",children:["Collect Fees: ",r.studentName]}),s.jsxs("p",{className:"text-text-secondary mb-6",children:["For ",new Date(a,l-1).toLocaleString("default",{month:"long",year:"numeric"})]}),s.jsx("div",{className:"space-y-2 mb-4",children:r.breakdown.map(b=>s.jsxs("div",{className:`p-3 rounded-md flex justify-between items-center ${b.paid?"bg-green-500/10":"bg-secondary"}`,children:[s.jsxs("label",{className:"flex items-center gap-3 text-text-primary",children:[s.jsx("input",{type:"checkbox",checked:b.paid||o.includes(b.type),disabled:b.paid,onChange:()=>u(b.type),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent disabled:opacity-50"}),b.type]}),s.jsxs("span",{className:b.paid?"text-green-400":"text-text-primary",children:["",b.amount.toLocaleString()," ",b.paid&&"(Paid)"]})]},b.type))}),s.jsxs("div",{className:"text-right font-bold text-xl text-text-primary mb-6",children:["Total to Pay: ",m.toLocaleString()]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{onClick:x,disabled:m===0||i,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold flex items-center gap-2 disabled:bg-gray-500",children:i?"Processing...":s.jsxs(s.Fragment,{children:[s.jsx(yt,{className:"w-4 h-4"})," Collect & Print"]})})]})]})}):null},oy=({isOpen:e,onClose:t,onSuccess:n,staffStatus:r,year:a,month:l})=>{const[o,c]=f.useState(!1),i=async()=>{c(!0);try{const d=await rg(r.staffId,r.salaryAmount,a,l),u=We(),m=window.open("","_blank"),x=`
            <html><head><title>Salary Slip - ${r.staffName}</title>
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
            <style>
              @media print {
                  html, body {
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                    height: 100%;
                    overflow: hidden;
                  }
                  @page { size: A4; margin: 0; }
              }
              body { font-family: 'Playfair Display', serif; color: #1E3A29; margin: 0; padding: 20px; box-sizing: border-box; background-color: #fff;}
              .container {
                border: 3px solid #1E5631;
                outline: 1px solid #D4AF37;
                outline-offset: -5px;
                padding: 30px;
                max-width: 800px;
                margin: 0 auto;
                position: relative;
                background-color: #fdfbf7;
                height: 95vh;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
              }
              .watermark { 
                position: absolute;
                top: 50%; left: 50%;
                transform: translate(-50%, -50%);
                opacity: 0.06;
                background-image: url('${u.logo}');
                background-repeat: no-repeat;
                background-position: center;
                background-size: contain;
                width: 60%; height: 60%;
                z-index: 0;
              }
              .bismillah {
                text-align: center; font-family: 'Amiri', serif; font-size: 18px; color: #1E5631; margin-bottom: 5px;
              }
              .header {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                border-bottom: 2px solid #D4AF37;
                padding-bottom: 10px;
                margin-bottom: 20px;
                position: relative; 
                z-index: 1;
              }
              .header img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #D4AF37; }
              .header-text { text-align: center; }
              .header h1 { font-family: 'Cinzel', serif; margin: 0; color: #1E5631; font-size: 22px; text-shadow: 1px 1px 0 #D4AF37; }
              
              .slip-title {
                text-align: center; font-family: 'Cinzel', serif; font-size: 18px; color: #D4AF37; 
                margin-bottom: 25px; font-weight: bold; text-decoration: underline; text-underline-offset: 4px;
              }

              .info-box {
                border: 1px solid #D4AF37; padding: 20px; position: relative; z-index: 1;
                margin-bottom: auto; background-color: rgba(255,255,255,0.7);
              }
              .row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; }
              .label { font-weight: bold; color: #1E5631; }

              .amount-box {
                background-color: #1E5631; color: white; padding: 15px; text-align: center;
                border: 2px solid #D4AF37; margin-bottom: 30px; position: relative; z-index: 1;
              }
              .amount-label { font-family: 'Cinzel', serif; font-size: 12px; text-transform: uppercase; color: #D4AF37; margin-bottom: 5px; }
              .amount-value { font-family: 'Playfair Display', serif; font-size: 28px; font-weight: bold; }

              .footer { 
                margin-top: 20px; border-top: 1px solid #D4AF37; padding-top: 10px;
                display: flex; justify-content: space-between; font-size: 12px; position: relative; z-index: 1;
              }
            </style>
            </head>
            <body>
                <div class="container">
                    <div class="watermark"></div>
                    <div class="bismillah">   </div>
                    
                     <div class="header">
                        <img src="${u.logo}" alt="logo">
                        <div class="header-text">
                            <h1>${u.name}</h1>
                        </div>
                    </div>
                    
                    <div class="slip-title">Salary Slip</div>
                    
                    <div class="info-box">
                        <div class="row"><span class="label">Date:</span> ${new Date().toLocaleDateString()}</div>
                        <div class="row"><span class="label">Transaction ID:</span> TXN-${Date.now().toString().slice(-8)}</div>
                        <div class="row"><span class="label">Staff Name:</span> ${r.staffName}</div>
                        <div class="row"><span class="label">Staff ID:</span> ${r.staffId}</div>
                        <div class="row"><span class="label">Role:</span> ${r.role}</div>
                        <div class="row"><span class="label">Salary Month:</span> ${new Date(a,l-1).toLocaleString("default",{month:"long",year:"numeric"})}</div>
                    </div>
                    
                    <div class="amount-box">
                        <div class="amount-label">Net Salary Paid</div>
                        <div class="amount-value">${r.salaryAmount.toLocaleString()}</div>
                    </div>
                    
                    <div class="footer">
                        <div>Status: <span style="font-weight: bold; color: #1E5631;">PAID</span></div>
                        <div>Authorized Signature</div>
                    </div>
                </div>
                <script>
                    window.onload = function() {
                        setTimeout(function() {
                             window.print();
                             window.close();
                        }, 500);
                    }
                <\/script>
            </body></html>
        `;m==null||m.document.write(x),m==null||m.document.close(),n(d)}catch(d){console.error("Failed to pay salary",d),alert("An error occurred during salary payment. Please check your connection and try again.")}finally{c(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2 text-text-primary",children:"Confirm Salary Payment"}),s.jsxs("p",{className:"text-text-secondary mb-6",children:["For ",new Date(a,l-1).toLocaleString("default",{month:"long",year:"numeric"})]}),s.jsxs("div",{className:"bg-secondary p-4 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-text-secondary",children:[s.jsx("p",{children:"Staff Member:"}),s.jsx("p",{className:"font-semibold text-text-primary",children:r.staffName})]}),s.jsxs("div",{className:"flex justify-between text-text-secondary",children:[s.jsx("p",{children:"Amount:"}),s.jsxs("p",{className:"font-semibold text-text-primary",children:["",r.salaryAmount.toLocaleString()]})]})]}),s.jsxs("div",{className:"mt-8 flex justify-between",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{onClick:i,disabled:o,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold flex items-center gap-2 disabled:bg-gray-500",children:o?"Processing...":s.jsxs(s.Fragment,{children:[s.jsx(yt,{className:"w-4 h-4"})," Pay & Print"]})})]})]})}):null},iy=({isOpen:e,onClose:t,onSuccess:n})=>{const[r,a]=f.useState("Utilities"),[l,o]=f.useState(""),[c,i]=f.useState(""),[d,u]=f.useState(!1);if(!e)return null;const m=async x=>{x.preventDefault(),u(!0);try{const b=await tg({category:r,description:l,amount:parseFloat(c)});n(b)}catch(b){console.error("Failed to log expense",b),alert("Could not log expense. Please try again.")}finally{u(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Log New Expense"}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("select",{value:r,onChange:x=>a(x.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:[s.jsx("option",{children:"Utilities"}),s.jsx("option",{children:"Maintenance"}),s.jsx("option",{children:"Supplies"}),s.jsx("option",{children:"Other"})]}),s.jsx("input",{type:"text",placeholder:"Description",value:l,onChange:x=>o(x.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"number",placeholder:"Amount",value:c,onChange:x=>i(x.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold disabled:bg-gray-500",children:d?"Saving...":"Log Expense"})]})]})]})})},cy=()=>{const[e,t]=f.useState("fees"),[n,r]=f.useState(new Date),[a,l]=f.useState(!0),[o,c]=f.useState(""),[i,d]=f.useState([]),[u,m]=f.useState([]),[x,b]=f.useState([]),[y,v]=f.useState(null),[N,g]=f.useState(null),[p,h]=f.useState(!1),j=f.useCallback(async()=>{try{l(!0);const A=n.getFullYear(),$=n.getMonth()+1,[F,U,oe]=await Promise.all([ma(A,$),ng(A,$),eg(A,$)]);d(F),m(U),b(oe)}catch(A){console.error("Failed to fetch finance data",A)}finally{l(!1)}},[n]);f.useEffect(()=>{j()},[j]);const S=A=>{const[$,F]=A.target.value.split("-").map(Number);r(new Date($,F-1,5)),c("")},w=A=>{d($=>$.map(F=>F.studentId===A.studentId?A:F)),v(null)},E=A=>{m($=>$.map(F=>F.staffId===A.staffId?A:F)),g(null)},C=A=>{b($=>[A,...$]),h(!1)},P=f.useMemo(()=>o?i.filter(A=>A.studentName.toLowerCase().includes(o.toLowerCase())||A.studentId.toLowerCase().includes(o.toLowerCase())):i,[i,o]),k=f.useMemo(()=>o?u.filter(A=>A.staffName.toLowerCase().includes(o.toLowerCase())||A.staffId.toLowerCase().includes(o.toLowerCase())):u,[u,o]),L=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Financial Management"}),s.jsxs("div",{className:"bg-primary p-4 rounded-lg shadow-lg flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("label",{htmlFor:"month-select",className:"font-semibold text-text-primary",children:"Select Month:"}),s.jsx("input",{type:"month",id:"month-select",value:L,onChange:S,className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]}),s.jsx("div",{className:"flex-grow max-w-sm",children:s.jsx("input",{type:"text",placeholder:"Search by name or ID...",value:o,onChange:A=>c(A.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})}),s.jsx("button",{onClick:()=>h(!0),className:"bg-secondary text-text-primary px-4 py-2 rounded-lg font-semibold hover:bg-secondary/80",children:"Log Expense"})]}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:["fees","salaries","expenses"].map(A=>s.jsx("button",{onClick:()=>{t(A),c("")},className:`px-4 py-3 font-medium text-sm -mb-px border-b-2 ${e===A?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))}),s.jsx("div",{className:"overflow-x-auto",children:a?s.jsx("p",{className:"text-center py-8 text-text-secondary",children:"Loading financial data..."}):s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[e==="fees"&&s.jsx(dy,{feeStatus:P,onCollect:v}),e==="salaries"&&s.jsx(uy,{salaryStatus:k,onPay:g}),e==="expenses"&&s.jsx(py,{expenses:x})]})})]}),y&&s.jsx(ly,{studentStatus:y,isOpen:!!y,onClose:()=>v(null),onSuccess:w,year:n.getFullYear(),month:n.getMonth()+1}),N&&s.jsx(oy,{staffStatus:N,isOpen:!!N,onClose:()=>g(null),onSuccess:E,year:n.getFullYear(),month:n.getMonth()+1}),p&&s.jsx(iy,{isOpen:p,onClose:()=>h(!1),onSuccess:C})]})},dy=({feeStatus:e,onCollect:t})=>s.jsxs(s.Fragment,{children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Student"}),s.jsx("th",{className:"px-6 py-3",children:"Class"}),s.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("td",{className:"px-6 py-4 font-medium text-text-primary",children:[n.studentName," ",s.jsxs("span",{className:"text-text-secondary",children:["(",n.studentId,")"]})]}),s.jsxs("td",{className:"px-6 py-4",children:[n.class,"-",n.section]}),s.jsx("td",{className:"px-6 py-4",children:n.status==="Unpaid"&&s.jsx("button",{onClick:()=>t(n),className:"bg-accent text-white px-3 py-1 rounded-md text-xs font-semibold hover:bg-accent/90",children:"Collect"})})]},n.studentId))})]}),uy=({salaryStatus:e,onPay:t})=>s.jsxs(s.Fragment,{children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Staff"}),s.jsx("th",{className:"px-6 py-3",children:"Role"}),s.jsx("th",{className:"px-6 py-3",children:"Salary"}),s.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("td",{className:"px-6 py-4 font-medium text-text-primary",children:[n.staffName," ",s.jsxs("span",{className:"text-text-secondary",children:["(",n.staffId,")"]})]}),s.jsx("td",{className:"px-6 py-4",children:n.role}),s.jsxs("td",{className:"px-6 py-4",children:["",n.salaryAmount.toLocaleString()]}),s.jsx("td",{className:"px-6 py-4",children:n.status!=="Paid"&&s.jsx("button",{onClick:()=>t(n),className:"bg-accent text-white px-3 py-1 rounded-md text-xs font-semibold hover:bg-accent/90",children:"Pay"})})]},n.staffId))})]}),py=({expenses:e})=>s.jsxs(s.Fragment,{children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Date"}),s.jsx("th",{className:"px-6 py-3",children:"Category"}),s.jsx("th",{className:"px-6 py-3",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-right",children:"Amount"})]})}),s.jsx("tbody",{children:e.map(t=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4",children:new Date(t.date).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:t.category}),s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:t.description}),s.jsxs("td",{className:"px-6 py-4 font-semibold text-red-400 text-right",children:["",t.amount.toLocaleString()]})]},t.id))})]}),my=()=>{const[e,t]=f.useState([]),[n,r]=f.useState([]),[a,l]=f.useState(!0),[o,c]=f.useState("students"),[i,d]=f.useState(""),[u,m]=f.useState(""),[x,b]=f.useState(new Set),[y,v]=f.useState(!1),[N,g]=f.useState(0),p=async()=>{try{l(!0);const[M,D]=await Promise.all([ke(),Je()]);t(M),r(D)}catch(M){console.error("Failed to fetch data",M)}finally{l(!1)}};f.useEffect(()=>{p()},[]),f.useEffect(()=>{b(new Set),d("")},[o]);const h=M=>o==="students"?M.guardianPhone:M.phone,j=(M,D)=>{if(!M)return;const z=M.replace(/\D/g,""),H=z.length===11&&z.startsWith("01")?`88${z}`:z,Z=encodeURIComponent(D);window.open(`https://wa.me/${H}?text=${Z}`,"_blank")},S=M=>{if(!u){alert("Please enter a message to send.");return}if(!M){alert("No phone number found.");return}j(M,u)},w=f.useMemo(()=>{const M=o==="students"?e:n;return i?M.filter(D=>D.name.toLowerCase().includes(i.toLowerCase())||D.id.toLowerCase().includes(i.toLowerCase())||(o==="students"?D.class.toLowerCase().includes(i.toLowerCase()):D.role.toLowerCase().includes(i.toLowerCase()))):M},[o,e,n,i]),E=M=>{const D=new Set(x);D.has(M)?D.delete(M):D.add(M),b(D)},C=()=>{x.size===w.length?b(new Set):b(new Set(w.map(M=>M.id)))},P=()=>{if(x.size!==0){if(!u){alert("Please enter a message to send.");return}g(0),v(!0)}},k=f.useMemo(()=>(o==="students"?e:n).filter(D=>x.has(D.id)),[e,n,x,o]),L=k[N],A=L?h(L):"",$=N/k.length*100,F=()=>{A&&j(A,u),oe()},U=()=>{oe()},oe=()=>{N<k.length-1?g(M=>M+1):he()},he=()=>{v(!1),b(new Set),m(""),alert("Bulk sending completed!")};return s.jsxs("div",{className:"space-y-6 h-[calc(100vh-6rem)] flex flex-col",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("h2",{className:"text-3xl font-bold text-text-primary flex items-center gap-3",children:[s.jsx(Bl,{className:"w-8 h-8 text-accent"}),"Direct Messaging"]})}),s.jsx("div",{className:"bg-primary rounded-lg shadow-lg flex-grow overflow-hidden flex flex-col",children:s.jsxs("div",{className:"flex-grow p-6 flex flex-col md:flex-row gap-6 h-full overflow-hidden",children:[s.jsxs("div",{className:"w-full md:w-1/3 flex flex-col gap-4 bg-secondary/10 p-4 rounded-lg border border-secondary",children:[s.jsx("h3",{className:"font-bold text-lg text-text-primary mb-2",children:"1. Select Group & Compose"}),s.jsxs("div",{className:"flex bg-secondary rounded-lg p-1 shadow-sm",children:[s.jsx("button",{onClick:()=>c("students"),className:`flex-1 py-2 rounded-md text-sm font-semibold transition-all ${o==="students"?"bg-primary text-accent shadow-md":"text-text-secondary hover:text-text-primary"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(at,{className:"w-4 h-4"})," Students"]})}),s.jsx("button",{onClick:()=>c("staff"),className:`flex-1 py-2 rounded-md text-sm font-semibold transition-all ${o==="staff"?"bg-primary text-accent shadow-md":"text-text-secondary hover:text-text-primary"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(at,{className:"w-4 h-4"})," Staff"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zo,{className:"absolute left-3 top-3 w-4 h-4 text-text-secondary"}),s.jsx("input",{type:"text",placeholder:`Search ${o}...`,value:i,onChange:M=>d(M.target.value),className:"w-full bg-primary pl-10 p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent border border-transparent focus:border-accent transition-all shadow-sm"})]}),s.jsxs("div",{className:"flex-grow flex flex-col bg-primary p-4 rounded-lg border border-secondary shadow-sm",children:[s.jsx("label",{className:"text-sm font-semibold text-text-primary mb-2 block",children:"Message"}),s.jsx("textarea",{value:u,onChange:M=>m(M.target.value),placeholder:"Type your message here... (e.g., Reminder: Tomorrow is a holiday)",className:"w-full flex-grow bg-secondary/30 p-3 rounded-md text-text-primary text-sm focus:outline-none focus:ring-2 focus:ring-accent resize-none border border-secondary/50"}),s.jsxs("div",{className:"mt-2 text-xs text-text-secondary text-right",children:[u.length," chars"]})]}),s.jsxs("button",{onClick:P,disabled:x.size===0,className:`w-full py-3 rounded-lg font-bold transition-all flex items-center justify-center gap-2 shadow-lg
                                ${x.size>0?"bg-accent text-white hover:bg-accent/90 hover:shadow-accent/20 hover:-translate-y-0.5":"bg-secondary text-text-secondary cursor-not-allowed"}`,children:[s.jsx(Ha,{className:"w-5 h-5"}),x.size>0?`Start Sending to ${x.size}`:"Select Recipients"]})]}),s.jsxs("div",{className:"w-full md:w-2/3 flex flex-col bg-primary rounded-lg border border-secondary overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-secondary flex justify-between items-center bg-secondary/5",children:[s.jsxs("h3",{className:"font-bold text-lg text-text-primary",children:["2. Select Recipients (",w.length,")"]}),s.jsx("button",{onClick:C,className:"text-sm text-accent font-semibold hover:underline",children:x.size===w.length&&w.length>0?"Unselect All":"Select All"})]}),s.jsx("div",{className:"overflow-y-auto flex-grow",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 w-16 text-center",children:"Select"}),s.jsx("th",{className:"px-6 py-3",children:"Name"}),s.jsx("th",{className:"px-6 py-3",children:o==="students"?"Class Details":"Role"}),s.jsx("th",{className:"px-6 py-3",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Quick Action"})]})}),s.jsx("tbody",{children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center py-10 text-lg",children:"Loading contacts..."})}):w.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:5,className:"text-center py-10",children:['No results found matching "',i,'".']})}):w.map(M=>{const D=h(M),z=x.has(M.id);return s.jsxs("tr",{onClick:()=>E(M.id),className:`border-b border-secondary cursor-pointer transition-colors 
                                                        ${z?"bg-accent/10 hover:bg-accent/20":"hover:bg-secondary/30"}`,children:[s.jsx("td",{className:"px-6 py-3 text-center",children:s.jsx("button",{className:"text-accent focus:outline-none",children:z?s.jsx(qo,{className:"w-5 h-5"}):s.jsx(Nh,{className:"w-5 h-5 text-text-secondary"})})}),s.jsxs("td",{className:"px-6 py-3 font-medium text-text-primary",children:[M.name,s.jsx("div",{className:"text-xs text-text-secondary",children:M.id})]}),s.jsx("td",{className:"px-6 py-3",children:o==="students"?s.jsxs("span",{className:"bg-secondary px-2 py-1 rounded text-xs font-semibold",children:[M.class," - ",M.section]}):M.role}),s.jsx("td",{className:"px-6 py-3 font-mono text-xs",children:D||s.jsx("span",{className:"text-red-400 italic",children:"No Number"})}),s.jsx("td",{className:"px-6 py-3 text-center",onClick:H=>H.stopPropagation(),children:D&&s.jsxs("button",{onClick:()=>S(D),className:"bg-green-500 text-white hover:bg-green-600 px-3 py-1.5 rounded-md text-xs font-bold flex items-center justify-center gap-1 mx-auto transition-colors shadow-sm",title:"Send Quick WhatsApp Message",children:[s.jsx(Ha,{className:"w-3 h-3"})," Chat"]})})]},M.id)})})]})})]})]})}),y&&L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center backdrop-blur-sm",children:s.jsxs("div",{className:"bg-primary rounded-xl p-8 shadow-2xl w-full max-w-md text-center border border-secondary relative animate-[fadeIn_0.2s]",children:[s.jsx("button",{onClick:()=>v(!1),className:"absolute top-4 right-4 text-text-secondary hover:text-red-400",children:s.jsx(vt,{className:"w-6 h-6"})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-1",children:"Sending Queue"}),s.jsxs("p",{className:"text-text-secondary text-sm",children:["Processing ",k.length," messages"]})]}),s.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-6 overflow-hidden",children:s.jsx("div",{className:"bg-accent h-2.5 rounded-full transition-all duration-300",style:{width:`${$}%`}})}),s.jsxs("div",{className:"flex justify-between text-xs text-text-secondary mb-6 font-mono",children:[s.jsxs("span",{children:[N+1," / ",k.length]}),s.jsxs("span",{children:[Math.round($),"%"]})]}),s.jsxs("div",{className:"bg-secondary/50 p-6 rounded-xl mb-8 border border-secondary relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-accent"}),s.jsx("p",{className:"text-xs text-text-secondary uppercase tracking-wider mb-2 font-semibold",children:"Next Recipient"}),s.jsx("p",{className:"font-bold text-2xl text-text-primary mb-1",children:L.name}),A?s.jsxs("p",{className:"text-lg font-mono text-green-500 flex items-center justify-center gap-2",children:[s.jsx(Bl,{className:"w-4 h-4"})," ",A]}):s.jsxs("p",{className:"text-red-400 flex items-center justify-center gap-2 font-bold mt-2",children:[s.jsx(xp,{className:"w-5 h-5"})," No Phone Number"]})]}),s.jsxs("div",{className:"space-y-3",children:[A?s.jsxs("button",{onClick:F,className:"w-full bg-green-500 text-white px-6 py-4 rounded-xl font-bold text-lg hover:bg-green-600 transition-all shadow-lg hover:shadow-green-500/30 flex items-center justify-center gap-2 transform active:scale-95",children:[s.jsx(Ha,{className:"w-6 h-6"}),N===k.length-1?"Send & Finish":"Send & Next"]}):s.jsxs("button",{onClick:U,className:"w-full bg-red-500/10 text-red-500 border border-red-500/20 px-6 py-4 rounded-xl font-bold text-lg hover:bg-red-500/20 transition-all flex items-center justify-center gap-2",children:["Skip (No Number) ",s.jsx(jc,{className:"w-5 h-5"})]}),N<k.length-1&&A&&s.jsxs("button",{onClick:U,className:"text-text-secondary text-sm hover:text-text-primary hover:underline flex items-center justify-center gap-1 w-full py-2",children:["Skip this person ",s.jsx(jc,{className:"w-3 h-3"})]})]})]})})]})},xy=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[a,l]=f.useState({vehicleNumber:"",route:"",driverName:"",driverContact:""});if(f.useEffect(()=>{l(r?{vehicleNumber:r.vehicleNumber,route:r.route,driverName:r.driverName,driverContact:r.driverContact}:{vehicleNumber:"",route:"",driverName:"",driverContact:""})},[r]),!e)return null;const o=i=>{l({...a,[i.target.name]:i.target.value})},c=i=>{i.preventDefault(),n(r?{...r,...a}:a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Vehicle"]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"vehicleNumber",placeholder:"Vehicle Number (e.g., BUS-101)",value:a.vehicleNumber,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"route",placeholder:"Route (e.g., North Route)",value:a.route,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"driverName",placeholder:"Driver's Name",value:a.driverName,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"tel",name:"driverContact",placeholder:"Driver's Contact",value:a.driverContact,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Vehicle"})]})]})]})})},fy=({isOpen:e,onClose:t,vehicle:n,onSave:r})=>{const[a,l]=f.useState([]),[o,c]=f.useState(n.studentIds||[]),[i,d]=f.useState(!0),[u,m]=f.useState(""),[x,b]=f.useState(!1);f.useEffect(()=>{e&&(async()=>{d(!0);try{const h=await ke();l(h)}catch(h){console.error("Failed to fetch students",h)}finally{d(!1)}})()},[e]);const y=p=>{c(h=>h.includes(p)?h.filter(j=>j!==p):[...h,p])},v=async()=>{b(!0);try{await Ep({...n,studentIds:o}),r(),t()}catch(p){console.error("Failed to save transport assignments",p),alert("Failed to save. Please try again.")}finally{b(!1)}},N=f.useMemo(()=>u?a.filter(p=>p.name.toLowerCase().includes(u.toLowerCase())||p.id.toLowerCase().includes(u.toLowerCase())||p.class.toLowerCase().includes(u.toLowerCase())):a,[a,u]),g=f.useMemo(()=>a.filter(p=>o.includes(p.id)),[a,o]);return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-6 shadow-2xl w-full max-w-2xl h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-secondary pb-2",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Manage Passengers"}),s.jsxs("p",{className:"text-sm text-text-secondary",children:["Vehicle: ",n.vehicleNumber," (",n.route,")"]})]}),s.jsx("button",{onClick:t,className:"text-text-secondary hover:text-red-400",children:s.jsx(vt,{})})]}),s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Zo,{className:"absolute left-3 top-2.5 w-4 h-4 text-text-secondary"}),s.jsx("input",{type:"text",placeholder:"Search student by name, ID or class...",value:u,onChange:p=>m(p.target.value),className:"w-full bg-secondary pl-10 p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]}),s.jsxs("div",{className:"bg-accent/10 px-3 py-2 rounded-md text-accent text-sm font-bold whitespace-nowrap",children:[o.length," Assigned"]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex gap-4",children:[s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden border border-secondary rounded-lg",children:[s.jsx("div",{className:"bg-secondary p-2 text-sm font-semibold text-text-primary",children:"Available Students"}),s.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:i?s.jsx("p",{className:"text-center p-4 text-text-secondary",children:"Loading..."}):N.filter(p=>!o.includes(p.id)).length===0?s.jsx("p",{className:"text-center p-4 text-text-secondary text-sm",children:"No matching students found."}):N.filter(p=>!o.includes(p.id)).slice(0,50).map(p=>s.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-secondary rounded-md border border-transparent hover:border-accent/30 group",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm text-text-primary",children:p.name}),s.jsxs("p",{className:"text-xs text-text-secondary",children:[p.id," | Class ",p.class]})]}),s.jsx("button",{onClick:()=>y(p.id),className:"p-1 bg-green-500/20 text-green-500 rounded hover:bg-green-500/40",children:s.jsx(Ko,{className:"w-4 h-4"})})]},p.id))})]}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden border border-secondary rounded-lg bg-secondary/10",children:[s.jsxs("div",{className:"bg-secondary p-2 text-sm font-semibold text-text-primary flex justify-between",children:[s.jsx("span",{children:"Assigned Passengers"}),o.length>0&&s.jsx("span",{className:"text-xs bg-accent text-white px-1.5 rounded-full",children:o.length})]}),s.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:g.length===0?s.jsx("p",{className:"text-center p-4 text-text-secondary text-sm",children:"No students assigned."}):g.map(p=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-background rounded-md shadow-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm text-text-primary",children:p.name}),s.jsx("p",{className:"text-xs text-text-secondary",children:p.id})]}),s.jsx("button",{onClick:()=>y(p.id),className:"p-1 text-red-400 hover:bg-red-50 rounded",children:s.jsx(kh,{className:"w-4 h-4"})})]},p.id))})]})]}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-4 border-t border-secondary pt-4",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{onClick:v,disabled:x,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold disabled:opacity-50",children:x?"Saving...":"Save Changes"})]})]})}):null},hy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,l]=f.useState(!1),[o,c]=f.useState(!1),[i,d]=f.useState(null),[u,m]=f.useState(null),x=f.useCallback(async()=>{try{r(!0);const p=await hg();t(p)}catch(p){console.error("Failed to fetch vehicle data",p)}finally{r(!1)}},[]);f.useEffect(()=>{x()},[x]);const b=async p=>{"id"in p?await Ep(p):await gg(p),x(),v()},y=(p=null)=>{d(p),l(!0)},v=()=>{d(null),l(!1)},N=p=>{m(p),c(!0)},g=()=>{m(null),c(!1)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Transport Management"}),s.jsxs("button",{onClick:()=>y(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(Hl,{className:"w-5 h-5"}),"Add New Vehicle"]})]}),n?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading transport data..."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(p=>s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg relative group border border-secondary hover:border-accent/50 transition-all",children:[s.jsx("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:()=>y(p),className:"p-2 bg-secondary rounded-full hover:bg-background text-text-secondary hover:text-accent",children:s.jsx(Xe,{className:"w-4 h-4"})})}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-3 bg-accent/10 rounded-full mr-4",children:s.jsx(Hl,{className:"w-8 h-8 text-accent"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:p.vehicleNumber}),s.jsx("p",{className:"text-sm text-text-secondary font-medium",children:p.route})]})]}),s.jsxs("div",{className:"space-y-3 text-sm mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary rounded-md",children:[s.jsx("span",{className:"text-text-secondary",children:"Driver"}),s.jsx("span",{className:"font-semibold text-text-primary",children:p.driverName})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary rounded-md",children:[s.jsx("span",{className:"text-text-secondary",children:"Contact"}),s.jsx("span",{className:"font-semibold text-text-primary",children:p.driverContact})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-secondary rounded-md",children:[s.jsx("span",{className:"text-text-secondary",children:"Passengers"}),s.jsxs("span",{className:"font-bold text-accent flex items-center gap-1",children:[s.jsx(at,{className:"w-3 h-3"}),p.studentIds?p.studentIds.length:0]})]})]}),s.jsxs("button",{onClick:()=>N(p),className:"w-full py-2 rounded-md border border-accent text-accent font-semibold hover:bg-accent hover:text-white transition-colors flex items-center justify-center gap-2 text-sm",children:[s.jsx(at,{className:"w-4 h-4"})," Manage Students"]})]},p.id))}),a&&s.jsx(xy,{isOpen:a,onClose:v,onSave:b,initialData:i}),o&&u&&s.jsx(fy,{isOpen:o,onClose:g,vehicle:u,onSave:x})]})},gy=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[a,l]=f.useState({name:"",category:"",quantity:0,status:"In Stock",date:new Date().toISOString().split("T")[0]});if(f.useEffect(()=>{l(r?{name:r.name,category:r.category,quantity:r.quantity,status:r.status,date:r.date||new Date().toISOString().split("T")[0]}:{name:"",category:"",quantity:0,status:"In Stock",date:new Date().toISOString().split("T")[0]})},[r]),!e)return null;const o=i=>{const{name:d,value:u}=i.target;l({...a,[d]:d==="quantity"?parseInt(u,10):u})},c=i=>{i.preventDefault(),n(r?{...r,...a}:a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Inventory Item"]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Item Name",value:a.name,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"category",placeholder:"Category (e.g., Furniture, Books)",value:a.category,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"number",name:"quantity",placeholder:"Quantity",value:a.quantity,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,min:"0"}),s.jsxs("select",{name:"status",value:a.status,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:[s.jsx("option",{value:"In Stock",children:"In Stock"}),s.jsx("option",{value:"Low Stock",children:"Low Stock"}),s.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Purchase/Entry Date"}),s.jsx("input",{type:"date",name:"date",value:a.date,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Item"})]})]})]})})},yy=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]}catch{return e}},vy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,l]=f.useState(!1),[o,c]=f.useState(null),i=f.useCallback(async()=>{try{r(!0);const x=await yg();t(x)}catch(x){console.error("Failed to fetch inventory data",x)}finally{r(!1)}},[]);f.useEffect(()=>{i()},[i]);const d=async x=>{"id"in x?await bg(x):await vg(x),i(),m()},u=(x=null)=>{c(x),l(!0)},m=()=>{c(null),l(!1)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Inventory & Asset Management"}),s.jsxs("button",{onClick:()=>u(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(lp,{className:"w-5 h-5"}),"Add New Item"]})]}),s.jsx("div",{className:"overflow-x-auto bg-primary rounded-lg shadow-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Item Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Category"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Quantity"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-4",children:"Loading inventory..."})}):e.map(x=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:x.name}),s.jsx("td",{className:"px-6 py-4",children:x.category}),s.jsx("td",{className:"px-6 py-4",children:x.quantity}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${x.status==="In Stock"?"bg-green-500/20 text-green-400":x.status==="Low Stock"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:x.status})}),s.jsx("td",{className:"px-6 py-4",children:yy(x.date)}),s.jsx("td",{className:"px-6 py-4 flex items-center gap-4",children:s.jsx("button",{onClick:()=>u(x),className:"p-1 hover:bg-background rounded",children:s.jsx(Xe,{className:"w-4 h-4 text-yellow-400"})})})]},x.id))})]})}),a&&s.jsx(gy,{isOpen:a,onClose:m,onSave:d,initialData:o})]})},by=({onClose:e,onSave:t,initialData:n})=>{const[r,a]=f.useState({title:(n==null?void 0:n.title)||"",class:(n==null?void 0:n.class)||"",subject:(n==null?void 0:n.subject)||"",date:(n==null?void 0:n.date)||"",time:(n==null?void 0:n.time)||""}),[l,o]=f.useState([]);f.useEffect(()=>{bt().then(d=>{o(d),!n&&d.length>0&&a(u=>({...u,class:d[0].name}))})},[n]);const c=d=>{const{name:u,value:m}=d.target;a(x=>({...x,[u]:m}))},i=async d=>{d.preventDefault(),n?await Mp({...r,id:n.id}):await jg(r),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Exam"]}),s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"title",placeholder:"Exam Title (e.g., Mid-Term)",value:r.title,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("select",{name:"class",value:r.class,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:[s.jsx("option",{value:"",children:"Select Class"}),l.map(d=>s.jsxs("option",{value:d.name,children:[d.name," - ",d.section]},d.id))]}),s.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:r.subject,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"date",name:"date",value:r.date,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"time",name:"time",value:r.time,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},jy=e=>{if(!e)return"TBA";if(/^\d{1,2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),a=new Date;return a.setHours(n,r,0,0),a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},wy=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},Ny=({isOpen:e,onClose:t,allExams:n})=>{const[r,a]=f.useState(""),[l,o]=f.useState(""),[c,i]=f.useState([]),[d,u]=f.useState(!1),m=f.useMemo(()=>Array.from(new Set(n.map(y=>y.title))),[n]),x=f.useMemo(()=>r?Array.from(new Set(n.filter(y=>y.title===r).map(y=>y.class))):[],[n,r]);f.useEffect(()=>{(async()=>{if(r&&l){u(!0);try{const v=await ke({class:l}),N=new Date,g=await ma(N.getFullYear(),N.getMonth()+1),p=v.map(h=>{const j=g.find(w=>w.studentId===h.id),S=j?j.status==="Paid"||j.totalDue<=0:!1;return{student:h,isEligible:S,feeStatus:j?j.status:"Unknown"}});i(p)}catch(v){console.error("Error fetching data for admit cards",v)}finally{u(!1)}}else i([])})()},[r,l]);const b=y=>{const v=We(),g=n.filter(j=>j.title===r&&j.class===l).sort((j,S)=>new Date(j.date).getTime()-new Date(S.date).getTime()).map(j=>`
            <tr>
                <td style="padding: 5px; border: 1px solid #D4AF37; text-align: center;">${wy(j.date)}</td>
                <td style="padding: 5px; border: 1px solid #D4AF37; text-align: center;">${jy(j.time)}</td>
                <td style="padding: 5px; border: 1px solid #D4AF37; font-weight: bold;">${j.subject}</td>
            </tr>
        `).join(""),p=window.open("","_blank"),h=`
            <html>
            <head>
                <title>Admit Card - ${y.name}</title>
                <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
                <style>
                    @media print {
                        @page { size: A4 portrait; margin: 0; }
                        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                    }
                    body {
                        font-family: 'Playfair Display', serif;
                        background-color: #fff;
                        margin: 0;
                        padding: 20px;
                        color: #1E3A29;
                    }
                    .card {
                        border: 3px solid #1E5631;
                        outline: 2px solid #D4AF37;
                        outline-offset: -6px;
                        padding: 20px;
                        margin: 0 auto 20px auto;
                        max-width: 700px;
                        position: relative;
                        background: #fdfbf7;
                    }
                    .watermark {
                        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                        width: 300px; height: 300px;
                        background-image: url('${v.logo}');
                        background-size: contain; background-repeat: no-repeat; background-position: center;
                        opacity: 0.05; z-index: 0;
                    }
                    .header { text-align: center; border-bottom: 2px solid #D4AF37; padding-bottom: 10px; margin-bottom: 15px; position: relative; z-index: 1; }
                    .header img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #1E5631; display: block; margin: 0 auto 5px; }
                    .header h1 { font-family: 'Cinzel', serif; font-size: 24px; color: #1E5631; margin: 0; text-transform: uppercase; }
                    .header p { font-size: 12px; margin: 2px 0; color: #555; }
                    .admit-title {
                        background-color: #1E5631; color: #D4AF37; display: inline-block;
                        padding: 5px 20px; border-radius: 20px; font-family: 'Cinzel', serif;
                        font-weight: bold; font-size: 16px; margin-top: 5px;
                        border: 1px solid #D4AF37;
                    }
                    
                    .candidate-box {
                        display: flex; gap: 20px; margin-bottom: 15px; position: relative; z-index: 1;
                        border: 1px solid #D4AF37; padding: 10px; background: rgba(255,255,255,0.5);
                    }
                    .photo-frame {
                        width: 100px; height: 100px; border: 2px solid #1E5631;
                        display: flex; align-items: center; justify-content: center; background: #fff;
                    }
                    .photo-frame img { width: 100%; height: 100%; object-fit: cover; }
                    .details { flex: 1; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; font-size: 14px; }
                    .label { font-weight: bold; color: #1E5631; }
                    
                    table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 12px; position: relative; z-index: 1; }
                    th { background-color: #1E5631; color: #fff; padding: 5px; border: 1px solid #D4AF37; font-family: 'Cinzel', serif; }
                    
                    .instructions { font-size: 10px; margin-bottom: 30px; position: relative; z-index: 1; }
                    .instructions h4 { margin: 0 0 5px 0; color: #1E5631; border-bottom: 1px solid #D4AF37; display: inline-block; }
                    .instructions ul { margin: 0; padding-left: 20px; }
                    
                    .footer { display: flex; justify-content: space-between; margin-top: 40px; position: relative; z-index: 1; }
                    .sig-line { border-top: 1px solid #1E5631; width: 150px; text-align: center; font-size: 12px; font-weight: bold; padding-top: 5px; }
                </style>
            </head>
            <body>
                <div class="card">
                    <div class="watermark"></div>
                    <div class="header">
                        <img src="${v.logo}" />
                        <h1>${v.name}</h1>
                        <p>${v.address}</p>
                        <div class="admit-title">${r} ADMIT CARD</div>
                    </div>
                    
                    <div class="candidate-box">
                        <div class="photo-frame">
                            <img src="${y.photo}" />
                        </div>
                        <div class="details">
                            <div><span class="label">Name:</span> ${y.name}</div>
                            <div><span class="label">ID:</span> ${y.id}</div>
                            <div><span class="label">Class:</span> ${y.class} - ${y.section}</div>
                            <div><span class="label">Guardian:</span> ${y.guardianName}</div>
                            <div><span class="label">Session:</span> ${new Date().getFullYear()}</div>
                        </div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Subject</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${g}
                        </tbody>
                    </table>
                    
                    <div class="instructions">
                        <h4>Important Instructions</h4>
                        <ul>
                            <li>Candidates must bring this Admit Card to the examination hall.</li>
                            <li>Arrive at least 15 minutes before the scheduled time.</li>
                            <li>Use of mobile phones or electronic gadgets is strictly prohibited.</li>
                            <li>Maintain silence and discipline inside the exam hall.</li>
                            <li>Bring your own stationery (pens, pencils, rulers, etc.).</li>
                        </ul>
                    </div>
                    
                    <div class="footer">
                        <div class="sig-line">Class Twacher</div>
                        <div class="sig-line">Director</div>
                    </div>
                </div>
                <script>
                    window.onload = function() { setTimeout(() => { window.print(); window.close(); }, 500); }
                <\/script>
            </body>
            </html>
        `;p==null||p.document.write(h),p==null||p.document.close()};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-4xl h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-secondary pb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Generate Admit Cards"}),s.jsx("button",{onClick:t,className:"text-text-secondary hover:text-red-400",children:s.jsx(vt,{})})]}),s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsxs("div",{className:"w-1/2",children:[s.jsx("label",{className:"block text-sm text-text-secondary mb-1",children:"Select Exam"}),s.jsxs("select",{value:r,onChange:y=>{a(y.target.value),o("")},className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[s.jsx("option",{value:"",children:"-- Choose Exam --"}),m.map(y=>s.jsx("option",{value:y,children:y},y))]})]}),s.jsxs("div",{className:"w-1/2",children:[s.jsx("label",{className:"block text-sm text-text-secondary mb-1",children:"Select Class"}),s.jsxs("select",{value:l,onChange:y=>o(y.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",disabled:!r,children:[s.jsx("option",{value:"",children:"-- Choose Class --"}),x.map(y=>s.jsx("option",{value:y,children:y},y))]})]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto bg-secondary/30 rounded-lg p-4 border border-secondary",children:d?s.jsx("div",{className:"text-center py-10 text-text-secondary",children:"Checking eligibility..."}):c.length===0?s.jsx("div",{className:"text-center py-10 text-text-secondary",children:l?"No students found.":"Please select an exam and class to view students."}):s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"ID"}),s.jsx("th",{className:"px-4 py-3",children:"Student Name"}),s.jsx("th",{className:"px-4 py-3",children:"Fee Status"}),s.jsx("th",{className:"px-4 py-3 text-center",children:"Action"})]})}),s.jsx("tbody",{children:c.map(({student:y,isEligible:v,feeStatus:N})=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-3",children:y.id}),s.jsx("td",{className:"px-4 py-3 font-medium text-text-primary",children:y.name}),s.jsx("td",{className:"px-4 py-3",children:v?s.jsxs("span",{className:"flex items-center gap-1 text-green-400 font-semibold",children:[s.jsx(Dh,{className:"w-4 h-4"})," Cleared"]}):s.jsxs("span",{className:"flex items-center gap-1 text-red-400 font-semibold",title:"Must clear dues for current month",children:[s.jsx(xp,{className:"w-4 h-4"})," ",N]})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsxs("button",{onClick:()=>b(y),disabled:!v,className:"bg-accent text-white px-3 py-1 rounded hover:bg-accent/90 disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2 mx-auto text-xs",children:[s.jsx(yt,{className:"w-3 h-3"})," Print"]})})]},y.id))})]})})]})}):null},Sy=e=>{if(!e)return"Invalid Date";const t=new Date(e);if(isNaN(t.getTime())){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[n,r,a]=e.split("-").map(Number);return new Date(Date.UTC(n,r-1,a)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}return e}return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},ky=e=>{if(!e)return"Invalid Time";const t=new Date(e);if(isNaN(t.getTime())){if(/^\d{1,2}:\d{2}$/.test(e)){const[n,r]=e.split(":").map(Number),a=new Date;return a.setHours(n,r),a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}return e}return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},Cy=()=>{const{user:e}=Ce(),t=(e==null?void 0:e.role)==="Admin",[n,r]=f.useState([]),[a,l]=f.useState(!0),[o,c]=f.useState(!1),[i,d]=f.useState(!1),[u,m]=f.useState(!1),[x,b]=f.useState(!1),[y,v]=f.useState(null),N=async()=>{try{l(!0);const h=await xa();r(h)}catch(h){console.error("Failed to fetch exam data",h)}finally{l(!1)}};f.useEffect(()=>{N()},[]);const g=()=>{N(),b(!1),v(null)},p=()=>{c(!1),N()};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Examination & Results"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Upcoming Exam Schedule"}),t&&s.jsx("button",{onClick:()=>{v(null),b(!0)},className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"Add New Exam"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Subject"}),s.jsx("th",{className:"px-4 py-2",children:"Class"}),s.jsx("th",{className:"px-4 py-2",children:"Date"}),s.jsx("th",{className:"px-4 py-2",children:"Time"}),t&&s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:t?5:4,className:"text-center py-4",children:"Loading schedule..."})}):n.map(h=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-2 font-medium text-text-primary",children:h.subject}),s.jsx("td",{className:"px-4 py-2",children:h.class}),s.jsx("td",{className:"px-4 py-2",children:Sy(h.date)}),s.jsx("td",{className:"px-4 py-2",children:ky(h.time)}),t&&s.jsx("td",{className:"px-4 py-2 flex gap-2",children:s.jsx("button",{onClick:()=>{v(h),b(!0)},className:"p-1 hover:bg-background rounded",children:s.jsx(Xe,{className:"w-4 h-4 text-yellow-400"})})})]},h.id))})]})})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Manage Results"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-text-secondary",children:"Input marks including CT, MCQ, CQ, and Viva, then generate report cards."}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[t&&s.jsx("button",{onClick:()=>c(!0),className:"flex-1 bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors",children:"Input Results"}),s.jsx("button",{onClick:()=>d(!0),className:"flex-1 bg-secondary text-text-primary px-4 py-2 rounded-lg font-semibold hover:bg-secondary/80 transition-colors",children:"Generate Report Cards"}),s.jsxs("button",{onClick:()=>m(!0),className:"flex-1 bg-yellow-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-yellow-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(ip,{className:"w-4 h-4"})," Generate Admit Cards"]})]})]})]})]}),o&&s.jsx(Ey,{allExams:n,onClose:p}),i&&s.jsx(My,{allExams:n,onClose:()=>d(!1)}),u&&s.jsx(Ny,{isOpen:u,onClose:()=>m(!1),allExams:n}),x&&s.jsx(by,{onClose:()=>{b(!1),v(null)},onSave:g,initialData:y})]})},Ey=({allExams:e,onClose:t})=>{const[n,r]=f.useState(""),[a,l]=f.useState([]),[o,c]=f.useState(!1),[i,d]=f.useState({totalMarksCT:10,totalMarksMCQ:30,totalMarksCQ:50,totalMarksViva:10}),u=f.useMemo(()=>e.find(v=>v.id===n),[e,n]);f.useEffect(()=>{u?(c(!0),d({totalMarksCT:u.totalMarksCT!==void 0?Number(u.totalMarksCT):10,totalMarksMCQ:u.totalMarksMCQ!==void 0?Number(u.totalMarksMCQ):30,totalMarksCQ:u.totalMarksCQ!==void 0?Number(u.totalMarksCQ):50,totalMarksViva:u.totalMarksViva!==void 0?Number(u.totalMarksViva):10}),Jo(u.id,u.class).then(v=>{l(v),c(!1)})):l([])},[u]);const m=(v,N,g)=>{const p=g===""?0:parseFloat(g);l(h=>h.map(j=>{if(j.studentId===v){const S={...j,[N]:p||void 0},w=(S.ct||0)+(S.mcq||0)+(S.cq||0)+(S.viva||0),E=S.ct!==void 0||S.mcq!==void 0||S.cq!==void 0||S.viva!==void 0;return{...S,marks:E?w:null}}return j}))},x=v=>{const{name:N,value:g}=v.target;d(p=>({...p,[N]:parseFloat(g)||0}))},b=async()=>{u&&(await Mp({...u,...i}),await wg(u.id,a),alert("Exam configuration and results saved successfully!"),t())},y=i.totalMarksCT+i.totalMarksMCQ+i.totalMarksCQ+i.totalMarksViva;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-5xl h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Input Exam Results"}),s.jsx("button",{onClick:t,className:"text-text-secondary hover:text-red-400",children:"Close"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-text-secondary mb-1",children:"Select Exam"}),s.jsxs("select",{onChange:v=>r(v.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[s.jsx("option",{value:"",children:"-- Choose Exam --"}),e.map(v=>s.jsxs("option",{value:v.id,children:[v.title," - ",v.subject," (Class ",v.class,")"]},v.id))]})]}),u&&s.jsxs("div",{className:"bg-secondary/30 p-3 rounded-md border border-secondary",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm font-bold text-text-primary",children:[s.jsx(mp,{className:"w-4 h-4 text-accent"})," Configure Exam Full Marks"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary block",children:"CT Max"}),s.jsx("input",{type:"number",name:"totalMarksCT",value:i.totalMarksCT,onChange:x,className:"w-16 p-1 rounded text-sm bg-background border border-secondary text-center"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary block",children:"MCQ Max"}),s.jsx("input",{type:"number",name:"totalMarksMCQ",value:i.totalMarksMCQ,onChange:x,className:"w-16 p-1 rounded text-sm bg-background border border-secondary text-center"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary block",children:"CQ Max"}),s.jsx("input",{type:"number",name:"totalMarksCQ",value:i.totalMarksCQ,onChange:x,className:"w-16 p-1 rounded text-sm bg-background border border-secondary text-center"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-text-secondary block",children:"Viva Max"}),s.jsx("input",{type:"number",name:"totalMarksViva",value:i.totalMarksViva,onChange:x,className:"w-16 p-1 rounded text-sm bg-background border border-secondary text-center"})]}),s.jsxs("div",{className:"ml-auto flex flex-col items-end justify-center",children:[s.jsx("span",{className:"text-xs text-text-secondary",children:"Total"}),s.jsx("span",{className:"font-bold text-accent",children:y})]})]})]})]}),s.jsx("div",{className:"flex-grow overflow-auto border border-secondary rounded-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary relative",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"Student Name"}),s.jsxs("th",{className:"px-4 py-3 text-center w-24",children:["CT (",i.totalMarksCT,")"]}),s.jsxs("th",{className:"px-4 py-3 text-center w-24",children:["MCQ (",i.totalMarksMCQ,")"]}),s.jsxs("th",{className:"px-4 py-3 text-center w-24",children:["CQ (",i.totalMarksCQ,")"]}),s.jsxs("th",{className:"px-4 py-3 text-center w-24",children:["Viva (",i.totalMarksViva,")"]}),s.jsx("th",{className:"px-4 py-3 text-center w-24 font-bold text-accent",children:"Total"})]})}),s.jsx("tbody",{children:o?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-8",children:"Loading students..."})}):a.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-8",children:"Select an exam to load students."})}):a.map(v=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/30",children:[s.jsxs("td",{className:"px-4 py-2 font-medium text-text-primary",children:[v.studentName," ",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-text-secondary",children:v.studentId})]}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:v.ct??"",onChange:N=>m(v.studentId,"ct",N.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:v.mcq??"",onChange:N=>m(v.studentId,"mcq",N.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:v.cq??"",onChange:N=>m(v.studentId,"cq",N.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:v.viva??"",onChange:N=>m(v.studentId,"viva",N.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center font-bold text-lg text-accent",children:v.marks??"-"})]},v.studentId))})]})}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{onClick:b,disabled:!u,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold disabled:bg-gray-500",children:"Save Configuration & Results"})]})]})})},My=({allExams:e,onClose:t})=>{const[n,r]=f.useState(""),[a,l]=f.useState(!1),[o,c]=f.useState([]),[i,d]=f.useState([]),[u,m]=f.useState(new Map);f.useEffect(()=>{(async()=>{const[y,v]=await Promise.all([bt(),Je()]);c(y),d(v)})()},[]),f.useEffect(()=>{(async()=>{var y;if(n){l(!0);const v=await ke({class:n}),N=e.filter(j=>j.class===n),g=new Map,p={};for(const j of v){const S=await kp(j.id);g.set(j.id,{student:j,results:[],attendance:S}),p[j.id]=0}for(const j of N){const S=await Jo(j.id,n),w={ct:Number(j.totalMarksCT||0),mcq:Number(j.totalMarksMCQ||0),cq:Number(j.totalMarksCQ||0),viva:Number(j.totalMarksViva||0)},E=w.ct+w.mcq+w.cq+w.viva||100;let C=0;S.forEach(P=>{const k=P.marks||0;k>C&&(C=k),p[P.studentId]!==void 0&&(p[P.studentId]+=k)});for(const P of S)g.has(P.studentId)&&((y=g.get(P.studentId))==null||y.results.push({subject:j.subject,examTitle:j.title,marks:P.marks,ct:P.ct,mcq:P.mcq,cq:P.cq,viva:P.viva,totalMarks:E,fullMarks:w,highestMark:C}))}Object.entries(p).sort(([,j],[,S])=>S-j).forEach(([j,S],w)=>{g.has(j)&&(g.get(j).rank=w+1,g.get(j).totalObtained=S)}),m(g),l(!1)}else m(new Map)})()},[n,e]);const x=b=>{const y=u.get(b);if(!y)return;const v=We(),N=window.open("","_blank"),g=vp(y.results.map(F=>({marks:F.marks,totalMarks:F.totalMarks}))),p=y.totalObtained,h=y.results.reduce((F,U)=>F+U.totalMarks,0),j=h>0?p/h*100:0,S=o.find(F=>F.name===n),w=i.find(F=>F.id===(S==null?void 0:S.classTeacherId)),E={studentName:y.student.name,className:y.student.class,section:y.student.section,group:y.student.group||"N/A",studentId:y.student.id,rollNo:y.student.id.replace(/\D/g,""),examTitle:y.results.length>0?y.results[0].examTitle:"EXAMINATION",classTeacher:S?S.classTeacherName:"_____________",teacherPhone:w?w.phone:"",totalMarksObtained:p,percentage:j,rank:y.rank},C=y.attendance||{totalWorkingDays:67,present:65,absent:2},P=h;let k=y.results.map(F=>{const U=Vr(F.marks,F.totalMarks),oe=F.ct??"-",he=F.cq??"-",M=F.viva??"-",D=F.fullMarks||{ct:0,cq:0,viva:0},z=D.ct>0?D.ct:"-",H=D.cq>0?D.cq:"-",Z=D.viva>0?D.viva:"-";return`
            <tr>
                <td style="text-align: left; padding-left: 5px;">${F.subject}</td>
                <td>${z}</td>
                <td>${H}</td>
                <td>${Z}</td>
                <td>${oe!=="-"?Number(oe).toFixed(1):"--"}</td>
                <td>${he!=="-"?Number(he).toFixed(1):"--"}</td>
                <td>${M!=="-"?Number(M).toFixed(1):"--"}</td>
                <td style="font-weight: bold;">${F.marks?Number(F.marks).toFixed(1):"-"}</td>
                <td style="font-weight: bold;">${U.grade}</td>
                <td>${U.point.toFixed(1)}</td>
                <td>${F.highestMark?Number(F.highestMark).toFixed(1):"-"}</td>
            </tr>
        `}).join("");const L=Math.max(0,12-y.results.length),A=Array(L).fill(0).map(()=>`
            <tr>
                <td style="height: 24px;"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
        `).join(""),$=`
            <html>
            <head>
                <title>Progress Report - ${E.studentName}</title>
                <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;700&family=Tiro+Bangla&display=swap" rel="stylesheet">
                <style>
                    @media print {
                        @page { size: A4; margin: 0; }
                        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                        .no-print { display: none; }
                    }
                    body {
                        font-family: 'Times New Roman', serif;
                        background-color: #ffffff;
                        margin: 0;
                        padding: 0;
                        height: 100vh;
                        box-sizing: border-box;
                    }
                    .report-container {
                        width: 210mm;
                        height: 297mm;
                        margin: 0 auto;
                        padding: 10mm;
                        box-sizing: border-box;
                        background-color: #ffffff;
                        position: relative;
                        overflow: hidden;
                    }
                    
                    /* Watermark */
                    .watermark {
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 600px;
                        height: 600px;
                        background-image: url('${v.logo}');
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size: contain;
                        opacity: 0.08;
                        z-index: 0;
                        pointer-events: none;
                    }
                    
                    /* Border Container */
                    .border-box {
                        border: 1px solid #666;
                        padding: 5px;
                        height: 98%;
                        position: relative;
                        z-index: 1;
                    }
                    .inner-border {
                        border: 1px solid #444;
                        height: 100%;
                        padding: 15px;
                        box-sizing: border-box;
                    }

                    /* Header */
                    .header { text-align: center; position: relative; margin-bottom: 10px; }
                    .bismillah-img { width: 100px; margin-bottom: 5px; display: block; margin-left: auto; margin-right: auto; }
                    .inst-name { font-size: 20px; font-weight: bold; text-transform: uppercase; color: #2c3e50; margin: 5px 0; letter-spacing: 1px; }
                    .inst-address { font-size: 12px; margin-bottom: 5px; }
                    .inst-contact { font-size: 12px; }
                    .logo { position: absolute; left: 10px; top: 10px; width: 70px; height: 70px; }
                    
                    .report-title { 
                        text-align: center; margin-top: 5px; margin-bottom: 5px; 
                        font-size: 16px; font-weight: bold; text-decoration: underline; 
                    }
                    .exam-name { text-align: center; font-size: 14px; text-transform: uppercase; margin-bottom: 10px; }

                    /* Student Info */
                    .student-info { 
                        display: flex; justify-content: space-between; 
                        border: 1px solid #999; background-color: transparent;
                        padding: 10px 20px; margin-bottom: 10px; font-size: 14px; line-height: 1.6;
                    }
                    .info-col { width: 48%; }
                    .info-row { display: flex; }
                    .label { width: 100px; font-weight: bold; }
                    .val { font-weight: 500; }

                    /* Main Table */
                    .marks-table { width: 100%; border-collapse: collapse; font-size: 12px; margin-bottom: 15px; background-color: transparent; }
                    .marks-table th, .marks-table td { border: 1px solid #666; padding: 4px; text-align: center; }
                    .marks-table th { background-color: #f0f0f0; font-weight: bold; }
                    
                    /* Bottom Section Grid */
                    .bottom-grid { display: flex; gap: 10px; margin-top: 10px; }
                    .col-summary { width: 30%; }
                    .col-attendance { width: 40%; }
                    .col-grading { width: 30%; }

                    .sub-table { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 10px; background-color: transparent; }
                    .sub-table td { border: 1px solid #666; padding: 3px 5px; }
                    .sub-table .lbl { font-weight: bold; background-color: #f0f0f0; }
                    
                    .grading-table { width: 100%; border-collapse: collapse; font-size: 10px; text-align: center; background-color: transparent; }
                    .grading-table th, .grading-table td { border: 1px solid #666; padding: 2px; }
                    .grading-table th { background-color: #ccc; }

                    .remarks-box { 
                        border: 1px solid #666; height: 50px; margin-top: 5px; padding: 5px; 
                        background-color: transparent; position: relative; font-size: 12px;
                    }

                    /* Footer Signatures */
                    .footer { display: flex; justify-content: space-between; margin-top: 30px; padding: 0 20px; }
                    .sig-box { text-align: center; width: 150px; }
                    .sig-line { border-top: 1px solid #000; margin-top: 30px; font-size: 12px; font-weight: bold; padding-top: 5px;}
                    .sig-box .outstanding { font-family: 'Tiro Bangla', serif; font-size: 14px; position: relative; top: 10px; }

                    .watermark-text { position: absolute; bottom: 5px; right: 10px; font-size: 10px; font-style: italic; color: #555; }
                    .print-date { position: absolute; bottom: 5px; left: 10px; font-size: 10px; font-style: italic; color: #555; }

                </style>
            </head>
            <body>
                <div class="report-container">
                    <div class="watermark"></div>
                    <div class="border-box">
                        <div class="inner-border">
                            
                            <!-- Header -->
                            <div class="header">
                                <img src="${v.logo}" class="logo" />
                                <img src="https://iili.io/f5YQSRe.png" class="bismillah-img" alt="Bismillah" />
                                <div class="inst-name">${v.name}</div>
                                <div class="inst-address">${v.address}</div>
                                <div class="inst-contact">Phone: ${v.phone}, Email: ${v.email}</div>
                                <div class="report-title">Progress Report</div>
                                <div class="exam-name">${E.examTitle} - ${new Date().getFullYear()}</div>
                            </div>

                            <!-- Info -->
                            <div class="student-info">
                                <div class="info-col">
                                    <div class="info-row"><span class="label">Name :</span> <span class="val">${E.studentName}</span></div>
                                    <div class="info-row"><span class="label">Class :</span> <span class="val">${E.className}</span></div>
                                    <div class="info-row"><span class="label">Section :</span> <span class="val">${E.section}</span></div>
                                    <div class="info-row"><span class="label">Group :</span> <span class="val">${E.group}</span></div>
                                </div>
                                <div class="info-col">
                                    <div class="info-row"><span class="label">ID Number :</span> <span class="val">${E.studentId}</span></div>
                                    <div class="info-row"><span class="label">Roll No :</span> <span class="val">${E.rollNo}</span></div>
                                    <div class="info-row"><span class="label">Class Teacher :</span> <span class="val">${E.classTeacher}</span></div>
                                    <div class="info-row"><span class="label">Teacher Cell :</span> <span class="val">${E.teacherPhone}</span></div>
                                </div>
                            </div>

                            <!-- Table -->
                            <table class="marks-table">
                                <thead>
                                    <tr>
                                        <th rowspan="2" style="width: 25%;">Subject</th>
                                        <th colspan="3">Exam Marks</th>
                                        <th colspan="3">Obtained / Calculated Marks</th>
                                        <th rowspan="2" style="width: 7%;">Total</th>
                                        <th rowspan="2" style="width: 6%;">Grade</th>
                                        <th rowspan="2" style="width: 6%;">Grade Point</th>
                                        <th rowspan="2" style="width: 7%;">Highest Marks</th>
                                    </tr>
                                    <tr>
                                        <th style="width: 6%;">MT</th> <th style="width: 6%;">CQ</th> <th style="width: 6%;">Viva</th>
                                        <th style="width: 6%;">MT</th> <th style="width: 6%;">CQ</th> <th style="width: 6%;">Viva</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${k}
                                    ${A}
                                </tbody>
                            </table>

                            <!-- Bottom Grid -->
                            <div class="bottom-grid">
                                <!-- Col 1: Summary -->
                                <div class="col-summary">
                                    <table class="sub-table">
                                        <tr><td class="lbl">Exam Full Marks</td><td style="text-align:right;">${P}</td></tr>
                                        <tr><td class="lbl">Total Obtained Marks</td><td style="text-align:right;">${E.totalMarksObtained.toFixed(2)}</td></tr>
                                        <tr><td class="lbl">Obtained Percentage</td><td style="text-align:right;">${E.percentage.toFixed(2)}%</td></tr>
                                    </table>
                                    <table class="sub-table">
                                        <tr><td class="lbl" style="background-color: #d8e2dc;">Obtained GPA</td><td style="text-align:right; font-weight:bold;">${g.gpa}</td></tr>
                                        <tr><td class="lbl">Class Merit</td><td style="text-align:right;">${E.rank||"-"}</td></tr>
                                        <tr><td class="lbl">Section Merit</td><td style="text-align:right;">N/A</td></tr>
                                        <tr><td class="lbl">Group Merit</td><td style="text-align:right;">N/A</td></tr>
                                    </table>
                                </div>

                                <!-- Col 2: Attendance & Remarks -->
                                <div class="col-attendance">
                                    <table class="sub-table">
                                        <tr><td class="lbl">Working Days</td><td style="text-align:center;">${C.totalWorkingDays}</td></tr>
                                        <tr><td class="lbl">Present</td><td style="text-align:center;">${C.present}</td></tr>
                                        <tr><td class="lbl">Absent</td><td style="text-align:center;">${C.absent}</td></tr>
                                    </table>
                                    
                                    <div style="font-size: 11px; font-weight: bold; margin-bottom: 2px;">Promotion Note / Remarks</div>
                                    <div class="remarks-box">
                                        ${g.grade==="F"?"FAILED.":"PASSED."}
                                    </div>
                                </div>

                                <!-- Col 3: Grading Scale -->
                                <div class="col-grading">
                                    <table class="grading-table">
                                        <tr style="background-color: #ccc;"><th colspan="3">Grade Distribution</th></tr>
                                        <tr><th>Marks</th><th>Grade</th><th>GP</th></tr>
                                        <tr><td>80% and Above</td><td>A+</td><td>5.00</td></tr>
                                        <tr><td>70% - 79%</td><td>A</td><td>4.00</td></tr>
                                        <tr><td>60% - 69%</td><td>A-</td><td>3.50</td></tr>
                                        <tr><td>50% - 59%</td><td>B</td><td>3.00</td></tr>
                                        <tr><td>40% - 49%</td><td>C</td><td>2.00</td></tr>
                                        <tr><td>33% - 39%</td><td>D</td><td>1.00</td></tr>
                                        <tr><td>Below 33%</td><td>F</td><td>0.00</td></tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Footer Signatures -->
                            <div class="footer">
                                <div class="sig-box">
                                    <div style="height: 40px;"></div>
                                    <div class="sig-line">Class Teacher</div>
                                </div>
                                <div class="sig-box">
                                    <div style="height: 40px;"></div> 
                                    <div class="sig-line">Director</div>
                                </div>
                                <div class="sig-box">
                                    <div style="height: 40px;"></div>
                                    <div class="sig-line">Guardian</div>
                                </div>
                            </div>

                            <div class="remarks-box" style="margin-top: 10px; height: 30px; display:flex; align-items:center;">
                                <span style="font-weight:bold; margin-right: 10px;">Remarks:</span>
                            </div>

                            <div class="print-date">Printed on ${new Date().toLocaleDateString("en-GB")}</div>
                            <div class="watermark-text">Powered by IICM</div>

                        </div>
                    </div>
                </div>
                <script>
                    window.onload = function() { setTimeout(() => { window.print(); window.close(); }, 800); }
                <\/script>
            </body>
            </html>
        `;N==null||N.document.write($),N==null||N.document.close()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Generate Report Cards"}),s.jsxs("select",{onChange:b=>r(b.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent mb-4",children:[s.jsx("option",{value:"",children:"Select Class"}),[...new Set(e.map(b=>b.class))].map(b=>s.jsxs("option",{value:b,children:["Class ",b]},b))]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:a?s.jsx("p",{children:"Loading results..."}):Array.from(u.values()).map(({student:b})=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-md mb-2",children:[s.jsx("span",{className:"text-text-primary",children:b.name}),s.jsxs("button",{onClick:()=>x(b.id),className:"text-accent hover:underline text-sm flex items-center gap-1",children:[s.jsx(yt,{className:"w-4 h-4"})," Print Report"]})]},b.id))}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Close"})})]})})},Py=({isOpen:e,onClose:t,onAddEvent:n})=>{const[r,a]=f.useState(""),[l,o]=f.useState(""),[c,i]=f.useState("Academic"),[d,u]=f.useState("");if(!e)return null;const m=x=>{x.preventDefault(),n({title:r,date:l,type:c,description:d}),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Add New Event"}),s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("input",{type:"text",placeholder:"Event Title",value:r,onChange:x=>a(x.target.value),className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"date",value:l,onChange:x=>o(x.target.value),className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("select",{value:c,onChange:x=>i(x.target.value),className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0,children:[s.jsx("option",{children:"Academic"}),s.jsx("option",{children:"Sports"}),s.jsx("option",{children:"Cultural"}),s.jsx("option",{children:"Holiday"})]}),s.jsx("textarea",{placeholder:"Description",value:d,onChange:x=>u(x.target.value),rows:3,className:"col-span-2 bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Add Event"})]})]})]})})},Iy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,l]=f.useState(!1);f.useEffect(()=>{(async()=>{try{r(!0);const d=await ei();t(d)}catch(d){console.error("Failed to fetch events",d)}finally{r(!1)}})()},[]);const o=async i=>{const d=await Sg(i);t(u=>[d,...u])},c=i=>{switch(i){case"Academic":return"bg-blue-500/20 text-blue-400";case"Sports":return"bg-green-500/20 text-green-400";case"Cultural":return"bg-purple-500/20 text-purple-400";case"Holiday":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Events & Activity"}),s.jsxs("button",{onClick:()=>l(!0),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(Un,{className:"w-5 h-5"}),"Add New Event"]})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Upcoming Events"}),s.jsx("div",{className:"space-y-4",children:n?s.jsx("p",{children:"Loading events..."}):e.map(i=>s.jsxs("div",{className:"p-4 bg-secondary rounded-md flex items-start gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-accent",children:new Date(i.date).getDate()}),s.jsx("p",{className:"text-sm text-text-secondary",children:new Date(i.date).toLocaleString("default",{month:"short"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:i.title}),s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${c(i.type)}`,children:i.type})]}),s.jsx("p",{className:"text-text-secondary mt-1 text-sm",children:i.description})]})]},i.id))})]}),s.jsx(Py,{isOpen:a,onClose:()=>l(!1),onAddEvent:o})]})},Mc=e=>{if(!e)return"N/A";const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})},Dy=({person:e,type:t,onClose:n})=>{const r=We(),a=t==="students",[l,o]=f.useState(!1),[c,i]=f.useState("N/A");f.useEffect(()=>{if(a){const x=e;bt().then(b=>{const y=b.find(v=>v.name===x.class&&v.section===x.section);y&&i(y.classTeacherName)})}},[e,a]);const d=a?e.address:e.temporaryAddress||e.permanentAddress,u=e.id.replace(/\D/g,""),m=()=>{const x=window.open("","_blank");if(!x)return;const b=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${e.id}`,y=a?"":Mc(e.joiningDate);x.document.write(`
            <html>
                <head>
                    <title>ID Card - ${e.name}</title>
                    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
                    <style>
                      @media print {
                        @page { margin: 0; size: auto; }
                        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background-color: #fff; }
                      }
                      
                      body {
                        font-family: 'Roboto', sans-serif;
                        margin: 0;
                        padding: 20px;
                        display: flex;
                        justify-content: center;
                        align-items: flex-start;
                        background-color: #f0f0f0;
                        gap: 20px;
                      }

                      .card-wrapper {
                        display: flex;
                        gap: 10px;
                      }

                      .id-card {
                        width: 2.13in;
                        height: 3.37in;
                        border-radius: 8px;
                        position: relative;
                        overflow: hidden;
                        background: #fff;
                        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                        border: 1px solid #ddd;
                        flex-shrink: 0;
                      }

                      /* --- VISUAL ASSETS --- */
                      .pattern-bg {
                        position: absolute;
                        top: 0; left: 0; width: 100%; height: 100%;
                        background-image: url('${r.logo}');
                        background-size: 80%;
                        background-position: center;
                        background-repeat: no-repeat;
                        opacity: 0.07;
                        z-index: 0;
                      }
                      
                      .gold-frame {
                        position: absolute;
                        top: 4px; left: 4px; right: 4px; bottom: 4px;
                        border: 1px solid #D4AF37;
                        border-radius: 6px;
                        z-index: 1;
                        pointer-events: none;
                      }

                      /* --- FRONT SIDE DESIGN --- */
                      .header {
                        background-color: #1E5631;
                        height: 85px;
                        width: 100%;
                        position: relative;
                        z-index: 2;
                        border-bottom: 3px solid #D4AF37;
                        text-align: center;
                        color: white;
                      }
                      
                      .bismillah-img {
                        width: 60px;
                        display: block;
                        margin: 3px auto 0 auto;
                        filter: invert(81%) sepia(23%) saturate(966%) hue-rotate(359deg) brightness(89%) contrast(90%);
                      }

                      .logo-circle {
                        width: 46px;
                        height: 46px;
                        background: white;
                        border-radius: 50%;
                        border: 2px solid #D4AF37;
                        margin: 2px auto 2px auto;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        overflow: hidden;
                      }
                      .logo-circle img { width: 38px; height: 38px; }

                      .inst-name {
                        font-family: 'Cinzel', serif;
                        font-size: 8px;
                        font-weight: 700;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                        margin-top: 2px;
                      }

                      .photo-area {
                        margin-top: 5px;
                        text-align: center;
                        position: relative;
                        z-index: 2;
                      }
                      
                      .profile-img {
                        width: 80px;
                        height: 90px;
                        border: 2px solid #1E5631;
                        border-radius: 6px;
                        object-fit: cover;
                        background: #f0f0f0;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                      }

                      .student-name {
                        text-align: center;
                        font-family: 'Cinzel', serif;
                        color: #1E5631;
                        font-weight: bold;
                        font-size: 11px;
                        margin: 4px 0 2px 0;
                        text-transform: uppercase;
                        z-index: 2;
                        position: relative;
                        padding: 0 4px;
                        
                        /* Wrapping Logic */
                        display: -webkit-box;
                        -webkit-line-clamp: 2;
                        -webkit-box-orient: vertical;
                        overflow: hidden;
                        line-height: 1.2;
                        min-height: 2.4em; 
                        display: flex;
                        align-items: center;
                        justify-content: center;
                      }

                      .designation {
                        text-align: center;
                        background-color: #D4AF37;
                        color: #1E5631;
                        font-size: 9px;
                        font-weight: bold;
                        display: inline-block;
                        padding: 1px 10px;
                        border-radius: 10px;
                        position: relative;
                        left: 50%;
                        transform: translateX(-50%);
                        margin-bottom: 5px;
                        z-index: 2;
                        text-transform: uppercase;
                      }

                      /* Layout for Details and QR */
                      .content-layout {
                        display: grid;
                        grid-template-columns: 1fr 45px;
                        width: 90%;
                        margin: 0 auto;
                        gap: 2px;
                        z-index: 2;
                        position: relative;
                      }

                      .details-col {
                        display: flex;
                        flex-direction: column;
                        font-size: 9px;
                        gap: 1px;
                      }

                      .qr-col {
                        display: flex;
                        flex-direction: column;
                        justify-content: flex-end;
                        align-items: center;
                      }

                      .d-item {
                        display: flex;
                        align-items: baseline;
                        line-height: 1.1;
                        width: 100%;
                      }
                      .d-label {
                        font-weight: bold;
                        color: #555;
                        width: 40px; /* Fixed label width for alignment */
                        flex-shrink: 0;
                        font-size: 8px;
                      }
                      .d-val {
                        color: #000;
                        font-weight: 700;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        font-size: 9px;
                      }
                      
                      .qr-in-grid {
                        width: 42px;
                        height: 42px;
                        border: 1px solid #ddd;
                        padding: 1px;
                        background: #fff;
                      }

                      /* --- BACK SIDE DESIGN --- */
                      .back-header {
                        background-color: #1E5631;
                        color: #fff;
                        font-size: 10px;
                        padding: 8px 5px;
                        text-align: center;
                        font-weight: bold;
                        text-transform: uppercase;
                        border-bottom: 2px solid #D4AF37;
                      }
                      
                      .back-inst-name { font-size: 10px; font-weight: bold; }
                      .back-inst-addr { font-size: 7px; font-weight: normal; opacity: 0.9; margin-top: 2px; text-transform: none; }

                      .back-content {
                        padding: 10px 15px;
                        font-size: 9px;
                        text-align: center;
                        display: flex;
                        flex-direction: column;
                        height: 75%;
                        justify-content: space-between;
                      }

                      .terms {
                        font-size: 7px;
                        color: #666;
                        text-align: justify;
                        margin-bottom: 5px;
                        line-height: 1.3;
                      }

                      .contact-info {
                        margin-bottom: 5px;
                        font-weight: bold;
                        color: #1E5631;
                      }

                      .signature-area {
                        display: flex;
                        justify-content: space-between;
                        align-items: flex-end;
                        margin-top: auto;
                        width: 100%;
                        margin-bottom: 5px;
                      }
                      .sig-line {
                        border-top: 1px solid #000;
                        width: 80px;
                        text-align: center;
                        font-size: 7px;
                        padding-top: 2px;
                      }
                      
                      .barcode {
                        height: 25px;
                        width: 80%;
                        margin: 5px auto 0 auto;
                        background: repeating-linear-gradient(
                          90deg,
                          #000,
                          #000 1px,
                          #fff 1px,
                          #fff 3px
                        );
                      }
                      .barcode-num {
                        font-family: monospace;
                        font-size: 8px;
                        letter-spacing: 2px;
                      }

                    </style>
                </head>
                <body>
                    <div class="card-wrapper">
                        <!-- FRONT -->
                        <div class="id-card">
                            <div class="gold-frame"></div>
                            <div class="pattern-bg"></div>
                            
                            <div class="header">
                                <img src="https://iili.io/f5YQSRe.png" class="bismillah-img" />
                                <div class="logo-circle"><img src="${r.logo}" /></div>
                                <div class="inst-name">${r.name}</div>
                            </div>

                            <div class="photo-area">
                                <img src="${e.photo}" class="profile-img" />
                            </div>

                            <div class="student-name"><span>${e.name}</span></div>
                            <div class="designation">${a?"Student":e.role}</div>

                            <div class="content-layout">
                                <div class="details-col">
                                    ${a?`
                                    <div class="d-item"><span class="d-label">ID:</span><span class="d-val">${e.id}</span></div>
                                    <div class="d-item"><span class="d-label">Roll:</span><span class="d-val">${u}</span></div>
                                    <div class="d-item"><span class="d-label">Class:</span><span class="d-val">${e.class}</span></div>
                                    <div class="d-item"><span class="d-label">Sec:</span><span class="d-val">${e.section}</span></div>
                                    <div class="d-item"><span class="d-label">Group:</span><span class="d-val">${e.group||"-"}</span></div>
                                    <div class="d-item"><span class="d-label">Blood:</span><span class="d-val" style="color:#c00;">${e.bloodGroup||"-"}</span></div>
                                    <div class="d-item" style="margin-top:2px;">
                                        <span class="d-label">Teacher:</span>
                                        <span class="d-val" style="font-size:8px; white-space:normal;">${c}</span>
                                    </div>
                                    `:`
                                    <div class="d-item"><span class="d-label">Phone:</span><span class="d-val">${e.phone}</span></div>
                                    <div class="d-item"><span class="d-label">Gender:</span><span class="d-val">${e.gender||"-"}</span></div>
                                    <div class="d-item"><span class="d-label">Blood:</span><span class="d-val">${e.bloodGroup||"-"}</span></div>
                                    <div class="d-item"><span class="d-label">Joined:</span><span class="d-val">${y}</span></div>
                                    <div class="d-item"><span class="d-label">Valid:</span><span class="d-val">Dec 2025</span></div>
                                    `}
                                </div>
                                <div class="qr-col">
                                    <img src="${b}" class="qr-in-grid" />
                                </div>
                            </div>
                        </div>

                        <!-- BACK -->
                        <div class="id-card">
                             <div class="gold-frame"></div>
                             <div class="pattern-bg"></div>
                             
                             <div class="back-header">
                                <div class="back-inst-name">${r.name}</div>
                                <div class="back-inst-addr">${r.address}</div>
                             </div>

                             <div class="back-content">
                                <div class="contact-info">
                                    ${a?`
                                    <div>Guardian: ${e.guardianName}</div>
                                    <div>Phone: ${e.guardianPhone}</div>
                                    `:`
                                    <div>Emergency: ${e.phone}</div>
                                    `}
                                    <div style="margin-top:5px; font-size:8px; color:#000;">${d||r.address}</div>
                                </div>

                                <div class="terms">
                                    1. This card is the property of ${r.name}.<br>
                                    2. It is non-transferable and must be worn at all times within campus.<br>
                                    3. If found, please return to the address above.<br>
                                    4. Loss of this card must be reported immediately.
                                </div>

                                <div class="signature-area">
                                    <div class="sig-line">Holder's Sign</div>
                                    <div class="sig-line">Principal's Sign</div>
                                </div>

                                <div>
                                    <div class="barcode"></div>
                                    <div class="barcode-num">${e.id}</div>
                                </div>
                             </div>
                        </div>
                    </div>
                    <script>
                        window.onload = function() { setTimeout(() => { window.print(); window.close(); }, 800); }
                    <\/script>
                </body>
            </html>
        `),x.document.close()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg p-6 shadow-2xl w-full max-w-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"ID Card Preview"}),s.jsx("button",{onClick:n,className:"text-text-secondary hover:text-red-400",children:s.jsx(vt,{})})]}),s.jsx("div",{className:"relative mx-auto w-[240px] h-[380px] bg-white rounded-lg overflow-hidden border border-secondary shadow-inner mb-4 transition-all duration-500",style:{perspective:"1000px"},children:s.jsxs("div",{className:"w-full h-full relative transition-transform duration-700",style:{transformStyle:"preserve-3d",transform:l?"rotateY(180deg)":"rotateY(0deg)"},children:[s.jsxs("div",{className:"absolute w-full h-full backface-hidden bg-white flex flex-col items-center p-2 border-2 border-accent",style:{backfaceVisibility:"hidden"},children:[s.jsx("div",{className:"w-full h-16 bg-[#1E5631] absolute top-0 border-b-2 border-[#D4AF37] flex flex-col items-center justify-center pt-1",children:s.jsx("img",{src:"https://iili.io/f5YQSRe.png",className:"w-16 opacity-90 invert brightness-200 sepia saturate-200 hue-rotate-15",alt:"Bismillah"})}),s.jsx("img",{src:r.logo,className:"w-12 h-12 rounded-full bg-white p-1 border-2 border-[#D4AF37] z-10 -mt-6"}),s.jsx("h4",{className:"text-[#1E5631] font-bold text-[10px] mt-1 uppercase tracking-wider z-10 text-center px-2 leading-tight",children:r.name}),s.jsx("img",{src:e.photo,className:"w-20 h-24 object-cover border-2 border-[#1E5631] rounded mt-2 z-10 bg-gray-200"}),s.jsx("div",{className:"w-full px-2 mt-2 z-10 h-8 flex items-center justify-center",children:s.jsx("h2",{className:"text-[#1E5631] font-bold text-xs uppercase text-center leading-tight line-clamp-2",children:e.name})}),s.jsx("span",{className:"text-[9px] bg-[#D4AF37] text-[#1E5631] px-2 py-0.5 rounded-full font-bold z-10 mb-1",children:a?"STUDENT":e.role}),s.jsxs("div",{className:"w-full px-3 grid grid-cols-[1fr_40px] gap-2 mt-1 z-10 text-[10px] text-gray-700 leading-tight",children:[s.jsx("div",{className:"flex flex-col space-y-0.5",children:a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"ID:"})," ",s.jsx("span",{className:"font-bold truncate",children:e.id})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Roll:"})," ",s.jsx("span",{className:"font-bold truncate",children:u})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Class:"})," ",s.jsx("span",{className:"font-bold truncate",children:e.class})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Sec:"})," ",s.jsx("span",{className:"font-bold truncate",children:e.section})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Group:"})," ",s.jsx("span",{className:"font-bold truncate",children:e.group||"-"})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Blood:"})," ",s.jsx("span",{className:"font-bold text-red-600 truncate",children:e.bloodGroup||"-"})]}),s.jsxs("div",{className:"flex flex-col mt-0.5",children:[s.jsx("span",{className:"font-bold text-[8px]",children:"Teacher:"}),s.jsx("span",{className:"font-bold text-[8px] leading-3",children:c})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Phone:"})," ",s.jsx("span",{className:"font-bold truncate",children:e.phone})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Gender:"})," ",s.jsx("span",{className:"font-bold truncate",children:e.gender||"-"})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Joined:"})," ",s.jsx("span",{className:"font-bold truncate",children:Mc(e.joiningDate)})]}),s.jsxs("div",{className:"flex overflow-hidden",children:[s.jsx("span",{className:"font-bold w-12 text-[9px] flex-shrink-0",children:"Valid:"})," ",s.jsx("span",{className:"font-bold truncate",children:"Dec 2025"})]})]})}),s.jsx("div",{className:"flex flex-col justify-end items-center",children:s.jsx("div",{className:"w-10 h-10 bg-black/10 flex items-center justify-center text-[5px] border border-gray-300 bg-white",children:"QR"})})]})]}),s.jsxs("div",{className:"absolute w-full h-full backface-hidden bg-white flex flex-col p-4 border-2 border-accent",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[s.jsxs("div",{className:"text-center border-b border-[#D4AF37] pb-2 mb-2",children:[s.jsx("h4",{className:"text-[#1E5631] font-bold uppercase text-[10px]",children:r.name}),s.jsx("p",{className:"text-[8px] text-gray-600 leading-tight",children:r.address})]}),s.jsxs("div",{className:"text-[10px] space-y-1 text-gray-700 mb-4 flex-grow",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Guardian:"})," ",a?e.guardianName:"Next of Kin"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-bold",children:"Phone:"})," ",a?e.guardianPhone:e.phone]}),s.jsx("div",{className:"mt-2 text-[9px] text-center italic border-t border-gray-200 pt-2",children:d})]}),s.jsxs("div",{className:"mt-auto pt-2",children:[s.jsx("div",{className:"h-8 w-full bg-black/10 flex items-center justify-center text-[8px] tracking-[4px]",children:"BARCODE"}),s.jsx("p",{className:"text-[8px] text-center mt-1",children:e.id})]})]})]})}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsx("button",{onClick:()=>o(!l),className:"p-2 rounded-full bg-secondary hover:bg-accent/20 text-text-primary transition-colors",title:"Flip Card",children:s.jsx(Ih,{className:`w-5 h-5 ${l?"rotate-180":""} transition-transform`})}),s.jsxs("button",{onClick:m,className:"bg-accent text-white px-6 py-2 rounded-md font-bold hover:bg-accent/90 flex items-center gap-2 shadow-lg",children:[s.jsx(yt,{className:"w-4 h-4"})," Print ID Card"]})]})]})})},Ty=()=>{const[e,t]=f.useState([]),[n,r]=f.useState([]),[a,l]=f.useState(!0),[o,c]=f.useState("students"),[i,d]=f.useState(""),[u,m]=f.useState(null);f.useEffect(()=>{(async()=>{l(!0);const[v,N]=await Promise.all([ke(),Je()]);t(v),r(N),l(!1)})()},[]);const x=f.useMemo(()=>{const y=o==="students"?e:n;return i?y.filter(v=>v.name.toLowerCase().includes(i.toLowerCase())||v.id.toLowerCase().includes(i.toLowerCase())):y},[e,n,o,i]),b=y=>{m(y)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Generate ID Cards"}),s.jsxs("div",{className:"bg-primary p-4 rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary mb-4",children:["students","staff"].map(y=>s.jsx("button",{onClick:()=>c(y),className:`px-4 py-2 font-medium text-sm -mb-px border-b-2 ${o===y?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:y.charAt(0).toUpperCase()+y.slice(1)},y))}),s.jsx("input",{type:"text",placeholder:`Search ${o}...`,value:i,onChange:y=>d(y.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]}),s.jsx("div",{className:"bg-primary rounded-lg shadow-lg",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:o==="students"?"Class":"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),s.jsx("tbody",{children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center py-4",children:"Loading..."})}):x.map(y=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:y.name}),s.jsx("td",{className:"px-6 py-4",children:y.id}),s.jsx("td",{className:"px-6 py-4",children:o==="students"?`${y.class} - ${y.section}`:y.role}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>b(y),className:"font-medium text-accent hover:underline",children:"Generate"})})]},y.id))})]})})}),u&&s.jsx(Dy,{person:u,type:o,onClose:()=>m(null)})]})},Ay=({isOpen:e,onClose:t,onSave:n,initialData:r,teachers:a})=>{const[l,o]=f.useState((r==null?void 0:r.name)||""),[c,i]=f.useState((r==null?void 0:r.section)||""),[d,u]=f.useState((r==null?void 0:r.classTeacherId)||(a.length>0?a[0].id:""));if(!e)return null;const m=x=>{x.preventDefault();const b=a.find(y=>y.id===d);if(!b){alert("Please select a valid teacher.");return}n({name:l,section:c,classTeacherId:d,classTeacherName:b.name})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add"," Class"]}),s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"text",placeholder:"Class Name (e.g., Class 5)",value:l,onChange:x=>o(x.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",placeholder:"Section (e.g., A)",value:c,onChange:x=>i(x.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Class Teacher"}),s.jsx("select",{value:d,onChange:x=>u(x.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:a.map(x=>s.jsx("option",{value:x.id,children:x.name},x.id))})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},Ly=e=>{if(!e)return"N/A";if(/^\d{2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),a=new Date;return a.setHours(n,r,0,0),a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},zy=({classInfo:e,studentCount:t,isSelected:n,onClick:r,onEdit:a,isAdmin:l})=>s.jsxs("div",{onClick:r,className:`p-4 rounded-lg mb-2 cursor-pointer transition-colors ${n?"bg-accent text-white":"bg-secondary hover:bg-secondary/80"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-lg",children:[e.name," - ",e.section]}),s.jsx("p",{className:`text-sm ${n?"text-gray-200":"text-text-secondary"}`,children:e.classTeacherName})]}),l&&s.jsx("button",{onClick:a,className:`p-1 rounded-full ${n?"hover:bg-accent/80":"hover:bg-background"}`,children:s.jsx(Xe,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm",children:[s.jsx(at,{className:"w-4 h-4"}),s.jsxs("span",{children:[t," Students"]})]})]}),Fy=({data:e})=>{const{classInfo:t,studentsInClass:n,timetableForClass:r}=e,a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],l=Object.keys(r).length>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-bold text-accent",children:["Class ",t.name," - Section ",t.section]}),s.jsxs("p",{className:"text-text-secondary",children:["Class Teacher: ",t.classTeacherName]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[s.jsx(at,{className:"w-5 h-5 text-accent"})," Student Roster (",n.length,")"]}),s.jsx("div",{className:"max-h-60 overflow-y-auto bg-secondary p-2 rounded-md",children:n.length>0?s.jsx("ul",{className:"divide-y divide-background",children:n.map(o=>s.jsxs("li",{className:"p-2 flex items-center gap-3",children:[s.jsx("img",{src:o.photo,alt:o.name,className:"w-8 h-8 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-text-primary",children:o.name}),s.jsxs("p",{className:"text-xs text-text-secondary",children:["ID: ",o.id]})]})]},o.id))}):s.jsx("p",{className:"text-center text-text-secondary p-4",children:"No students enrolled in this class."})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[s.jsx(Yo,{className:"w-5 h-5 text-accent"})," Weekly Timetable"]}),s.jsx("div",{className:"overflow-x-auto pb-2",children:l?s.jsx("div",{className:"flex space-x-4",children:a.filter(o=>{var c;return((c=r[o])==null?void 0:c.length)>0}).map(o=>s.jsxs("div",{className:"flex-shrink-0 w-52 bg-secondary p-3 rounded-lg",children:[s.jsx("h5",{className:"font-bold text-accent text-center mb-2",children:o}),s.jsx("div",{className:"space-y-2",children:r[o].map(c=>s.jsxs("div",{className:"bg-background p-2 rounded-md text-xs",children:[s.jsxs("p",{className:"font-semibold text-text-primary",children:[Ly(c.time)," - ",c.subject]}),s.jsx("p",{className:"text-text-secondary",children:c.teacher})]},c.id))})]},o))}):s.jsx("p",{className:"text-center text-text-secondary p-4",children:"Timetable has not been set for this class."})})]})]})},Ry=()=>{const{user:e}=Ce(),t=(e==null?void 0:e.role)==="Admin",[n,r]=f.useState([]),[a,l]=f.useState([]),[o,c]=f.useState([]),[i,d]=f.useState([]),[u,m]=f.useState(!0),[x,b]=f.useState(!1),[y,v]=f.useState(null),[N,g]=f.useState(null),p=f.useCallback(async()=>{try{m(!0);const[E,C,P,k]=await Promise.all([bt(),Je(),ke(),Xo()]);r(E),l(C.filter(L=>L.role==="Teacher")),c(P),d(k),E.length>0&&!N&&g(E[0].id)}catch(E){console.error("Failed to fetch data",E)}finally{m(!1)}},[N]);f.useEffect(()=>{p()},[]);const h=f.useMemo(()=>{if(!N)return null;const E=n.find(L=>L.id===N);if(!E)return null;const C=o.filter(L=>L.class===E.name&&L.section===E.section),k=i.filter(L=>L.class===E.name).reduce((L,A)=>((L[A.day]=L[A.day]||[]).push(A),L[A.day].sort(($,F)=>$.time.localeCompare(F.time)),L),{});return{classInfo:E,studentsInClass:C,timetableForClass:k}},[N,n,o,i]),j=async E=>{const C=a.find(k=>k.id===E.classTeacherId);if(!C){alert("Selected teacher not found.");return}const P={...E,classTeacherName:C.name};y?await Zh({...P,id:y.id}):await Kh(P),p(),w()},S=(E,C=null)=>{E.stopPropagation(),v(C),b(!0)},w=()=>{v(null),b(!1)};return u?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl",children:"Loading Class Management..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Manage Classes"})}),s.jsxs("div",{className:"flex gap-6 h-[calc(100vh-12rem)]",children:[s.jsxs("div",{className:"w-1/3 flex flex-col bg-primary rounded-lg shadow-lg",children:[s.jsxs("div",{className:"p-4 border-b border-secondary flex justify-between items-center",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["All Classes (",n.length,")"]}),t&&s.jsx("button",{onClick:E=>S(E),className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm",children:"Add New"})]}),s.jsx("div",{className:"overflow-y-auto flex-grow p-2",children:n.map(E=>{const C=o.filter(P=>P.class===E.name&&P.section===E.section).length;return s.jsx(zy,{classInfo:E,studentCount:C,isSelected:N===E.id,onClick:()=>g(E.id),onEdit:P=>S(P,E),isAdmin:t},E.id)})})]}),s.jsx("div",{className:"w-2/3 bg-primary rounded-lg shadow-lg p-6 overflow-y-auto",children:h?s.jsx(Fy,{data:h}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("p",{className:"text-text-secondary",children:"Select a class to view its details or add a new one."})})})]}),x&&s.jsx(Ay,{isOpen:x,onClose:w,onSave:j,initialData:y,teachers:a})]})},$y=()=>{const e=We();return s.jsxs("div",{className:"relative min-h-screen bg-background text-text-primary flex items-center justify-center overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 z-0 opacity-10",children:[s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCI+PHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1IDBMNy41IDE1TDE1IDMwTDIyLjUgMTVMMTUgMFoiIGZpbGw9IiMzOGIyYWMiLz48L3N2Zz4=')] bg-repeat animate-[spin_60s_linear_infinite]"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary to-background"})]}),s.jsxs("div",{className:"relative z-10 text-center p-8 bg-primary/50 backdrop-blur-sm rounded-2xl shadow-2xl max-w-2xl",children:[s.jsx("img",{src:e.logo,alt:"logo",className:"w-24 h-24 mx-auto mb-4 bg-white rounded-full p-2"}),s.jsx("h1",{className:"text-5xl font-bold text-accent mb-2",children:e.name}),s.jsx("p",{className:"text-xl text-text-secondary mb-8",children:e.tagline}),s.jsxs("div",{className:"text-2xl font-light text-text-primary mb-10",children:[s.jsx("p",{children:"   "}),s.jsx("p",{className:"text-lg text-text-secondary",children:"In the name of Allah, the Most Gracious, the Most Merciful"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[s.jsx(On,{to:"/login",className:"w-full sm:w-auto bg-accent text-white font-semibold px-8 py-3 rounded-lg hover:bg-accent/90 transition-transform transform hover:scale-105",children:"Portal Login"}),s.jsx(On,{to:"/results",className:"w-full sm:w-auto bg-secondary text-text-primary font-semibold px-8 py-3 rounded-lg hover:bg-secondary/80 transition-transform transform hover:scale-105",children:"Check Exam Results"})]})]}),s.jsx("footer",{className:"absolute bottom-4 text-center w-full text-text-secondary text-sm",children:s.jsxs("p",{children:[" ",new Date().getFullYear()," ",e.name,". All Rights Reserved | Created by ",s.jsx("a",{href:"https://www.facebook.com/mrnhh99",target:"_blank",children:"Nayem Hossen"})]})})]})},_y=()=>{const{login:e}=Ce(),t=We(),[n,r]=f.useState(""),[a,l]=f.useState(""),[o,c]=f.useState(""),[i,d]=f.useState(!1),u=async m=>{m.preventDefault(),c(""),d(!0);try{await e(n,a)}catch(x){c(x.message||"An unexpected error occurred.")}finally{d(!1)}};return s.jsxs("div",{className:"relative min-h-screen bg-background text-text-primary flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 z-0 opacity-5 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZHRoPSIzMCI+PHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1IDBMNy41IDE1TDE1IDMwTDIyLjUgMTVMMTUgMFoiIGZpbGw9IiMzOGIyYWMiLz48L3N2Zz4=')]"}),s.jsxs("div",{className:"relative z-10 w-full max-w-md bg-primary p-8 rounded-2xl shadow-2xl",children:[s.jsx(On,{to:"/",className:"absolute top-4 left-4 text-text-secondary hover:text-accent",children:" Back to Home"}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("img",{src:t.logo,alt:"logo",className:"w-20 h-20 mx-auto mb-4 bg-white rounded-full p-1.5"}),s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Portal Login"}),s.jsx("p",{className:"text-text-secondary",children:"Welcome back. Please login to your account."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[o&&s.jsx("p",{className:"text-red-400 bg-red-500/10 p-3 rounded-md text-center text-sm",children:o}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"User ID"}),s.jsx("input",{type:"text",placeholder:"Enter your User ID (e.g., MrNHH)",value:n,onChange:m=>r(m.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Password"}),s.jsx("input",{type:"password",placeholder:"",value:a,onChange:m=>l(m.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsx("button",{type:"submit",disabled:i,className:"w-full bg-accent text-white font-semibold py-3 rounded-lg hover:bg-accent/90 transition-colors flex items-center justify-center gap-2 disabled:bg-secondary disabled:cursor-not-allowed",children:i?"Logging in...":s.jsxs(s.Fragment,{children:[s.jsx(Ch,{className:"w-5 h-5"})," Login"]})})]})]})]})},Oy=()=>{const e=We(),[t,n]=f.useState([]),[r,a]=f.useState([]),[l,o]=f.useState([]),[c,i]=f.useState(!1),[d,u]=f.useState(null),[m,x]=f.useState(""),[b,y]=f.useState(""),[v,N]=f.useState(""),[g,p]=f.useState(null);f.useEffect(()=>{xa().then(n),bt().then(a),Je().then(o)},[]);const h=f.useMemo(()=>{const C=new Set(t.map(P=>P.title));return Array.from(C)},[t]),j=f.useMemo(()=>{if(!m)return[];const C=new Set(t.filter(P=>P.title===m).map(P=>P.class));return Array.from(C)},[t,m]),S=async C=>{if(C.preventDefault(),!m||!b||!v){u("Please select an exam, class, and enter a student ID.");return}i(!0),u(null),p(null);try{const P=await Ng(m,b,v.trim());if(P){const k=await kp(P.studentId),L=r.find(U=>U.name===P.className),A=L?L.classTeacherName:"_____________",$=l.find(U=>U.id===(L==null?void 0:L.classTeacherId)),F=$?$.phone:"";p({...P,attendance:k,classTeacher:A,teacherPhone:F})}else u("Result not found. Please check the details and try again.")}catch{u("An error occurred while fetching the result.")}finally{i(!1)}},w=g?vp(g.results.map(C=>({marks:C.marks,totalMarks:C.totalMarks}))):null,E=()=>{if(!g||!w)return;const C=window.open("","_blank");if(!C){alert("Please allow popups to print the report card.");return}const P=g.results.map(U=>{const oe=Vr(U.marks,U.totalMarks),he=U.ct??"-",M=U.cq??"-",D=U.viva??"-",z=U.fullMarks||{ct:0,cq:0,viva:0},H=z.ct>0?z.ct:"-",Z=z.cq>0?z.cq:"-",un=z.viva>0?z.viva:"-";return`
                <tr>
                    <td style="text-align: left; padding-left: 5px;">${U.subject}</td>
                    
                    <!-- Exam Marks -->
                    <td>${H}</td>
                    <td>${Z}</td>
                    <td>${un}</td>
                    
                    <!-- Obtained / Calculated Marks -->
                    <td>${he!=="-"?Number(he).toFixed(1):"--"}</td>
                    <td>${M!=="-"?Number(M).toFixed(1):"--"}</td>
                    <td>${D!=="-"?Number(D).toFixed(1):"--"}</td>
                    
                    <!-- Totals -->
                    <td style="font-weight: bold;">${U.marks?Number(U.marks).toFixed(1):"-"}</td>
                    <td style="font-weight: bold;">${oe.grade}</td>
                    <td>${oe.point.toFixed(1)}</td>
                    <td>${U.highestMark?Number(U.highestMark).toFixed(1):"-"}</td>
                </tr>
            `}).join(""),k=Math.max(0,12-g.results.length),L=Array(k).fill(0).map(()=>`
            <tr>
                <td style="height: 24px;"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
        `).join(""),A=g.attendance||{totalWorkingDays:67,present:65,absent:2},$=g.results.reduce((U,oe)=>U+oe.totalMarks,0),F=`
            <html>
            <head>
                <title>Progress Report - ${g.studentName}</title>
                <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;700&family=Tiro+Bangla&display=swap" rel="stylesheet">
                <style>
                    @media print {
                        @page { size: A4; margin: 0; }
                        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                        .no-print { display: none; }
                    }
                    body {
                        font-family: 'Times New Roman', serif;
                        background-color: #ffffff;
                        margin: 0;
                        padding: 0;
                        height: 100vh;
                        box-sizing: border-box;
                    }
                    .report-container {
                        width: 210mm;
                        height: 297mm;
                        margin: 0 auto;
                        padding: 10mm;
                        box-sizing: border-box;
                        background-color: #ffffff;
                        position: relative;
                        overflow: hidden;
                    }
                    
                    /* Watermark */
                    .watermark {
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 600px;
                        height: 600px;
                        background-image: url('${e.logo}');
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size: contain;
                        opacity: 0.08;
                        z-index: 0;
                        pointer-events: none;
                    }
                    
                    /* Border Container */
                    .border-box {
                        border: 1px solid #666;
                        padding: 5px;
                        height: 98%;
                        position: relative;
                        z-index: 1;
                    }
                    .inner-border {
                        border: 1px solid #444;
                        height: 100%;
                        padding: 15px;
                        box-sizing: border-box;
                    }

                    /* Header */
                    .header { text-align: center; position: relative; margin-bottom: 10px; }
                    .bismillah-img { width: 100px; margin-bottom: 5px; display: block; margin-left: auto; margin-right: auto; }
                    .inst-name { font-size: 20px; font-weight: bold; text-transform: uppercase; color: #2c3e50; margin: 5px 0; letter-spacing: 1px; }
                    .inst-address { font-size: 12px; margin-bottom: 5px; }
                    .inst-contact { font-size: 12px; }
                    .logo { position: absolute; left: 10px; top: 10px; width: 70px; height: 70px; }
                    
                    .report-title { 
                        text-align: center; margin-top: 5px; margin-bottom: 5px; 
                        font-size: 16px; font-weight: bold; text-decoration: underline; 
                    }
                    .exam-name { text-align: center; font-size: 14px; text-transform: uppercase; margin-bottom: 10px; }

                    /* Student Info */
                    .student-info { 
                        display: flex; justify-content: space-between; 
                        border: 1px solid #999; background-color: transparent;
                        padding: 10px 20px; margin-bottom: 10px; font-size: 14px; line-height: 1.6;
                    }
                    .info-col { width: 48%; }
                    .info-row { display: flex; }
                    .label { width: 100px; font-weight: bold; }
                    .val { font-weight: 500; }

                    /* Main Table */
                    .marks-table { width: 100%; border-collapse: collapse; font-size: 12px; margin-bottom: 15px; background-color: transparent; }
                    .marks-table th, .marks-table td { border: 1px solid #666; padding: 4px; text-align: center; }
                    .marks-table th { background-color: #f0f0f0; font-weight: bold; }
                    
                    /* Bottom Section Grid */
                    .bottom-grid { display: flex; gap: 10px; margin-top: 10px; }
                    .col-summary { width: 30%; }
                    .col-attendance { width: 40%; }
                    .col-grading { width: 30%; }

                    .sub-table { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 10px; background-color: transparent; }
                    .sub-table td { border: 1px solid #666; padding: 3px 5px; }
                    .sub-table .lbl { font-weight: bold; background-color: #f0f0f0; }
                    
                    .grading-table { width: 100%; border-collapse: collapse; font-size: 10px; text-align: center; background-color: transparent; }
                    .grading-table th, .grading-table td { border: 1px solid #666; padding: 2px; }
                    .grading-table th { background-color: #ccc; }

                    .remarks-box { 
                        border: 1px solid #666; height: 50px; margin-top: 5px; padding: 5px; 
                        background-color: transparent; position: relative; font-size: 12px;
                    }

                    /* Footer Signatures */
                    .footer { display: flex; justify-content: space-between; margin-top: 30px; padding: 0 20px; }
                    .sig-box { text-align: center; width: 150px; }
                    .sig-line { border-top: 1px solid #000; margin-top: 30px; font-size: 12px; font-weight: bold; padding-top: 5px;}
                    .sig-box .outstanding { font-family: 'Tiro Bangla', serif; font-size: 14px; position: relative; top: 10px; }

                    .watermark-text { position: absolute; bottom: 5px; right: 10px; font-size: 10px; font-style: italic; color: #555; }
                    .print-date { position: absolute; bottom: 5px; left: 10px; font-size: 10px; font-style: italic; color: #555; }

                </style>
            </head>
            <body>
                <div class="report-container">
                    <div class="watermark"></div>
                    <div class="border-box">
                        <div class="inner-border">
                            
                            <!-- Header -->
                            <div class="header">
                                <img src="${e.logo}" class="logo" />
                                <img src="https://iili.io/f5YQSRe.png" class="bismillah-img" alt="Bismillah" />
                                <div class="inst-name">${e.name}</div>
                                <div class="inst-address">${e.address}</div>
                                <div class="inst-contact">Phone: ${e.phone}, Email: ${e.email}</div>
                                <div class="report-title">Progress Report</div>
                                <div class="exam-name">${g.examTitle} - ${new Date().getFullYear()}</div>
                            </div>

                            <!-- Info -->
                            <div class="student-info">
                                <div class="info-col">
                                    <div class="info-row"><span class="label">Name :</span> <span class="val">${g.studentName}</span></div>
                                    <div class="info-row"><span class="label">Class :</span> <span class="val">${g.className}</span></div>
                                    <div class="info-row"><span class="label">Section :</span> <span class="val">${g.section}</span></div>
                                    <div class="info-row"><span class="label">Group :</span> <span class="val">${g.group||"N/A"}</span></div>
                                </div>
                                <div class="info-col">
                                    <div class="info-row"><span class="label">ID Number :</span> <span class="val">${g.studentId}</span></div>
                                    <div class="info-row"><span class="label">Roll No :</span> <span class="val">${g.studentId.replace(/\D/g,"")}</span></div>
                                    <div class="info-row"><span class="label">Class Teacher :</span> <span class="val">${g.classTeacher}</span></div>
                                    <div class="info-row"><span class="label">Teacher Cell :</span> <span class="val">${g.teacherPhone||""}</span></div>
                                </div>
                            </div>

                            <!-- Table -->
                            <table class="marks-table">
                                <thead>
                                    <tr>
                                        <th rowspan="2" style="width: 25%;">Subject</th>
                                        <th colspan="3">Exam Marks</th>
                                        <th colspan="3">Obtained / Calculated Marks</th>
                                        <th rowspan="2" style="width: 7%;">Total</th>
                                        <th rowspan="2" style="width: 6%;">Grade</th>
                                        <th rowspan="2" style="width: 6%;">Grade Point</th>
                                        <th rowspan="2" style="width: 7%;">Highest Marks</th>
                                    </tr>
                                    <tr>
                                        <th style="width: 6%;">MT</th> <th style="width: 6%;">CQ</th> <th style="width: 6%;">Viva</th>
                                        <th style="width: 6%;">MT</th> <th style="width: 6%;">CQ</th> <th style="width: 6%;">Viva</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${P}
                                    ${L}
                                </tbody>
                            </table>

                            <!-- Bottom Grid -->
                            <div class="bottom-grid">
                                <!-- Col 1: Summary -->
                                <div class="col-summary">
                                    <table class="sub-table">
                                        <tr><td class="lbl">Exam Full Marks</td><td style="text-align:right;">${$}</td></tr>
                                        <tr><td class="lbl">Total Obtained Marks</td><td style="text-align:right;">${g.totalMarksObtained.toFixed(2)}</td></tr>
                                        <tr><td class="lbl">Obtained Percentage</td><td style="text-align:right;">${g.percentage.toFixed(2)}%</td></tr>
                                    </table>
                                    <table class="sub-table">
                                        <tr><td class="lbl" style="background-color: #d8e2dc;">Obtained GPA</td><td style="text-align:right; font-weight:bold;">${w.gpa}</td></tr>
                                        <tr><td class="lbl">Class Merit</td><td style="text-align:right;">${g.rank||"-"}</td></tr>
                                        <tr><td class="lbl">Section Merit</td><td style="text-align:right;">N/A</td></tr>
                                        <tr><td class="lbl">Group Merit</td><td style="text-align:right;">N/A</td></tr>
                                    </table>
                                </div>

                                <!-- Col 2: Attendance & Remarks -->
                                <div class="col-attendance">
                                    <table class="sub-table">
                                        <tr><td class="lbl">Working Days</td><td style="text-align:center;">${A.totalWorkingDays}</td></tr>
                                        <tr><td class="lbl">Present</td><td style="text-align:center;">${A.present}</td></tr>
                                        <tr><td class="lbl">Absent</td><td style="text-align:center;">${A.absent}</td></tr>
                                    </table>
                                    
                                    <div style="font-size: 11px; font-weight: bold; margin-bottom: 2px;">Promotion Note / Remarks</div>
                                    <div class="remarks-box">
                                        ${w.grade==="F"?"FAILED.":"PASSED."}
                                    </div>
                                </div>

                                <!-- Col 3: Grading Scale -->
                                <div class="col-grading">
                                    <table class="grading-table">
                                        <tr style="background-color: #ccc;"><th colspan="3">Grade Distribution</th></tr>
                                        <tr><th>Marks</th><th>Grade</th><th>GP</th></tr>
                                        <tr><td>80% and Above</td><td>A+</td><td>5.00</td></tr>
                                        <tr><td>70% - 79%</td><td>A</td><td>4.00</td></tr>
                                        <tr><td>60% - 69%</td><td>A-</td><td>3.50</td></tr>
                                        <tr><td>50% - 59%</td><td>B</td><td>3.00</td></tr>
                                        <tr><td>40% - 49%</td><td>C</td><td>2.00</td></tr>
                                        <tr><td>33% - 39%</td><td>D</td><td>1.00</td></tr>
                                        <tr><td>Below 33%</td><td>F</td><td>0.00</td></tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Footer Signatures -->
                            <div class="footer">
                                <div class="sig-box">
                                    <div style="height: 40px;"></div>
                                    <div class="sig-line">Class Teacher</div>
                                </div>
                                <div class="sig-box">
                                    <div style="height: 40px;"></div> 
                                    <div class="sig-line">Director</div>
                                </div>
                                <div class="sig-box">
                                    <div style="height: 40px;"></div>
                                    <div class="sig-line">Guardian</div>
                                </div>
                            </div>

                            <div class="remarks-box" style="margin-top: 10px; height: 30px; display:flex; align-items:center;">
                                <span style="font-weight:bold; margin-right: 10px;">Remarks:</span>
                            </div>

                            <div class="print-date">Printed on ${new Date().toLocaleDateString("en-GB")}</div>
                            <div class="watermark-text">Powered by IICM</div>

                        </div>
                    </div>
                </div>
                <script>
                    window.onload = function() { setTimeout(() => { window.print(); window.close(); }, 800); }
                <\/script>
            </body>
            </html>
        `;C.document.write(F),C.document.close()};return s.jsx("div",{className:"min-h-screen bg-background text-text-primary p-4 sm:p-6 md:p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx(On,{to:"/",className:"text-accent hover:underline mb-8 inline-block",children:" Back to Home"}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("img",{src:e.logo,alt:"logo",className:"w-20 h-20 mx-auto mb-4 bg-white rounded-full p-1.5"}),s.jsx("h1",{className:"text-4xl font-bold text-text-primary",children:"Check Exam Results"}),s.jsx("p",{className:"text-text-secondary",children:"Enter the details below to view the result."})]}),s.jsx("div",{className:"bg-primary p-8 rounded-2xl shadow-2xl mb-8",children:s.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Exam Title"}),s.jsxs("select",{value:m,onChange:C=>{x(C.target.value),y("")},className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:[s.jsx("option",{value:"",children:"-- Select Exam --"}),h.map(C=>s.jsx("option",{value:C,children:C},C))]})]}),s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Class"}),s.jsxs("select",{value:b,onChange:C=>y(C.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,disabled:!m,children:[s.jsx("option",{value:"",children:"-- Select Class --"}),j.map(C=>s.jsxs("option",{value:C,children:["Class ",C]},C))]})]}),s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Student ID"}),s.jsx("input",{type:"text",placeholder:"e.g., S001",value:v,onChange:C=>N(C.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsx("button",{type:"submit",disabled:c,className:"md:col-span-1 w-full bg-accent text-white font-semibold py-3 rounded-lg hover:bg-accent/90 transition-colors flex items-center justify-center gap-2 disabled:bg-secondary",children:c?"Searching...":s.jsxs(s.Fragment,{children:[s.jsx(Zo,{className:"w-5 h-5"})," Search Result"]})})]})}),d&&s.jsx("div",{className:"text-center p-4 bg-red-500/20 text-red-400 rounded-lg",children:d}),g&&w&&s.jsxs("div",{className:"bg-primary p-8 rounded-2xl shadow-2xl animate-[fadeIn_0.5s]",children:[s.jsxs("div",{className:"border-b-2 border-secondary pb-4 mb-6 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-accent",children:[g.examTitle," - Report Card"]}),s.jsx("p",{className:"text-text-secondary",children:e.name})]}),s.jsxs("button",{onClick:E,className:"bg-accent text-white font-semibold px-4 py-2 rounded-lg hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(yt,{className:"w-5 h-5"}),"Print Report"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-lg mb-6",children:[s.jsx("strong",{className:"text-text-secondary",children:"Student Name:"})," ",s.jsx("span",{className:"text-text-primary",children:g.studentName}),s.jsx("strong",{className:"text-text-secondary",children:"Student ID:"})," ",s.jsx("span",{className:"text-text-primary",children:g.studentId}),s.jsx("strong",{className:"text-text-secondary",children:"Class:"})," ",s.jsx("span",{className:"text-text-primary",children:g.className})]}),s.jsx("div",{className:"overflow-x-auto mb-6",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Subject"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Marks Obtained"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Total Marks"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Grade (GPA)"})]})}),s.jsx("tbody",{children:g.results.map((C,P)=>{const k=Vr(C.marks,C.totalMarks);return s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:C.subject}),s.jsx("td",{className:"px-6 py-4 text-center font-semibold text-text-primary",children:C.marks??"Absent"}),s.jsx("td",{className:"px-6 py-4 text-center",children:C.totalMarks}),s.jsx("td",{className:"px-6 py-4 text-center font-bold",style:{color:k.color},children:k.gpa!=="0.00"||k.grade==="F"?`${k.grade} (${k.gpa})`:"N/A"})]},P)})})]})}),s.jsxs("div",{className:"bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsx("p",{className:"text-text-secondary text-sm uppercase",children:"Total Marks Obtained"}),s.jsxs("p",{className:"text-4xl font-bold text-text-primary",children:[g.totalMarksObtained," / ",g.overallTotalMarks]})]}),s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("p",{className:"text-text-secondary text-sm uppercase",children:"GPA & Final Grade"}),s.jsxs("p",{className:"text-4xl font-bold",style:{color:w.color},children:[w.gpa,s.jsxs("span",{className:"text-2xl ml-2",children:["(",w.grade,")"]})]})]})]})]})]})})},Pc=e=>{const t=e.getDate(),n=e.getMonth(),r=e.getFullYear(),a=["Boishakh","Jyoishtho","Asharh","Srabon","Bhadro","Ashshin","Kartik","Ogrohayon","Poush","Magh","Falgun","Chaitra"],l=[14,15,15,16,16,16,16,15,15,14,13,15];let o=0,c=0,i=n>3||n===3&&t>=14?r-593:r-594;if(t>=l[n])n<3?o=n+9:o=n-3,c=t-l[n]+1;else{n<3?o=n+8:o=n-4;let u=n===0?11:n-1,m=l[u];c=new Date(r,n,0).getDate()-m+t+1}const d=u=>u.toString().replace(/\d/g,m=>""[parseInt(m)]);return`${a[o]} ${d(c)}, ${d(i)}`},Ic=e=>{const t=new Date(e);return t.setDate(t.getDate()-1),new Intl.DateTimeFormat("en-US-u-ca-islamic-umalqura",{day:"numeric",month:"long",year:"numeric"}).format(t)},Dc=(e,t)=>{const n=e.getMonth()+1,r=e.getDate(),a=`${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,l={"02-21":"Int'l Mother Language Day","03-17":"Sheikh Mujib's Birthday","03-26":"Independence Day","04-14":"Pohela Boishakh (Bengali New Year)","05-01":"May Day","08-15":"National Mourning Day","12-16":"Victory Day","12-25":"Christmas Day"};return l[a]?l[a]:t.includes("Ramadan 1,")?"Start of Ramadan":t.includes("Shawwal 1,")?"Eid ul-Fitr":t.includes("Dhu al-Hijjah 10,")?"Eid ul-Adha":t.includes("Rabi I 12,")?"Eid-e-Miladunnabi":t.includes("Muharram 10,")?"Ashura":t.includes("Rajab 27,")?"Shab-e-Meraj":t.includes("Shaban 15,")?"Shab-e-Barat":null},Qt=e=>{if(!e)return"N/A";const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]},Fp=e=>{if(!e)return"N/A";if(/^\d{2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),a=new Date;return a.setHours(n,r,0,0),a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},ar=({title:e,value:t,icon:n,color:r})=>s.jsxs("div",{className:"bg-primary p-4 rounded-lg shadow-lg flex items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mr-4 ${r}`,children:s.jsx(n,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium uppercase",children:e}),s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:t})]})]}),Uy=()=>{var S;const{user:e}=Ce(),[t,n]=f.useState(null),[r,a]=f.useState(!0),l=ni(),[o,c]=f.useState(new Date),[i,d]=f.useState(null),u=Xl.useMemo(()=>new Set(l.filter(w=>w.roles.includes("Student")).map(w=>w.href)),[l]);f.useEffect(()=>{e&&kg(e.id).then(w=>{n(w),a(!1)}).catch(w=>{console.error("Failed to load student profile",w),a(!1)})},[e]);const m=f.useMemo(()=>{const w=o.getFullYear(),E=o.getMonth();return new Date(w,E+1,0).getDate()},[o]),x=f.useMemo(()=>{const w=o.getFullYear(),E=o.getMonth();return new Date(w,E,1).getDay()},[o]),b=f.useMemo(()=>{const w=[],E=o.getFullYear(),C=o.getMonth();for(let P=0;P<x;P++)w.push(null);for(let P=1;P<=m;P++)w.push(new Date(E,C,P));return w},[o,m,x]),y=()=>c(new Date(o.getFullYear(),o.getMonth()-1,1)),v=()=>c(new Date(o.getFullYear(),o.getMonth()+1,1)),N=w=>{switch(w){case"Academic":return"bg-blue-500";case"Sports":return"bg-green-500";case"Cultural":return"bg-purple-500";case"Holiday":return"bg-red-500";default:return"bg-gray-500"}},g=w=>{const E=Ic(w),C=Pc(w),P=Dc(w,E),k=Qt(w.toISOString()),L=(t==null?void 0:t.events.filter(A=>Qt(A.date)===k))||[];d({date:w,hijri:E,bengali:C,holiday:P,events:L})},p=f.useMemo(()=>{if(!(t!=null&&t.events))return[];const w=new Date;return w.setHours(0,0,0,0),t.events.filter(E=>new Date(E.date)>=w).sort((E,C)=>new Date(E.date).getTime()-new Date(C.date).getTime())},[t==null?void 0:t.events]);if(r)return s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl",children:"Loading Your Dashboard..."})});if(!t)return s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl text-red-400",children:"Could not load your profile."})});const h=t.attendance.total>0?Math.round(t.attendance.present/(t.attendance.present+t.attendance.absent)*100):100,j=u.size>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-3xl font-bold text-text-primary",children:["Welcome, ",t.student.name,"!"]}),!j&&s.jsx("div",{className:"bg-primary p-6 rounded-lg shadow-lg text-center",children:s.jsx("p",{className:"text-text-secondary",children:"You currently don't have access to any modules. Please contact an administrator if you believe this is an error."})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.has("/app/attendance")&&s.jsxs(s.Fragment,{children:[s.jsx(ar,{title:"Attendance",value:`${h}%`,icon:pp,color:"bg-green-500"}),s.jsx(ar,{title:"Days Absent",value:t.attendance.absent,icon:Eh,color:"bg-red-500"})]}),u.has("/app/finance")&&s.jsx(ar,{title:"Fees Status",value:t.fees.status,icon:Mh,color:t.fees.status==="Paid"?"bg-blue-500":"bg-yellow-500"}),u.has("/app/attendance")&&s.jsx(ar,{title:"Incidents",value:t.discipline.length,icon:Wr,color:"bg-orange-500"})]}),u.has("/app/events")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-secondary pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-primary",children:[s.jsx(Un,{className:"w-6 h-6 text-accent"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Academic Calendar"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:y,className:"text-text-secondary hover:text-accent font-bold text-xl",children:"<"}),s.jsx("span",{className:"text-lg font-bold text-text-primary w-40 text-center",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:v,className:"text-text-secondary hover:text-accent font-bold text-xl",children:">"})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2 text-center mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(w=>s.jsx("div",{className:"font-bold text-text-secondary text-sm",children:w},w))}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:b.map((w,E)=>{if(!w)return s.jsx("div",{className:"h-32 bg-transparent"},`empty-${E}`);const C=Qt(w.toISOString()),P=Ic(w),k=P.split(",")[0],L=Pc(w),A=Dc(w,P),$=t.events.filter(he=>Qt(he.date)===C),F=$.length>0,U=w.toDateString()===new Date().toDateString(),oe=w.getDay()===5;return s.jsxs("div",{onClick:()=>g(w),className:`h-32 p-1 rounded-md border border-secondary flex flex-col relative overflow-hidden transition-all hover:bg-secondary/50 cursor-pointer
                                    ${U?"ring-2 ring-accent bg-secondary/30":""}
                                    ${oe?"bg-red-900/10":""}
                                `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`font-bold text-lg ${oe?"text-red-400":"text-text-primary"}`,children:w.getDate()}),F&&s.jsx("div",{className:"flex gap-0.5 pt-1",children:$.slice(0,3).map((he,M)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${N(he.type)}`,title:he.title},M))})]}),s.jsxs("div",{className:"flex flex-col text-[10px] text-text-secondary leading-tight opacity-90 gap-0.5",children:[s.jsx("span",{className:"text-green-600/90 font-medium truncate",children:k}),s.jsx("span",{className:"font-bengali text-yellow-600/90 truncate",children:L.split(",")[0]})]}),(A||F)&&s.jsx("div",{className:"mt-auto pt-1 w-full text-[9px] text-center font-bold",children:A?s.jsx("span",{className:"text-red-300 bg-red-500/20 block rounded-sm px-1 py-0.5 truncate",children:A}):s.jsx("span",{className:"text-blue-300 bg-blue-500/20 block rounded-sm px-1 py-0.5 truncate",children:$[0].title})})]},C)})}),s.jsxs("div",{className:"mt-4 flex gap-4 text-xs text-text-secondary justify-center flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})," Academic"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})," Sports"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})," Cultural"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})," Holiday"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-red-400 font-bold",children:"Fri"})," Weekend"]})]})]}),u.has("/app/academics")&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(Yo,{className:"w-5 h-5 text-accent"}),"This Week's Timetable"]}),s.jsx(By,{timetable:t.timetable})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(dp,{className:"w-5 h-5 text-accent"}),"Homework Assignments"]}),s.jsx(Hy,{homework:t.homework})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.has("/app/exams")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(op,{className:"w-5 h-5 text-accent"}),"Upcoming Exams"]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:(((S=t.upcomingExams)==null?void 0:S.length)??0)>0?t.upcomingExams.map(w=>s.jsx("div",{className:"bg-secondary p-3 rounded-md border-l-4 border-accent",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:w.title}),s.jsx("p",{className:"text-sm text-text-secondary",children:w.subject})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-bold text-text-primary",children:Qt(w.date)}),s.jsx("p",{className:"text-xs text-text-secondary",children:Fp(w.time)})]})]})},w.id)):s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No upcoming exams scheduled."})})]}),u.has("/app/events")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(Un,{className:"w-5 h-5 text-accent"}),"Upcoming Events"]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:p.length>0?p.map(w=>s.jsxs("div",{className:"bg-secondary p-3 rounded-md",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("p",{className:"font-semibold text-text-primary",children:w.title}),s.jsx("p",{className:"text-text-secondary",children:Qt(w.date)})]}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:w.description})]},w.id)):s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No upcoming events."})})]}),u.has("/app/attendance")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(Wr,{className:"w-5 h-5 text-accent"}),"Discipline Log"]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.discipline.length>0?t.discipline.map(w=>s.jsxs("div",{className:"bg-secondary p-3 rounded-md",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("p",{className:"font-semibold text-text-primary",children:w.incidentType}),s.jsx("p",{className:"text-text-secondary",children:w.date})]}),s.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:[w.description," ",s.jsxs("strong",{className:"text-text-primary",children:["(Action: ",w.actionTaken,")"]})]})]},w.id)):s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No disciplinary incidents on record. Keep it up!"})})]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg shadow-2xl w-full max-w-md border border-secondary",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-secondary",children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Date Details"}),s.jsx("button",{onClick:()=>d(null),className:"text-text-secondary hover:text-red-400",children:s.jsx(vt,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"text-center bg-secondary p-4 rounded-lg",children:[s.jsx("h4",{className:"text-3xl font-bold text-accent",children:i.date.getDate()}),s.jsx("p",{className:"text-lg text-text-primary",children:i.date.toLocaleString("default",{month:"long",year:"numeric"})}),s.jsx("p",{className:"text-text-secondary",children:i.date.toLocaleString("default",{weekday:"long"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-green-400 font-semibold block mb-1",children:"Hijri Date"}),s.jsx("p",{className:"text-sm text-text-primary",children:i.hijri})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-yellow-400 font-semibold block mb-1",children:"Bengali Date"}),s.jsx("p",{className:"text-sm text-text-primary font-bengali",children:i.bengali})]})]}),s.jsxs("div",{className:"border-t border-secondary pt-4",children:[s.jsx("h5",{className:"font-semibold text-text-primary mb-2",children:"Holidays & Events"}),i.holiday?s.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg mb-2",children:s.jsxs("p",{className:"text-red-400 font-bold flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),i.holiday]})}):i.events.length===0&&s.jsx("p",{className:"text-text-secondary text-sm italic",children:"No holidays or events for this day."}),i.events.map(w=>s.jsxs("div",{className:`p-3 rounded-lg mb-2 border ${N(w.type).replace("bg-","border-").replace("500","500/50")} bg-secondary`,children:[s.jsx("p",{className:"text-text-primary font-semibold",children:w.title}),s.jsx("p",{className:"text-xs text-text-secondary",children:w.description}),s.jsx("span",{className:`inline-block mt-1 text-[10px] px-2 py-0.5 rounded-full text-white ${N(w.type)}`,children:w.type})]},w.id))]})]})]})})]})},By=({timetable:e})=>{const t=f.useMemo(()=>{var a;const r={};for(const l of e)r[l.day]||(r[l.day]=[]),(a=r[l.day])==null||a.push(l);return Object.values(r).forEach(l=>{l&&l.sort((o,c)=>o.time.localeCompare(c.time))}),r},[e]),n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.length===0?s.jsx("p",{className:"text-text-secondary text-center py-4",children:"Your timetable is not available."}):s.jsx("div",{className:"overflow-x-auto pb-2",children:s.jsx("div",{className:"flex space-x-4",children:n.filter(r=>{var a;return((a=t[r])==null?void 0:a.length)??!1}).map(r=>{var a;return s.jsxs("div",{className:"flex-shrink-0 w-60 bg-secondary p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-accent text-center mb-2",children:r}),s.jsx("div",{className:"space-y-2",children:(a=t[r])==null?void 0:a.map(l=>s.jsxs("div",{className:"bg-background p-2 rounded-md text-sm",children:[s.jsxs("p",{className:"font-semibold text-text-primary",children:[Fp(l.time)," - ",l.subject]}),s.jsx("p",{className:"text-text-secondary",children:l.teacher})]},l.id))})]},r)})})})},Hy=({homework:e})=>e.length===0?s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No homework assignments. Great job!"}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.map(t=>s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-accent font-semibold",children:t.subject}),s.jsx("h4",{className:"font-semibold text-text-primary",children:t.title})]}),s.jsxs("p",{className:"text-text-secondary font-medium flex-shrink-0 pl-2",children:["Due: ",Qt(t.dueDate)]})]}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:t.description})]},t.id))}),Wy=()=>s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center bg-background p-4",children:[s.jsx(Wr,{className:"w-24 h-24 text-red-500 mb-6"}),s.jsx("h1",{className:"text-4xl font-bold text-text-primary mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-lg text-text-secondary",children:"You do not have permission to view this page."}),s.jsx(On,{to:"/app",className:"mt-6 bg-accent text-white font-semibold px-6 py-2 rounded-lg hover:bg-accent/90 transition-colors",children:"Go to My Dashboard"})]}),Tc=35*1024,Vy=({isOpen:e,onClose:t,onSave:n})=>{const[r,a]=f.useState(We());if(!e)return null;const l=i=>{const{name:d,value:u}=i.target;a(m=>({...m,[d]:u}))},o=i=>{var u;const d=(u=i.target.files)==null?void 0:u[0];if(d){if(d.size>Tc){alert(`File is too large. Please select an image smaller than ${Tc/1024}KB to avoid errors.`);return}const m=new FileReader;m.onloadend=()=>{a(x=>({...x,logo:m.result}))},m.readAsDataURL(d)}},c=async i=>{i.preventDefault(),await zg(r),n(),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Edit Institution Details"}),s.jsxs("form",{onSubmit:c,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:r.logo,alt:"logo preview",className:"w-20 h-20 rounded-full bg-white p-1"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"logo-upload",className:"block text-sm font-medium text-text-secondary",children:"Logo"}),s.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:o,className:"text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-accent file:text-white hover:file:bg-accent/90"})]})]}),s.jsx("input",{type:"text",name:"name",placeholder:"Madrasa Name",value:r.name,onChange:l,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"tagline",placeholder:"Tagline",value:r.tagline,onChange:l,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsx("textarea",{name:"address",placeholder:"Address",value:r.address,onChange:l,rows:3,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:r.phone,onChange:l,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:r.email,onChange:l,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save Changes"})]})]})]})})},Gy=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[a,l]=f.useState({name:(r==null?void 0:r.name)||"",startDate:(r==null?void 0:r.startDate)||"",endDate:(r==null?void 0:r.endDate)||""});if(!e)return null;const o=i=>{l({...a,[i.target.name]:i.target.value})},c=async i=>{i.preventDefault(),r?await Uh({...r,...a}):await Oh(a),n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add"," Academic Session"]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Session Name (e.g., 2024-2025)",value:a.name,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Start Date"}),s.jsx("input",{type:"date",name:"startDate",value:a.startDate,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"End Date"}),s.jsx("input",{type:"date",name:"endDate",value:a.endDate,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save Session"})]})]})]})})},Qy=({users:e,onEdit:t})=>s.jsx("div",{className:"overflow-x-auto bg-secondary rounded-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-background/30",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Username / ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Contact"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-primary hover:bg-primary/50",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap flex items-center gap-3",children:[s.jsx("img",{src:n.photo,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}),n.name]}),s.jsx("td",{className:"px-6 py-4",children:n.username}),s.jsx("td",{className:"px-6 py-4",children:n.role}),s.jsx("td",{className:"px-6 py-4",children:n.email||n.phone||"N/A"}),s.jsx("td",{className:"px-6 py-4 flex items-center gap-4",children:s.jsx("button",{onClick:()=>t(n),className:"p-1 hover:bg-background rounded",title:"Edit User",children:s.jsx(Xe,{className:"w-4 h-4 text-yellow-400"})})})]},n.id))})]})}),Ac=35*1024,qy=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[a,l]=f.useState({name:"",username:"",password:"",role:"Student",email:"",phone:"",address:"",photo:""}),[o,c]=f.useState(null);if(f.useEffect(()=>{r?(l({name:r.name,username:r.username,password:"",role:r.role,email:r.email||"",phone:r.phone||"",address:r.address||"",photo:r.photo||""}),c(r.photo)):(l({name:"",username:"",password:"",role:"Student",email:"",phone:"",address:"",photo:""}),c(an))},[r]),!e)return null;const i=m=>{l({...a,[m.target.name]:m.target.value})},d=m=>{var b;const x=(b=m.target.files)==null?void 0:b[0];if(x){if(x.size>Ac){alert(`File is too large. Please select an image smaller than ${Ac/1024}KB to avoid errors.`);return}const y=new FileReader;y.onloadend=()=>{const v=y.result;l(N=>({...N,photo:v})),c(v)},y.readAsDataURL(x)}},u=async m=>{m.preventDefault();const x={...a};if(r&&!x.password)delete x.password;else if(!r&&!x.password){alert("Password is required for new users.");return}r?await Vh({...r,...x}):await Wh(x),n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," User"]}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"w-1/3 space-y-2",children:[s.jsx("img",{src:o||an,alt:"preview",className:"w-32 h-32 rounded-full object-cover mx-auto border-2 border-accent"}),s.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-secondary file:text-text-primary hover:file:bg-accent hover:file:text-white"})]}),s.jsxs("div",{className:"w-2/3 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:a.name,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsx("input",{type:"text",name:"username",placeholder:"Username / Login ID",value:a.username,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"password",name:"password",placeholder:r?"New Password (optional)":"Password",value:a.password,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsxs("select",{name:"role",value:a.role,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",disabled:!!r,children:[s.jsx("option",{value:"Student",children:"Student"}),s.jsx("option",{value:"Teacher",children:"Teacher"}),s.jsx("option",{value:"Admin",children:"Admin"})]}),s.jsx("p",{className:"text-xs text-text-secondary col-span-2 -mt-2",children:"Role cannot be changed after creation."}),s.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:a.email,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2"}),s.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:a.phone,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2"}),s.jsx("input",{type:"text",name:"address",placeholder:"Address",value:a.address,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2"})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Create User"})]})]})]})})},Lc=e=>e?e.split("T")[0]:"",Yy=()=>{const[e,t]=f.useState("general"),n=()=>{switch(e){case"general":return s.jsx(Ky,{});case"sessions":return s.jsx(Zy,{});case"roles":return s.jsx(Xy,{});case"users":return s.jsx(Jy,{});case"data":return s.jsx(ev,{});default:return null}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Administration Panel"}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:["general","sessions","roles","users","data"].map(r=>s.jsx("button",{onClick:()=>t(r),className:`px-4 py-3 font-medium text-sm -mb-px border-b-2 ${e===r?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:r.charAt(0).toUpperCase()+r.slice(1).replace("-"," ")},r))}),s.jsx("div",{className:"p-6 min-h-[500px]",children:n()})]})]})},Ky=()=>{const[e,t]=f.useState(We()),[n,r]=f.useState(!1),a=()=>{t({...zs})};return s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"General Settings"}),s.jsxs("div",{className:"bg-secondary p-6 rounded-lg max-w-2xl",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("img",{src:e.logo,alt:"logo",className:"w-20 h-20 rounded-full mr-6 bg-white p-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text-primary text-2xl",children:e.name}),s.jsx("p",{className:"text-text-secondary text-md",children:e.tagline})]})]}),s.jsxs("div",{className:"text-sm text-text-primary space-y-2 border-t border-background pt-4",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Address:"})," ",e.address]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",e.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",e.email]})]}),s.jsx("button",{onClick:()=>r(!0),className:"w-full mt-6 bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/80 transition-colors",children:"Edit Details"})]}),s.jsx(Vy,{isOpen:n,onClose:()=>r(!1),onSave:a})]})},Zy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,l]=f.useState(!1),[o,c]=f.useState(null),i=f.useCallback(async()=>{r(!0),_h().then(m=>{t(m),r(!1)})},[]);f.useEffect(()=>{i()},[i]);const d=async m=>{await Bh(m),i()},u=(m=null)=>{c(m),l(!0)};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Academic Sessions"}),s.jsx("button",{onClick:()=>u(),className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm",children:"Add New Session"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Session Name"}),s.jsx("th",{className:"px-4 py-2",children:"Start Date"}),s.jsx("th",{className:"px-4 py-2",children:"End Date"}),s.jsx("th",{className:"px-4 py-2",children:"Status"}),s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center p-4",children:"Loading..."})}):e.map(m=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-2 font-medium text-text-primary",children:m.name}),s.jsx("td",{className:"px-4 py-2",children:Lc(m.startDate)}),s.jsx("td",{className:"px-4 py-2",children:Lc(m.endDate)}),s.jsx("td",{className:"px-4 py-2",children:m.isActive?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-500/20 text-green-400",children:"Active"}):s.jsx("button",{onClick:()=>d(m.id),className:"text-xs text-accent hover:underline",children:"Set Active"})}),s.jsx("td",{className:"px-4 py-2 flex gap-2",children:s.jsx("button",{onClick:()=>u(m),className:"p-1 hover:bg-background rounded",children:s.jsx(Xe,{className:"w-4 h-4 text-yellow-400"})})})]},m.id))})]})}),a&&s.jsx(Gy,{isOpen:a,onClose:()=>l(!1),onSave:()=>{i(),l(!1)},initialData:o})]})},Xy=()=>{const[e,t]=f.useState(()=>Gr()),n=(l,o,c)=>{t(i=>i.map(d=>{if(d.href===l){const u=c?[...new Set([...d.roles,o])]:d.roles.filter(m=>m!==o);return{...d,roles:u}}return d}))},r=()=>{Dg(e),alert("Permissions updated successfully!")},a=()=>{Tg(),t(Gr()),alert("Permissions have been reset to default.")};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Roles & Permissions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:a,className:"bg-secondary text-text-primary px-3 py-1.5 rounded-md font-semibold hover:bg-secondary/80 text-sm",children:"Reset to Defaults"}),s.jsx("button",{onClick:r,className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm",children:"Save Changes"})]})]}),s.jsx("p",{className:"text-text-secondary mb-6 text-sm",children:"Control which modules are accessible to Teacher and Student roles. Admin access is informational and cannot be changed."}),s.jsx("div",{className:"overflow-x-auto bg-secondary rounded-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-primary",children:[s.jsx("thead",{className:"text-xs uppercase",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Module"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Admin Access"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Teacher Access"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Student Access"})]})}),s.jsx("tbody",{children:e.map(l=>s.jsxs("tr",{className:"border-t border-background",children:[s.jsxs("td",{className:"px-6 py-4 font-semibold flex items-center gap-3",children:[s.jsx(l.icon,{className:"w-5 h-5 text-accent"}),l.label]}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,disabled:!0,className:"w-5 h-5 opacity-50"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:l.roles.includes("Teacher"),onChange:o=>n(l.href,"Teacher",o.target.checked),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent cursor-pointer"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:l.roles.includes("Student"),onChange:o=>n(l.href,"Student",o.target.checked),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent cursor-pointer"})})]},l.href))})]})})]})},Jy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[a,l]=f.useState(!1),[o,c]=f.useState(null),i=f.useCallback(async()=>{try{r(!0);const x=await jp();t(x)}catch(x){console.error("Failed to fetch users",x)}finally{r(!1)}},[]);f.useEffect(()=>{i()},[i]);const d=(x=null)=>{c(x),l(!0)},u=()=>{c(null),l(!1)},m=()=>{i(),u()};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"User Management"}),s.jsxs("button",{onClick:()=>d(),className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm flex items-center gap-2",children:[s.jsx(Ko,{className:"w-4 h-4"})," Add New User"]})]}),n?s.jsx("p",{children:"Loading users..."}):s.jsx(Qy,{users:e,onEdit:d}),a&&s.jsx(qy,{isOpen:a,onClose:u,onSave:m,initialData:o})]})},ev=()=>{const e=()=>{window.confirm("Are you sure you want to start a data backup?")&&alert("Simulating data backup... Backup completed successfully!")},t=()=>{window.confirm("WARNING: Restoring data will overwrite current information. Are you sure you want to proceed?")&&alert("Simulating data restore... Restore completed successfully!")};return s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Data Management"}),s.jsxs("div",{className:"bg-secondary p-6 rounded-lg max-w-md space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:"Backup Data"}),s.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Create a backup of the entire system's data."}),s.jsx("button",{onClick:e,className:"bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-600 transition-colors",children:"Start Backup"})]}),s.jsxs("div",{className:"border-t border-background pt-4",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:"Restore Data"}),s.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Restore data from a previous backup. This action is irreversible."}),s.jsx("button",{onClick:t,className:"bg-red-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-600 transition-colors",children:"Restore from Backup"})]})]})]})},zc=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]}catch{return e}},tv=e=>{switch(e){case"Pending":return"bg-yellow-500/20 text-yellow-400";case"Approved":return"bg-green-500/20 text-green-400";case"Rejected":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},Fc=({requests:e,isAdminView:t,onApprove:n,onReject:r})=>e.length===0?s.jsx("p",{className:"text-text-secondary text-center py-4",children:t?"No leave requests found.":"You have no leave history."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[t&&s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Staff Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Start Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"End Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Reason"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),t&&s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(a=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[t&&s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:a.staffName}),s.jsx("td",{className:"px-6 py-4",children:zc(a.startDate)}),s.jsx("td",{className:"px-6 py-4",children:zc(a.endDate)}),s.jsx("td",{className:"px-6 py-4 max-w-xs truncate",children:a.reason}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${tv(a.status)}`,children:a.status})}),t&&s.jsx("td",{className:"px-6 py-4",children:a.status==="Pending"&&n&&r&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>n(a.id),className:"p-1.5 bg-green-500/20 text-green-400 rounded-full hover:bg-green-500/40",title:"Approve",children:s.jsx(Ph,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(a.id),className:"p-1.5 bg-red-500/20 text-red-400 rounded-full hover:bg-red-500/40",title:"Reject",children:s.jsx(vt,{className:"w-4 h-4"})})]})})]},a.id))})]})}),nv=()=>{const{user:e}=Ce(),[t,n]=f.useState([]),[r,a]=f.useState(!0),[l,o]=f.useState(""),[c,i]=f.useState(""),[d,u]=f.useState(""),m=f.useCallback(async()=>{try{a(!0);const v=await Pp();n(v)}catch(v){console.error("Failed to fetch leave requests",v)}finally{a(!1)}},[]);f.useEffect(()=>{m()},[m]);const x=async v=>{if(v.preventDefault(),!e||!l||!c||!d){alert("Please fill all fields.");return}await Cg({staffId:e.id,staffName:e.name,startDate:l,endDate:c,reason:d}),o(""),i(""),u(""),m()},b=async(v,N)=>{await Eg(v,N),m()},y=f.useMemo(()=>e?t.filter(v=>v.staffId===e.id):[],[t,e]);return r?s.jsx("div",{className:"text-center p-8",children:"Loading leave information..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Leave Management"}),(e==null?void 0:e.role)==="Admin"&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"All Staff Leave Requests"}),s.jsx(Fc,{requests:t,isAdminView:!0,onApprove:v=>b(v,"Approved"),onReject:v=>b(v,"Rejected")})]}),(e==null?void 0:e.role)==="Teacher"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 bg-primary p-6 rounded-lg shadow-lg h-fit",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Apply for Leave"}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Start Date"}),s.jsx("input",{type:"date",value:l,onChange:v=>o(v.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"End Date"}),s.jsx("input",{type:"date",value:c,onChange:v=>i(v.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Reason"}),s.jsx("textarea",{value:d,onChange:v=>u(v.target.value),rows:4,placeholder:"Reason for leave...",className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsx("button",{type:"submit",className:"w-full bg-accent text-white font-semibold py-2.5 rounded-lg hover:bg-accent/90 transition-colors",children:"Submit Request"})]})]}),s.jsxs("div",{className:"lg:col-span-2 bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"My Leave History"}),s.jsx(Fc,{requests:y,isAdminView:!1})]})]})]})},sv=()=>{const[e,t]=f.useState(!1);return s.jsxs("div",{className:"flex h-screen bg-background font-sans",children:[s.jsx(Fg,{isOpen:e,onClose:()=>t(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(Rg,{onMenuClick:()=>t(!0)}),s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-background p-4 md:p-6 transition-all duration-300",children:s.jsx(Qo,{})})]})]})},rv=()=>{const{user:e}=Ce(),t=ni(),n=r=>{var a;return((a=t.find(l=>l.href===r))==null?void 0:a.roles)||["Admin"]};return s.jsxs(ah,{children:[s.jsx(q,{path:"/",element:e?s.jsx(qt,{to:"/app"}):s.jsx($y,{})}),s.jsx(q,{path:"/login",element:e?s.jsx(qt,{to:"/app"}):s.jsx(_y,{})}),s.jsx(q,{path:"/results",element:s.jsx(Oy,{})}),s.jsx(q,{path:"/app",element:s.jsx(de,{roles:["Admin","Teacher","Student"],children:(e==null?void 0:e.role)==="Student"?s.jsx(qt,{to:"/app/student-dashboard"}):s.jsx(qt,{to:"/app/dashboard"})})}),s.jsxs(q,{element:s.jsx(de,{roles:["Admin","Teacher"],children:s.jsx(sv,{})}),children:[s.jsx(q,{path:"/app/dashboard",element:s.jsx(de,{roles:n("/app/dashboard"),children:s.jsx(Og,{})})}),s.jsx(q,{path:"/app/students",element:s.jsx(de,{roles:n("/app/students"),children:s.jsx(Hg,{})})}),s.jsx(q,{path:"/app/classes",element:s.jsx(de,{roles:n("/app/classes"),children:s.jsx(Ry,{})})}),s.jsx(q,{path:"/app/academics",element:s.jsx(de,{roles:n("/app/academics"),children:s.jsx(Xg,{})})}),s.jsx(q,{path:"/app/attendance",element:s.jsx(de,{roles:n("/app/attendance"),children:s.jsx(sy,{})})}),s.jsx(q,{path:"/app/communication",element:s.jsx(de,{roles:n("/app/communication"),children:s.jsx(my,{})})}),s.jsx(q,{path:"/app/exams",element:s.jsx(de,{roles:n("/app/exams"),children:s.jsx(Cy,{})})}),s.jsx(q,{path:"/app/events",element:s.jsx(de,{roles:n("/app/events"),children:s.jsx(Iy,{})})}),s.jsx(q,{path:"/app/leave",element:s.jsx(de,{roles:n("/app/leave"),children:s.jsx(nv,{})})}),s.jsx(q,{path:"/app/staff",element:s.jsx(de,{roles:n("/app/staff"),children:s.jsx(Gg,{})})}),s.jsx(q,{path:"/app/finance",element:s.jsx(de,{roles:n("/app/finance"),children:s.jsx(cy,{})})}),s.jsx(q,{path:"/app/transport",element:s.jsx(de,{roles:n("/app/transport"),children:s.jsx(hy,{})})}),s.jsx(q,{path:"/app/inventory",element:s.jsx(de,{roles:n("/app/inventory"),children:s.jsx(vy,{})})}),s.jsx(q,{path:"/app/id-cards",element:s.jsx(de,{roles:n("/app/id-cards"),children:s.jsx(Ty,{})})}),s.jsx(q,{path:"/app/administration",element:s.jsx(de,{roles:n("/app/administration"),children:s.jsx(Yy,{})})})]}),s.jsx(q,{element:s.jsx(de,{roles:["Student"],children:s.jsx(_g,{})}),children:s.jsx(q,{path:"/app/student-dashboard",element:s.jsx(Uy,{})})}),s.jsx(q,{path:"/unauthorized",element:s.jsx(Wy,{})}),s.jsx(q,{path:"*",element:s.jsx(qt,{to:e?"/app":"/",replace:!0})})]})},av=()=>{const[e,t]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{await Promise.all([Lg(),zh()])}finally{t(!1)}})()},[]),e?s.jsx("div",{className:"flex justify-center items-center h-screen bg-background text-text-primary",children:s.jsx("p",{className:"text-xl animate-pulse",children:"Starting App..."})}):s.jsx(mh,{children:s.jsx(Mg,{children:s.jsx(Pg,{children:s.jsx(rv,{})})})})},Rp=document.getElementById("root");if(!Rp)throw new Error("Could not find root element to mount to");const lv=Va.createRoot(Rp);lv.render(s.jsx(Xl.StrictMode,{children:s.jsx(av,{})}));
