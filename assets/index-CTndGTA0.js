function fp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in e)){const a=Object.getOwnPropertyDescriptor(r,l);a&&Object.defineProperty(e,l,a.get?a:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function xp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kc={exports:{}},Wr={},Cc={exports:{}},_={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),hp=Symbol.for("react.portal"),gp=Symbol.for("react.fragment"),yp=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),jp=Symbol.for("react.provider"),wp=Symbol.for("react.context"),bp=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Sp=Symbol.for("react.memo"),kp=Symbol.for("react.lazy"),Yo=Symbol.iterator;function Cp(e){return e===null||typeof e!="object"?null:(e=Yo&&e[Yo]||e["@@iterator"],typeof e=="function"?e:null)}var Ec={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pc=Object.assign,Dc={};function _n(e,t,n){this.props=e,this.context=t,this.refs=Dc,this.updater=n||Ec}_n.prototype.isReactComponent={};_n.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_n.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ic(){}Ic.prototype=_n.prototype;function Ba(e,t,n){this.props=e,this.context=t,this.refs=Dc,this.updater=n||Ec}var Ha=Ba.prototype=new Ic;Ha.constructor=Ba;Pc(Ha,_n.prototype);Ha.isPureReactComponent=!0;var Ko=Array.isArray,Lc=Object.prototype.hasOwnProperty,Wa={current:null},Ac={key:!0,ref:!0,__self:!0,__source:!0};function Tc(e,t,n){var r,l={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)Lc.call(t,r)&&!Ac.hasOwnProperty(r)&&(l[r]=t[r]);var c=arguments.length-2;if(c===1)l.children=n;else if(1<c){for(var i=Array(c),d=0;d<c;d++)i[d]=arguments[d+2];l.children=i}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)l[r]===void 0&&(l[r]=c[r]);return{$$typeof:As,type:e,key:a,ref:o,props:l,_owner:Wa.current}}function Ep(e,t){return{$$typeof:As,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Va(e){return typeof e=="object"&&e!==null&&e.$$typeof===As}function Pp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zo=/\/+/g;function fl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pp(""+e.key):t.toString(36)}function rr(e,t,n,r,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case As:case hp:o=!0}}if(o)return o=e,l=l(o),e=r===""?"."+fl(o,0):r,Ko(l)?(n="",e!=null&&(n=e.replace(Zo,"$&/")+"/"),rr(l,t,n,"",function(d){return d})):l!=null&&(Va(l)&&(l=Ep(l,n+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(Zo,"$&/")+"/")+e)),t.push(l)),1;if(o=0,r=r===""?".":r+":",Ko(e))for(var c=0;c<e.length;c++){a=e[c];var i=r+fl(a,c);o+=rr(a,t,n,i,l)}else if(i=Cp(e),typeof i=="function")for(e=i.call(e),c=0;!(a=e.next()).done;)a=a.value,i=r+fl(a,c++),o+=rr(a,t,n,i,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Os(e,t,n){if(e==null)return e;var r=[],l=0;return rr(e,r,"","",function(a){return t.call(n,a,l++)}),r}function Dp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var we={current:null},lr={transition:null},Ip={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:lr,ReactCurrentOwner:Wa};function Mc(){throw Error("act(...) is not supported in production builds of React.")}_.Children={map:Os,forEach:function(e,t,n){Os(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Os(e,function(){t++}),t},toArray:function(e){return Os(e,function(t){return t})||[]},only:function(e){if(!Va(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_.Component=_n;_.Fragment=gp;_.Profiler=vp;_.PureComponent=Ba;_.StrictMode=yp;_.Suspense=Np;_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ip;_.act=Mc;_.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Pc({},e.props),l=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Wa.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(i in t)Lc.call(t,i)&&!Ac.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&c!==void 0?c[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){c=Array(i);for(var d=0;d<i;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:As,type:e.type,key:l,ref:a,props:r,_owner:o}};_.createContext=function(e){return e={$$typeof:wp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jp,_context:e},e.Consumer=e};_.createElement=Tc;_.createFactory=function(e){var t=Tc.bind(null,e);return t.type=e,t};_.createRef=function(){return{current:null}};_.forwardRef=function(e){return{$$typeof:bp,render:e}};_.isValidElement=Va;_.lazy=function(e){return{$$typeof:kp,_payload:{_status:-1,_result:e},_init:Dp}};_.memo=function(e,t){return{$$typeof:Sp,type:e,compare:t===void 0?null:t}};_.startTransition=function(e){var t=lr.transition;lr.transition={};try{e()}finally{lr.transition=t}};_.unstable_act=Mc;_.useCallback=function(e,t){return we.current.useCallback(e,t)};_.useContext=function(e){return we.current.useContext(e)};_.useDebugValue=function(){};_.useDeferredValue=function(e){return we.current.useDeferredValue(e)};_.useEffect=function(e,t){return we.current.useEffect(e,t)};_.useId=function(){return we.current.useId()};_.useImperativeHandle=function(e,t,n){return we.current.useImperativeHandle(e,t,n)};_.useInsertionEffect=function(e,t){return we.current.useInsertionEffect(e,t)};_.useLayoutEffect=function(e,t){return we.current.useLayoutEffect(e,t)};_.useMemo=function(e,t){return we.current.useMemo(e,t)};_.useReducer=function(e,t,n){return we.current.useReducer(e,t,n)};_.useRef=function(e){return we.current.useRef(e)};_.useState=function(e){return we.current.useState(e)};_.useSyncExternalStore=function(e,t,n){return we.current.useSyncExternalStore(e,t,n)};_.useTransition=function(){return we.current.useTransition()};_.version="18.3.1";Cc.exports=_;var f=Cc.exports;const qa=xp(f),Lp=fp({__proto__:null,default:qa},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap=f,Tp=Symbol.for("react.element"),Mp=Symbol.for("react.fragment"),zp=Object.prototype.hasOwnProperty,Fp=Ap.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rp={key:!0,ref:!0,__self:!0,__source:!0};function zc(e,t,n){var r,l={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)zp.call(t,r)&&!Rp.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Tp,type:e,key:a,ref:o,props:l,_owner:Fp.current}}Wr.Fragment=Mp;Wr.jsx=zc;Wr.jsxs=zc;kc.exports=Wr;var s=kc.exports,Ul={},Fc={exports:{}},Te={},Rc={exports:{}},_c={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,z){var R=I.length;I.push(z);e:for(;0<R;){var ne=R-1>>>1,ie=I[ne];if(0<l(ie,z))I[ne]=z,I[R]=ie,R=ne;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],R=I.pop();if(R!==z){I[0]=R;e:for(var ne=0,ie=I.length,Rs=ie>>>1;ne<Rs;){var Ot=2*(ne+1)-1,ml=I[Ot],$t=Ot+1,_s=I[$t];if(0>l(ml,R))$t<ie&&0>l(_s,ml)?(I[ne]=_s,I[$t]=R,ne=$t):(I[ne]=ml,I[Ot]=R,ne=Ot);else if($t<ie&&0>l(_s,R))I[ne]=_s,I[$t]=R,ne=$t;else break e}}return z}function l(I,z){var R=I.sortIndex-z.sortIndex;return R!==0?R:I.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var i=[],d=[],m=1,u=null,p=3,j=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(I){for(var z=n(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=I)r(d),z.sortIndex=z.expirationTime,t(i,z);else break;z=n(d)}}function N(I){if(v=!1,h(I),!y)if(n(i)!==null)y=!0,ft(C);else{var z=n(d);z!==null&&xt(N,z.startTime-I)}}function C(I,z){y=!1,v&&(v=!1,g(k),k=-1),j=!0;var R=p;try{for(h(z),u=n(i);u!==null&&(!(u.expirationTime>z)||I&&!T());){var ne=u.callback;if(typeof ne=="function"){u.callback=null,p=u.priorityLevel;var ie=ne(u.expirationTime<=z);z=e.unstable_now(),typeof ie=="function"?u.callback=ie:u===n(i)&&r(i),h(z)}else r(i);u=n(i)}if(u!==null)var Rs=!0;else{var Ot=n(d);Ot!==null&&xt(N,Ot.startTime-z),Rs=!1}return Rs}finally{u=null,p=R,j=!1}}var w=!1,S=null,k=-1,D=5,E=-1;function T(){return!(e.unstable_now()-E<D)}function A(){if(S!==null){var I=e.unstable_now();E=I;var z=!0;try{z=S(!0,I)}finally{z?U():(w=!1,S=null)}}else w=!1}var U;if(typeof x=="function")U=function(){x(A)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,_t=H.port2;H.port1.onmessage=A,U=function(){_t.postMessage(null)}}else U=function(){b(A,0)};function ft(I){S=I,w||(w=!0,U())}function xt(I,z){k=b(function(){I(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){y||j||(y=!0,ft(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(I){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var R=p;p=z;try{return I()}finally{p=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var R=p;p=I;try{return z()}finally{p=R}},e.unstable_scheduleCallback=function(I,z,R){var ne=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?ne+R:ne):R=ne,I){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=R+ie,I={id:m++,callback:z,priorityLevel:I,startTime:R,expirationTime:ie,sortIndex:-1},R>ne?(I.sortIndex=R,t(d,I),n(i)===null&&I===n(d)&&(v?(g(k),k=-1):v=!0,xt(N,R-ne))):(I.sortIndex=ie,t(i,I),y||j||(y=!0,ft(C))),I},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(I){var z=p;return function(){var R=p;p=z;try{return I.apply(this,arguments)}finally{p=R}}}})(_c);Rc.exports=_c;var _p=Rc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=f,Ae=_p;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oc=new Set,ps={};function sn(e,t){Pn(e,t),Pn(e+"Capture",t)}function Pn(e,t){for(ps[e]=t,e=0;e<t.length;e++)Oc.add(t[e])}var ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bl=Object.prototype.hasOwnProperty,$p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xo={},Jo={};function Up(e){return Bl.call(Jo,e)?!0:Bl.call(Xo,e)?!1:$p.test(e)?Jo[e]=!0:(Xo[e]=!0,!1)}function Bp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hp(e,t,n,r){if(t===null||typeof t>"u"||Bp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function be(e,t,n,r,l,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fe[e]=new be(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fe[t]=new be(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fe[e]=new be(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fe[e]=new be(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fe[e]=new be(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fe[e]=new be(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fe[e]=new be(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fe[e]=new be(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fe[e]=new be(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ga=/[\-:]([a-z])/g;function Qa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ga,Qa);fe[t]=new be(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ga,Qa);fe[t]=new be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ga,Qa);fe[t]=new be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fe[e]=new be(e,1,!1,e.toLowerCase(),null,!1,!1)});fe.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fe[e]=new be(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ya(e,t,n,r){var l=fe.hasOwnProperty(t)?fe[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hp(t,n,l,r)&&(n=null),r||l===null?Up(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ut=Op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$s=Symbol.for("react.element"),dn=Symbol.for("react.portal"),un=Symbol.for("react.fragment"),Ka=Symbol.for("react.strict_mode"),Hl=Symbol.for("react.profiler"),$c=Symbol.for("react.provider"),Uc=Symbol.for("react.context"),Za=Symbol.for("react.forward_ref"),Wl=Symbol.for("react.suspense"),Vl=Symbol.for("react.suspense_list"),Xa=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),Bc=Symbol.for("react.offscreen"),ei=Symbol.iterator;function Wn(e){return e===null||typeof e!="object"?null:(e=ei&&e[ei]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Object.assign,xl;function Jn(e){if(xl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xl=t&&t[1]||""}return`
`+xl+e}var hl=!1;function gl(e,t){if(!e||hl)return"";hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var l=d.stack.split(`
`),a=r.stack.split(`
`),o=l.length-1,c=a.length-1;1<=o&&0<=c&&l[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(l[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||l[o]!==a[c]){var i=`
`+l[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=c);break}}}finally{hl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jn(e):""}function Wp(e){switch(e.tag){case 5:return Jn(e.type);case 16:return Jn("Lazy");case 13:return Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 2:case 15:return e=gl(e.type,!1),e;case 11:return e=gl(e.type.render,!1),e;case 1:return e=gl(e.type,!0),e;default:return""}}function ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case un:return"Fragment";case dn:return"Portal";case Hl:return"Profiler";case Ka:return"StrictMode";case Wl:return"Suspense";case Vl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uc:return(e.displayName||"Context")+".Consumer";case $c:return(e._context.displayName||"Context")+".Provider";case Za:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xa:return t=e.displayName||null,t!==null?t:ql(e.type)||"Memo";case gt:t=e._payload,e=e._init;try{return ql(e(t))}catch{}}return null}function Vp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ql(t);case 8:return t===Ka?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qp(e){var t=Hc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Us(e){e._valueTracker||(e._valueTracker=qp(e))}function Wc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Hc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gl(e,t){var n=t.checked;return ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ti(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Tt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vc(e,t){t=t.checked,t!=null&&Ya(e,"checked",t,!1)}function Ql(e,t){Vc(e,t);var n=Tt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Yl(e,t.type,Tt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ni(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Yl(e,t,n){(t!=="number"||hr(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var es=Array.isArray;function bn(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Tt(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Kl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function si(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(P(92));if(es(n)){if(1<n.length)throw Error(P(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tt(n)}}function qc(e,t){var n=Tt(t.value),r=Tt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ri(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Gc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Gc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bs,Qc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ms(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gp=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(e){Gp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ss[t]=ss[e]})});function Yc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ss.hasOwnProperty(e)&&ss[e]?(""+t).trim():t+"px"}function Kc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Yc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Qp=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xl(e,t){if(t){if(Qp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Jl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ea=null;function Ja(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ta=null,Nn=null,Sn=null;function li(e){if(e=zs(e)){if(typeof ta!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Yr(t),ta(e.stateNode,e.type,t))}}function Zc(e){Nn?Sn?Sn.push(e):Sn=[e]:Nn=e}function Xc(){if(Nn){var e=Nn,t=Sn;if(Sn=Nn=null,li(e),t)for(e=0;e<t.length;e++)li(t[e])}}function Jc(e,t){return e(t)}function ed(){}var yl=!1;function td(e,t,n){if(yl)return e(t,n);yl=!0;try{return Jc(e,t,n)}finally{yl=!1,(Nn!==null||Sn!==null)&&(ed(),Xc())}}function fs(e,t){var n=e.stateNode;if(n===null)return null;var r=Yr(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var na=!1;if(ot)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){na=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{na=!1}function Yp(e,t,n,r,l,a,o,c,i){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var rs=!1,gr=null,yr=!1,sa=null,Kp={onError:function(e){rs=!0,gr=e}};function Zp(e,t,n,r,l,a,o,c,i){rs=!1,gr=null,Yp.apply(Kp,arguments)}function Xp(e,t,n,r,l,a,o,c,i){if(Zp.apply(this,arguments),rs){if(rs){var d=gr;rs=!1,gr=null}else throw Error(P(198));yr||(yr=!0,sa=d)}}function rn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function nd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ai(e){if(rn(e)!==e)throw Error(P(188))}function Jp(e){var t=e.alternate;if(!t){if(t=rn(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var a=l.alternate;if(a===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return ai(l),e;if(a===r)return ai(l),t;a=a.sibling}throw Error(P(188))}if(n.return!==r.return)n=l,r=a;else{for(var o=!1,c=l.child;c;){if(c===n){o=!0,n=l,r=a;break}if(c===r){o=!0,r=l,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=l;break}if(c===r){o=!0,r=a,n=l;break}c=c.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function sd(e){return e=Jp(e),e!==null?rd(e):null}function rd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rd(e);if(t!==null)return t;e=e.sibling}return null}var ld=Ae.unstable_scheduleCallback,oi=Ae.unstable_cancelCallback,em=Ae.unstable_shouldYield,tm=Ae.unstable_requestPaint,se=Ae.unstable_now,nm=Ae.unstable_getCurrentPriorityLevel,eo=Ae.unstable_ImmediatePriority,ad=Ae.unstable_UserBlockingPriority,vr=Ae.unstable_NormalPriority,sm=Ae.unstable_LowPriority,od=Ae.unstable_IdlePriority,Vr=null,et=null;function rm(e){if(et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Vr,e,void 0,(e.current.flags&128)===128)}catch{}}var qe=Math.clz32?Math.clz32:om,lm=Math.log,am=Math.LN2;function om(e){return e>>>=0,e===0?32:31-(lm(e)/am|0)|0}var Hs=64,Ws=4194304;function ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jr(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~l;c!==0?r=ts(c):(a&=o,a!==0&&(r=ts(a)))}else o=n&~l,o!==0?r=ts(o):a!==0&&(r=ts(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qe(t),l=1<<n,r|=e[n],t&=~l;return r}function im(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-qe(a),c=1<<o,i=l[o];i===-1?(!(c&n)||c&r)&&(l[o]=im(c,t)):i<=t&&(e.expiredLanes|=c),a&=~c}}function ra(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function id(){var e=Hs;return Hs<<=1,!(Hs&4194240)&&(Hs=64),e}function vl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ts(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qe(t),e[t]=n}function dm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-qe(n),a=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~a}}function to(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qe(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var B=0;function cd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dd,no,ud,pd,md,la=!1,Vs=[],St=null,kt=null,Ct=null,xs=new Map,hs=new Map,vt=[],um="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":xs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(t.pointerId)}}function qn(e,t,n,r,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},t!==null&&(t=zs(t),t!==null&&no(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function pm(e,t,n,r,l){switch(t){case"focusin":return St=qn(St,e,t,n,r,l),!0;case"dragenter":return kt=qn(kt,e,t,n,r,l),!0;case"mouseover":return Ct=qn(Ct,e,t,n,r,l),!0;case"pointerover":var a=l.pointerId;return xs.set(a,qn(xs.get(a)||null,e,t,n,r,l)),!0;case"gotpointercapture":return a=l.pointerId,hs.set(a,qn(hs.get(a)||null,e,t,n,r,l)),!0}return!1}function fd(e){var t=Vt(e.target);if(t!==null){var n=rn(t);if(n!==null){if(t=n.tag,t===13){if(t=nd(n),t!==null){e.blockedOn=t,md(e.priority,function(){ud(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ar(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=aa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ea=r,n.target.dispatchEvent(r),ea=null}else return t=zs(n),t!==null&&no(t),e.blockedOn=n,!1;t.shift()}return!0}function ci(e,t,n){ar(e)&&n.delete(t)}function mm(){la=!1,St!==null&&ar(St)&&(St=null),kt!==null&&ar(kt)&&(kt=null),Ct!==null&&ar(Ct)&&(Ct=null),xs.forEach(ci),hs.forEach(ci)}function Gn(e,t){e.blockedOn===t&&(e.blockedOn=null,la||(la=!0,Ae.unstable_scheduleCallback(Ae.unstable_NormalPriority,mm)))}function gs(e){function t(l){return Gn(l,e)}if(0<Vs.length){Gn(Vs[0],e);for(var n=1;n<Vs.length;n++){var r=Vs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(St!==null&&Gn(St,e),kt!==null&&Gn(kt,e),Ct!==null&&Gn(Ct,e),xs.forEach(t),hs.forEach(t),n=0;n<vt.length;n++)r=vt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<vt.length&&(n=vt[0],n.blockedOn===null);)fd(n),n.blockedOn===null&&vt.shift()}var kn=ut.ReactCurrentBatchConfig,wr=!0;function fm(e,t,n,r){var l=B,a=kn.transition;kn.transition=null;try{B=1,so(e,t,n,r)}finally{B=l,kn.transition=a}}function xm(e,t,n,r){var l=B,a=kn.transition;kn.transition=null;try{B=4,so(e,t,n,r)}finally{B=l,kn.transition=a}}function so(e,t,n,r){if(wr){var l=aa(e,t,n,r);if(l===null)Dl(e,t,r,br,n),ii(e,r);else if(pm(l,e,t,n,r))r.stopPropagation();else if(ii(e,r),t&4&&-1<um.indexOf(e)){for(;l!==null;){var a=zs(l);if(a!==null&&dd(a),a=aa(e,t,n,r),a===null&&Dl(e,t,r,br,n),a===l)break;l=a}l!==null&&r.stopPropagation()}else Dl(e,t,r,null,n)}}var br=null;function aa(e,t,n,r){if(br=null,e=Ja(r),e=Vt(e),e!==null)if(t=rn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=nd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return br=e,null}function xd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nm()){case eo:return 1;case ad:return 4;case vr:case sm:return 16;case od:return 536870912;default:return 16}default:return 16}}var wt=null,ro=null,or=null;function hd(){if(or)return or;var e,t=ro,n=t.length,r,l="value"in wt?wt.value:wt.textContent,a=l.length;for(e=0;e<n&&t[e]===l[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===l[a-r];r++);return or=l.slice(e,1<r?1-r:void 0)}function ir(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qs(){return!0}function di(){return!1}function Me(e){function t(n,r,l,a,o){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qs:di,this.isPropagationStopped=di,this}return ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),t}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=Me(On),Ms=ee({},On,{view:0,detail:0}),hm=Me(Ms),jl,wl,Qn,qr=ee({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qn&&(Qn&&e.type==="mousemove"?(jl=e.screenX-Qn.screenX,wl=e.screenY-Qn.screenY):wl=jl=0,Qn=e),jl)},movementY:function(e){return"movementY"in e?e.movementY:wl}}),ui=Me(qr),gm=ee({},qr,{dataTransfer:0}),ym=Me(gm),vm=ee({},Ms,{relatedTarget:0}),bl=Me(vm),jm=ee({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),wm=Me(jm),bm=ee({},On,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nm=Me(bm),Sm=ee({},On,{data:0}),pi=Me(Sm),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Em={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Em[e])?!!t[e]:!1}function ao(){return Pm}var Dm=ee({},Ms,{key:function(e){if(e.key){var t=km[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ir(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(e){return e.type==="keypress"?ir(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ir(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Im=Me(Dm),Lm=ee({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mi=Me(Lm),Am=ee({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),Tm=Me(Am),Mm=ee({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),zm=Me(Mm),Fm=ee({},qr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rm=Me(Fm),_m=[9,13,27,32],oo=ot&&"CompositionEvent"in window,ls=null;ot&&"documentMode"in document&&(ls=document.documentMode);var Om=ot&&"TextEvent"in window&&!ls,gd=ot&&(!oo||ls&&8<ls&&11>=ls),fi=" ",xi=!1;function yd(e,t){switch(e){case"keyup":return _m.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pn=!1;function $m(e,t){switch(e){case"compositionend":return vd(t);case"keypress":return t.which!==32?null:(xi=!0,fi);case"textInput":return e=t.data,e===fi&&xi?null:e;default:return null}}function Um(e,t){if(pn)return e==="compositionend"||!oo&&yd(e,t)?(e=hd(),or=ro=wt=null,pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gd&&t.locale!=="ko"?null:t.data;default:return null}}var Bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bm[e.type]:t==="textarea"}function jd(e,t,n,r){Zc(r),t=Nr(t,"onChange"),0<t.length&&(n=new lo("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var as=null,ys=null;function Hm(e){Ld(e,0)}function Gr(e){var t=xn(e);if(Wc(t))return e}function Wm(e,t){if(e==="change")return t}var wd=!1;if(ot){var Nl;if(ot){var Sl="oninput"in document;if(!Sl){var gi=document.createElement("div");gi.setAttribute("oninput","return;"),Sl=typeof gi.oninput=="function"}Nl=Sl}else Nl=!1;wd=Nl&&(!document.documentMode||9<document.documentMode)}function yi(){as&&(as.detachEvent("onpropertychange",bd),ys=as=null)}function bd(e){if(e.propertyName==="value"&&Gr(ys)){var t=[];jd(t,ys,e,Ja(e)),td(Hm,t)}}function Vm(e,t,n){e==="focusin"?(yi(),as=t,ys=n,as.attachEvent("onpropertychange",bd)):e==="focusout"&&yi()}function qm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gr(ys)}function Gm(e,t){if(e==="click")return Gr(t)}function Qm(e,t){if(e==="input"||e==="change")return Gr(t)}function Ym(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qe=typeof Object.is=="function"?Object.is:Ym;function vs(e,t){if(Qe(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!Bl.call(t,l)||!Qe(e[l],t[l]))return!1}return!0}function vi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ji(e,t){var n=vi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vi(n)}}function Nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sd(){for(var e=window,t=hr();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hr(e.document)}return t}function io(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Km(e){var t=Sd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Nd(n.ownerDocument.documentElement,n)){if(r!==null&&io(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,a=Math.min(r.start,l);r=r.end===void 0?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=ji(n,a);var o=ji(n,r);l&&o&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zm=ot&&"documentMode"in document&&11>=document.documentMode,mn=null,oa=null,os=null,ia=!1;function wi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ia||mn==null||mn!==hr(r)||(r=mn,"selectionStart"in r&&io(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),os&&vs(os,r)||(os=r,r=Nr(oa,"onSelect"),0<r.length&&(t=new lo("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mn)))}function Gs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fn={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionend:Gs("Transition","TransitionEnd")},kl={},kd={};ot&&(kd=document.createElement("div").style,"AnimationEvent"in window||(delete fn.animationend.animation,delete fn.animationiteration.animation,delete fn.animationstart.animation),"TransitionEvent"in window||delete fn.transitionend.transition);function Qr(e){if(kl[e])return kl[e];if(!fn[e])return e;var t=fn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in kd)return kl[e]=t[n];return e}var Cd=Qr("animationend"),Ed=Qr("animationiteration"),Pd=Qr("animationstart"),Dd=Qr("transitionend"),Id=new Map,bi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zt(e,t){Id.set(e,t),sn(t,[e])}for(var Cl=0;Cl<bi.length;Cl++){var El=bi[Cl],Xm=El.toLowerCase(),Jm=El[0].toUpperCase()+El.slice(1);zt(Xm,"on"+Jm)}zt(Cd,"onAnimationEnd");zt(Ed,"onAnimationIteration");zt(Pd,"onAnimationStart");zt("dblclick","onDoubleClick");zt("focusin","onFocus");zt("focusout","onBlur");zt(Dd,"onTransitionEnd");Pn("onMouseEnter",["mouseout","mouseover"]);Pn("onMouseLeave",["mouseout","mouseover"]);Pn("onPointerEnter",["pointerout","pointerover"]);Pn("onPointerLeave",["pointerout","pointerover"]);sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ef=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function Ni(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Xp(r,t,void 0,e),e.currentTarget=null}function Ld(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],i=c.instance,d=c.currentTarget;if(c=c.listener,i!==a&&l.isPropagationStopped())break e;Ni(l,c,d),a=i}else for(o=0;o<r.length;o++){if(c=r[o],i=c.instance,d=c.currentTarget,c=c.listener,i!==a&&l.isPropagationStopped())break e;Ni(l,c,d),a=i}}}if(yr)throw e=sa,yr=!1,sa=null,e}function V(e,t){var n=t[ma];n===void 0&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Ad(t,e,2,!1),n.add(r))}function Pl(e,t,n){var r=0;t&&(r|=4),Ad(n,e,r,t)}var Qs="_reactListening"+Math.random().toString(36).slice(2);function js(e){if(!e[Qs]){e[Qs]=!0,Oc.forEach(function(n){n!=="selectionchange"&&(ef.has(n)||Pl(n,!1,e),Pl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qs]||(t[Qs]=!0,Pl("selectionchange",!1,t))}}function Ad(e,t,n,r){switch(xd(t)){case 1:var l=fm;break;case 4:l=xm;break;default:l=so}n=l.bind(null,t,n,e),l=void 0,!na||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Dl(e,t,n,r,l){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(o===4)for(o=r.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===l||i.nodeType===8&&i.parentNode===l))return;o=o.return}for(;c!==null;){if(o=Vt(c),o===null)return;if(i=o.tag,i===5||i===6){r=a=o;continue e}c=c.parentNode}}r=r.return}td(function(){var d=a,m=Ja(n),u=[];e:{var p=Id.get(e);if(p!==void 0){var j=lo,y=e;switch(e){case"keypress":if(ir(n)===0)break e;case"keydown":case"keyup":j=Im;break;case"focusin":y="focus",j=bl;break;case"focusout":y="blur",j=bl;break;case"beforeblur":case"afterblur":j=bl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Tm;break;case Cd:case Ed:case Pd:j=wm;break;case Dd:j=zm;break;case"scroll":j=hm;break;case"wheel":j=Rm;break;case"copy":case"cut":case"paste":j=Nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=mi}var v=(t&4)!==0,b=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var x=d,h;x!==null;){h=x;var N=h.stateNode;if(h.tag===5&&N!==null&&(h=N,g!==null&&(N=fs(x,g),N!=null&&v.push(ws(x,N,h)))),b)break;x=x.return}0<v.length&&(p=new j(p,y,null,n,m),u.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",p&&n!==ea&&(y=n.relatedTarget||n.fromElement)&&(Vt(y)||y[it]))break e;if((j||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,j?(y=n.relatedTarget||n.toElement,j=d,y=y?Vt(y):null,y!==null&&(b=rn(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(j=null,y=d),j!==y)){if(v=ui,N="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=mi,N="onPointerLeave",g="onPointerEnter",x="pointer"),b=j==null?p:xn(j),h=y==null?p:xn(y),p=new v(N,x+"leave",j,n,m),p.target=b,p.relatedTarget=h,N=null,Vt(m)===d&&(v=new v(g,x+"enter",y,n,m),v.target=h,v.relatedTarget=b,N=v),b=N,j&&y)t:{for(v=j,g=y,x=0,h=v;h;h=cn(h))x++;for(h=0,N=g;N;N=cn(N))h++;for(;0<x-h;)v=cn(v),x--;for(;0<h-x;)g=cn(g),h--;for(;x--;){if(v===g||g!==null&&v===g.alternate)break t;v=cn(v),g=cn(g)}v=null}else v=null;j!==null&&Si(u,p,j,v,!1),y!==null&&b!==null&&Si(u,b,y,v,!0)}}e:{if(p=d?xn(d):window,j=p.nodeName&&p.nodeName.toLowerCase(),j==="select"||j==="input"&&p.type==="file")var C=Wm;else if(hi(p))if(wd)C=Qm;else{C=qm;var w=Vm}else(j=p.nodeName)&&j.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=Gm);if(C&&(C=C(e,d))){jd(u,C,n,m);break e}w&&w(e,p,d),e==="focusout"&&(w=p._wrapperState)&&w.controlled&&p.type==="number"&&Yl(p,"number",p.value)}switch(w=d?xn(d):window,e){case"focusin":(hi(w)||w.contentEditable==="true")&&(mn=w,oa=d,os=null);break;case"focusout":os=oa=mn=null;break;case"mousedown":ia=!0;break;case"contextmenu":case"mouseup":case"dragend":ia=!1,wi(u,n,m);break;case"selectionchange":if(Zm)break;case"keydown":case"keyup":wi(u,n,m)}var S;if(oo)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else pn?yd(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(gd&&n.locale!=="ko"&&(pn||k!=="onCompositionStart"?k==="onCompositionEnd"&&pn&&(S=hd()):(wt=m,ro="value"in wt?wt.value:wt.textContent,pn=!0)),w=Nr(d,k),0<w.length&&(k=new pi(k,e,null,n,m),u.push({event:k,listeners:w}),S?k.data=S:(S=vd(n),S!==null&&(k.data=S)))),(S=Om?$m(e,n):Um(e,n))&&(d=Nr(d,"onBeforeInput"),0<d.length&&(m=new pi("onBeforeInput","beforeinput",null,n,m),u.push({event:m,listeners:d}),m.data=S))}Ld(u,t)})}function ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nr(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=fs(e,n),a!=null&&r.unshift(ws(e,a,l)),a=fs(e,t),a!=null&&r.push(ws(e,a,l))),e=e.return}return r}function cn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Si(e,t,n,r,l){for(var a=t._reactName,o=[];n!==null&&n!==r;){var c=n,i=c.alternate,d=c.stateNode;if(i!==null&&i===r)break;c.tag===5&&d!==null&&(c=d,l?(i=fs(n,a),i!=null&&o.unshift(ws(n,i,c))):l||(i=fs(n,a),i!=null&&o.push(ws(n,i,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var tf=/\r\n?/g,nf=/\u0000|\uFFFD/g;function ki(e){return(typeof e=="string"?e:""+e).replace(tf,`
`).replace(nf,"")}function Ys(e,t,n){if(t=ki(t),ki(e)!==t&&n)throw Error(P(425))}function Sr(){}var ca=null,da=null;function ua(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pa=typeof setTimeout=="function"?setTimeout:void 0,sf=typeof clearTimeout=="function"?clearTimeout:void 0,Ci=typeof Promise=="function"?Promise:void 0,rf=typeof queueMicrotask=="function"?queueMicrotask:typeof Ci<"u"?function(e){return Ci.resolve(null).then(e).catch(lf)}:pa;function lf(e){setTimeout(function(){throw e})}function Il(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),gs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);gs(t)}function Et(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ei(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $n=Math.random().toString(36).slice(2),Je="__reactFiber$"+$n,bs="__reactProps$"+$n,it="__reactContainer$"+$n,ma="__reactEvents$"+$n,af="__reactListeners$"+$n,of="__reactHandles$"+$n;function Vt(e){var t=e[Je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[it]||n[Je]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ei(e);e!==null;){if(n=e[Je])return n;e=Ei(e)}return t}e=n,n=e.parentNode}return null}function zs(e){return e=e[Je]||e[it],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Yr(e){return e[bs]||null}var fa=[],hn=-1;function Ft(e){return{current:e}}function G(e){0>hn||(e.current=fa[hn],fa[hn]=null,hn--)}function W(e,t){hn++,fa[hn]=e.current,e.current=t}var Mt={},ye=Ft(Mt),ke=Ft(!1),Kt=Mt;function Dn(e,t){var n=e.type.contextTypes;if(!n)return Mt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in n)l[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Ce(e){return e=e.childContextTypes,e!=null}function kr(){G(ke),G(ye)}function Pi(e,t,n){if(ye.current!==Mt)throw Error(P(168));W(ye,t),W(ke,n)}function Td(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(P(108,Vp(e)||"Unknown",l));return ee({},n,r)}function Cr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mt,Kt=ye.current,W(ye,e),W(ke,ke.current),!0}function Di(e,t,n){var r=e.stateNode;if(!r)throw Error(P(169));n?(e=Td(e,t,Kt),r.__reactInternalMemoizedMergedChildContext=e,G(ke),G(ye),W(ye,e)):G(ke),W(ke,n)}var st=null,Kr=!1,Ll=!1;function Md(e){st===null?st=[e]:st.push(e)}function cf(e){Kr=!0,Md(e)}function Rt(){if(!Ll&&st!==null){Ll=!0;var e=0,t=B;try{var n=st;for(B=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}st=null,Kr=!1}catch(l){throw st!==null&&(st=st.slice(e+1)),ld(eo,Rt),l}finally{B=t,Ll=!1}}return null}var gn=[],yn=0,Er=null,Pr=0,Fe=[],Re=0,Zt=null,rt=1,lt="";function Ut(e,t){gn[yn++]=Pr,gn[yn++]=Er,Er=e,Pr=t}function zd(e,t,n){Fe[Re++]=rt,Fe[Re++]=lt,Fe[Re++]=Zt,Zt=e;var r=rt;e=lt;var l=32-qe(r)-1;r&=~(1<<l),n+=1;var a=32-qe(t)+l;if(30<a){var o=l-l%5;a=(r&(1<<o)-1).toString(32),r>>=o,l-=o,rt=1<<32-qe(t)+l|n<<l|r,lt=a+e}else rt=1<<a|n<<l|r,lt=e}function co(e){e.return!==null&&(Ut(e,1),zd(e,1,0))}function uo(e){for(;e===Er;)Er=gn[--yn],gn[yn]=null,Pr=gn[--yn],gn[yn]=null;for(;e===Zt;)Zt=Fe[--Re],Fe[Re]=null,lt=Fe[--Re],Fe[Re]=null,rt=Fe[--Re],Fe[Re]=null}var Le=null,Ie=null,Y=!1,Ve=null;function Fd(e,t){var n=_e(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ii(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Le=e,Ie=Et(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Le=e,Ie=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zt!==null?{id:rt,overflow:lt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_e(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Le=e,Ie=null,!0):!1;default:return!1}}function xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ha(e){if(Y){var t=Ie;if(t){var n=t;if(!Ii(e,t)){if(xa(e))throw Error(P(418));t=Et(n.nextSibling);var r=Le;t&&Ii(e,t)?Fd(r,n):(e.flags=e.flags&-4097|2,Y=!1,Le=e)}}else{if(xa(e))throw Error(P(418));e.flags=e.flags&-4097|2,Y=!1,Le=e}}}function Li(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Le=e}function Ks(e){if(e!==Le)return!1;if(!Y)return Li(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ua(e.type,e.memoizedProps)),t&&(t=Ie)){if(xa(e))throw Rd(),Error(P(418));for(;t;)Fd(e,t),t=Et(t.nextSibling)}if(Li(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ie=Et(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ie=null}}else Ie=Le?Et(e.stateNode.nextSibling):null;return!0}function Rd(){for(var e=Ie;e;)e=Et(e.nextSibling)}function In(){Ie=Le=null,Y=!1}function po(e){Ve===null?Ve=[e]:Ve.push(e)}var df=ut.ReactCurrentBatchConfig;function Yn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,e));var l=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var c=l.refs;o===null?delete c[a]:c[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,e))}return e}function Zs(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ai(e){var t=e._init;return t(e._payload)}function _d(e){function t(g,x){if(e){var h=g.deletions;h===null?(g.deletions=[x],g.flags|=16):h.push(x)}}function n(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function l(g,x){return g=Lt(g,x),g.index=0,g.sibling=null,g}function a(g,x,h){return g.index=h,e?(h=g.alternate,h!==null?(h=h.index,h<x?(g.flags|=2,x):h):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,x,h,N){return x===null||x.tag!==6?(x=_l(h,g.mode,N),x.return=g,x):(x=l(x,h),x.return=g,x)}function i(g,x,h,N){var C=h.type;return C===un?m(g,x,h.props.children,N,h.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===gt&&Ai(C)===x.type)?(N=l(x,h.props),N.ref=Yn(g,x,h),N.return=g,N):(N=xr(h.type,h.key,h.props,null,g.mode,N),N.ref=Yn(g,x,h),N.return=g,N)}function d(g,x,h,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==h.containerInfo||x.stateNode.implementation!==h.implementation?(x=Ol(h,g.mode,N),x.return=g,x):(x=l(x,h.children||[]),x.return=g,x)}function m(g,x,h,N,C){return x===null||x.tag!==7?(x=Yt(h,g.mode,N,C),x.return=g,x):(x=l(x,h),x.return=g,x)}function u(g,x,h){if(typeof x=="string"&&x!==""||typeof x=="number")return x=_l(""+x,g.mode,h),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $s:return h=xr(x.type,x.key,x.props,null,g.mode,h),h.ref=Yn(g,null,x),h.return=g,h;case dn:return x=Ol(x,g.mode,h),x.return=g,x;case gt:var N=x._init;return u(g,N(x._payload),h)}if(es(x)||Wn(x))return x=Yt(x,g.mode,h,null),x.return=g,x;Zs(g,x)}return null}function p(g,x,h,N){var C=x!==null?x.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return C!==null?null:c(g,x,""+h,N);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case $s:return h.key===C?i(g,x,h,N):null;case dn:return h.key===C?d(g,x,h,N):null;case gt:return C=h._init,p(g,x,C(h._payload),N)}if(es(h)||Wn(h))return C!==null?null:m(g,x,h,N,null);Zs(g,h)}return null}function j(g,x,h,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return g=g.get(h)||null,c(x,g,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case $s:return g=g.get(N.key===null?h:N.key)||null,i(x,g,N,C);case dn:return g=g.get(N.key===null?h:N.key)||null,d(x,g,N,C);case gt:var w=N._init;return j(g,x,h,w(N._payload),C)}if(es(N)||Wn(N))return g=g.get(h)||null,m(x,g,N,C,null);Zs(x,N)}return null}function y(g,x,h,N){for(var C=null,w=null,S=x,k=x=0,D=null;S!==null&&k<h.length;k++){S.index>k?(D=S,S=null):D=S.sibling;var E=p(g,S,h[k],N);if(E===null){S===null&&(S=D);break}e&&S&&E.alternate===null&&t(g,S),x=a(E,x,k),w===null?C=E:w.sibling=E,w=E,S=D}if(k===h.length)return n(g,S),Y&&Ut(g,k),C;if(S===null){for(;k<h.length;k++)S=u(g,h[k],N),S!==null&&(x=a(S,x,k),w===null?C=S:w.sibling=S,w=S);return Y&&Ut(g,k),C}for(S=r(g,S);k<h.length;k++)D=j(S,g,k,h[k],N),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?k:D.key),x=a(D,x,k),w===null?C=D:w.sibling=D,w=D);return e&&S.forEach(function(T){return t(g,T)}),Y&&Ut(g,k),C}function v(g,x,h,N){var C=Wn(h);if(typeof C!="function")throw Error(P(150));if(h=C.call(h),h==null)throw Error(P(151));for(var w=C=null,S=x,k=x=0,D=null,E=h.next();S!==null&&!E.done;k++,E=h.next()){S.index>k?(D=S,S=null):D=S.sibling;var T=p(g,S,E.value,N);if(T===null){S===null&&(S=D);break}e&&S&&T.alternate===null&&t(g,S),x=a(T,x,k),w===null?C=T:w.sibling=T,w=T,S=D}if(E.done)return n(g,S),Y&&Ut(g,k),C;if(S===null){for(;!E.done;k++,E=h.next())E=u(g,E.value,N),E!==null&&(x=a(E,x,k),w===null?C=E:w.sibling=E,w=E);return Y&&Ut(g,k),C}for(S=r(g,S);!E.done;k++,E=h.next())E=j(S,g,k,E.value,N),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?k:E.key),x=a(E,x,k),w===null?C=E:w.sibling=E,w=E);return e&&S.forEach(function(A){return t(g,A)}),Y&&Ut(g,k),C}function b(g,x,h,N){if(typeof h=="object"&&h!==null&&h.type===un&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case $s:e:{for(var C=h.key,w=x;w!==null;){if(w.key===C){if(C=h.type,C===un){if(w.tag===7){n(g,w.sibling),x=l(w,h.props.children),x.return=g,g=x;break e}}else if(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===gt&&Ai(C)===w.type){n(g,w.sibling),x=l(w,h.props),x.ref=Yn(g,w,h),x.return=g,g=x;break e}n(g,w);break}else t(g,w);w=w.sibling}h.type===un?(x=Yt(h.props.children,g.mode,N,h.key),x.return=g,g=x):(N=xr(h.type,h.key,h.props,null,g.mode,N),N.ref=Yn(g,x,h),N.return=g,g=N)}return o(g);case dn:e:{for(w=h.key;x!==null;){if(x.key===w)if(x.tag===4&&x.stateNode.containerInfo===h.containerInfo&&x.stateNode.implementation===h.implementation){n(g,x.sibling),x=l(x,h.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else t(g,x);x=x.sibling}x=Ol(h,g.mode,N),x.return=g,g=x}return o(g);case gt:return w=h._init,b(g,x,w(h._payload),N)}if(es(h))return y(g,x,h,N);if(Wn(h))return v(g,x,h,N);Zs(g,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,x!==null&&x.tag===6?(n(g,x.sibling),x=l(x,h),x.return=g,g=x):(n(g,x),x=_l(h,g.mode,N),x.return=g,g=x),o(g)):n(g,x)}return b}var Ln=_d(!0),Od=_d(!1),Dr=Ft(null),Ir=null,vn=null,mo=null;function fo(){mo=vn=Ir=null}function xo(e){var t=Dr.current;G(Dr),e._currentValue=t}function ga(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cn(e,t){Ir=e,mo=vn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Se=!0),e.firstContext=null)}function $e(e){var t=e._currentValue;if(mo!==e)if(e={context:e,memoizedValue:t,next:null},vn===null){if(Ir===null)throw Error(P(308));vn=e,Ir.dependencies={lanes:0,firstContext:e}}else vn=vn.next=e;return t}var qt=null;function ho(e){qt===null?qt=[e]:qt.push(e)}function $d(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,ho(t)):(n.next=l.next,l.next=n),t.interleaved=n,ct(e,r)}function ct(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yt=!1;function go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ud(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function at(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,ct(e,n)}return l=r.interleaved,l===null?(t.next=t,ho(r)):(t.next=l.next,l.next=t),r.interleaved=t,ct(e,n)}function cr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,to(e,n)}}function Ti(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?l=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?l=a=t:a=a.next=t}else l=a=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lr(e,t,n,r){var l=e.updateQueue;yt=!1;var a=l.firstBaseUpdate,o=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var i=c,d=i.next;i.next=null,o===null?a=d:o.next=d,o=i;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=i))}if(a!==null){var u=l.baseState;o=0,m=d=i=null,c=a;do{var p=c.lane,j=c.eventTime;if((r&p)===p){m!==null&&(m=m.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,v=c;switch(p=t,j=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){u=y.call(j,u,p);break e}u=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(j,u,p):y,p==null)break e;u=ee({},u,p);break e;case 2:yt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,p=l.effects,p===null?l.effects=[c]:p.push(c))}else j={eventTime:j,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=j,i=u):m=m.next=j,o|=p;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;p=c,c=p.next,p.next=null,l.lastBaseUpdate=p,l.shared.pending=null}}while(!0);if(m===null&&(i=u),l.baseState=i,l.firstBaseUpdate=d,l.lastBaseUpdate=m,t=l.shared.interleaved,t!==null){l=t;do o|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);Jt|=o,e.lanes=o,e.memoizedState=u}}function Mi(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(P(191,l));l.call(r)}}}var Fs={},tt=Ft(Fs),Ns=Ft(Fs),Ss=Ft(Fs);function Gt(e){if(e===Fs)throw Error(P(174));return e}function yo(e,t){switch(W(Ss,t),W(Ns,e),W(tt,Fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zl(t,e)}G(tt),W(tt,t)}function An(){G(tt),G(Ns),G(Ss)}function Bd(e){Gt(Ss.current);var t=Gt(tt.current),n=Zl(t,e.type);t!==n&&(W(Ns,e),W(tt,n))}function vo(e){Ns.current===e&&(G(tt),G(Ns))}var Z=Ft(0);function Ar(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Al=[];function jo(){for(var e=0;e<Al.length;e++)Al[e]._workInProgressVersionPrimary=null;Al.length=0}var dr=ut.ReactCurrentDispatcher,Tl=ut.ReactCurrentBatchConfig,Xt=0,X=null,ae=null,de=null,Tr=!1,is=!1,ks=0,uf=0;function xe(){throw Error(P(321))}function wo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qe(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,l,a){if(Xt=a,X=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dr.current=e===null||e.memoizedState===null?xf:hf,e=n(r,l),is){a=0;do{if(is=!1,ks=0,25<=a)throw Error(P(301));a+=1,de=ae=null,t.updateQueue=null,dr.current=gf,e=n(r,l)}while(is)}if(dr.current=Mr,t=ae!==null&&ae.next!==null,Xt=0,de=ae=X=null,Tr=!1,t)throw Error(P(300));return e}function No(){var e=ks!==0;return ks=0,e}function Xe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?X.memoizedState=de=e:de=de.next=e,de}function Ue(){if(ae===null){var e=X.alternate;e=e!==null?e.memoizedState:null}else e=ae.next;var t=de===null?X.memoizedState:de.next;if(t!==null)de=t,ae=e;else{if(e===null)throw Error(P(310));ae=e,e={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},de===null?X.memoizedState=de=e:de=de.next=e}return de}function Cs(e,t){return typeof t=="function"?t(e):t}function Ml(e){var t=Ue(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=ae,l=r.baseQueue,a=n.pending;if(a!==null){if(l!==null){var o=l.next;l.next=a.next,a.next=o}r.baseQueue=l=a,n.pending=null}if(l!==null){a=l.next,r=r.baseState;var c=o=null,i=null,d=a;do{var m=d.lane;if((Xt&m)===m)i!==null&&(i=i.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};i===null?(c=i=u,o=r):i=i.next=u,X.lanes|=m,Jt|=m}d=d.next}while(d!==null&&d!==a);i===null?o=r:i.next=c,Qe(r,t.memoizedState)||(Se=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do a=l.lane,X.lanes|=a,Jt|=a,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zl(e){var t=Ue(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,a=t.memoizedState;if(l!==null){n.pending=null;var o=l=l.next;do a=e(a,o.action),o=o.next;while(o!==l);Qe(a,t.memoizedState)||(Se=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Hd(){}function Wd(e,t){var n=X,r=Ue(),l=t(),a=!Qe(r.memoizedState,l);if(a&&(r.memoizedState=l,Se=!0),r=r.queue,So(Gd.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,Es(9,qd.bind(null,n,r,l,t),void 0,null),ue===null)throw Error(P(349));Xt&30||Vd(n,t,l)}return l}function Vd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qd(e,t,n,r){t.value=n,t.getSnapshot=r,Qd(t)&&Yd(e)}function Gd(e,t,n){return n(function(){Qd(t)&&Yd(e)})}function Qd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qe(e,n)}catch{return!0}}function Yd(e){var t=ct(e,1);t!==null&&Ge(t,e,1,-1)}function zi(e){var t=Xe();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t.queue=e,e=e.dispatch=ff.bind(null,X,e),[t.memoizedState,e]}function Es(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Kd(){return Ue().memoizedState}function ur(e,t,n,r){var l=Xe();X.flags|=e,l.memoizedState=Es(1|t,n,void 0,r===void 0?null:r)}function Zr(e,t,n,r){var l=Ue();r=r===void 0?null:r;var a=void 0;if(ae!==null){var o=ae.memoizedState;if(a=o.destroy,r!==null&&wo(r,o.deps)){l.memoizedState=Es(t,n,a,r);return}}X.flags|=e,l.memoizedState=Es(1|t,n,a,r)}function Fi(e,t){return ur(8390656,8,e,t)}function So(e,t){return Zr(2048,8,e,t)}function Zd(e,t){return Zr(4,2,e,t)}function Xd(e,t){return Zr(4,4,e,t)}function Jd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eu(e,t,n){return n=n!=null?n.concat([e]):null,Zr(4,4,Jd.bind(null,t,e),n)}function ko(){}function tu(e,t){var n=Ue();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function nu(e,t){var n=Ue();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function su(e,t,n){return Xt&21?(Qe(n,t)||(n=id(),X.lanes|=n,Jt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Se=!0),e.memoizedState=n)}function pf(e,t){var n=B;B=n!==0&&4>n?n:4,e(!0);var r=Tl.transition;Tl.transition={};try{e(!1),t()}finally{B=n,Tl.transition=r}}function ru(){return Ue().memoizedState}function mf(e,t,n){var r=It(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lu(e))au(t,n);else if(n=$d(e,t,n,r),n!==null){var l=je();Ge(n,e,r,l),ou(n,t,r)}}function ff(e,t,n){var r=It(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lu(e))au(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,c=a(o,n);if(l.hasEagerState=!0,l.eagerState=c,Qe(c,o)){var i=t.interleaved;i===null?(l.next=l,ho(t)):(l.next=i.next,i.next=l),t.interleaved=l;return}}catch{}finally{}n=$d(e,t,l,r),n!==null&&(l=je(),Ge(n,e,r,l),ou(n,t,r))}}function lu(e){var t=e.alternate;return e===X||t!==null&&t===X}function au(e,t){is=Tr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ou(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,to(e,n)}}var Mr={readContext:$e,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},xf={readContext:$e,useCallback:function(e,t){return Xe().memoizedState=[e,t===void 0?null:t],e},useContext:$e,useEffect:Fi,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ur(4194308,4,Jd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ur(4194308,4,e,t)},useInsertionEffect:function(e,t){return ur(4,2,e,t)},useMemo:function(e,t){var n=Xe();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xe();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mf.bind(null,X,e),[r.memoizedState,e]},useRef:function(e){var t=Xe();return e={current:e},t.memoizedState=e},useState:zi,useDebugValue:ko,useDeferredValue:function(e){return Xe().memoizedState=e},useTransition:function(){var e=zi(!1),t=e[0];return e=pf.bind(null,e[1]),Xe().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=X,l=Xe();if(Y){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),ue===null)throw Error(P(349));Xt&30||Vd(r,t,n)}l.memoizedState=n;var a={value:n,getSnapshot:t};return l.queue=a,Fi(Gd.bind(null,r,a,e),[e]),r.flags|=2048,Es(9,qd.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Xe(),t=ue.identifierPrefix;if(Y){var n=lt,r=rt;n=(r&~(1<<32-qe(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ks++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hf={readContext:$e,useCallback:tu,useContext:$e,useEffect:So,useImperativeHandle:eu,useInsertionEffect:Zd,useLayoutEffect:Xd,useMemo:nu,useReducer:Ml,useRef:Kd,useState:function(){return Ml(Cs)},useDebugValue:ko,useDeferredValue:function(e){var t=Ue();return su(t,ae.memoizedState,e)},useTransition:function(){var e=Ml(Cs)[0],t=Ue().memoizedState;return[e,t]},useMutableSource:Hd,useSyncExternalStore:Wd,useId:ru,unstable_isNewReconciler:!1},gf={readContext:$e,useCallback:tu,useContext:$e,useEffect:So,useImperativeHandle:eu,useInsertionEffect:Zd,useLayoutEffect:Xd,useMemo:nu,useReducer:zl,useRef:Kd,useState:function(){return zl(Cs)},useDebugValue:ko,useDeferredValue:function(e){var t=Ue();return ae===null?t.memoizedState=e:su(t,ae.memoizedState,e)},useTransition:function(){var e=zl(Cs)[0],t=Ue().memoizedState;return[e,t]},useMutableSource:Hd,useSyncExternalStore:Wd,useId:ru,unstable_isNewReconciler:!1};function He(e,t){if(e&&e.defaultProps){t=ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ya(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xr={isMounted:function(e){return(e=e._reactInternals)?rn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=je(),l=It(e),a=at(r,l);a.payload=t,n!=null&&(a.callback=n),t=Pt(e,a,l),t!==null&&(Ge(t,e,l,r),cr(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=je(),l=It(e),a=at(r,l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Pt(e,a,l),t!==null&&(Ge(t,e,l,r),cr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=je(),r=It(e),l=at(n,r);l.tag=2,t!=null&&(l.callback=t),t=Pt(e,l,r),t!==null&&(Ge(t,e,r,n),cr(t,e,r))}};function Ri(e,t,n,r,l,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!vs(n,r)||!vs(l,a):!0}function iu(e,t,n){var r=!1,l=Mt,a=t.contextType;return typeof a=="object"&&a!==null?a=$e(a):(l=Ce(t)?Kt:ye.current,r=t.contextTypes,a=(r=r!=null)?Dn(e,l):Mt),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xr,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function _i(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xr.enqueueReplaceState(t,t.state,null)}function va(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},go(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=$e(a):(a=Ce(t)?Kt:ye.current,l.context=Dn(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ya(e,t,a,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Xr.enqueueReplaceState(l,l.state,null),Lr(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Tn(e,t){try{var n="",r=t;do n+=Wp(r),r=r.return;while(r);var l=n}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function Fl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ja(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yf=typeof WeakMap=="function"?WeakMap:Map;function cu(e,t,n){n=at(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fr||(Fr=!0,Ia=r),ja(e,t)},n}function du(e,t,n){n=at(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){ja(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ja(e,t),typeof r!="function"&&(Dt===null?Dt=new Set([this]):Dt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Oi(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yf;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Af.bind(null,e,t,n),t.then(e,e))}function $i(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ui(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=at(-1,1),t.tag=2,Pt(n,t,1))),n.lanes|=1),e)}var vf=ut.ReactCurrentOwner,Se=!1;function ve(e,t,n,r){t.child=e===null?Od(t,null,n,r):Ln(t,e.child,n,r)}function Bi(e,t,n,r,l){n=n.render;var a=t.ref;return Cn(t,l),r=bo(e,t,n,r,a,l),n=No(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,dt(e,t,l)):(Y&&n&&co(t),t.flags|=1,ve(e,t,r,l),t.child)}function Hi(e,t,n,r,l){if(e===null){var a=n.type;return typeof a=="function"&&!To(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,uu(e,t,a,r,l)):(e=xr(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:vs,n(o,r)&&e.ref===t.ref)return dt(e,t,l)}return t.flags|=1,e=Lt(a,r),e.ref=t.ref,e.return=t,t.child=e}function uu(e,t,n,r,l){if(e!==null){var a=e.memoizedProps;if(vs(a,r)&&e.ref===t.ref)if(Se=!1,t.pendingProps=r=a,(e.lanes&l)!==0)e.flags&131072&&(Se=!0);else return t.lanes=e.lanes,dt(e,t,l)}return wa(e,t,n,r,l)}function pu(e,t,n){var r=t.pendingProps,l=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},W(wn,De),De|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,W(wn,De),De|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,W(wn,De),De|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,W(wn,De),De|=r;return ve(e,t,l,n),t.child}function mu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wa(e,t,n,r,l){var a=Ce(n)?Kt:ye.current;return a=Dn(t,a),Cn(t,l),n=bo(e,t,n,r,a,l),r=No(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,dt(e,t,l)):(Y&&r&&co(t),t.flags|=1,ve(e,t,n,l),t.child)}function Wi(e,t,n,r,l){if(Ce(n)){var a=!0;Cr(t)}else a=!1;if(Cn(t,l),t.stateNode===null)pr(e,t),iu(t,n,r),va(t,n,r,l),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var i=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=$e(d):(d=Ce(n)?Kt:ye.current,d=Dn(t,d));var m=n.getDerivedStateFromProps,u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||i!==d)&&_i(t,o,r,d),yt=!1;var p=t.memoizedState;o.state=p,Lr(t,r,o,l),i=t.memoizedState,c!==r||p!==i||ke.current||yt?(typeof m=="function"&&(ya(t,n,m,r),i=t.memoizedState),(c=yt||Ri(t,n,c,r,p,i,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ud(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:He(t.type,c),o.props=d,u=t.pendingProps,p=o.context,i=n.contextType,typeof i=="object"&&i!==null?i=$e(i):(i=Ce(n)?Kt:ye.current,i=Dn(t,i));var j=n.getDerivedStateFromProps;(m=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==u||p!==i)&&_i(t,o,r,i),yt=!1,p=t.memoizedState,o.state=p,Lr(t,r,o,l);var y=t.memoizedState;c!==u||p!==y||ke.current||yt?(typeof j=="function"&&(ya(t,n,j,r),y=t.memoizedState),(d=yt||Ri(t,n,d,r,p,y,i)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=i,r=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return ba(e,t,n,r,a,l)}function ba(e,t,n,r,l,a){mu(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return l&&Di(t,n,!1),dt(e,t,a);r=t.stateNode,vf.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ln(t,e.child,null,a),t.child=Ln(t,null,c,a)):ve(e,t,c,a),t.memoizedState=r.state,l&&Di(t,n,!0),t.child}function fu(e){var t=e.stateNode;t.pendingContext?Pi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(e,t.context,!1),yo(e,t.containerInfo)}function Vi(e,t,n,r,l){return In(),po(l),t.flags|=256,ve(e,t,n,r),t.child}var Na={dehydrated:null,treeContext:null,retryLane:0};function Sa(e){return{baseLanes:e,cachePool:null,transitions:null}}function xu(e,t,n){var r=t.pendingProps,l=Z.current,a=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),W(Z,l&1),e===null)return ha(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=tl(o,r,0,null),e=Yt(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Sa(n),t.memoizedState=Na,e):Co(t,o));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return jf(e,t,o,r,c,l,n);if(a){a=r.fallback,o=t.mode,l=e.child,c=l.sibling;var i={mode:"hidden",children:r.children};return!(o&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=Lt(l,i),r.subtreeFlags=l.subtreeFlags&14680064),c!==null?a=Lt(c,a):(a=Yt(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Sa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Na,r}return a=e.child,e=a.sibling,r=Lt(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Co(e,t){return t=tl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xs(e,t,n,r){return r!==null&&po(r),Ln(t,e.child,null,n),e=Co(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jf(e,t,n,r,l,a,o){if(n)return t.flags&256?(t.flags&=-257,r=Fl(Error(P(422))),Xs(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,l=t.mode,r=tl({mode:"visible",children:r.children},l,0,null),a=Yt(a,l,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ln(t,e.child,null,o),t.child.memoizedState=Sa(o),t.memoizedState=Na,a);if(!(t.mode&1))return Xs(e,t,o,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(P(419)),r=Fl(a,r,void 0),Xs(e,t,o,r)}if(c=(o&e.childLanes)!==0,Se||c){if(r=ue,r!==null){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|o)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,ct(e,l),Ge(r,e,l,-1))}return Ao(),r=Fl(Error(P(421))),Xs(e,t,o,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Tf.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Ie=Et(l.nextSibling),Le=t,Y=!0,Ve=null,e!==null&&(Fe[Re++]=rt,Fe[Re++]=lt,Fe[Re++]=Zt,rt=e.id,lt=e.overflow,Zt=t),t=Co(t,r.children),t.flags|=4096,t)}function qi(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ga(e.return,t,n)}function Rl(e,t,n,r,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=l)}function hu(e,t,n){var r=t.pendingProps,l=r.revealOrder,a=r.tail;if(ve(e,t,r.children,n),r=Z.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qi(e,n,t);else if(e.tag===19)qi(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(W(Z,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Ar(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Rl(t,!1,l,n,a);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ar(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Rl(t,!0,n,null,a);break;case"together":Rl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=Lt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Lt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wf(e,t,n){switch(t.tag){case 3:fu(t),In();break;case 5:Bd(t);break;case 1:Ce(t.type)&&Cr(t);break;case 4:yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;W(Dr,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(W(Z,Z.current&1),t.flags|=128,null):n&t.child.childLanes?xu(e,t,n):(W(Z,Z.current&1),e=dt(e,t,n),e!==null?e.sibling:null);W(Z,Z.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hu(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),W(Z,Z.current),r)break;return null;case 22:case 23:return t.lanes=0,pu(e,t,n)}return dt(e,t,n)}var gu,ka,yu,vu;gu=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ka=function(){};yu=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Gt(tt.current);var a=null;switch(n){case"input":l=Gl(e,l),r=Gl(e,r),a=[];break;case"select":l=ee({},l,{value:void 0}),r=ee({},r,{value:void 0}),a=[];break;case"textarea":l=Kl(e,l),r=Kl(e,r),a=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sr)}Xl(n,r);var o;n=null;for(d in l)if(!r.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style"){var c=l[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ps.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var i=r[d];if(c=l!=null?l[d]:void 0,r.hasOwnProperty(d)&&i!==c&&(i!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in i)i.hasOwnProperty(o)&&c[o]!==i[o]&&(n||(n={}),n[o]=i[o])}else n||(a||(a=[]),a.push(d,n)),n=i;else d==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,c=c?c.__html:void 0,i!=null&&c!==i&&(a=a||[]).push(d,i)):d==="children"?typeof i!="string"&&typeof i!="number"||(a=a||[]).push(d,""+i):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ps.hasOwnProperty(d)?(i!=null&&d==="onScroll"&&V("scroll",e),a||c===i||(a=[])):(a=a||[]).push(d,i))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};vu=function(e,t,n,r){n!==r&&(t.flags|=4)};function Kn(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function he(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bf(e,t,n){var r=t.pendingProps;switch(uo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(t),null;case 1:return Ce(t.type)&&kr(),he(t),null;case 3:return r=t.stateNode,An(),G(ke),G(ye),jo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ve!==null&&(Ta(Ve),Ve=null))),ka(e,t),he(t),null;case 5:vo(t);var l=Gt(Ss.current);if(n=t.type,e!==null&&t.stateNode!=null)yu(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(P(166));return he(t),null}if(e=Gt(tt.current),Ks(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Je]=t,r[bs]=a,e=(t.mode&1)!==0,n){case"dialog":V("cancel",r),V("close",r);break;case"iframe":case"object":case"embed":V("load",r);break;case"video":case"audio":for(l=0;l<ns.length;l++)V(ns[l],r);break;case"source":V("error",r);break;case"img":case"image":case"link":V("error",r),V("load",r);break;case"details":V("toggle",r);break;case"input":ti(r,a),V("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},V("invalid",r);break;case"textarea":si(r,a),V("invalid",r)}Xl(n,a),l=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Ys(r.textContent,c,e),l=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Ys(r.textContent,c,e),l=["children",""+c]):ps.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&V("scroll",r)}switch(n){case"input":Us(r),ni(r,a,!0);break;case"textarea":Us(r),ri(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Sr)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Gc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Je]=t,e[bs]=r,gu(e,t,!1,!1),t.stateNode=e;e:{switch(o=Jl(n,r),n){case"dialog":V("cancel",e),V("close",e),l=r;break;case"iframe":case"object":case"embed":V("load",e),l=r;break;case"video":case"audio":for(l=0;l<ns.length;l++)V(ns[l],e);l=r;break;case"source":V("error",e),l=r;break;case"img":case"image":case"link":V("error",e),V("load",e),l=r;break;case"details":V("toggle",e),l=r;break;case"input":ti(e,r),l=Gl(e,r),V("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=ee({},r,{value:void 0}),V("invalid",e);break;case"textarea":si(e,r),l=Kl(e,r),V("invalid",e);break;default:l=r}Xl(n,l),c=l;for(a in c)if(c.hasOwnProperty(a)){var i=c[a];a==="style"?Kc(e,i):a==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Qc(e,i)):a==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&ms(e,i):typeof i=="number"&&ms(e,""+i):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ps.hasOwnProperty(a)?i!=null&&a==="onScroll"&&V("scroll",e):i!=null&&Ya(e,a,i,o))}switch(n){case"input":Us(e),ni(e,r,!1);break;case"textarea":Us(e),ri(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Tt(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?bn(e,!!r.multiple,a,!1):r.defaultValue!=null&&bn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Sr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return he(t),null;case 6:if(e&&t.stateNode!=null)vu(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(P(166));if(n=Gt(Ss.current),Gt(tt.current),Ks(t)){if(r=t.stateNode,n=t.memoizedProps,r[Je]=t,(a=r.nodeValue!==n)&&(e=Le,e!==null))switch(e.tag){case 3:Ys(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ys(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Je]=t,t.stateNode=r}return he(t),null;case 13:if(G(Z),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&Ie!==null&&t.mode&1&&!(t.flags&128))Rd(),In(),t.flags|=98560,a=!1;else if(a=Ks(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(P(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(P(317));a[Je]=t}else In(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;he(t),a=!1}else Ve!==null&&(Ta(Ve),Ve=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Z.current&1?oe===0&&(oe=3):Ao())),t.updateQueue!==null&&(t.flags|=4),he(t),null);case 4:return An(),ka(e,t),e===null&&js(t.stateNode.containerInfo),he(t),null;case 10:return xo(t.type._context),he(t),null;case 17:return Ce(t.type)&&kr(),he(t),null;case 19:if(G(Z),a=t.memoizedState,a===null)return he(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Kn(a,!1);else{if(oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ar(e),o!==null){for(t.flags|=128,Kn(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return W(Z,Z.current&1|2),t.child}e=e.sibling}a.tail!==null&&se()>Mn&&(t.flags|=128,r=!0,Kn(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ar(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Kn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Y)return he(t),null}else 2*se()-a.renderingStartTime>Mn&&n!==1073741824&&(t.flags|=128,r=!0,Kn(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=se(),t.sibling=null,n=Z.current,W(Z,r?n&1|2:n&1),t):(he(t),null);case 22:case 23:return Lo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?De&1073741824&&(he(t),t.subtreeFlags&6&&(t.flags|=8192)):he(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Nf(e,t){switch(uo(t),t.tag){case 1:return Ce(t.type)&&kr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return An(),G(ke),G(ye),jo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vo(t),null;case 13:if(G(Z),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));In()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G(Z),null;case 4:return An(),null;case 10:return xo(t.type._context),null;case 22:case 23:return Lo(),null;case 24:return null;default:return null}}var Js=!1,ge=!1,Sf=typeof WeakSet=="function"?WeakSet:Set,L=null;function jn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(e,t,r)}else n.current=null}function Ca(e,t,n){try{n()}catch(r){te(e,t,r)}}var Gi=!1;function kf(e,t){if(ca=wr,e=Sd(),io(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,i=-1,d=0,m=0,u=e,p=null;t:for(;;){for(var j;u!==n||l!==0&&u.nodeType!==3||(c=o+l),u!==a||r!==0&&u.nodeType!==3||(i=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(j=u.firstChild)!==null;)p=u,u=j;for(;;){if(u===e)break t;if(p===n&&++d===l&&(c=o),p===a&&++m===r&&(i=o),(j=u.nextSibling)!==null)break;u=p,p=u.parentNode}u=j}n=c===-1||i===-1?null:{start:c,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(da={focusedElem:e,selectionRange:n},wr=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:He(t.type,v),b);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(N){te(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return y=Gi,Gi=!1,y}function cs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&Ca(t,n,a)}l=l.next}while(l!==r)}}function Jr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ea(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ju(e){var t=e.alternate;t!==null&&(e.alternate=null,ju(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Je],delete t[bs],delete t[ma],delete t[af],delete t[of])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wu(e){return e.tag===5||e.tag===3||e.tag===4}function Qi(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sr));else if(r!==4&&(e=e.child,e!==null))for(Pa(e,t,n),e=e.sibling;e!==null;)Pa(e,t,n),e=e.sibling}function Da(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Da(e,t,n),e=e.sibling;e!==null;)Da(e,t,n),e=e.sibling}var pe=null,We=!1;function ht(e,t,n){for(n=n.child;n!==null;)bu(e,t,n),n=n.sibling}function bu(e,t,n){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Vr,n)}catch{}switch(n.tag){case 5:ge||jn(n,t);case 6:var r=pe,l=We;pe=null,ht(e,t,n),pe=r,We=l,pe!==null&&(We?(e=pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(We?(e=pe,n=n.stateNode,e.nodeType===8?Il(e.parentNode,n):e.nodeType===1&&Il(e,n),gs(e)):Il(pe,n.stateNode));break;case 4:r=pe,l=We,pe=n.stateNode.containerInfo,We=!0,ht(e,t,n),pe=r,We=l;break;case 0:case 11:case 14:case 15:if(!ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var a=l,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Ca(n,t,o),l=l.next}while(l!==r)}ht(e,t,n);break;case 1:if(!ge&&(jn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){te(n,t,c)}ht(e,t,n);break;case 21:ht(e,t,n);break;case 22:n.mode&1?(ge=(r=ge)||n.memoizedState!==null,ht(e,t,n),ge=r):ht(e,t,n);break;default:ht(e,t,n)}}function Yi(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sf),t.forEach(function(r){var l=Mf.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Be(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var a=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:pe=c.stateNode,We=!1;break e;case 3:pe=c.stateNode.containerInfo,We=!0;break e;case 4:pe=c.stateNode.containerInfo,We=!0;break e}c=c.return}if(pe===null)throw Error(P(160));bu(a,o,l),pe=null,We=!1;var i=l.alternate;i!==null&&(i.return=null),l.return=null}catch(d){te(l,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nu(t,e),t=t.sibling}function Nu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Be(t,e),Ze(e),r&4){try{cs(3,e,e.return),Jr(3,e)}catch(v){te(e,e.return,v)}try{cs(5,e,e.return)}catch(v){te(e,e.return,v)}}break;case 1:Be(t,e),Ze(e),r&512&&n!==null&&jn(n,n.return);break;case 5:if(Be(t,e),Ze(e),r&512&&n!==null&&jn(n,n.return),e.flags&32){var l=e.stateNode;try{ms(l,"")}catch(v){te(e,e.return,v)}}if(r&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,c=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Vc(l,a),Jl(c,o);var d=Jl(c,a);for(o=0;o<i.length;o+=2){var m=i[o],u=i[o+1];m==="style"?Kc(l,u):m==="dangerouslySetInnerHTML"?Qc(l,u):m==="children"?ms(l,u):Ya(l,m,u,d)}switch(c){case"input":Ql(l,a);break;case"textarea":qc(l,a);break;case"select":var p=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var j=a.value;j!=null?bn(l,!!a.multiple,j,!1):p!==!!a.multiple&&(a.defaultValue!=null?bn(l,!!a.multiple,a.defaultValue,!0):bn(l,!!a.multiple,a.multiple?[]:"",!1))}l[bs]=a}catch(v){te(e,e.return,v)}}break;case 6:if(Be(t,e),Ze(e),r&4){if(e.stateNode===null)throw Error(P(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(v){te(e,e.return,v)}}break;case 3:if(Be(t,e),Ze(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gs(t.containerInfo)}catch(v){te(e,e.return,v)}break;case 4:Be(t,e),Ze(e);break;case 13:Be(t,e),Ze(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(Do=se())),r&4&&Yi(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(ge=(d=ge)||m,Be(t,e),ge=d):Be(t,e),Ze(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(L=e,m=e.child;m!==null;){for(u=L=m;L!==null;){switch(p=L,j=p.child,p.tag){case 0:case 11:case 14:case 15:cs(4,p,p.return);break;case 1:jn(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){te(r,n,v)}}break;case 5:jn(p,p.return);break;case 22:if(p.memoizedState!==null){Zi(u);continue}}j!==null?(j.return=p,L=j):Zi(u)}m=m.sibling}e:for(m=null,u=e;;){if(u.tag===5){if(m===null){m=u;try{l=u.stateNode,d?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=u.stateNode,i=u.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,c.style.display=Yc("display",o))}catch(v){te(e,e.return,v)}}}else if(u.tag===6){if(m===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(v){te(e,e.return,v)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Be(t,e),Ze(e),r&4&&Yi(e);break;case 21:break;default:Be(t,e),Ze(e)}}function Ze(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wu(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(ms(l,""),r.flags&=-33);var a=Qi(e);Da(e,a,l);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Qi(e);Pa(e,c,o);break;default:throw Error(P(161))}}catch(i){te(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cf(e,t,n){L=e,Su(e)}function Su(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var l=L,a=l.child;if(l.tag===22&&r){var o=l.memoizedState!==null||Js;if(!o){var c=l.alternate,i=c!==null&&c.memoizedState!==null||ge;c=Js;var d=ge;if(Js=o,(ge=i)&&!d)for(L=l;L!==null;)o=L,i=o.child,o.tag===22&&o.memoizedState!==null?Xi(l):i!==null?(i.return=o,L=i):Xi(l);for(;a!==null;)L=a,Su(a),a=a.sibling;L=l,Js=c,ge=d}Ki(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,L=a):Ki(e)}}function Ki(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ge||Jr(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ge)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:He(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Mi(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mi(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var u=m.dehydrated;u!==null&&gs(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ge||t.flags&512&&Ea(t)}catch(p){te(t,t.return,p)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function Zi(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function Xi(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Jr(4,t)}catch(i){te(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(i){te(t,l,i)}}var a=t.return;try{Ea(t)}catch(i){te(t,a,i)}break;case 5:var o=t.return;try{Ea(t)}catch(i){te(t,o,i)}}}catch(i){te(t,t.return,i)}if(t===e){L=null;break}var c=t.sibling;if(c!==null){c.return=t.return,L=c;break}L=t.return}}var Ef=Math.ceil,zr=ut.ReactCurrentDispatcher,Eo=ut.ReactCurrentOwner,Oe=ut.ReactCurrentBatchConfig,$=0,ue=null,re=null,me=0,De=0,wn=Ft(0),oe=0,Ps=null,Jt=0,el=0,Po=0,ds=null,Ne=null,Do=0,Mn=1/0,nt=null,Fr=!1,Ia=null,Dt=null,er=!1,bt=null,Rr=0,us=0,La=null,mr=-1,fr=0;function je(){return $&6?se():mr!==-1?mr:mr=se()}function It(e){return e.mode&1?$&2&&me!==0?me&-me:df.transition!==null?(fr===0&&(fr=id()),fr):(e=B,e!==0||(e=window.event,e=e===void 0?16:xd(e.type)),e):1}function Ge(e,t,n,r){if(50<us)throw us=0,La=null,Error(P(185));Ts(e,n,r),(!($&2)||e!==ue)&&(e===ue&&(!($&2)&&(el|=n),oe===4&&jt(e,me)),Ee(e,r),n===1&&$===0&&!(t.mode&1)&&(Mn=se()+500,Kr&&Rt()))}function Ee(e,t){var n=e.callbackNode;cm(e,t);var r=jr(e,e===ue?me:0);if(r===0)n!==null&&oi(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&oi(n),t===1)e.tag===0?cf(Ji.bind(null,e)):Md(Ji.bind(null,e)),rf(function(){!($&6)&&Rt()}),n=null;else{switch(cd(r)){case 1:n=eo;break;case 4:n=ad;break;case 16:n=vr;break;case 536870912:n=od;break;default:n=vr}n=Au(n,ku.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ku(e,t){if(mr=-1,fr=0,$&6)throw Error(P(327));var n=e.callbackNode;if(En()&&e.callbackNode!==n)return null;var r=jr(e,e===ue?me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_r(e,r);else{t=r;var l=$;$|=2;var a=Eu();(ue!==e||me!==t)&&(nt=null,Mn=se()+500,Qt(e,t));do try{If();break}catch(c){Cu(e,c)}while(!0);fo(),zr.current=a,$=l,re!==null?t=0:(ue=null,me=0,t=oe)}if(t!==0){if(t===2&&(l=ra(e),l!==0&&(r=l,t=Aa(e,l))),t===1)throw n=Ps,Qt(e,0),jt(e,r),Ee(e,se()),n;if(t===6)jt(e,r);else{if(l=e.current.alternate,!(r&30)&&!Pf(l)&&(t=_r(e,r),t===2&&(a=ra(e),a!==0&&(r=a,t=Aa(e,a))),t===1))throw n=Ps,Qt(e,0),jt(e,r),Ee(e,se()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(P(345));case 2:Bt(e,Ne,nt);break;case 3:if(jt(e,r),(r&130023424)===r&&(t=Do+500-se(),10<t)){if(jr(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){je(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=pa(Bt.bind(null,e,Ne,nt),t);break}Bt(e,Ne,nt);break;case 4:if(jt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var o=31-qe(r);a=1<<o,o=t[o],o>l&&(l=o),r&=~a}if(r=l,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ef(r/1960))-r,10<r){e.timeoutHandle=pa(Bt.bind(null,e,Ne,nt),r);break}Bt(e,Ne,nt);break;case 5:Bt(e,Ne,nt);break;default:throw Error(P(329))}}}return Ee(e,se()),e.callbackNode===n?ku.bind(null,e):null}function Aa(e,t){var n=ds;return e.current.memoizedState.isDehydrated&&(Qt(e,t).flags|=256),e=_r(e,t),e!==2&&(t=Ne,Ne=n,t!==null&&Ta(t)),e}function Ta(e){Ne===null?Ne=e:Ne.push.apply(Ne,e)}function Pf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],a=l.getSnapshot;l=l.value;try{if(!Qe(a(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jt(e,t){for(t&=~Po,t&=~el,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qe(t),r=1<<n;e[n]=-1,t&=~r}}function Ji(e){if($&6)throw Error(P(327));En();var t=jr(e,0);if(!(t&1))return Ee(e,se()),null;var n=_r(e,t);if(e.tag!==0&&n===2){var r=ra(e);r!==0&&(t=r,n=Aa(e,r))}if(n===1)throw n=Ps,Qt(e,0),jt(e,t),Ee(e,se()),n;if(n===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bt(e,Ne,nt),Ee(e,se()),null}function Io(e,t){var n=$;$|=1;try{return e(t)}finally{$=n,$===0&&(Mn=se()+500,Kr&&Rt())}}function en(e){bt!==null&&bt.tag===0&&!($&6)&&En();var t=$;$|=1;var n=Oe.transition,r=B;try{if(Oe.transition=null,B=1,e)return e()}finally{B=r,Oe.transition=n,$=t,!($&6)&&Rt()}}function Lo(){De=wn.current,G(wn)}function Qt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sf(n)),re!==null)for(n=re.return;n!==null;){var r=n;switch(uo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kr();break;case 3:An(),G(ke),G(ye),jo();break;case 5:vo(r);break;case 4:An();break;case 13:G(Z);break;case 19:G(Z);break;case 10:xo(r.type._context);break;case 22:case 23:Lo()}n=n.return}if(ue=e,re=e=Lt(e.current,null),me=De=t,oe=0,Ps=null,Po=el=Jt=0,Ne=ds=null,qt!==null){for(t=0;t<qt.length;t++)if(n=qt[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=l,r.next=o}n.pending=r}qt=null}return e}function Cu(e,t){do{var n=re;try{if(fo(),dr.current=Mr,Tr){for(var r=X.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Tr=!1}if(Xt=0,de=ae=X=null,is=!1,ks=0,Eo.current=null,n===null||n.return===null){oe=1,Ps=t,re=null;break}e:{var a=e,o=n.return,c=n,i=t;if(t=me,c.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var d=i,m=c,u=m.tag;if(!(m.mode&1)&&(u===0||u===11||u===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var j=$i(o);if(j!==null){j.flags&=-257,Ui(j,o,c,a,t),j.mode&1&&Oi(a,d,t),t=j,i=d;var y=t.updateQueue;if(y===null){var v=new Set;v.add(i),t.updateQueue=v}else y.add(i);break e}else{if(!(t&1)){Oi(a,d,t),Ao();break e}i=Error(P(426))}}else if(Y&&c.mode&1){var b=$i(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ui(b,o,c,a,t),po(Tn(i,c));break e}}a=i=Tn(i,c),oe!==4&&(oe=2),ds===null?ds=[a]:ds.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=cu(a,i,t);Ti(a,g);break e;case 1:c=i;var x=a.type,h=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Dt===null||!Dt.has(h)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=du(a,c,t);Ti(a,N);break e}}a=a.return}while(a!==null)}Du(n)}catch(C){t=C,re===n&&n!==null&&(re=n=n.return);continue}break}while(!0)}function Eu(){var e=zr.current;return zr.current=Mr,e===null?Mr:e}function Ao(){(oe===0||oe===3||oe===2)&&(oe=4),ue===null||!(Jt&268435455)&&!(el&268435455)||jt(ue,me)}function _r(e,t){var n=$;$|=2;var r=Eu();(ue!==e||me!==t)&&(nt=null,Qt(e,t));do try{Df();break}catch(l){Cu(e,l)}while(!0);if(fo(),$=n,zr.current=r,re!==null)throw Error(P(261));return ue=null,me=0,oe}function Df(){for(;re!==null;)Pu(re)}function If(){for(;re!==null&&!em();)Pu(re)}function Pu(e){var t=Lu(e.alternate,e,De);e.memoizedProps=e.pendingProps,t===null?Du(e):re=t,Eo.current=null}function Du(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Nf(n,t),n!==null){n.flags&=32767,re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oe=6,re=null;return}}else if(n=bf(n,t,De),n!==null){re=n;return}if(t=t.sibling,t!==null){re=t;return}re=t=e}while(t!==null);oe===0&&(oe=5)}function Bt(e,t,n){var r=B,l=Oe.transition;try{Oe.transition=null,B=1,Lf(e,t,n,r)}finally{Oe.transition=l,B=r}return null}function Lf(e,t,n,r){do En();while(bt!==null);if($&6)throw Error(P(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(dm(e,a),e===ue&&(re=ue=null,me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||er||(er=!0,Au(vr,function(){return En(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Oe.transition,Oe.transition=null;var o=B;B=1;var c=$;$|=4,Eo.current=null,kf(e,n),Nu(n,e),Km(da),wr=!!ca,da=ca=null,e.current=n,Cf(n),tm(),$=c,B=o,Oe.transition=a}else e.current=n;if(er&&(er=!1,bt=e,Rr=l),a=e.pendingLanes,a===0&&(Dt=null),rm(n.stateNode),Ee(e,se()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Fr)throw Fr=!1,e=Ia,Ia=null,e;return Rr&1&&e.tag!==0&&En(),a=e.pendingLanes,a&1?e===La?us++:(us=0,La=e):us=0,Rt(),null}function En(){if(bt!==null){var e=cd(Rr),t=Oe.transition,n=B;try{if(Oe.transition=null,B=16>e?16:e,bt===null)var r=!1;else{if(e=bt,bt=null,Rr=0,$&6)throw Error(P(331));var l=$;for($|=4,L=e.current;L!==null;){var a=L,o=a.child;if(L.flags&16){var c=a.deletions;if(c!==null){for(var i=0;i<c.length;i++){var d=c[i];for(L=d;L!==null;){var m=L;switch(m.tag){case 0:case 11:case 15:cs(8,m,a)}var u=m.child;if(u!==null)u.return=m,L=u;else for(;L!==null;){m=L;var p=m.sibling,j=m.return;if(ju(m),m===d){L=null;break}if(p!==null){p.return=j,L=p;break}L=j}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}L=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,L=o;else e:for(;L!==null;){if(a=L,a.flags&2048)switch(a.tag){case 0:case 11:case 15:cs(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,L=g;break e}L=a.return}}var x=e.current;for(L=x;L!==null;){o=L;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,L=h;else e:for(o=x;L!==null;){if(c=L,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Jr(9,c)}}catch(C){te(c,c.return,C)}if(c===o){L=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,L=N;break e}L=c.return}}if($=l,Rt(),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Vr,e)}catch{}r=!0}return r}finally{B=n,Oe.transition=t}}return!1}function ec(e,t,n){t=Tn(n,t),t=cu(e,t,1),e=Pt(e,t,1),t=je(),e!==null&&(Ts(e,1,t),Ee(e,t))}function te(e,t,n){if(e.tag===3)ec(e,e,n);else for(;t!==null;){if(t.tag===3){ec(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dt===null||!Dt.has(r))){e=Tn(n,e),e=du(t,e,1),t=Pt(t,e,1),e=je(),t!==null&&(Ts(t,1,e),Ee(t,e));break}}t=t.return}}function Af(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=je(),e.pingedLanes|=e.suspendedLanes&n,ue===e&&(me&n)===n&&(oe===4||oe===3&&(me&130023424)===me&&500>se()-Do?Qt(e,0):Po|=n),Ee(e,t)}function Iu(e,t){t===0&&(e.mode&1?(t=Ws,Ws<<=1,!(Ws&130023424)&&(Ws=4194304)):t=1);var n=je();e=ct(e,t),e!==null&&(Ts(e,t,n),Ee(e,n))}function Tf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Iu(e,n)}function Mf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(t),Iu(e,n)}var Lu;Lu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ke.current)Se=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Se=!1,wf(e,t,n);Se=!!(e.flags&131072)}else Se=!1,Y&&t.flags&1048576&&zd(t,Pr,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;pr(e,t),e=t.pendingProps;var l=Dn(t,ye.current);Cn(t,n),l=bo(null,t,r,e,l,n);var a=No();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ce(r)?(a=!0,Cr(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,go(t),l.updater=Xr,t.stateNode=l,l._reactInternals=t,va(t,r,e,n),t=ba(null,t,r,!0,a,n)):(t.tag=0,Y&&a&&co(t),ve(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(pr(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Ff(r),e=He(r,e),l){case 0:t=wa(null,t,r,e,n);break e;case 1:t=Wi(null,t,r,e,n);break e;case 11:t=Bi(null,t,r,e,n);break e;case 14:t=Hi(null,t,r,He(r.type,e),n);break e}throw Error(P(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:He(r,l),wa(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:He(r,l),Wi(e,t,r,l,n);case 3:e:{if(fu(t),e===null)throw Error(P(387));r=t.pendingProps,a=t.memoizedState,l=a.element,Ud(e,t),Lr(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=Tn(Error(P(423)),t),t=Vi(e,t,r,n,l);break e}else if(r!==l){l=Tn(Error(P(424)),t),t=Vi(e,t,r,n,l);break e}else for(Ie=Et(t.stateNode.containerInfo.firstChild),Le=t,Y=!0,Ve=null,n=Od(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(In(),r===l){t=dt(e,t,n);break e}ve(e,t,r,n)}t=t.child}return t;case 5:return Bd(t),e===null&&ha(t),r=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,o=l.children,ua(r,l)?o=null:a!==null&&ua(r,a)&&(t.flags|=32),mu(e,t),ve(e,t,o,n),t.child;case 6:return e===null&&ha(t),null;case 13:return xu(e,t,n);case 4:return yo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ln(t,null,r,n):ve(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:He(r,l),Bi(e,t,r,l,n);case 7:return ve(e,t,t.pendingProps,n),t.child;case 8:return ve(e,t,t.pendingProps.children,n),t.child;case 12:return ve(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,a=t.memoizedProps,o=l.value,W(Dr,r._currentValue),r._currentValue=o,a!==null)if(Qe(a.value,o)){if(a.children===l.children&&!ke.current){t=dt(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var i=c.firstContext;i!==null;){if(i.context===r){if(a.tag===1){i=at(-1,n&-n),i.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i}}a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),ga(a.return,n,t),c.lanes|=n;break}i=i.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(P(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ga(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ve(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Cn(t,n),l=$e(l),r=r(l),t.flags|=1,ve(e,t,r,n),t.child;case 14:return r=t.type,l=He(r,t.pendingProps),l=He(r.type,l),Hi(e,t,r,l,n);case 15:return uu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:He(r,l),pr(e,t),t.tag=1,Ce(r)?(e=!0,Cr(t)):e=!1,Cn(t,n),iu(t,r,l),va(t,r,l,n),ba(null,t,r,!0,e,n);case 19:return hu(e,t,n);case 22:return pu(e,t,n)}throw Error(P(156,t.tag))};function Au(e,t){return ld(e,t)}function zf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _e(e,t,n,r){return new zf(e,t,n,r)}function To(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ff(e){if(typeof e=="function")return To(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Za)return 11;if(e===Xa)return 14}return 2}function Lt(e,t){var n=e.alternate;return n===null?(n=_e(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xr(e,t,n,r,l,a){var o=2;if(r=e,typeof e=="function")To(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case un:return Yt(n.children,l,a,t);case Ka:o=8,l|=8;break;case Hl:return e=_e(12,n,t,l|2),e.elementType=Hl,e.lanes=a,e;case Wl:return e=_e(13,n,t,l),e.elementType=Wl,e.lanes=a,e;case Vl:return e=_e(19,n,t,l),e.elementType=Vl,e.lanes=a,e;case Bc:return tl(n,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $c:o=10;break e;case Uc:o=9;break e;case Za:o=11;break e;case Xa:o=14;break e;case gt:o=16,r=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=_e(o,n,t,l),t.elementType=e,t.type=r,t.lanes=a,t}function Yt(e,t,n,r){return e=_e(7,e,r,t),e.lanes=n,e}function tl(e,t,n,r){return e=_e(22,e,r,t),e.elementType=Bc,e.lanes=n,e.stateNode={isHidden:!1},e}function _l(e,t,n){return e=_e(6,e,null,t),e.lanes=n,e}function Ol(e,t,n){return t=_e(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rf(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Mo(e,t,n,r,l,a,o,c,i){return e=new Rf(e,t,n,c,i),t===1?(t=1,a===!0&&(t|=8)):t=0,a=_e(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},go(a),e}function _f(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Tu(e){if(!e)return Mt;e=e._reactInternals;e:{if(rn(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ce(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var n=e.type;if(Ce(n))return Td(e,n,t)}return t}function Mu(e,t,n,r,l,a,o,c,i){return e=Mo(n,r,!0,e,l,a,o,c,i),e.context=Tu(null),n=e.current,r=je(),l=It(n),a=at(r,l),a.callback=t??null,Pt(n,a,l),e.current.lanes=l,Ts(e,l,r),Ee(e,r),e}function nl(e,t,n,r){var l=t.current,a=je(),o=It(l);return n=Tu(n),t.context===null?t.context=n:t.pendingContext=n,t=at(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pt(l,t,o),e!==null&&(Ge(e,l,o,a),cr(e,l,o)),o}function Or(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zo(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function Of(){return null}var zu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fo(e){this._internalRoot=e}sl.prototype.render=Fo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));nl(e,t,null,null)};sl.prototype.unmount=Fo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;en(function(){nl(null,e,null,null)}),t[it]=null}};function sl(e){this._internalRoot=e}sl.prototype.unstable_scheduleHydration=function(e){if(e){var t=pd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vt.length&&t!==0&&t<vt[n].priority;n++);vt.splice(n,0,e),n===0&&fd(e)}};function Ro(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nc(){}function $f(e,t,n,r,l){if(l){if(typeof r=="function"){var a=r;r=function(){var d=Or(o);a.call(d)}}var o=Mu(t,r,e,0,null,!1,!1,"",nc);return e._reactRootContainer=o,e[it]=o.current,js(e.nodeType===8?e.parentNode:e),en(),o}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var c=r;r=function(){var d=Or(i);c.call(d)}}var i=Mo(e,0,!1,null,null,!1,!1,"",nc);return e._reactRootContainer=i,e[it]=i.current,js(e.nodeType===8?e.parentNode:e),en(function(){nl(t,i,n,r)}),i}function ll(e,t,n,r,l){var a=n._reactRootContainer;if(a){var o=a;if(typeof l=="function"){var c=l;l=function(){var i=Or(o);c.call(i)}}nl(t,o,e,l)}else o=$f(n,t,e,l,r);return Or(o)}dd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ts(t.pendingLanes);n!==0&&(to(t,n|1),Ee(t,se()),!($&6)&&(Mn=se()+500,Rt()))}break;case 13:en(function(){var r=ct(e,1);if(r!==null){var l=je();Ge(r,e,1,l)}}),zo(e,1)}};no=function(e){if(e.tag===13){var t=ct(e,134217728);if(t!==null){var n=je();Ge(t,e,134217728,n)}zo(e,134217728)}};ud=function(e){if(e.tag===13){var t=It(e),n=ct(e,t);if(n!==null){var r=je();Ge(n,e,t,r)}zo(e,t)}};pd=function(){return B};md=function(e,t){var n=B;try{return B=e,t()}finally{B=n}};ta=function(e,t,n){switch(t){case"input":if(Ql(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Yr(r);if(!l)throw Error(P(90));Wc(r),Ql(r,l)}}}break;case"textarea":qc(e,n);break;case"select":t=n.value,t!=null&&bn(e,!!n.multiple,t,!1)}};Jc=Io;ed=en;var Uf={usingClientEntryPoint:!1,Events:[zs,xn,Yr,Zc,Xc,Io]},Zn={findFiberByHostInstance:Vt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bf={bundleType:Zn.bundleType,version:Zn.version,rendererPackageName:Zn.rendererPackageName,rendererConfig:Zn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sd(e),e===null?null:e.stateNode},findFiberByHostInstance:Zn.findFiberByHostInstance||Of,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tr.isDisabled&&tr.supportsFiber)try{Vr=tr.inject(Bf),et=tr}catch{}}Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uf;Te.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ro(t))throw Error(P(200));return _f(e,t,null,n)};Te.createRoot=function(e,t){if(!Ro(e))throw Error(P(299));var n=!1,r="",l=zu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Mo(e,1,!1,null,null,n,!1,r,l),e[it]=t.current,js(e.nodeType===8?e.parentNode:e),new Fo(t)};Te.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=sd(t),e=e===null?null:e.stateNode,e};Te.flushSync=function(e){return en(e)};Te.hydrate=function(e,t,n){if(!rl(t))throw Error(P(200));return ll(null,e,t,!0,n)};Te.hydrateRoot=function(e,t,n){if(!Ro(e))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,l=!1,a="",o=zu;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Mu(t,null,e,1,n??null,l,!1,a,o),e[it]=t.current,js(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new sl(t)};Te.render=function(e,t,n){if(!rl(t))throw Error(P(200));return ll(null,e,t,!1,n)};Te.unmountComponentAtNode=function(e){if(!rl(e))throw Error(P(40));return e._reactRootContainer?(en(function(){ll(null,null,e,!1,function(){e._reactRootContainer=null,e[it]=null})}),!0):!1};Te.unstable_batchedUpdates=Io;Te.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rl(n))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return ll(e,t,n,!1,r)};Te.version="18.3.1-next-f1338f8080-20240426";function Fu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fu)}catch(e){console.error(e)}}Fu(),Fc.exports=Te;var Hf=Fc.exports,sc=Hf;Ul.createRoot=sc.createRoot,Ul.hydrateRoot=sc.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ds(){return Ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ds.apply(this,arguments)}var Nt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nt||(Nt={}));const rc="popstate";function Wf(e){e===void 0&&(e={});function t(l,a){let{pathname:o="/",search:c="",hash:i=""}=ln(l.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ma("",{pathname:o,search:c,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(l,a){let o=l.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let i=l.location.href,d=i.indexOf("#");c=d===-1?i:i.slice(0,d)}return c+"#"+(typeof a=="string"?a:$r(a))}function r(l,a){al(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return qf(t,n,r,e)}function J(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function al(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Vf(){return Math.random().toString(36).substr(2,8)}function lc(e,t){return{usr:e.state,key:e.key,idx:t}}function Ma(e,t,n,r){return n===void 0&&(n=null),Ds({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ln(t):t,{state:n,key:t&&t.key||r||Vf()})}function $r(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ln(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qf(e,t,n,r){r===void 0&&(r={});let{window:l=document.defaultView,v5Compat:a=!1}=r,o=l.history,c=Nt.Pop,i=null,d=m();d==null&&(d=0,o.replaceState(Ds({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function u(){c=Nt.Pop;let b=m(),g=b==null?null:b-d;d=b,i&&i({action:c,location:v.location,delta:g})}function p(b,g){c=Nt.Push;let x=Ma(v.location,b,g);n&&n(x,b),d=m()+1;let h=lc(x,d),N=v.createHref(x);try{o.pushState(h,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;l.location.assign(N)}a&&i&&i({action:c,location:v.location,delta:1})}function j(b,g){c=Nt.Replace;let x=Ma(v.location,b,g);n&&n(x,b),d=m();let h=lc(x,d),N=v.createHref(x);o.replaceState(h,"",N),a&&i&&i({action:c,location:v.location,delta:0})}function y(b){let g=l.location.origin!=="null"?l.location.origin:l.location.href,x=typeof b=="string"?b:$r(b);return x=x.replace(/ $/,"%20"),J(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let v={get action(){return c},get location(){return e(l,o)},listen(b){if(i)throw new Error("A history only accepts one active listener");return l.addEventListener(rc,u),i=b,()=>{l.removeEventListener(rc,u),i=null}},createHref(b){return t(l,b)},createURL:y,encodeLocation(b){let g=y(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:j,go(b){return o.go(b)}};return v}var ac;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ac||(ac={}));function Gf(e,t,n){return n===void 0&&(n="/"),Qf(e,t,n)}function Qf(e,t,n,r){let l=typeof t=="string"?ln(t):t,a=zn(l.pathname||"/",n);if(a==null)return null;let o=Ru(e);Yf(o);let c=null;for(let i=0;c==null&&i<o.length;++i){let d=ax(a);c=rx(o[i],d)}return c}function Ru(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let l=(a,o,c)=>{let i={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};i.relativePath.startsWith("/")&&(J(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let d=At([r,i.relativePath]),m=n.concat(i);a.children&&a.children.length>0&&(J(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Ru(a.children,t,m,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:nx(d,a.index),routesMeta:m})};return e.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))l(a,o);else for(let i of _u(a.path))l(a,o,i)}),t}function _u(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return l?[a,""]:[a];let o=_u(r.join("/")),c=[];return c.push(...o.map(i=>i===""?a:[a,i].join("/"))),l&&c.push(...o),c.map(i=>e.startsWith("/")&&i===""?"/":i)}function Yf(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sx(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Kf=/^:[\w-]+$/,Zf=3,Xf=2,Jf=1,ex=10,tx=-2,oc=e=>e==="*";function nx(e,t){let n=e.split("/"),r=n.length;return n.some(oc)&&(r+=tx),t&&(r+=Xf),n.filter(l=>!oc(l)).reduce((l,a)=>l+(Kf.test(a)?Zf:a===""?Jf:ex),r)}function sx(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function rx(e,t,n){let{routesMeta:r}=e,l={},a="/",o=[];for(let c=0;c<r.length;++c){let i=r[c],d=c===r.length-1,m=a==="/"?t:t.slice(a.length)||"/",u=za({path:i.relativePath,caseSensitive:i.caseSensitive,end:d},m),p=i.route;if(!u)return null;Object.assign(l,u.params),o.push({params:l,pathname:At([a,u.pathname]),pathnameBase:ux(At([a,u.pathnameBase])),route:p}),u.pathnameBase!=="/"&&(a=At([a,u.pathnameBase]))}return o}function za(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=lx(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let a=l[0],o=a.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:r.reduce((d,m,u)=>{let{paramName:p,isOptional:j}=m;if(p==="*"){let v=c[u]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=c[u];return j&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function lx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),al(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,i)=>(r.push({paramName:c,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function ax(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return al(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ix=e=>ox.test(e);function cx(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?ln(e):e,a;if(n)if(ix(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),al(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?a=ic(n.substring(1),"/"):a=ic(n,t)}else a=t;return{pathname:a,search:px(r),hash:mx(l)}}function ic(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function $l(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _o(e,t){let n=dx(e);return t?n.map((r,l)=>l===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Oo(e,t,n,r){r===void 0&&(r=!1);let l;typeof e=="string"?l=ln(e):(l=Ds({},e),J(!l.pathname||!l.pathname.includes("?"),$l("?","pathname","search",l)),J(!l.pathname||!l.pathname.includes("#"),$l("#","pathname","hash",l)),J(!l.search||!l.search.includes("#"),$l("#","search","hash",l)));let a=e===""||l.pathname==="",o=a?"/":l.pathname,c;if(o==null)c=n;else{let u=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),u-=1;l.pathname=p.join("/")}c=u>=0?t[u]:"/"}let i=cx(l,c),d=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(d||m)&&(i.pathname+="/"),i}const At=e=>e.join("/").replace(/\/\/+/g,"/"),ux=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),px=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ou=["post","put","patch","delete"];new Set(Ou);const xx=["get",...Ou];new Set(xx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is.apply(this,arguments)}const ol=f.createContext(null),$u=f.createContext(null),pt=f.createContext(null),il=f.createContext(null),mt=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Uu=f.createContext(null);function hx(e,t){let{relative:n}=t===void 0?{}:t;Un()||J(!1);let{basename:r,navigator:l}=f.useContext(pt),{hash:a,pathname:o,search:c}=cl(e,{relative:n}),i=o;return r!=="/"&&(i=o==="/"?r:At([r,o])),l.createHref({pathname:i,search:c,hash:a})}function Un(){return f.useContext(il)!=null}function an(){return Un()||J(!1),f.useContext(il).location}function Bu(e){f.useContext(pt).static||f.useLayoutEffect(e)}function $o(){let{isDataRoute:e}=f.useContext(mt);return e?Lx():gx()}function gx(){Un()||J(!1);let e=f.useContext(ol),{basename:t,future:n,navigator:r}=f.useContext(pt),{matches:l}=f.useContext(mt),{pathname:a}=an(),o=JSON.stringify(_o(l,n.v7_relativeSplatPath)),c=f.useRef(!1);return Bu(()=>{c.current=!0}),f.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let u=Oo(d,JSON.parse(o),a,m.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:At([t,u.pathname])),(m.replace?r.replace:r.push)(u,m.state,m)},[t,r,o,a,e])}const yx=f.createContext(null);function vx(e){let t=f.useContext(mt).outlet;return t&&f.createElement(yx.Provider,{value:e},t)}function cl(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=f.useContext(pt),{matches:l}=f.useContext(mt),{pathname:a}=an(),o=JSON.stringify(_o(l,r.v7_relativeSplatPath));return f.useMemo(()=>Oo(e,JSON.parse(o),a,n==="path"),[e,o,a,n])}function jx(e,t){return wx(e,t)}function wx(e,t,n,r){Un()||J(!1);let{navigator:l}=f.useContext(pt),{matches:a}=f.useContext(mt),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let i=o?o.pathnameBase:"/";o&&o.route;let d=an(),m;if(t){var u;let b=typeof t=="string"?ln(t):t;i==="/"||(u=b.pathname)!=null&&u.startsWith(i)||J(!1),m=b}else m=d;let p=m.pathname||"/",j=p;if(i!=="/"){let b=i.replace(/^\//,"").split("/");j="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=Gf(e,{pathname:j}),v=Cx(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:At([i,l.encodeLocation?l.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?i:At([i,l.encodeLocation?l.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return t&&v?f.createElement(il.Provider,{value:{location:Is({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Nt.Pop}},v):v}function bx(){let e=Ix(),t=fx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:l},n):null,null)}const Nx=f.createElement(bx,null);class Sx extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(mt.Provider,{value:this.props.routeContext},f.createElement(Uu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kx(e){let{routeContext:t,match:n,children:r}=e,l=f.useContext(ol);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(mt.Provider,{value:t},r)}function Cx(e,t,n,r){var l;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(l=n)==null?void 0:l.errors;if(c!=null){let m=o.findIndex(u=>u.route.id&&(c==null?void 0:c[u.route.id])!==void 0);m>=0||J(!1),o=o.slice(0,Math.min(o.length,m+1))}let i=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let u=o[m];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=m),u.route.id){let{loaderData:p,errors:j}=n,y=u.route.loader&&p[u.route.id]===void 0&&(!j||j[u.route.id]===void 0);if(u.route.lazy||y){i=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,u,p)=>{let j,y=!1,v=null,b=null;n&&(j=c&&u.route.id?c[u.route.id]:void 0,v=u.route.errorElement||Nx,i&&(d<0&&p===0?(Ax("route-fallback"),y=!0,b=null):d===p&&(y=!0,b=u.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,p+1)),x=()=>{let h;return j?h=v:y?h=b:u.route.Component?h=f.createElement(u.route.Component,null):u.route.element?h=u.route.element:h=m,f.createElement(kx,{match:u,routeContext:{outlet:m,matches:g,isDataRoute:n!=null},children:h})};return n&&(u.route.ErrorBoundary||u.route.errorElement||p===0)?f.createElement(Sx,{location:n.location,revalidation:n.revalidation,component:v,error:j,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var Hu=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Hu||{}),Wu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wu||{});function Ex(e){let t=f.useContext(ol);return t||J(!1),t}function Px(e){let t=f.useContext($u);return t||J(!1),t}function Dx(e){let t=f.useContext(mt);return t||J(!1),t}function Vu(e){let t=Dx(),n=t.matches[t.matches.length-1];return n.route.id||J(!1),n.route.id}function Ix(){var e;let t=f.useContext(Uu),n=Px(),r=Vu();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Lx(){let{router:e}=Ex(Hu.UseNavigateStable),t=Vu(Wu.UseNavigateStable),n=f.useRef(!1);return Bu(()=>{n.current=!0}),f.useCallback(function(l,a){a===void 0&&(a={}),n.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Is({fromRouteId:t},a)))},[e,t])}const cc={};function Ax(e,t,n){cc[e]||(cc[e]=!0)}function Tx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Wt(e){let{to:t,replace:n,state:r,relative:l}=e;Un()||J(!1);let{future:a,static:o}=f.useContext(pt),{matches:c}=f.useContext(mt),{pathname:i}=an(),d=$o(),m=Oo(t,_o(c,a.v7_relativeSplatPath),i,l==="path"),u=JSON.stringify(m);return f.useEffect(()=>d(JSON.parse(u),{replace:n,state:r,relative:l}),[d,u,l,n,r]),null}function Uo(e){return vx(e.context)}function q(e){J(!1)}function Mx(e){let{basename:t="/",children:n=null,location:r,navigationType:l=Nt.Pop,navigator:a,static:o=!1,future:c}=e;Un()&&J(!1);let i=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:i,navigator:a,static:o,future:Is({v7_relativeSplatPath:!1},c)}),[i,c,a,o]);typeof r=="string"&&(r=ln(r));let{pathname:m="/",search:u="",hash:p="",state:j=null,key:y="default"}=r,v=f.useMemo(()=>{let b=zn(m,i);return b==null?null:{location:{pathname:b,search:u,hash:p,state:j,key:y},navigationType:l}},[i,m,u,p,j,y,l]);return v==null?null:f.createElement(pt.Provider,{value:d},f.createElement(il.Provider,{children:n,value:v}))}function zx(e){let{children:t,location:n}=e;return jx(Fa(t),n)}new Promise(()=>{});function Fa(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(r,l)=>{if(!f.isValidElement(r))return;let a=[...t,l];if(r.type===f.Fragment){n.push.apply(n,Fa(r.props.children,a));return}r.type!==q&&J(!1),!r.props.index||!r.props.children||J(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fa(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ur.apply(this,arguments)}function qu(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,a;for(a=0;a<r.length;a++)l=r[a],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function Fx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Rx(e,t){return e.button===0&&(!t||t==="_self")&&!Fx(e)}const _x=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ox=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],$x="6";try{window.__reactRouterVersion=$x}catch{}const Ux=f.createContext({isTransitioning:!1}),Bx="startTransition",dc=Lp[Bx];function Hx(e){let{basename:t,children:n,future:r,window:l}=e,a=f.useRef();a.current==null&&(a.current=Wf({window:l,v5Compat:!0}));let o=a.current,[c,i]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=f.useCallback(u=>{d&&dc?dc(()=>i(u)):i(u)},[i,d]);return f.useLayoutEffect(()=>o.listen(m),[o,m]),f.useEffect(()=>Tx(r),[r]),f.createElement(Mx,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const Wx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fn=f.forwardRef(function(t,n){let{onClick:r,relative:l,reloadDocument:a,replace:o,state:c,target:i,to:d,preventScrollReset:m,viewTransition:u}=t,p=qu(t,_x),{basename:j}=f.useContext(pt),y,v=!1;if(typeof d=="string"&&Vx.test(d)&&(y=d,Wx))try{let h=new URL(window.location.href),N=d.startsWith("//")?new URL(h.protocol+d):new URL(d),C=zn(N.pathname,j);N.origin===h.origin&&C!=null?d=C+N.search+N.hash:v=!0}catch{}let b=hx(d,{relative:l}),g=Qx(d,{replace:o,state:c,target:i,preventScrollReset:m,relative:l,viewTransition:u});function x(h){r&&r(h),h.defaultPrevented||g(h)}return f.createElement("a",Ur({},p,{href:y||b,onClick:v||a?r:x,ref:n,target:i}))}),qx=f.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:l=!1,className:a="",end:o=!1,style:c,to:i,viewTransition:d,children:m}=t,u=qu(t,Ox),p=cl(i,{relative:u.relative}),j=an(),y=f.useContext($u),{navigator:v,basename:b}=f.useContext(pt),g=y!=null&&Yx(p)&&d===!0,x=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,h=j.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;l||(h=h.toLowerCase(),N=N?N.toLowerCase():null,x=x.toLowerCase()),N&&b&&(N=zn(N,b)||N);const C=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let w=h===x||!o&&h.startsWith(x)&&h.charAt(C)==="/",S=N!=null&&(N===x||!o&&N.startsWith(x)&&N.charAt(x.length)==="/"),k={isActive:w,isPending:S,isTransitioning:g},D=w?r:void 0,E;typeof a=="function"?E=a(k):E=[a,w?"active":null,S?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let T=typeof c=="function"?c(k):c;return f.createElement(Fn,Ur({},u,{"aria-current":D,className:E,ref:n,style:T,to:i,viewTransition:d}),typeof m=="function"?m(k):m)});var Ra;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ra||(Ra={}));var uc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uc||(uc={}));function Gx(e){let t=f.useContext(ol);return t||J(!1),t}function Qx(e,t){let{target:n,replace:r,state:l,preventScrollReset:a,relative:o,viewTransition:c}=t===void 0?{}:t,i=$o(),d=an(),m=cl(e,{relative:o});return f.useCallback(u=>{if(Rx(u,n)){u.preventDefault();let p=r!==void 0?r:$r(d)===$r(m);i(e,{replace:p,state:l,preventScrollReset:a,relative:o,viewTransition:c})}},[d,i,m,r,l,n,e,a,o,c])}function Yx(e,t){t===void 0&&(t={});let n=f.useContext(Ux);n==null&&J(!1);let{basename:r}=Gx(Ra.useViewTransitionState),l=cl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=zn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=zn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return za(l.pathname,o)!=null||za(l.pathname,a)!=null}const Kx="https://script.google.com/macros/s/AKfycby8_BLBZkBjPetpENQwCLxf1Eup-0vynLQZ8upm2ozmLuEfLB0rsXEeGsmvRv39ZIhA/exec",Zx=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),s.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),s.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),s.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]}),tn=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Xx=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),s.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Bo=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("polyline",{points:"9 11 12 14 22 4"}),s.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),Gu=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),s.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Qu=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:s.jsx("path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"})}),_a=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M8 6v6"}),s.jsx("path",{d:"M16 6v6"}),s.jsx("path",{d:"M2 12h19.6"}),s.jsx("path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"}),s.jsx("circle",{cx:"7",cy:"18",r:"2"}),s.jsx("path",{d:"M9 18h5"}),s.jsx("circle",{cx:"16",cy:"18",r:"2"})]}),Yu=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v2"}),s.jsx("path",{d:"M21 14v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),s.jsx("polyline",{points:"3 10 12 15 21 10"}),s.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"15"})]}),Ku=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"}),s.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),s.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),s.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),Rn=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Jx=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),s.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),s.jsx("line",{x1:"12",x2:"12",y1:"14",y2:"20"}),s.jsx("line",{x1:"9",x2:"15",y1:"17",y2:"17"})]}),Ho=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Zu=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),s.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),s.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]}),Xu=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),s.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),Bn=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),s.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),s.jsx("rect",{width:"12",height:"8",x:"6",y:"14"})]}),Ye=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),s.jsx("path",{d:"m15 5 4 4"})]}),Ju=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M2 17h6a4 4 0 0 0 4-4V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2z"}),s.jsx("path",{d:"M22 17h-6a4 4 0 0 1-4-4V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2z"})]}),ep=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),s.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),s.jsx("path",{d:"m9 14 2 2 4-4"})]}),Br=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),s.jsx("path",{d:"M12 8v4"}),s.jsx("path",{d:"M12 16h.01"})]}),eh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),s.jsx("polyline",{points:"10 17 15 12 10 7"}),s.jsx("line",{x1:"15",x2:"3",y1:"12",y2:"12"})]}),tp=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),s.jsx("polyline",{points:"16 17 21 12 16 7"}),s.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),th=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"8"}),s.jsx("path",{d:"m21 21-4.3-4.3"})]}),nh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("polyline",{points:"16 11 18 13 22 9"})]}),sh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("line",{x1:"17",y1:"8",x2:"22",y2:"13"}),s.jsx("line",{x1:"22",y1:"8",x2:"17",y2:"13"})]}),rh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"8",cy:"8",r:"6"}),s.jsx("path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}),s.jsx("path",{d:"M7 6h1v4"}),s.jsx("path",{d:"m16.71 13.88.7.71-2.82 2.82-.71-.71A3.9 3.9 0 0 1 12 16a4 4 0 0 1 4-4 3.9 3.9 0 0 1 .88 1.29z"})]}),lh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"21",x2:"14",y1:"4",y2:"4"}),s.jsx("line",{x1:"10",x2:"3",y1:"4",y2:"4"}),s.jsx("line",{x1:"21",x2:"12",y1:"12",y2:"12"}),s.jsx("line",{x1:"8",x2:"3",y1:"12",y2:"12"}),s.jsx("line",{x1:"21",x2:"16",y1:"20",y2:"20"}),s.jsx("line",{x1:"12",x2:"3",y1:"20",y2:"20"}),s.jsx("line",{x1:"14",x2:"14",y1:"2",y2:"6"}),s.jsx("line",{x1:"8",x2:"8",y1:"10",y2:"14"}),s.jsx("line",{x1:"16",x2:"16",y1:"18",y2:"22"})]}),ah=e=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:s.jsx("polyline",{points:"20 6 9 17 4 12"})}),dl=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),oh=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),s.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),ih=e=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),s.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),ch=[{href:"/app/dashboard",label:"Dashboard",icon:Zx,roles:["Admin","Teacher","Student"]},{href:"/app/students",label:"Students",icon:tn,roles:["Admin","Teacher","Student"]},{href:"/app/staff",label:"Staff",icon:tn,roles:["Admin"]},{href:"/app/classes",label:"Classes",icon:Ju,roles:["Admin","Teacher"]},{href:"/app/academics",label:"Academics",icon:Xx,roles:["Admin","Teacher","Student"]},{href:"/app/attendance",label:"Attendance",icon:Bo,roles:["Admin","Teacher","Student"]},{href:"/app/finance",label:"Finance",icon:Gu,roles:["Admin","Student"]},{href:"/app/communication",label:"Communication",icon:Qu,roles:["Admin","Teacher"]},{href:"/app/transport",label:"Transport",icon:_a,roles:["Admin"]},{href:"/app/inventory",label:"Inventory",icon:Yu,roles:["Admin"]},{href:"/app/exams",label:"Exams & Results",icon:Ku,roles:["Admin","Teacher","Student"]},{href:"/app/events",label:"Events",icon:Rn,roles:["Admin","Teacher","Student"]},{href:"/app/leave",label:"Leave",icon:Jx,roles:["Admin","Teacher"]},{href:"/app/id-cards",label:"ID Cards",icon:Xu,roles:["Admin"]},{href:"/app/administration",label:"Administration",icon:lh,roles:["Admin"]}],F=async e=>{const t=new URL(Kx);t.searchParams.append("v",Date.now().toString());try{const n=await fetch(t.toString(),{method:"POST",mode:"cors",body:JSON.stringify(e)});if(!n.ok){const l=await n.text();throw new Error(`Request failed with status ${n.status}. Response: ${l}`)}const r=await n.json();if(r.error)throw new Error(`Google Apps Script Error: ${r.error}`);return r}catch(n){if(console.error("Full error in gsPost:",n),n instanceof TypeError&&n.message==="Failed to fetch"){const r=`A "Failed to fetch" network error occurred. This is almost always a configuration issue with your Google Apps Script deployment.

Please perform these steps EXACTLY:
1. Open your Google Sheet and go to Extensions > Apps Script.
2. Make sure the Code.gs file contains the LATEST script provided.
3. Click the BLUE "Deploy" button and select "New deployment".
4. For "Who has access", you MUST select "Anyone".
5. Click "Deploy". Authorize if it asks.
6. You will get a NEW Web app URL ending in /exec. COPY this new URL.
7. Paste the NEW URL into the 'constants.tsx' file.

Your current URL might be old or have the wrong permissions. Creating a NEW deployment is essential.`;throw alert(r),new Error(r)}throw n}},M=async e=>{try{const t=await F({action:"read",sheetName:e});if(t.error)throw new Error(t.error);return t}catch(t){throw console.error(`Error fetching from sheet "${e}":`,t),t}},np=e=>{if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string"){const t=e.trim();if(t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch(n){return console.error("Failed to parse paidItems JSON string:",t,n),[]}if(t.length>0)return t.split(",").map(n=>n.trim())}return[]},Q={students:null,staff:null,classes:null,users:null,subjects:null,timetable:null,homework:null,exams:null,events:null,leaveRequests:null,academicSessions:null,vehicles:null,inventory:null,notices:null,disciplineIncidents:null,attendance:null,expenses:null,feeStructure:null,feePayments:null,salaryPayments:null,syllabusStatus:null};async function dh(){console.log("Initializing app data cache by pre-fetching data...");try{const[e,t,n,r,l,a,o,c,i,d,m,u,p,j,y,v,b,g,x,h,N]=await Promise.all([M("Students"),M("Staff"),M("Classes"),M("Users"),M("Subjects"),M("Timetable"),M("Homework"),M("Exams"),M("Events"),M("LeaveRequests"),M("AcademicSessions"),M("Vehicles"),M("Inventory"),M("Notices"),M("DisciplineIncidents"),M("Expenses"),M("FeeStructure"),M("FeePayments"),M("SalaryPayments"),M("Attendance"),M("SyllabusStatus")]);Q.students=e,Q.staff=t,Q.classes=n,Q.users=r,Q.subjects=l,Q.timetable=a,Q.homework=o,Q.exams=c,Q.events=i,Q.leaveRequests=d,Q.academicSessions=m,Q.vehicles=u,Q.inventory=p,Q.notices=j,Q.disciplineIncidents=y,Q.expenses=v,Q.feeStructure=b,Q.feePayments=g,Q.salaryPayments=x,Q.attendance=h,Q.syllabusStatus=N,console.log("Cache initialized successfully. Subsequent data requests will be served from memory.")}catch(e){console.error("Failed to initialize app cache. The app will fetch data on demand.",e)}}function K(e){return Q[e]}function le(e,t){Q[e]=t}function O(e){console.log(`Cache invalidated for: ${e}`),Q[e]=null}const uh=async()=>await M("Institution"),ph=async e=>(await F({action:"create",sheetName:"Institution",data:e}),e),mh=async e=>(await F({action:"update",sheetName:"Institution",id:e.id,data:e}),e),fh=async()=>{let e=K("academicSessions");return e||(e=await M("AcademicSessions"),le("academicSessions",e)),e},xh=async e=>{const t={...e,id:`SESS${Date.now()}`,isActive:!1};return await F({action:"create",sheetName:"AcademicSessions",data:t}),O("academicSessions"),t},hh=async e=>(await F({action:"update",sheetName:"AcademicSessions",id:e.id,data:e}),O("academicSessions"),e),gh=async e=>{await F({action:"setActiveSession",sheetName:"AcademicSessions",id:e}),O("academicSessions")},nn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXVzZXItcm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iOCIgcj0iNSIvPjxwYXRoIGQ9Ik0yMCAyMWE4IDggMCAwIDAtMTYgMCIvPjwvc3ZnPg==",sp=async()=>{let e=K("users");return e||(e=await M("Users"),le("users",e)),e},yh=async(e,t)=>(await sp()).find(l=>l.username.toLowerCase()===e.toLowerCase()&&l.password===t)||null,vh=async e=>{const t=K("users")??await M("Users"),n=`A${String(t.filter(l=>l.role==="Admin").length+1).padStart(3,"0")}`,r={...e,id:n,photo:e.photo||nn};return await F({action:"create",sheetName:"Users",data:r}),O("users"),r},jh=async e=>(await F({action:"update",sheetName:"Users",id:e.id,data:e}),O("users"),e),ze=async e=>{let t=K("students");return t||(t=await M("Students"),le("students",t)),e!=null&&e.class&&(t=t.filter(n=>n.class===e.class)),e!=null&&e.section&&(t=t.filter(n=>n.section===e.section)),t},wh=async e=>{const t=K("students")??await M("Students"),n=`S${String(t.length+1).padStart(3,"0")}`,r={...e,id:n,admissionDate:new Date().toISOString().split("T")[0]};return await F({action:"create",sheetName:"Students",data:r}),await F({action:"create",sheetName:"Users",data:{id:n,username:n,password:n.toLowerCase(),name:e.name,role:"Student",photo:e.photo}}),O("students"),O("users"),r},bh=async e=>(await F({action:"update",sheetName:"Students",id:e.id,data:e}),await F({action:"update",sheetName:"Users",id:e.id,data:{name:e.name,photo:e.photo}}),O("students"),O("users"),e),on=async()=>{let e=K("staff");return e||(e=await M("Staff"),le("staff",e)),e},Nh=async e=>{const t=K("staff")??await M("Staff"),n=`T${String(t.length+1).padStart(2,"0")}`,r={...e,id:n,joiningDate:new Date().toISOString().split("T")[0]};await F({action:"create",sheetName:"Staff",data:r});const l=`Mr${e.name.split(" ").join("")}`;return await F({action:"create",sheetName:"Users",data:{id:n,username:l,password:"password123",name:e.name,role:e.role,photo:e.photo}}),O("staff"),O("users"),r},Sh=async e=>(await F({action:"update",sheetName:"Staff",id:e.id,data:e}),await F({action:"update",sheetName:"Users",id:e.id,data:{name:e.name,photo:e.photo,role:e.role}}),O("staff"),O("users"),e),Hn=async()=>{let e=K("classes");return e||(e=await M("Classes"),le("classes",e)),e},kh=async e=>{const t=K("classes")??await M("Classes"),n={...e,id:`C${String(t.length+1).padStart(2,"0")}`};return await F({action:"create",sheetName:"Classes",data:n}),O("classes"),n},Ch=async e=>(await F({action:"update",sheetName:"Classes",id:e.id,data:e}),O("classes"),e),rp=async()=>{let e=K("feeStructure");return e||(e=await M("FeeStructure"),le("feeStructure",e)),e},lp=async()=>{let e=K("feePayments");return e||(e=await M("FeePayments"),le("feePayments",e)),e},Eh=async()=>{let e=K("salaryPayments");return e||(e=await M("salaryPayments"),le("salaryPayments",e)),e},Ph=async()=>{let e=K("expenses");return e||(e=await M("Expenses"),le("expenses",e)),e},Dh=async(e,t)=>(await Ph()).filter(r=>{const l=new Date(r.date);return l.getFullYear()===e&&l.getMonth()+1===t}),Ih=async e=>{const t={...e,id:`EXP${Date.now()}`,date:new Date().toISOString().split("T")[0]};return await F({action:"create",sheetName:"Expenses",data:t}),O("expenses"),t},ul=async(e,t)=>{const n=new Date(e,t-1).toLocaleString("default",{month:"long"}),[r,l,a]=await Promise.all([ze(),rp(),lp()]);return r.map(o=>{const c=l.filter(v=>String(v.class)===String(o.class)),i=c.reduce((v,b)=>{const g=parseFloat(String(b.amount));return v+(isNaN(g)?0:g)},0),m=a.filter(v=>String(v.id).trim().toLowerCase()===String(o.id).trim().toLowerCase()&&v.monthKey===n).reduce((v,b)=>(np(b==null?void 0:b.paidItems).forEach(x=>v.add(x)),v),new Set),u=Array.from(m),p=c.map(v=>({type:v.type,amount:parseFloat(String(v.amount))||0,paid:u.includes(v.type)})),j=p.filter(v=>v.paid).reduce((v,b)=>v+b.amount,0);let y="Unpaid";return j<=0?y="Unpaid":j>=i?y="Paid":y="Partially Paid",{studentId:o.id,studentName:o.name,class:o.class,section:o.section,status:y,totalDue:i,totalPaid:j,breakdown:p}})},Lh=async(e,t)=>{const n=new Date(e,t-1).toLocaleString("default",{month:"long"}),[r,l]=await Promise.all([on(),Eh()]);return r.map(a=>{const o=l.find(i=>String(i.id).trim().toLowerCase()===String(a.id).trim().toLowerCase()&&i.monthKey===n),c=parseFloat(String(a.salary))||5e3;return{staffId:a.id,staffName:a.name,role:a.role,salaryAmount:c,status:o?"Paid":"Unpaid",paidAmount:o==null?void 0:o.amount,paymentDate:o==null?void 0:o.date}})},Ah=async(e,t,n,r)=>{const l=new Date(n,r-1).toLocaleString("default",{month:"long"}),c=(await lp()).filter(x=>String(x.id).trim().toLowerCase()===String(e).trim().toLowerCase()&&x.monthKey===l).reduce((x,h)=>(np(h==null?void 0:h.paidItems).forEach(C=>x.add(C)),x),new Set),i=[...new Set([...Array.from(c),...t])],d={monthKey:l,id:e,paidItems:i,date:new Date().toISOString().split("T")[0]};await F({action:"batchDeleteAndCreate",sheetName:"FeePayments",batchData:{deleteFilter:{column:"id",value:e,andColumn:"monthKey",andValue:l},createData:[d]}}),O("feePayments");const[m,u]=await Promise.all([ze(),rp()]),p=m.find(x=>x.id===e);if(!p)throw new Error("Could not find student to recalculate fee status.");const j=u.filter(x=>String(x.class)===String(p.class)),y=j.reduce((x,h)=>{const N=parseFloat(String(h.amount));return x+(isNaN(N)?0:N)},0),v=j.map(x=>({type:x.type,amount:parseFloat(String(x.amount))||0,paid:i.includes(x.type)})),b=v.filter(x=>x.paid).reduce((x,h)=>x+h.amount,0);let g="Unpaid";return b<=0?g="Unpaid":b>=y?g="Paid":g="Partially Paid",{studentId:p.id,studentName:p.name,class:p.class,section:p.section,status:g,totalDue:y,totalPaid:b,breakdown:v}},Th=async(e,t,n,r)=>{const l=new Date(n,r-1).toLocaleString("default",{month:"long"}),a={monthKey:l,id:e,amount:t,date:new Date().toISOString().split("T")[0]};await F({action:"batchDeleteAndCreate",sheetName:"SalaryPayments",batchData:{deleteFilter:{column:"id",value:e,andColumn:"monthKey",andValue:l},createData:[a]}}),O("salaryPayments");const o=(await on()).find(i=>i.id===e);if(!o)throw new Error("Could not find staff member to update salary status.");const c=parseFloat(String(o.salary))||5e3;return{staffId:o.id,staffName:o.name,role:o.role,salaryAmount:c,status:"Paid",paidAmount:t,paymentDate:a.date}},Mh=async()=>{const[e,t,n]=await Promise.all([ze(),on(),ul(new Date().getFullYear(),new Date().getMonth()+1)]),r=n.reduce((l,a)=>l+(a.totalDue-a.totalPaid),0);return{totalStudents:e.length,totalStaff:t.length,todayAttendance:95,feesDue:r}},zh=async()=>{let e=K("notices");return e||(e=await M("Notices"),le("notices",e)),e},Fh=async e=>{const t={...e,id:`NTC${Date.now()}`,date:new Date().toLocaleDateString("en-CA")};return await F({action:"create",sheetName:"Notices",data:t}),O("notices"),t},Wo=async()=>{let e=K("timetable");return e||(e=await M("Timetable"),le("timetable",e)),e},Rh=async e=>{const t={...e,id:`TT${Date.now()}`};return await F({action:"create",sheetName:"Timetable",data:t}),O("timetable"),t},_h=async e=>(await F({action:"update",sheetName:"Timetable",criteria:{id:e.id},data:e}),O("timetable"),e),Oh=async()=>{let e=K("subjects");return e||(e=await M("Subjects"),le("subjects",e)),e},$h=async e=>{const t={...e,id:`SUB${Date.now()}`};return await F({action:"create",sheetName:"Subjects",data:t}),O("subjects"),t},Uh=async e=>(await F({action:"update",sheetName:"Subjects",criteria:{id:e.id},data:e}),O("subjects"),e),ap=async()=>{let e=K("homework");return e||(e=await M("Homework"),le("homework",e)),e},Bh=async e=>{const t={...e,id:`HW${Date.now()}`};return await F({action:"create",sheetName:"Homework",data:t}),O("homework"),t},Hh=async e=>(await F({action:"update",sheetName:"Homework",criteria:{id:e.id},data:e}),O("homework"),e),Oa=e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);if(isNaN(t.getTime()))return e;const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${n}-${r}-${l}`},Wh=async(e,t)=>{let n=K("attendance");n||(n=await M("Attendance"),le("attendance",n));const r=Oa(t),l=n.filter(d=>Oa(d.date)===r&&String(d.classId)===String(e)),a=(await Hn()).find(d=>String(d.id)===String(e));if(!a)return[];const o=await ze({class:a.name,section:a.section}),c=new Map(l.map(d=>[d.studentId,d]));return o.map(d=>{const m=c.get(d.id);return{studentId:d.id,studentName:d.name,status:m?m.status:"Present",remark:m?m.remark:""}}).sort((d,m)=>d.studentName.localeCompare(m.studentName))},Vh=async(e,t,n)=>{const r=Oa(t),l=n.map(a=>({...a,classId:e,date:r}));await F({action:"batchDeleteAndCreate",sheetName:"Attendance",batchData:{deleteFilter:{column:"date",value:r,andColumn:"classId",andValue:e},createData:l}}),O("attendance")},op=async()=>{let e=K("disciplineIncidents");return e||(e=await M("DisciplineIncidents"),le("disciplineIncidents",e)),e},qh=async e=>{const t={...e,id:`D${Date.now()}`};return await F({action:"create",sheetName:"DisciplineIncidents",data:t}),O("disciplineIncidents"),t},Gh=async()=>{let e=K("vehicles");return e||(e=await M("Vehicles"),le("vehicles",e)),e},Qh=async e=>{const t={...e,id:`V${Date.now()}`};return await F({action:"create",sheetName:"Vehicles",data:t}),O("vehicles"),t},Yh=async e=>(await F({action:"update",sheetName:"Vehicles",id:e.id,data:e}),O("vehicles"),e),Kh=async()=>{let e=K("inventory");return e||(e=await M("Inventory"),le("inventory",e)),e},Zh=async e=>{const t={...e,id:`INV${Date.now()}`};return await F({action:"create",sheetName:"Inventory",data:t}),O("inventory"),t},Xh=async e=>(await F({action:"update",sheetName:"Inventory",id:e.id,data:e}),O("inventory"),e),pl=async()=>{let e=K("exams");return e||(e=await M("Exams"),le("exams",e)),e},Jh=async e=>{const t={...e,id:`EX${Date.now()}`};return await F({action:"create",sheetName:"Exams",data:t}),O("exams"),t},eg=async e=>(await F({action:"update",sheetName:"Exams",id:e.id,data:e}),O("exams"),e),Vo=async(e,t)=>{const r=(await M("Results")).filter(a=>a.examId===e);return(await ze({class:t})).map(a=>{const o=r.find(i=>i.studentId===a.id),c=i=>{const d=parseFloat(i);return isNaN(d)?void 0:d};return{studentId:a.id,studentName:a.name,marks:o?c(o.marks)??null:null,ct:o?c(o.ct):void 0,mcq:o?c(o.mcq):void 0,cq:o?c(o.cq):void 0,viva:o?c(o.viva):void 0}})},tg=async(e,t)=>{const n=t.map(r=>({...r,examId:e}));await F({action:"batchDeleteAndCreate",sheetName:"Results",batchData:{deleteFilter:{column:"examId",value:e},createData:n}})},ng=async(e,t,n)=>{const r=await pl(),l=(await ze()).find(u=>u.id.toUpperCase()===n.toUpperCase()&&u.class===t);if(!l)return null;const a=r.filter(u=>u.title===e&&u.class===t);if(a.length===0)return null;const o=await M("Results"),c=[];for(const u of a){const p=o.find(v=>v.examId===u.id&&v.studentId.toUpperCase()===n.toUpperCase()),j=v=>{const b=parseFloat(v);return isNaN(b)?void 0:b},y=j(p==null?void 0:p.marks);c.push({subject:u.subject,marks:y??null,totalMarks:100,ct:j(p==null?void 0:p.ct),mcq:j(p==null?void 0:p.mcq),cq:j(p==null?void 0:p.cq),viva:j(p==null?void 0:p.viva)})}if(c.length===0)return null;const i=c.reduce((u,p)=>u+(p.marks||0),0),d=c.reduce((u,p)=>u+p.totalMarks,0),m=d>0?i/d*100:0;return{studentName:l.name,studentId:l.id,className:l.class,examTitle:e,results:c,totalMarksObtained:i,overallTotalMarks:d,percentage:m}},qo=async()=>{let e=K("events");return e||(e=await M("Events"),le("events",e)),e},sg=async e=>{const t={...e,id:`EVT${Date.now()}`};return await F({action:"create",sheetName:"Events",data:t}),O("events"),t},rg=async e=>{const t=(await ze()).find(b=>b.id===e);if(!t)return null;const[n,r,l,a,o,c]=await Promise.all([ul(new Date().getFullYear(),new Date().getMonth()+1),pl(),op(),qo(),Wo(),ap()]),i=n.find(b=>b.studentId===e),d=l.filter(b=>b.studentId===e),m=o.filter(b=>b.class===t.class),u=c.filter(b=>b.class===t.class);let p=[];for(const b of(r||[]).filter(g=>g.class===t.class)){const x=(await Vo(b.id,b.class)).find(h=>h.studentId===e);x&&p.push({examId:b.id,examTitle:b.title,subject:b.subject,marks:x.marks})}const j=new Date;j.setHours(0,0,0,0);const y=(r||[]).filter(b=>b.class===t.class&&new Date(b.date)>=j).sort((b,g)=>new Date(b.date).getTime()-new Date(g.date).getTime());return{student:t,attendance:{present:15,absent:2,late:1,total:18},fees:{paid:(i==null?void 0:i.totalPaid)||0,due:((i==null?void 0:i.totalDue)||0)-((i==null?void 0:i.totalPaid)||0),status:(i==null?void 0:i.status)||"Unpaid"},results:p,discipline:d,events:a,timetable:m,homework:u,upcomingExams:y}},ip=async()=>{let e=K("leaveRequests");return e||(e=await M("LeaveRequests"),le("leaveRequests",e)),e},lg=async e=>{const t={...e,id:`LR${Date.now()}`,status:"Pending",appliedDate:new Date().toISOString().split("T")[0]};return await F({action:"create",sheetName:"LeaveRequests",data:t}),O("leaveRequests"),t},ag=async(e,t)=>(await F({action:"update",sheetName:"LeaveRequests",id:e,data:{status:t}}),O("leaveRequests"),(await ip()).find(l=>l.id===e)),cp=f.createContext(void 0),og=({children:e})=>{const[t,n]=f.useState(null),r=$o(),l=async(o,c)=>{const i=await yh(o,c);if(i)n(i),i.role==="Student"?r("/app/student-dashboard"):r("/app/dashboard");else throw new Error("Invalid credentials. Please try again.")},a=()=>{n(null),r("/login")};return s.jsx(cp.Provider,{value:{user:t,login:l,logout:a},children:e})},Pe=()=>{const e=f.useContext(cp);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},dp=()=>ch.map(e=>({...e,roles:[...e.roles]}));let Go=dp();const $a=new Set,up=()=>{$a.forEach(e=>e())},ig=e=>($a.add(e),()=>$a.delete(e)),Hr=()=>Go,cg=e=>{Go=e,up()},dg=()=>{Go=dp(),up()},Qo=()=>{const[e,t]=f.useState(Hr());return f.useEffect(()=>ig(()=>{t([...Hr()])}),[]),e},ug="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMzOGIyYWMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMjEgMTZWOEEyIDIgMCAwIDAtMS0xLjczbC03LTRhMiAyIDAgMCAwLTIgMGwtNyA0QTIgMiAwIDAgMCAzIDh2OGEyIDIgMCAwIDAgMSA1LjczbDcgNGEyIDIgMCAwIDAgMiAwbDctNEEyIDIgMCAwIDAgMjEgMTZ6Ij48L3BhdGg+PHBvbHlsaW5lIHBvaW50cz0iMy4yNyA2Ljk2IDEyIDEyLjAxIDIwLjczIDYuOTYiPjwvcG9seWxpbmU+PGxpbmUgeDE9IjEyIiB5MT0iMjIuMDgiIHgyPSIxMiIgeTI9IjEyIj48L2xpbmU+PC9zdmc+",Ua={id:"INST-01",name:"Madrasa Modern System",tagline:"Excellence in Education",logo:ug,address:"123 Islamic Center, Knowledge City, 90210",phone:"(123) 456-7890",email:"contact@madrasams.com"};let Ls={...Ua};const pg=async()=>{try{let t=(await uh())[0]||null;t||(console.warn("Institution sheet is empty. Creating a default entry."),t=await ph(Ua)),Ls=t}catch(e){console.error("Failed to initialize institution store from Google Sheet, using defaults.",e),Ls={...Ua}}},Ke=()=>Ls,mg=async e=>{await mh(e),Ls=e},fg=()=>{const e=an(),{user:t}=Pe(),n=Qo(),r=t?n.filter(l=>l.roles.includes(t.role)):[];return s.jsxs("aside",{className:"w-64 flex-shrink-0 bg-primary p-4 hidden md:block",children:[s.jsxs("div",{className:"flex items-center mb-8",children:[s.jsx("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-xl font-bold text-background",children:"M"})}),s.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"MadrasaMS"})]}),s.jsx("nav",{children:s.jsx("ul",{children:r.map(l=>s.jsx("li",{children:s.jsxs(qx,{to:l.href,className:`flex items-center px-3 py-2.5 rounded-lg transition-colors duration-200 ${e.pathname.startsWith(l.href)?"bg-accent text-background":"text-text-secondary hover:bg-secondary hover:text-text-primary"}`,children:[s.jsx(l.icon,{className:"w-5 h-5 mr-3"}),s.jsx("span",{className:"font-medium",children:l.label})]})},l.href))})})]})},xg=()=>{const{user:e,logout:t}=Pe();return s.jsx("header",{className:"bg-primary p-4 flex justify-end items-center border-b border-secondary",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{src:e==null?void 0:e.photo,alt:e==null?void 0:e.name,className:"w-10 h-10 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-text-primary",children:e==null?void 0:e.name}),s.jsx("p",{className:"text-sm text-text-secondary",children:e==null?void 0:e.role})]}),s.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-red-400 transition-colors",title:"Logout",children:s.jsx(tp,{className:"w-5 h-5"})})]})})},ce=({roles:e,children:t})=>{const{user:n}=Pe();return n?e.includes(n.role)?t?s.jsx(s.Fragment,{children:t}):s.jsx(Uo,{}):s.jsx(Wt,{to:"/unauthorized",replace:!0}):s.jsx(Wt,{to:"/login",replace:!0})},hg=()=>{const{user:e,logout:t}=Pe();return s.jsxs("header",{className:"bg-primary p-4 flex justify-between items-center border-b border-secondary",children:[s.jsx("h1",{className:"text-xl font-bold text-text-primary",children:"Student Portal"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{src:e==null?void 0:e.photo,alt:e==null?void 0:e.name,className:"w-10 h-10 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-text-primary",children:e==null?void 0:e.name}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Student"})]}),s.jsx("button",{onClick:t,className:"p-2 text-text-secondary hover:text-red-400",title:"Logout",children:s.jsx(tp,{className:"w-5 h-5"})})]})]})},gg=()=>s.jsxs("div",{className:"flex flex-col h-screen bg-background font-sans",children:[s.jsx(hg,{}),s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-background p-6",children:s.jsx(Uo,{})})]}),nr=({title:e,value:t,icon:n,color:r})=>s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg flex items-center",children:[s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mr-6 ${r}`,children:s.jsx(n,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium uppercase",children:e}),s.jsx("p",{className:"text-3xl font-bold text-text-primary",children:t})]})]}),pc=e=>{const t=e.getDate(),n=e.getMonth(),r=e.getFullYear(),l=["Boishakh","Jyoishtho","Asharh","Srabon","Bhadro","Ashshin","Kartik","Ogrohayon","Poush","Magh","Falgun","Chaitra"],a=[14,15,15,16,16,16,16,15,15,14,13,15];let o=0,c=0,i=n>3||n===3&&t>=14?r-593:r-594;if(t>=a[n])n<3?o=n+9:o=n-3,c=t-a[n]+1;else{n<3?o=n+8:o=n-4;let m=n===0?11:n-1,u=a[m];c=new Date(r,n,0).getDate()-u+t+1}const d=m=>m.toString().replace(/\d/g,u=>""[parseInt(u)]);return`${l[o]} ${d(c)}, ${d(i)}`},mc=e=>{const t=new Date(e);return t.setDate(t.getDate()-1),new Intl.DateTimeFormat("en-US-u-ca-islamic-umalqura",{day:"numeric",month:"long",year:"numeric"}).format(t)},fc=(e,t)=>{const n=e.getMonth()+1,r=e.getDate(),l=`${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,a={"02-21":"Int'l Mother Language Day","03-17":"Sheikh Mujib's Birthday","03-26":"Independence Day","04-14":"Pohela Boishakh (Bengali New Year)","05-01":"May Day","08-15":"National Mourning Day","12-16":"Victory Day","12-25":"Christmas Day"};return a[l]?a[l]:t.includes("Ramadan 1,")?"Start of Ramadan":t.includes("Shawwal 1,")?"Eid ul-Fitr":t.includes("Dhu al-Hijjah 10,")?"Eid ul-Adha":t.includes("Rabi I 12,")?"Eid-e-Miladunnabi":t.includes("Muharram 10,")?"Ashura":t.includes("Rajab 27,")?"Shab-e-Meraj":t.includes("Shaban 15,")?"Shab-e-Barat":null},Xn=e=>{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]},yg=()=>{const[e,t]=f.useState(null),[n,r]=f.useState([]),[l,a]=f.useState(!0),[o]=f.useState(Ke()),[c,i]=f.useState(new Date),[d,m]=f.useState(null);f.useEffect(()=>{(async()=>{try{a(!0);const[N,C]=await Promise.all([Mh(),qo()]);t(N),r(C.filter(w=>w.date))}catch(N){console.error("Failed to fetch dashboard data",N)}finally{a(!1)}})()},[]);const u=f.useMemo(()=>{const h=c.getFullYear(),N=c.getMonth();return new Date(h,N+1,0).getDate()},[c]),p=f.useMemo(()=>{const h=c.getFullYear(),N=c.getMonth();return new Date(h,N,1).getDay()},[c]),j=f.useMemo(()=>{const h=[],N=c.getFullYear(),C=c.getMonth();for(let w=0;w<p;w++)h.push(null);for(let w=1;w<=u;w++)h.push(new Date(N,C,w));return h},[c,u,p]),y=()=>i(new Date(c.getFullYear(),c.getMonth()-1,1)),v=()=>i(new Date(c.getFullYear(),c.getMonth()+1,1)),b=h=>{switch(h){case"Academic":return"bg-blue-500";case"Sports":return"bg-green-500";case"Cultural":return"bg-purple-500";case"Holiday":return"bg-red-500";default:return"bg-gray-500"}},g=f.useMemo(()=>{const h=new Date;return h.setHours(0,0,0,0),n.filter(N=>new Date(N.date)>=h).sort((N,C)=>new Date(N.date).getTime()-new Date(C.date).getTime())},[n]),x=h=>{const N=mc(h),C=pc(h),w=fc(h,N),S=Xn(h.toISOString()),k=n.filter(D=>Xn(D.date)===S);m({date:h,hijri:N,bengali:C,holiday:w,events:k})};return l?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl",children:"Loading Dashboard..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(nr,{title:"Total Students",value:(e==null?void 0:e.totalStudents)??0,icon:tn,color:"bg-blue-500"}),s.jsx(nr,{title:"Total Staff",value:(e==null?void 0:e.totalStaff)??0,icon:Zu,color:"bg-green-500"}),s.jsx(nr,{title:"Attendance Today",value:`${(e==null?void 0:e.todayAttendance)??0}%`,icon:Bo,color:"bg-yellow-500"}),s.jsx(nr,{title:"Fees Due",value:`${(e==null?void 0:e.feesDue.toLocaleString())??0}`,icon:Gu,color:"bg-red-500"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-secondary pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-primary",children:[s.jsx(Rn,{className:"w-6 h-6 text-accent"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Academic Calendar"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:y,className:"text-text-secondary hover:text-accent font-bold text-xl",children:"<"}),s.jsx("span",{className:"text-lg font-bold text-text-primary w-40 text-center",children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:v,className:"text-text-secondary hover:text-accent font-bold text-xl",children:">"})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2 text-center mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>s.jsx("div",{className:"font-bold text-text-secondary text-sm",children:h},h))}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:j.map((h,N)=>{if(!h)return s.jsx("div",{className:"h-32 bg-transparent"},`empty-${N}`);const C=Xn(h.toISOString()),w=mc(h),S=w.split(",")[0],k=pc(h),D=fc(h,w),E=n.filter(H=>Xn(H.date)===C),T=E.length>0,A=h.toDateString()===new Date().toDateString(),U=h.getDay()===5;return s.jsxs("div",{onClick:()=>x(h),className:`h-32 p-1 rounded-md border border-secondary flex flex-col relative overflow-hidden transition-all hover:bg-secondary/50 cursor-pointer
                                        ${A?"ring-2 ring-accent bg-secondary/30":""}
                                        ${U?"bg-red-900/10":""}
                                    `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`font-bold text-lg ${U?"text-red-400":"text-text-primary"}`,children:h.getDate()}),T&&s.jsx("div",{className:"flex gap-0.5 pt-1",children:E.slice(0,3).map((H,_t)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${b(H.type)}`,title:H.title},_t))})]}),s.jsxs("div",{className:"flex flex-col text-[10px] text-text-secondary leading-tight opacity-90 gap-0.5",children:[s.jsx("span",{className:"text-green-600/90 font-medium truncate",children:S}),s.jsx("span",{className:"font-bengali text-yellow-600/90 truncate",children:k.split(",")[0]})]}),(D||T)&&s.jsx("div",{className:"mt-auto pt-1 w-full text-[9px] text-center font-bold",children:D?s.jsx("span",{className:"text-red-300 bg-red-500/20 block rounded-sm px-1 py-0.5 truncate",children:D}):s.jsx("span",{className:"text-blue-300 bg-blue-500/20 block rounded-sm px-1 py-0.5 truncate",children:E[0].title})})]},C)})}),s.jsxs("div",{className:"mt-4 flex gap-4 text-xs text-text-secondary justify-center flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})," Academic"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})," Sports"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})," Cultural"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})," Holiday"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-red-400 font-bold",children:"Fri"})," Weekend"]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[s.jsx(Rn,{className:"w-5 h-5 text-accent"})," Upcoming Events"]}),s.jsx("span",{className:"text-xs bg-accent text-white px-2 py-1 rounded-full",children:g.length})]}),s.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:g.length===0?s.jsx("p",{className:"text-text-secondary text-sm",children:"No upcoming events scheduled."}):g.map(h=>s.jsxs("div",{className:`p-4 bg-secondary rounded-md border-l-4 ${b(h.type).replace("bg-","border-")}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:h.title}),s.jsx("span",{className:"text-xs text-text-secondary bg-primary px-2 py-1 rounded",children:Xn(h.date)})]}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:h.description}),s.jsx("span",{className:`mt-2 inline-block px-2 py-0.5 text-[10px] rounded-full text-white ${b(h.type)} opacity-80`,children:h.type})]},h.id))})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Institution Details"}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("img",{src:o.logo,alt:"logo",className:"w-16 h-16 rounded-full mr-4 bg-white p-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text-primary text-lg",children:o.name}),s.jsx("p",{className:"text-text-secondary text-sm",children:o.tagline})]})]}),s.jsxs("div",{className:"text-sm text-text-secondary space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Address:"})," ",o.address]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",o.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",o.email]})]})]}),s.jsx("div",{className:"bg-primary p-6 rounded-lg shadow-lg"})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg shadow-2xl w-full max-w-md border border-secondary",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-secondary",children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Date Details"}),s.jsx("button",{onClick:()=>m(null),className:"text-text-secondary hover:text-red-400",children:s.jsx(dl,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"text-center bg-secondary p-4 rounded-lg",children:[s.jsx("h4",{className:"text-3xl font-bold text-accent",children:d.date.getDate()}),s.jsx("p",{className:"text-lg text-text-primary",children:d.date.toLocaleString("default",{month:"long",year:"numeric"})}),s.jsx("p",{className:"text-text-secondary",children:d.date.toLocaleString("default",{weekday:"long"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-green-400 font-semibold block mb-1",children:"Hijri Date"}),s.jsx("p",{className:"text-sm text-text-primary",children:d.hijri})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-yellow-400 font-semibold block mb-1",children:"Bengali Date"}),s.jsx("p",{className:"text-sm text-text-primary font-bengali",children:d.bengali})]})]}),s.jsxs("div",{className:"border-t border-secondary pt-4",children:[s.jsx("h5",{className:"font-semibold text-text-primary mb-2",children:"Holidays & Events"}),d.holiday?s.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg mb-2",children:s.jsxs("p",{className:"text-red-400 font-bold flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),d.holiday]})}):d.events.length===0&&s.jsx("p",{className:"text-text-secondary text-sm italic",children:"No holidays or events for this day."}),d.events.map(h=>s.jsxs("div",{className:`p-3 rounded-lg mb-2 border ${b(h.type).replace("bg-","border-").replace("500","500/50")} bg-secondary`,children:[s.jsx("p",{className:"text-text-primary font-semibold",children:h.title}),s.jsx("p",{className:"text-xs text-text-secondary",children:h.description}),s.jsx("span",{className:`inline-block mt-1 text-[10px] px-2 py-0.5 rounded-full text-white ${b(h.type)}`,children:h.type})]},h.id))]})]})]})})]})},vg=({students:e,onEdit:t})=>{const{user:n}=Pe();return s.jsx("div",{className:"overflow-x-auto bg-primary rounded-lg shadow-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Class"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Guardian Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Guardian Phone"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(r=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap flex items-center gap-3",children:[s.jsx("img",{src:r.photo,alt:r.name,className:"w-8 h-8 rounded-full object-cover"}),r.name]}),s.jsx("td",{className:"px-6 py-4",children:r.id}),s.jsxs("td",{className:"px-6 py-4",children:[r.class," - ",r.section]}),s.jsx("td",{className:"px-6 py-4",children:r.guardianName}),s.jsx("td",{className:"px-6 py-4",children:r.guardianPhone}),s.jsx("td",{className:"px-6 py-4 flex items-center gap-4",children:(n==null?void 0:n.role)==="Admin"&&s.jsx("button",{onClick:()=>t(r),className:"p-1 hover:bg-background rounded",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]},r.id))})]})})},xc=35*1024,jg=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[l,a]=f.useState({name:"",class:"",section:"",guardianName:"",guardianPhone:"",photo:"",address:""}),[o,c]=f.useState(null);if(f.useEffect(()=>{r?(a({name:r.name,class:r.class,section:r.section,guardianName:r.guardianName,guardianPhone:r.guardianPhone,photo:r.photo,address:r.address||""}),c(r.photo)):(a({name:"",class:"",section:"",guardianName:"",guardianPhone:"",photo:"",address:""}),c(nn))},[r]),!e)return null;const i=u=>{a({...l,[u.target.name]:u.target.value})},d=u=>{var j;const p=(j=u.target.files)==null?void 0:j[0];if(p){if(p.size>xc){alert(`File is too large. Please select an image smaller than ${xc/1024}KB to avoid errors.`);return}const y=new FileReader;y.onloadend=()=>{const v=y.result;a(b=>({...b,photo:v})),c(v)},y.readAsDataURL(p)}},m=u=>{u.preventDefault(),n(r?{...r,...l}:l)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Student"]}),s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"w-1/3 space-y-2",children:[s.jsx("img",{src:o||nn,alt:"preview",className:"w-32 h-32 rounded-full object-cover mx-auto border-2 border-accent"}),s.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-secondary file:text-text-primary hover:file:bg-accent hover:file:text-white"})]}),s.jsxs("div",{className:"w-2/3 grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:l.name,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsx("input",{type:"text",name:"class",placeholder:"Class",value:l.class,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"section",placeholder:"Section",value:l.section,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"guardianName",placeholder:"Guardian Name",value:l.guardianName,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsx("input",{type:"tel",name:"guardianPhone",placeholder:"Guardian Phone",value:l.guardianPhone,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsx("textarea",{name:"address",placeholder:"Address",value:l.address,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",rows:2})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Student"})]})]})]})})},wg=()=>{const{user:e}=Pe(),[t,n]=f.useState([]),[r,l]=f.useState(!0),[a,o]=f.useState(!1),[c,i]=f.useState(null),[d,m]=f.useState(""),u=f.useCallback(async()=>{try{l(!0);const b=await ze();n(b)}catch(b){console.error("Failed to fetch students",b)}finally{l(!1)}},[]);f.useEffect(()=>{u()},[u]);const p=async b=>{"id"in b?await bh(b):await wh(b),u(),y()},j=(b=null)=>{i(b),o(!0)},y=()=>{i(null),o(!1)},v=f.useMemo(()=>d?t.filter(b=>b.name.toLowerCase().includes(d.toLowerCase())||b.id.toLowerCase().includes(d.toLowerCase())||b.guardianName.toLowerCase().includes(d.toLowerCase())):t,[t,d]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Student Management"}),(e==null?void 0:e.role)==="Admin"&&s.jsx("button",{onClick:()=>j(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors",children:"Add New Student"})]}),s.jsx("div",{className:"bg-primary p-4 rounded-lg shadow-lg",children:s.jsx("input",{type:"text",placeholder:"Search by name, ID, or guardian...",value:d,onChange:b=>m(b.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})}),r?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading students..."}):s.jsx(vg,{students:v,onEdit:j}),a&&s.jsx(jg,{isOpen:a,onClose:y,onSave:p,initialData:c})]})},bg=({staff:e,onEdit:t})=>{const{user:n}=Pe();return s.jsx("div",{className:"overflow-x-auto bg-primary rounded-lg shadow-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Staff Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Staff ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Subject"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Phone"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(r=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap flex items-center gap-3",children:[s.jsx("img",{src:r.photo,alt:r.name,className:"w-8 h-8 rounded-full object-cover"}),r.name]}),s.jsx("td",{className:"px-6 py-4",children:r.id}),s.jsx("td",{className:"px-6 py-4",children:r.role}),s.jsx("td",{className:"px-6 py-4",children:r.subject||"N/A"}),s.jsx("td",{className:"px-6 py-4",children:r.phone}),s.jsx("td",{className:"px-6 py-4 flex items-center gap-4",children:(n==null?void 0:n.role)==="Admin"&&s.jsx("button",{onClick:()=>t(r),className:"p-1 hover:bg-background rounded",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]},r.id))})]})})},hc=35*1024,Ng=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[l,a]=f.useState({name:"",role:"Teacher",subject:"",phone:"",photo:"",address:""}),[o,c]=f.useState(null);if(f.useEffect(()=>{r?(a({name:r.name,role:r.role,subject:r.subject||"",phone:r.phone,photo:r.photo,address:r.address||""}),c(r.photo)):(a({name:"",role:"Teacher",subject:"",phone:"",photo:"",address:""}),c(nn))},[r]),!e)return null;const i=u=>{a({...l,[u.target.name]:u.target.value})},d=u=>{var j;const p=(j=u.target.files)==null?void 0:j[0];if(p){if(p.size>hc){alert(`File is too large. Please select an image smaller than ${hc/1024}KB to avoid errors.`);return}const y=new FileReader;y.onloadend=()=>{const v=y.result;a(b=>({...b,photo:v})),c(v)},y.readAsDataURL(p)}},m=u=>{u.preventDefault();const p={...l};p.role!=="Teacher"&&delete p.subject,n(r?{...r,...p}:p)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Staff Member"]}),s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"w-1/3 space-y-2",children:[s.jsx("img",{src:o||nn,alt:"preview",className:"w-32 h-32 rounded-full object-cover mx-auto border-2 border-accent"}),s.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-secondary file:text-text-primary hover:file:bg-accent hover:file:text-white"})]}),s.jsxs("div",{className:"w-2/3 grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:l.name,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsxs("select",{name:"role",value:l.role,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",children:[s.jsx("option",{value:"Teacher",children:"Teacher"}),s.jsx("option",{value:"Admin",children:"Admin"}),s.jsx("option",{value:"Support Staff",children:"Support Staff"})]}),l.role==="Teacher"&&s.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:l.subject,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:l.phone,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsx("textarea",{name:"address",placeholder:"Address",value:l.address,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",rows:2})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Staff"})]})]})]})})},Sg=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[l,a]=f.useState(!1),[o,c]=f.useState(null),[i,d]=f.useState(""),m=f.useCallback(async()=>{try{r(!0);const v=await on();t(v)}catch(v){console.error("Failed to fetch staff",v)}finally{r(!1)}},[]);f.useEffect(()=>{m()},[m]);const u=async v=>{"id"in v?await Sh(v):await Nh(v),m(),j()},p=(v=null)=>{c(v),a(!0)},j=()=>{c(null),a(!1)},y=f.useMemo(()=>i?e.filter(v=>v.name.toLowerCase().includes(i.toLowerCase())||v.id.toLowerCase().includes(i.toLowerCase())||v.role.toLowerCase().includes(i.toLowerCase())||v.subject&&v.subject.toLowerCase().includes(i.toLowerCase())):e,[e,i]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Staff Management"}),s.jsx("button",{onClick:()=>p(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors",children:"Add New Staff"})]}),s.jsx("div",{className:"bg-primary p-4 rounded-lg shadow-lg",children:s.jsx("input",{type:"text",placeholder:"Search by name, ID, role, or subject...",value:i,onChange:v=>d(v.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})}),n?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading staff..."}):s.jsx(bg,{staff:y,onEdit:p}),l&&s.jsx(Ng,{isOpen:l,onClose:j,onSave:u,initialData:o})]})},kg=({onClose:e,onSave:t,initialData:n})=>{const[r,l]=f.useState({day:(n==null?void 0:n.day)||"Monday",time:(n==null?void 0:n.time)||"",subject:(n==null?void 0:n.subject)||"",teacher:(n==null?void 0:n.teacher)||"",class:(n==null?void 0:n.class)||""}),[a,o]=f.useState([]);f.useEffect(()=>{Hn().then(m=>{o(m),!n&&m.length>0&&l(u=>({...u,class:m[0].name}))})},[n]);const c=m=>{const{name:u,value:p}=m.target;l(j=>({...j,[u]:p}))},i=async m=>{m.preventDefault(),n?await _h({...r,id:n.id}):await Rh(r),t()},d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Timetable Period"]}),s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("select",{name:"day",value:r.day,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:d.map(m=>s.jsx("option",{value:m,children:m},m))}),s.jsx("input",{type:"time",name:"time",value:r.time,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:r.subject,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"text",name:"teacher",placeholder:"Teacher",value:r.teacher,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("select",{name:"class",value:r.class,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:[s.jsx("option",{value:"",children:"Select Class"}),a.map(m=>s.jsxs("option",{value:m.name,children:[m.name," - ",m.section]},m.id))]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},Cg=({onClose:e,onSave:t,initialData:n,teachers:r})=>{const[l,a]=f.useState((n==null?void 0:n.name)||""),[o,c]=f.useState((n==null?void 0:n.teacherIds)||[]),i=m=>{c(u=>u.includes(m)?u.filter(p=>p!==m):[...u,m])},d=async m=>{m.preventDefault();const u={name:l,teacherIds:o};n?await Uh({...u,id:n.id}):await $h(u),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Subject"]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Subject Name",value:l,onChange:m=>a(m.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"text-text-secondary mb-2 block",children:"Assign Teachers"}),s.jsx("div",{className:"max-h-48 overflow-y-auto bg-secondary p-2 rounded-md space-y-1",children:r.map(m=>s.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-md hover:bg-background cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.includes(m.id),onChange:()=>i(m.id),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent"}),s.jsx("span",{className:"text-text-primary",children:m.name})]},m.id))})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},Eg=({onClose:e,onSave:t,initialData:n,classes:r,subjects:l})=>{var d,m;const[a,o]=f.useState({class:(n==null?void 0:n.class)||((d=r[0])==null?void 0:d.name)||"",subject:(n==null?void 0:n.subject)||((m=l[0])==null?void 0:m.name)||"",title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",dueDate:(n==null?void 0:n.dueDate)||""}),c=u=>{o(p=>({...p,[u.target.name]:u.target.value}))},i=async u=>{u.preventDefault(),n?await Hh({...a,id:n.id}):await Bh(a),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Homework"]}),s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("select",{name:"class",value:a.class,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:r.map(u=>s.jsxs("option",{value:u.name,children:["Class ",u.name," - ",u.section]},u.id))}),s.jsx("select",{name:"subject",value:a.subject,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:l.map(u=>s.jsx("option",{value:u.name,children:u.name},u.id))})]}),s.jsx("input",{type:"text",name:"title",placeholder:"Homework Title",value:a.title,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("textarea",{name:"description",placeholder:"Description",value:a.description,onChange:c,rows:4,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"text-text-secondary text-sm",children:"Due Date"}),s.jsx("input",{type:"date",name:"dueDate",value:a.dueDate,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},Pg=e=>{if(!e)return"N/A";if(/^\d{2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),l=new Date;return l.setHours(n,r,0,0),l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},Dg=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]}catch{return e}},Ig=()=>{const{user:e}=Pe(),t=(e==null?void 0:e.role)==="Admin",[n,r]=f.useState("timetable"),[l,a]=f.useState([]),[o,c]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState([]),[p,j]=f.useState([]),[y,v]=f.useState(""),[b,g]=f.useState(!0),[x,h]=f.useState(null),[N,C]=f.useState(null),w=f.useCallback(async()=>{try{g(!0);const[E,T,A,U,H]=await Promise.all([Wo(),Hn(),Oh(),ap(),on()]);a(E),c(T),d(A),u(U),j(H),T.length>0&&!y&&v(T[0].id)}catch(E){console.error("Failed to fetch academic data",E)}finally{g(!1)}},[y]);f.useEffect(()=>{w()},[]);const S=()=>{w(),h(null),C(null)},k=(E,T=null)=>{C(T),h(E)},D=[{id:"timetable",label:"Timetable",icon:Ho},{id:"subjects",label:"Subjects",icon:Ju},{id:"homework",label:"Homework",icon:ep}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Academic Management"}),s.jsx("div",{children:s.jsx("select",{value:y,onChange:E=>v(E.target.value),className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:o.map(E=>s.jsxs("option",{value:E.id,children:["Class ",E.name," - ",E.section]},E.id))})})]}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:D.map(E=>s.jsxs("button",{onClick:()=>r(E.id),className:`flex items-center gap-2 px-4 py-3 font-medium text-sm -mb-px border-b-2 ${n===E.id?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[s.jsx(E.icon,{className:"w-5 h-5"}),E.label]},E.id))}),s.jsx("div",{className:"p-6 min-h-[500px]",children:b?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading..."}):s.jsxs(s.Fragment,{children:[n==="timetable"&&s.jsx(Lg,{timetable:l,classes:o,selectedClassId:y,onEdit:E=>k("timetable",E),onAdd:()=>k("timetable"),isAdmin:t}),n==="subjects"&&s.jsx(Ag,{subjects:i,staff:p,onEdit:E=>k("subject",E),onAdd:()=>k("subject"),isAdmin:t}),n==="homework"&&s.jsx(Tg,{homework:m,classes:o,selectedClassId:y,onEdit:E=>k("homework",E),onAdd:()=>k("homework"),isAdmin:t})]})})]}),x==="timetable"&&s.jsx(kg,{onClose:()=>h(null),onSave:S,initialData:N}),x==="subject"&&s.jsx(Cg,{onClose:()=>h(null),onSave:S,initialData:N,teachers:p.filter(E=>E.role==="Teacher")}),x==="homework"&&s.jsx(Eg,{onClose:()=>h(null),onSave:S,initialData:N,classes:o,subjects:i})]})},Lg=({timetable:e,classes:t,selectedClassId:n,onEdit:r,onAdd:l,isAdmin:a})=>{const o=f.useMemo(()=>{var m;return((m=t.find(u=>u.id===n))==null?void 0:m.name)||""},[t,n]),c=f.useMemo(()=>e.filter(m=>m.class===o),[e,o]),i=f.useMemo(()=>{var u;const m={};for(const p of c)m[p.day]||(m[p.day]=[]),(u=m[p.day])==null||u.push(p);return Object.values(m).forEach(p=>{p&&p.sort((j,y)=>j.time.localeCompare(y.time))}),m},[c]),d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["Timetable: Class ",o]}),a&&s.jsx("button",{onClick:l,className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"Add Period"})]}),s.jsx("div",{className:"overflow-x-auto pb-4",children:s.jsx("div",{className:"flex space-x-4",children:d.filter(m=>{var u;return((u=i[m])==null?void 0:u.length)??!1}).map(m=>{var u;return s.jsxs("div",{className:"flex-shrink-0 w-60 bg-secondary p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-accent text-center mb-2",children:m}),s.jsx("div",{className:"space-y-2",children:(u=i[m])==null?void 0:u.map(p=>s.jsxs("div",{className:"bg-background p-2 rounded-md text-sm group relative",children:[a&&s.jsx("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:()=>r(p),className:"p-1 hover:bg-secondary rounded",children:s.jsx(Ye,{className:"w-3 h-3 text-yellow-400"})})}),s.jsxs("p",{className:"font-semibold text-text-primary",children:[Pg(p.time)," - ",p.subject]}),s.jsx("p",{className:"text-text-secondary",children:p.teacher})]},p.id))})]},m)})})})]})},Ag=({subjects:e,staff:t,onAdd:n,onEdit:r,isAdmin:l})=>{const a=f.useMemo(()=>new Map(t.map(o=>[o.id,o.name])),[t]);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Subject Management"}),l&&s.jsx("button",{onClick:n,className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"Add Subject"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Subject"}),s.jsx("th",{className:"px-4 py-2",children:"Teachers"}),s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(o=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-2 font-medium text-text-primary",children:o.name}),s.jsx("td",{className:"px-4 py-2",children:o.teacherIds.map(c=>a.get(c)).join(", ")}),s.jsx("td",{className:"px-4 py-2 flex gap-2",children:l&&s.jsx("button",{onClick:()=>r(o),className:"p-1 hover:bg-background rounded",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]},o.id))})]})})]})},Tg=({homework:e,classes:t,selectedClassId:n,onAdd:r,onEdit:l,isAdmin:a})=>{const o=f.useMemo(()=>{var i;return((i=t.find(d=>d.id===n))==null?void 0:i.name)||""},[t,n]),c=f.useMemo(()=>e.filter(i=>i.class===o),[e,o]);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["Homework: Class ",o]}),a&&s.jsx("button",{onClick:r,className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"New Homework"})]}),s.jsx("div",{className:"space-y-4",children:c.map(i=>s.jsx("div",{className:"bg-secondary p-4 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-accent font-semibold",children:i.subject}),s.jsx("h4",{className:"font-semibold text-text-primary",children:i.title}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:i.description})]}),s.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[s.jsxs("p",{className:"text-sm font-semibold text-text-primary",children:["Due: ",Dg(i.dueDate)]}),a&&s.jsx("div",{className:"flex gap-2 justify-end mt-2",children:s.jsx("button",{onClick:()=>l(i),className:"p-1 hover:bg-background rounded",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]})]})},i.id))})]})},Mg=({isOpen:e,onClose:t,onSave:n,selectedClass:r})=>{const[l,a]=f.useState({studentId:"",incidentType:"Misbehavior",description:"",actionTaken:""}),[o,c]=f.useState([]);if(f.useEffect(()=>{r&&ze({class:r.name,section:r.section}).then(m=>{c(m),m.length>0&&a(u=>({...u,studentId:m[0].id}))})},[r]),!e)return null;const i=m=>{a(u=>({...u,[m.target.name]:m.target.value}))},d=async m=>{m.preventDefault();const u=o.find(p=>p.id===l.studentId);!u||!r||(await qh({...l,studentName:u.name,class:r.name,date:new Date().toISOString().split("T")[0]}),n())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Log New Discipline Incident"}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Student"}),s.jsx("select",{name:"studentId",value:l.studentId,onChange:i,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:o.map(m=>s.jsx("option",{value:m.id,children:m.name},m.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Incident Type"}),s.jsxs("select",{name:"incidentType",value:l.incidentType,onChange:i,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:[s.jsx("option",{children:"Misbehavior"}),s.jsx("option",{children:"Uniform Violation"}),s.jsx("option",{children:"Late Submission"}),s.jsx("option",{children:"Other"})]})]}),s.jsx("textarea",{name:"description",placeholder:"Description of Incident",value:l.description,onChange:i,rows:3,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"text",name:"actionTaken",placeholder:"Action Taken (e.g., Verbal Warning)",value:l.actionTaken,onChange:i,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Log Incident"})]})]})]})})},zg=()=>{const[e,t]=f.useState("attendance"),[n,r]=f.useState([]),[l,a]=f.useState([]),[o,c]=f.useState([]),[i,d]=f.useState(!1),[m,u]=f.useState(""),[p,j]=f.useState(()=>{const w=new Date;return`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}-${String(w.getDate()).padStart(2,"0")}`}),[y,v]=f.useState(!1),[b,g]=f.useState(!1),x=f.useMemo(()=>o.find(w=>w.id===m),[o,m]),h=f.useCallback(async()=>{if(m){d(!0);try{const[w,S]=await Promise.all([Wh(m,p),op()]);r(w),a(S),g(!1)}catch(w){console.error("Failed to fetch data",w)}finally{d(!1)}}},[m,p]);f.useEffect(()=>{Hn().then(w=>{c(w),w.length>0&&u(w[0].id)})},[]),f.useEffect(()=>{h()},[h]);const N=async()=>{if(m){d(!0);try{await Vh(m,p,n),alert("Attendance saved successfully!"),g(!1)}catch{alert("Failed to save attendance. Please try again.")}finally{d(!1)}}},C=[{id:"attendance",label:"Attendance",icon:Bo},{id:"discipline",label:"Discipline",icon:Br}];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Attendance & Discipline"}),s.jsx("div",{className:"bg-primary p-4 rounded-lg shadow-lg flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mr-2",children:"Class"}),s.jsx("select",{value:m,onChange:w=>u(w.target.value),className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:o.map(w=>s.jsxs("option",{value:w.id,children:[w.name," - ",w.section]},w.id))})]}),e==="attendance"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mr-2",children:"Date"}),s.jsx("input",{type:"date",value:p,onChange:w=>j(w.target.value),className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]})]})}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:C.map(w=>s.jsxs("button",{onClick:()=>t(w.id),className:`flex items-center gap-2 px-4 py-3 font-medium text-sm -mb-px border-b-2 ${e===w.id?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:[s.jsx(w.icon,{className:"w-5 h-5"}),w.label]},w.id))}),s.jsx("div",{className:"p-6 min-h-[500px]",children:i?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading..."}):s.jsxs(s.Fragment,{children:[e==="attendance"&&s.jsx(Fg,{attendance:n,setAttendance:r,onSave:N,isDirty:b,setIsDirty:g}),e==="discipline"&&s.jsx(Rg,{incidents:l,selectedClass:x,onAddIncident:()=>v(!0)})]})})]}),y&&s.jsx(Mg,{isOpen:y,onClose:()=>v(!1),onSave:()=>{h(),v(!1)},selectedClass:x||null})]})},Fg=({attendance:e,setAttendance:t,onSave:n,isDirty:r,setIsDirty:l})=>{const a=f.useMemo(()=>e.reduce((d,m)=>(m.status==="Present"?d.present++:m.status==="Absent"?d.absent++:m.status==="Late"&&d.late++,d),{present:0,absent:0,late:0}),[e]),o=(d,m)=>{t(u=>u.map(p=>p.studentId===d?{...p,status:m}:p)),l(!0)},c=(d,m)=>{t(u=>u.map(p=>p.studentId===d?{...p,remark:m}:p)),l(!0)},i=()=>{t(d=>d.map(m=>({...m,status:"Present"}))),l(!0)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-text-primary",children:e.length}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Total Students"})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-green-400",children:a.present}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Present"})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-red-400",children:a.absent}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Absent"})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg text-center",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:a.late}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Late"})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:i,className:"bg-secondary text-text-primary px-3 py-1.5 text-sm rounded-lg font-semibold hover:bg-secondary/80",children:"Mark All Present"}),r&&s.jsx("button",{onClick:n,className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 animate-bounce",children:"Save Attendance"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Remarks"})]})}),s.jsx("tbody",{children:e.map(d=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("td",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap",children:[d.studentName," (",d.studentId,")"]}),s.jsx("td",{className:"px-6 py-4 flex justify-center gap-2",children:["Present","Absent","Late"].map(m=>s.jsx("button",{onClick:()=>o(d.studentId,m),className:`px-3 py-1 text-xs font-medium rounded-full transition-all ${d.status===m?m==="Present"?"bg-green-500 text-white shadow-md scale-105":m==="Absent"?"bg-red-500 text-white shadow-md scale-105":"bg-yellow-500 text-white shadow-md scale-105":"bg-secondary text-text-secondary hover:bg-opacity-70"}`,children:m},m))}),s.jsx("td",{className:"px-6 py-4",children:d.status==="Absent"||d.status==="Late"?s.jsx("input",{type:"text",placeholder:"Add a remark...",value:d.remark||"",onChange:m=>c(d.studentId,m.target.value),className:"w-full bg-background p-1.5 rounded-md text-text-primary text-xs focus:outline-none focus:ring-1 focus:ring-accent"}):s.jsx("span",{className:"text-xs text-text-secondary italic",children:"N/A"})})]},d.studentId))})]})})]})},Rg=({incidents:e,selectedClass:t,onAddIncident:n})=>{const r=f.useMemo(()=>t?e.filter(l=>l.class===t.name):[],[e,t]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["Discipline Log: Class ",t==null?void 0:t.name]}),s.jsx("button",{onClick:n,className:"bg-accent text-white px-3 py-1.5 rounded-lg font-semibold hover:bg-accent/90 text-sm",children:"Log New Incident"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Student"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Incident Type"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action Taken"})]})}),s.jsx("tbody",{children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center py-4",children:"No incidents logged for this class."})}):r.map(l=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:l.studentName}),s.jsx("td",{className:"px-6 py-4",children:l.date}),s.jsx("td",{className:"px-6 py-4",children:l.incidentType}),s.jsx("td",{className:"px-6 py-4 text-xs max-w-xs truncate",children:l.description}),s.jsx("td",{className:"px-6 py-4 font-medium",children:l.actionTaken})]},l.id))})]})})]})},_g=({isOpen:e,onClose:t,onSuccess:n,studentStatus:r,year:l,month:a})=>{const[o,c]=f.useState(()=>r.breakdown.filter(j=>!j.paid).map(j=>j.type)),[i,d]=f.useState(!1),m=j=>{c(y=>y.includes(j)?y.filter(v=>v!==j):[...y,j])},u=f.useMemo(()=>r.breakdown.filter(j=>o.includes(j.type)).reduce((j,y)=>j+y.amount,0),[o,r]),p=async()=>{if(o.length!==0){d(!0);try{const j=await Ah(r.studentId,o,l,a),y=Ke(),v=window.open("","_blank"),b=j.breakdown.filter(x=>o.includes(x.type)).map(x=>`
                <tr>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; color: #1E5631;">${x.type}</td>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: right; font-weight: bold;">${x.amount.toLocaleString()}</td>
                </tr>
            `).join(""),g=`
            <html><head><title>Fee Receipt - ${r.studentId}</title>
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
            <style>
              @media print {
                html, body {
                  -webkit-print-color-adjust: exact !important;
                  print-color-adjust: exact !important;
                  height: 100%;
                  overflow: hidden;
                }
                @page {
                    size: A4;
                    margin: 0; 
                }
              }
              body { font-family: 'Playfair Display', serif; color: #1E3A29; margin: 0; padding: 20px; background-color: #fff; box-sizing: border-box; }
              .container {
                border: 3px solid #1E5631;
                outline: 1px solid #D4AF37;
                outline-offset: -5px;
                padding: 25px;
                max-width: 800px;
                margin: 0 auto;
                position: relative;
                background-color: #fdfbf7;
                height: 95vh;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
              }
              .watermark { 
                position: absolute;
                top: 50%; left: 50%;
                transform: translate(-50%, -50%);
                opacity: 0.06;
                background-image: url('${y.logo}');
                background-repeat: no-repeat;
                background-position: center;
                background-size: contain;
                width: 60%; height: 60%;
                z-index: 0;
              }
              .bismillah {
                text-align: center; font-family: 'Amiri', serif; font-size: 18px; color: #1E5631; margin-bottom: 5px;
              }
              .header {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                border-bottom: 2px solid #D4AF37;
                padding-bottom: 10px;
                margin-bottom: 15px;
                position: relative; 
                z-index: 1;
              }
              .header img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #D4AF37; }
              .header-text { text-align: center; }
              .header h1 { font-family: 'Cinzel', serif; margin: 0; color: #1E5631; font-size: 22px; text-shadow: 1px 1px 0 #D4AF37; }
              .header p { margin: 2px 0 0; font-style: italic; color: #555; font-size: 12px; }
              
              .receipt-title {
                text-align: center; font-family: 'Cinzel', serif; font-size: 18px; color: #D4AF37; 
                margin-bottom: 20px; font-weight: bold; text-decoration: underline; text-underline-offset: 4px;
              }
              
              .info-grid {
                display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; position: relative; z-index: 1; font-size: 14px;
              }
              .label { font-weight: bold; color: #1E5631; margin-right: 5px; }
              
              table { width: 100%; border-collapse: collapse; margin-bottom: auto; position: relative; z-index: 1; font-size: 14px; }
              th { 
                background-color: #1E5631; color: #D4AF37; padding: 8px; text-align: left; 
                font-family: 'Cinzel', serif; border: 1px solid #D4AF37; font-size: 12px;
              }
              
              .total-row { background-color: #1E5631; color: #fff; font-weight: bold; }
              .total-row td { padding: 8px 10px; border: 1px solid #D4AF37; }
              
              .footer-info { 
                margin-top: 20px; border-top: 1px solid #D4AF37; padding-top: 10px;
                display: flex; justify-content: space-between; font-size: 12px; position: relative; z-index: 1;
              }
            </style>
            </head>
            <body>
                <div class="container">
                    <div class="watermark"></div>
                    <div class="bismillah">   </div>
                    
                    <div class="header">
                        <img src="${y.logo}" alt="logo">
                        <div class="header-text">
                            <h1>${y.name}</h1>
                            <p>${y.address}</p>
                        </div>
                    </div>
                    
                    <div class="receipt-title">Payment Receipt</div>
                    
                    <div class="info-grid">
                        <div class="info-item"><span class="label">Date:</span> ${new Date().toLocaleDateString()}</div>
                        <div class="info-item"><span class="label">Receipt No:</span> #${Date.now().toString().slice(-6)}</div>
                        <div class="info-item"><span class="label">Student Name:</span> ${r.studentName}</div>
                        <div class="info-item"><span class="label">Student ID:</span> ${r.studentId}</div>
                        <div class="info-item"><span class="label">Month:</span> ${new Date(l,a-1).toLocaleString("default",{month:"long",year:"numeric"})}</div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th style="text-align: right;">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${b}
                            <tr class="total-row">
                                <td>Total Paid</td>
                                <td style="text-align: right; color: #D4AF37;">${u.toLocaleString()}</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="footer-info">
                        <div>Status: <span style="font-weight: bold; color: #1E5631;">${j.status.toUpperCase()}</span></div>
                        <div>Authorized Signature</div>
                    </div>
                </div>
                <script>
                    window.onload = function() {
                        setTimeout(function() {
                            window.print();
                            window.close();
                        }, 500);
                    }
                <\/script>
            </body></html>
        `;v==null||v.document.write(g),v==null||v.document.close(),n(j)}catch(j){console.error("Failed to collect fee",j),alert("An error occurred during payment collection. Please check your connection and try again.")}finally{d(!1)}}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-2 text-text-primary",children:["Collect Fees: ",r.studentName]}),s.jsxs("p",{className:"text-text-secondary mb-6",children:["For ",new Date(l,a-1).toLocaleString("default",{month:"long",year:"numeric"})]}),s.jsx("div",{className:"space-y-2 mb-4",children:r.breakdown.map(j=>s.jsxs("div",{className:`p-3 rounded-md flex justify-between items-center ${j.paid?"bg-green-500/10":"bg-secondary"}`,children:[s.jsxs("label",{className:"flex items-center gap-3 text-text-primary",children:[s.jsx("input",{type:"checkbox",checked:j.paid||o.includes(j.type),disabled:j.paid,onChange:()=>m(j.type),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent disabled:opacity-50"}),j.type]}),s.jsxs("span",{className:j.paid?"text-green-400":"text-text-primary",children:["",j.amount.toLocaleString()," ",j.paid&&"(Paid)"]})]},j.type))}),s.jsxs("div",{className:"text-right font-bold text-xl text-text-primary mb-6",children:["Total to Pay: ",u.toLocaleString()]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{onClick:p,disabled:u===0||i,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold flex items-center gap-2 disabled:bg-gray-500",children:i?"Processing...":s.jsxs(s.Fragment,{children:[s.jsx(Bn,{className:"w-4 h-4"})," Collect & Print"]})})]})]})}):null},Og=({isOpen:e,onClose:t,onSuccess:n,staffStatus:r,year:l,month:a})=>{const[o,c]=f.useState(!1),i=async()=>{c(!0);try{const d=await Th(r.staffId,r.salaryAmount,l,a),m=Ke(),u=window.open("","_blank"),p=`
            <html><head><title>Salary Slip - ${r.staffName}</title>
            <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
            <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
            <style>
              @media print {
                  html, body {
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                    height: 100%;
                    overflow: hidden;
                  }
                  @page { size: A4; margin: 0; }
              }
              body { font-family: 'Playfair Display', serif; color: #1E3A29; margin: 0; padding: 20px; box-sizing: border-box; background-color: #fff;}
              .container {
                border: 3px solid #1E5631;
                outline: 1px solid #D4AF37;
                outline-offset: -5px;
                padding: 30px;
                max-width: 800px;
                margin: 0 auto;
                position: relative;
                background-color: #fdfbf7;
                height: 95vh;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
              }
              .watermark { 
                position: absolute;
                top: 50%; left: 50%;
                transform: translate(-50%, -50%);
                opacity: 0.06;
                background-image: url('${m.logo}');
                background-repeat: no-repeat;
                background-position: center;
                background-size: contain;
                width: 60%; height: 60%;
                z-index: 0;
              }
              .bismillah {
                text-align: center; font-family: 'Amiri', serif; font-size: 18px; color: #1E5631; margin-bottom: 5px;
              }
              .header {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                border-bottom: 2px solid #D4AF37;
                padding-bottom: 10px;
                margin-bottom: 20px;
                position: relative; 
                z-index: 1;
              }
              .header img { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #D4AF37; }
              .header-text { text-align: center; }
              .header h1 { font-family: 'Cinzel', serif; margin: 0; color: #1E5631; font-size: 22px; text-shadow: 1px 1px 0 #D4AF37; }
              
              .slip-title {
                text-align: center; font-family: 'Cinzel', serif; font-size: 18px; color: #D4AF37; 
                margin-bottom: 25px; font-weight: bold; text-decoration: underline; text-underline-offset: 4px;
              }

              .info-box {
                border: 1px solid #D4AF37; padding: 20px; position: relative; z-index: 1;
                margin-bottom: auto; background-color: rgba(255,255,255,0.7);
              }
              .row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; }
              .label { font-weight: bold; color: #1E5631; }

              .amount-box {
                background-color: #1E5631; color: white; padding: 15px; text-align: center;
                border: 2px solid #D4AF37; margin-bottom: 30px; position: relative; z-index: 1;
              }
              .amount-label { font-family: 'Cinzel', serif; font-size: 12px; text-transform: uppercase; color: #D4AF37; margin-bottom: 5px; }
              .amount-value { font-family: 'Playfair Display', serif; font-size: 28px; font-weight: bold; }

              .footer { 
                margin-top: 20px; border-top: 1px solid #D4AF37; padding-top: 10px;
                display: flex; justify-content: space-between; font-size: 12px; position: relative; z-index: 1;
              }
            </style>
            </head>
            <body>
                <div class="container">
                    <div class="watermark"></div>
                    <div class="bismillah">   </div>
                    
                     <div class="header">
                        <img src="${m.logo}" alt="logo">
                        <div class="header-text">
                            <h1>${m.name}</h1>
                        </div>
                    </div>
                    
                    <div class="slip-title">Salary Slip</div>
                    
                    <div class="info-box">
                        <div class="row"><span class="label">Date:</span> ${new Date().toLocaleDateString()}</div>
                        <div class="row"><span class="label">Transaction ID:</span> TXN-${Date.now().toString().slice(-8)}</div>
                        <div class="row"><span class="label">Staff Name:</span> ${r.staffName}</div>
                        <div class="row"><span class="label">Staff ID:</span> ${r.staffId}</div>
                        <div class="row"><span class="label">Role:</span> ${r.role}</div>
                        <div class="row"><span class="label">Salary Month:</span> ${new Date(l,a-1).toLocaleString("default",{month:"long",year:"numeric"})}</div>
                    </div>
                    
                    <div class="amount-box">
                        <div class="amount-label">Net Salary Paid</div>
                        <div class="amount-value">${r.salaryAmount.toLocaleString()}</div>
                    </div>
                    
                    <div class="footer">
                        <div>Status: <span style="font-weight: bold; color: #1E5631;">PAID</span></div>
                        <div>Authorized Signature</div>
                    </div>
                </div>
                <script>
                    window.onload = function() {
                        setTimeout(function() {
                             window.print();
                             window.close();
                        }, 500);
                    }
                <\/script>
            </body></html>
        `;u==null||u.document.write(p),u==null||u.document.close(),n(d)}catch(d){console.error("Failed to pay salary",d),alert("An error occurred during salary payment. Please check your connection and try again.")}finally{c(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2 text-text-primary",children:"Confirm Salary Payment"}),s.jsxs("p",{className:"text-text-secondary mb-6",children:["For ",new Date(l,a-1).toLocaleString("default",{month:"long",year:"numeric"})]}),s.jsxs("div",{className:"bg-secondary p-4 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-text-secondary",children:[s.jsx("p",{children:"Staff Member:"}),s.jsx("p",{className:"font-semibold text-text-primary",children:r.staffName})]}),s.jsxs("div",{className:"flex justify-between text-text-secondary",children:[s.jsx("p",{children:"Amount:"}),s.jsxs("p",{className:"font-semibold text-text-primary",children:["",r.salaryAmount.toLocaleString()]})]})]}),s.jsxs("div",{className:"mt-8 flex justify-between",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{onClick:i,disabled:o,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold flex items-center gap-2 disabled:bg-gray-500",children:o?"Processing...":s.jsxs(s.Fragment,{children:[s.jsx(Bn,{className:"w-4 h-4"})," Pay & Print"]})})]})]})}):null},$g=({isOpen:e,onClose:t,onSuccess:n})=>{const[r,l]=f.useState("Utilities"),[a,o]=f.useState(""),[c,i]=f.useState(""),[d,m]=f.useState(!1);if(!e)return null;const u=async p=>{p.preventDefault(),m(!0);try{const j=await Ih({category:r,description:a,amount:parseFloat(c)});n(j)}catch(j){console.error("Failed to log expense",j),alert("Could not log expense. Please try again.")}finally{m(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Log New Expense"}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("select",{value:r,onChange:p=>l(p.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:[s.jsx("option",{children:"Utilities"}),s.jsx("option",{children:"Maintenance"}),s.jsx("option",{children:"Supplies"}),s.jsx("option",{children:"Other"})]}),s.jsx("input",{type:"text",placeholder:"Description",value:a,onChange:p=>o(p.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"number",placeholder:"Amount",value:c,onChange:p=>i(p.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold disabled:bg-gray-500",children:d?"Saving...":"Log Expense"})]})]})]})})},Ug=()=>{const[e,t]=f.useState("fees"),[n,r]=f.useState(new Date),[l,a]=f.useState(!0),[o,c]=f.useState(""),[i,d]=f.useState([]),[m,u]=f.useState([]),[p,j]=f.useState([]),[y,v]=f.useState(null),[b,g]=f.useState(null),[x,h]=f.useState(!1),N=f.useCallback(async()=>{try{a(!0);const A=n.getFullYear(),U=n.getMonth()+1,[H,_t,ft]=await Promise.all([ul(A,U),Lh(A,U),Dh(A,U)]);d(H),u(_t),j(ft)}catch(A){console.error("Failed to fetch finance data",A)}finally{a(!1)}},[n]);f.useEffect(()=>{N()},[N]);const C=A=>{const[U,H]=A.target.value.split("-").map(Number);r(new Date(U,H-1,5)),c("")},w=A=>{d(U=>U.map(H=>H.studentId===A.studentId?A:H)),v(null)},S=A=>{u(U=>U.map(H=>H.staffId===A.staffId?A:H)),g(null)},k=A=>{j(U=>[A,...U]),h(!1)},D=f.useMemo(()=>o?i.filter(A=>A.studentName.toLowerCase().includes(o.toLowerCase())||A.studentId.toLowerCase().includes(o.toLowerCase())):i,[i,o]),E=f.useMemo(()=>o?m.filter(A=>A.staffName.toLowerCase().includes(o.toLowerCase())||A.staffId.toLowerCase().includes(o.toLowerCase())):m,[m,o]),T=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Financial Management"}),s.jsxs("div",{className:"bg-primary p-4 rounded-lg shadow-lg flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("label",{htmlFor:"month-select",className:"font-semibold text-text-primary",children:"Select Month:"}),s.jsx("input",{type:"month",id:"month-select",value:T,onChange:C,className:"bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]}),s.jsx("div",{className:"flex-grow max-w-sm",children:s.jsx("input",{type:"text",placeholder:"Search by name or ID...",value:o,onChange:A=>c(A.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})}),s.jsx("button",{onClick:()=>h(!0),className:"bg-secondary text-text-primary px-4 py-2 rounded-lg font-semibold hover:bg-secondary/80",children:"Log Expense"})]}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:["fees","salaries","expenses"].map(A=>s.jsx("button",{onClick:()=>{t(A),c("")},className:`px-4 py-3 font-medium text-sm -mb-px border-b-2 ${e===A?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))}),s.jsx("div",{className:"overflow-x-auto",children:l?s.jsx("p",{className:"text-center py-8 text-text-secondary",children:"Loading financial data..."}):s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[e==="fees"&&s.jsx(Bg,{feeStatus:D,onCollect:v}),e==="salaries"&&s.jsx(Hg,{salaryStatus:E,onPay:g}),e==="expenses"&&s.jsx(Wg,{expenses:p})]})})]}),y&&s.jsx(_g,{studentStatus:y,isOpen:!!y,onClose:()=>v(null),onSuccess:w,year:n.getFullYear(),month:n.getMonth()+1}),b&&s.jsx(Og,{staffStatus:b,isOpen:!!b,onClose:()=>g(null),onSuccess:S,year:n.getFullYear(),month:n.getMonth()+1}),x&&s.jsx($g,{isOpen:x,onClose:()=>h(!1),onSuccess:k})]})},Bg=({feeStatus:e,onCollect:t})=>s.jsxs(s.Fragment,{children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Student"}),s.jsx("th",{className:"px-6 py-3",children:"Class"}),s.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("td",{className:"px-6 py-4 font-medium text-text-primary",children:[n.studentName," ",s.jsxs("span",{className:"text-text-secondary",children:["(",n.studentId,")"]})]}),s.jsxs("td",{className:"px-6 py-4",children:[n.class,"-",n.section]}),s.jsx("td",{className:"px-6 py-4",children:n.status==="Unpaid"&&s.jsx("button",{onClick:()=>t(n),className:"bg-accent text-white px-3 py-1 rounded-md text-xs font-semibold hover:bg-accent/90",children:"Collect"})})]},n.studentId))})]}),Hg=({salaryStatus:e,onPay:t})=>s.jsxs(s.Fragment,{children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Staff"}),s.jsx("th",{className:"px-6 py-3",children:"Role"}),s.jsx("th",{className:"px-6 py-3",children:"Salary"}),s.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsxs("td",{className:"px-6 py-4 font-medium text-text-primary",children:[n.staffName," ",s.jsxs("span",{className:"text-text-secondary",children:["(",n.staffId,")"]})]}),s.jsx("td",{className:"px-6 py-4",children:n.role}),s.jsxs("td",{className:"px-6 py-4",children:["",n.salaryAmount.toLocaleString()]}),s.jsx("td",{className:"px-6 py-4",children:n.status!=="Paid"&&s.jsx("button",{onClick:()=>t(n),className:"bg-accent text-white px-3 py-1 rounded-md text-xs font-semibold hover:bg-accent/90",children:"Pay"})})]},n.staffId))})]}),Wg=({expenses:e})=>s.jsxs(s.Fragment,{children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Date"}),s.jsx("th",{className:"px-6 py-3",children:"Category"}),s.jsx("th",{className:"px-6 py-3",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-right",children:"Amount"})]})}),s.jsx("tbody",{children:e.map(t=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4",children:new Date(t.date).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:t.category}),s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:t.description}),s.jsxs("td",{className:"px-6 py-4 font-semibold text-red-400 text-right",children:["",t.amount.toLocaleString()]})]},t.id))})]}),Vg=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[l,a]=f.useState(!1),[o,c]=f.useState(""),[i,d]=f.useState(""),m=async()=>{try{r(!0);const p=await zh();t(p.sort((j,y)=>new Date(y.date).getTime()-new Date(j.date).getTime()))}catch(p){console.error("Failed to fetch notices",p)}finally{r(!1)}};f.useEffect(()=>{m()},[]);const u=async p=>{if(!o||!i){alert("Please fill in both title and content.");return}a(!0);try{const j=`*${o.trim()}*

${i.trim()}`,v=`https://wa.me/?text=${encodeURIComponent(j)}`;window.open(v,"_blank"),await Fh({title:o,content:i}),alert(`Your announcement has been prepared for sending to "${p}". Please complete the action in WhatsApp.

The notice has also been saved to the system log.`),c(""),d(""),m()}catch(j){console.error("Failed to send announcement",j),alert("Could not process the announcement. Please try again.")}finally{a(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Communication System"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"New Announcement"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"text",placeholder:"Title",value:o,onChange:p=>c(p.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsx("textarea",{placeholder:"Content",value:i,onChange:p=>d(p.target.value),rows:5,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsxs("div",{className:"border-t border-secondary pt-4 space-y-3",children:[s.jsx("h4",{className:"text-base font-semibold text-text-secondary text-center",children:"Send via WhatsApp"}),s.jsxs("button",{onClick:()=>u("all"),disabled:l||!o||!i,className:"w-full bg-accent text-white px-4 py-2.5 rounded-lg font-semibold hover:bg-accent/90 transition-colors flex items-center justify-center gap-2 disabled:bg-secondary disabled:cursor-not-allowed",children:[s.jsx(Qu,{className:"w-5 h-5"}),"Send to All"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>u("students"),disabled:l||!o||!i,className:"w-full bg-secondary text-text-primary px-4 py-2.5 rounded-lg font-semibold hover:bg-secondary/80 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(tn,{className:"w-5 h-5"}),"To Students"]}),s.jsxs("button",{onClick:()=>u("staff"),disabled:l||!o||!i,className:"w-full bg-secondary text-text-primary px-4 py-2.5 rounded-lg font-semibold hover:bg-secondary/80 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(tn,{className:"w-5 h-5"}),"To Staff"]})]})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Sent Notices"}),s.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:n?s.jsx("p",{children:"Loading notices..."}):e.map(p=>s.jsxs("div",{className:"p-4 bg-secondary rounded-md",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:p.title}),s.jsx("span",{className:"text-sm text-text-secondary",children:new Date(p.date).toISOString().split("T")[0]})]}),s.jsx("p",{className:"text-text-secondary mt-1 whitespace-pre-wrap",children:p.content})]},p.id))})]})]})]})},qg=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[l,a]=f.useState({vehicleNumber:"",route:"",driverName:"",driverContact:""});if(f.useEffect(()=>{a(r?{vehicleNumber:r.vehicleNumber,route:r.route,driverName:r.driverName,driverContact:r.driverContact}:{vehicleNumber:"",route:"",driverName:"",driverContact:""})},[r]),!e)return null;const o=i=>{a({...l,[i.target.name]:i.target.value})},c=i=>{i.preventDefault(),n(r?{...r,...l}:l)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Vehicle"]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"vehicleNumber",placeholder:"Vehicle Number (e.g., BUS-101)",value:l.vehicleNumber,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"route",placeholder:"Route (e.g., North Route)",value:l.route,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"driverName",placeholder:"Driver's Name",value:l.driverName,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"tel",name:"driverContact",placeholder:"Driver's Contact",value:l.driverContact,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Vehicle"})]})]})]})})},Gg=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[l,a]=f.useState(!1),[o,c]=f.useState(null),i=f.useCallback(async()=>{try{r(!0);const p=await Gh();t(p)}catch(p){console.error("Failed to fetch vehicle data",p)}finally{r(!1)}},[]);f.useEffect(()=>{i()},[i]);const d=async p=>{"id"in p?await Yh(p):await Qh(p),i(),u()},m=(p=null)=>{c(p),a(!0)},u=()=>{c(null),a(!1)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Transport Management"}),s.jsxs("button",{onClick:()=>m(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(_a,{className:"w-5 h-5"}),"Add New Vehicle"]})]}),n?s.jsx("p",{className:"text-center text-text-secondary mt-8",children:"Loading transport data..."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(p=>s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg relative group",children:[s.jsx("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:()=>m(p),className:"p-2 bg-secondary rounded-full hover:bg-background",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-3 bg-accent/20 rounded-full mr-4",children:s.jsx(_a,{className:"w-6 h-6 text-accent"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:p.vehicleNumber}),s.jsx("p",{className:"text-text-secondary",children:p.route})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between p-3 bg-secondary rounded-md",children:[s.jsx("span",{className:"font-medium text-text-secondary",children:"Driver:"}),s.jsx("span",{className:"text-text-primary",children:p.driverName})]}),s.jsxs("div",{className:"flex justify-between p-3 bg-secondary rounded-md",children:[s.jsx("span",{className:"font-medium text-text-secondary",children:"Contact:"}),s.jsx("span",{className:"text-text-primary",children:p.driverContact})]})]})]},p.id))}),l&&s.jsx(qg,{isOpen:l,onClose:u,onSave:d,initialData:o})]})},Qg=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[l,a]=f.useState({name:"",category:"",quantity:0,status:"In Stock",date:new Date().toISOString().split("T")[0]});if(f.useEffect(()=>{a(r?{name:r.name,category:r.category,quantity:r.quantity,status:r.status,date:r.date||new Date().toISOString().split("T")[0]}:{name:"",category:"",quantity:0,status:"In Stock",date:new Date().toISOString().split("T")[0]})},[r]),!e)return null;const o=i=>{const{name:d,value:m}=i.target;a({...l,[d]:d==="quantity"?parseInt(m,10):m})},c=i=>{i.preventDefault(),n(r?{...r,...l}:l)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," Inventory Item"]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Item Name",value:l.name,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"category",placeholder:"Category (e.g., Furniture, Books)",value:l.category,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"number",name:"quantity",placeholder:"Quantity",value:l.quantity,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,min:"0"}),s.jsxs("select",{name:"status",value:l.status,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:[s.jsx("option",{value:"In Stock",children:"In Stock"}),s.jsx("option",{value:"Low Stock",children:"Low Stock"}),s.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Purchase/Entry Date"}),s.jsx("input",{type:"date",name:"date",value:l.date,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Add Item"})]})]})]})})},Yg=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]}catch{return e}},Kg=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[l,a]=f.useState(!1),[o,c]=f.useState(null),i=f.useCallback(async()=>{try{r(!0);const p=await Kh();t(p)}catch(p){console.error("Failed to fetch inventory data",p)}finally{r(!1)}},[]);f.useEffect(()=>{i()},[i]);const d=async p=>{"id"in p?await Xh(p):await Zh(p),i(),u()},m=(p=null)=>{c(p),a(!0)},u=()=>{c(null),a(!1)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Inventory & Asset Management"}),s.jsxs("button",{onClick:()=>m(),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(Yu,{className:"w-5 h-5"}),"Add New Item"]})]}),s.jsx("div",{className:"overflow-x-auto bg-primary rounded-lg shadow-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Item Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Category"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Quantity"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-4",children:"Loading inventory..."})}):e.map(p=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:p.name}),s.jsx("td",{className:"px-6 py-4",children:p.category}),s.jsx("td",{className:"px-6 py-4",children:p.quantity}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${p.status==="In Stock"?"bg-green-500/20 text-green-400":p.status==="Low Stock"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:p.status})}),s.jsx("td",{className:"px-6 py-4",children:Yg(p.date)}),s.jsx("td",{className:"px-6 py-4 flex items-center gap-4",children:s.jsx("button",{onClick:()=>m(p),className:"p-1 hover:bg-background rounded",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]},p.id))})]})}),l&&s.jsx(Qg,{isOpen:l,onClose:u,onSave:d,initialData:o})]})},Zg=({onClose:e,onSave:t,initialData:n})=>{const[r,l]=f.useState({title:(n==null?void 0:n.title)||"",class:(n==null?void 0:n.class)||"",subject:(n==null?void 0:n.subject)||"",date:(n==null?void 0:n.date)||"",time:(n==null?void 0:n.time)||""}),[a,o]=f.useState([]);f.useEffect(()=>{Hn().then(d=>{o(d),!n&&d.length>0&&l(m=>({...m,class:d[0].name}))})},[n]);const c=d=>{const{name:m,value:u}=d.target;l(p=>({...p,[m]:u}))},i=async d=>{d.preventDefault(),n?await eg({...r,id:n.id}):await Jh(r),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[n?"Edit":"Add"," Exam"]}),s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"title",placeholder:"Exam Title (e.g., Mid-Term)",value:r.title,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("select",{name:"class",value:r.class,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0,children:[s.jsx("option",{value:"",children:"Select Class"}),a.map(d=>s.jsxs("option",{value:d.name,children:[d.name," - ",d.section]},d.id))]}),s.jsx("input",{type:"text",name:"subject",placeholder:"Subject",value:r.subject,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"date",name:"date",value:r.date,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0}),s.jsx("input",{type:"time",name:"time",value:r.time,onChange:c,className:"w-full bg-secondary p-3 rounded-md text-text-primary",required:!0})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},Xg=e=>{if(!e)return"TBA";if(/^\d{1,2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),l=new Date;return l.setHours(n,r,0,0),l.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},Jg=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ey=({isOpen:e,onClose:t,allExams:n})=>{const[r,l]=f.useState(""),[a,o]=f.useState(""),[c,i]=f.useState([]),[d,m]=f.useState(!1),u=f.useMemo(()=>Array.from(new Set(n.map(y=>y.title))),[n]),p=f.useMemo(()=>r?Array.from(new Set(n.filter(y=>y.title===r).map(y=>y.class))):[],[n,r]);f.useEffect(()=>{(async()=>{if(r&&a){m(!0);try{const v=await ze({class:a}),b=new Date,g=await ul(b.getFullYear(),b.getMonth()+1),x=v.map(h=>{const N=g.find(w=>w.studentId===h.id),C=N?N.status==="Paid"||N.totalDue<=0:!1;return{student:h,isEligible:C,feeStatus:N?N.status:"Unknown"}});i(x)}catch(v){console.error("Error fetching data for admit cards",v)}finally{m(!1)}}else i([])})()},[r,a]);const j=y=>{const v=Ke(),g=n.filter(N=>N.title===r&&N.class===a).sort((N,C)=>new Date(N.date).getTime()-new Date(C.date).getTime()).map(N=>`
            <tr>
                <td style="padding: 5px; border: 1px solid #D4AF37; text-align: center;">${Jg(N.date)}</td>
                <td style="padding: 5px; border: 1px solid #D4AF37; text-align: center;">${Xg(N.time)}</td>
                <td style="padding: 5px; border: 1px solid #D4AF37; font-weight: bold;">${N.subject}</td>
            </tr>
        `).join(""),x=window.open("","_blank"),h=`
            <html>
            <head>
                <title>Admit Card - ${y.name}</title>
                <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
                <style>
                    @media print {
                        @page { size: A4 portrait; margin: 0; }
                        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                    }
                    body {
                        font-family: 'Playfair Display', serif;
                        background-color: #fff;
                        margin: 0;
                        padding: 20px;
                        color: #1E3A29;
                    }
                    .card {
                        border: 3px solid #1E5631;
                        outline: 2px solid #D4AF37;
                        outline-offset: -6px;
                        padding: 20px;
                        margin: 0 auto 20px auto;
                        max-width: 700px;
                        position: relative;
                        background: #fdfbf7;
                    }
                    .watermark {
                        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                        width: 300px; height: 300px;
                        background-image: url('${v.logo}');
                        background-size: contain; background-repeat: no-repeat; background-position: center;
                        opacity: 0.05; z-index: 0;
                    }
                    .header { text-align: center; border-bottom: 2px solid #D4AF37; padding-bottom: 10px; margin-bottom: 15px; position: relative; z-index: 1; }
                    .header img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #1E5631; display: block; margin: 0 auto 5px; }
                    .header h1 { font-family: 'Cinzel', serif; font-size: 24px; color: #1E5631; margin: 0; text-transform: uppercase; }
                    .header p { font-size: 12px; margin: 2px 0; color: #555; }
                    .admit-title {
                        background-color: #1E5631; color: #D4AF37; display: inline-block;
                        padding: 5px 20px; border-radius: 20px; font-family: 'Cinzel', serif;
                        font-weight: bold; font-size: 16px; margin-top: 5px;
                        border: 1px solid #D4AF37;
                    }
                    
                    .candidate-box {
                        display: flex; gap: 20px; margin-bottom: 15px; position: relative; z-index: 1;
                        border: 1px solid #D4AF37; padding: 10px; background: rgba(255,255,255,0.5);
                    }
                    .photo-frame {
                        width: 100px; height: 100px; border: 2px solid #1E5631;
                        display: flex; align-items: center; justify-content: center; background: #fff;
                    }
                    .photo-frame img { width: 100%; height: 100%; object-fit: cover; }
                    .details { flex: 1; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; font-size: 14px; }
                    .label { font-weight: bold; color: #1E5631; }
                    
                    table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 12px; position: relative; z-index: 1; }
                    th { background-color: #1E5631; color: #fff; padding: 5px; border: 1px solid #D4AF37; font-family: 'Cinzel', serif; }
                    
                    .instructions { font-size: 10px; margin-bottom: 30px; position: relative; z-index: 1; }
                    .instructions h4 { margin: 0 0 5px 0; color: #1E5631; border-bottom: 1px solid #D4AF37; display: inline-block; }
                    .instructions ul { margin: 0; padding-left: 20px; }
                    
                    .footer { display: flex; justify-content: space-between; margin-top: 40px; position: relative; z-index: 1; }
                    .sig-line { border-top: 1px solid #1E5631; width: 150px; text-align: center; font-size: 12px; font-weight: bold; padding-top: 5px; }
                </style>
            </head>
            <body>
                <div class="card">
                    <div class="watermark"></div>
                    <div class="header">
                        <img src="${v.logo}" />
                        <h1>${v.name}</h1>
                        <p>${v.address}</p>
                        <div class="admit-title">${r} ADMIT CARD</div>
                    </div>
                    
                    <div class="candidate-box">
                        <div class="photo-frame">
                            <img src="${y.photo}" />
                        </div>
                        <div class="details">
                            <div><span class="label">Name:</span> ${y.name}</div>
                            <div><span class="label">ID:</span> ${y.id}</div>
                            <div><span class="label">Class:</span> ${y.class} - ${y.section}</div>
                            <div><span class="label">Guardian:</span> ${y.guardianName}</div>
                            <div><span class="label">Session:</span> ${new Date().getFullYear()}</div>
                        </div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Subject</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${g}
                        </tbody>
                    </table>
                    
                    <div class="instructions">
                        <h4>Important Instructions</h4>
                        <ul>
                            <li>Candidates must bring this Admit Card to the examination hall.</li>
                            <li>Arrive at least 15 minutes before the scheduled time.</li>
                            <li>Use of mobile phones or electronic gadgets is strictly prohibited.</li>
                            <li>Maintain silence and discipline inside the exam hall.</li>
                            <li>Bring your own stationery (pens, pencils, rulers, etc.).</li>
                        </ul>
                    </div>
                    
                    <div class="footer">
                        <div class="sig-line">Controller of Exams</div>
                        <div class="sig-line">Principal</div>
                    </div>
                </div>
                <script>
                    window.onload = function() { setTimeout(() => { window.print(); window.close(); }, 500); }
                <\/script>
            </body>
            </html>
        `;x==null||x.document.write(h),x==null||x.document.close()};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-4xl h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-secondary pb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Generate Admit Cards"}),s.jsx("button",{onClick:t,className:"text-text-secondary hover:text-red-400",children:s.jsx(dl,{})})]}),s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsxs("div",{className:"w-1/2",children:[s.jsx("label",{className:"block text-sm text-text-secondary mb-1",children:"Select Exam"}),s.jsxs("select",{value:r,onChange:y=>{l(y.target.value),o("")},className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[s.jsx("option",{value:"",children:"-- Choose Exam --"}),u.map(y=>s.jsx("option",{value:y,children:y},y))]})]}),s.jsxs("div",{className:"w-1/2",children:[s.jsx("label",{className:"block text-sm text-text-secondary mb-1",children:"Select Class"}),s.jsxs("select",{value:a,onChange:y=>o(y.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",disabled:!r,children:[s.jsx("option",{value:"",children:"-- Choose Class --"}),p.map(y=>s.jsx("option",{value:y,children:y},y))]})]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto bg-secondary/30 rounded-lg p-4 border border-secondary",children:d?s.jsx("div",{className:"text-center py-10 text-text-secondary",children:"Checking eligibility..."}):c.length===0?s.jsx("div",{className:"text-center py-10 text-text-secondary",children:a?"No students found.":"Please select an exam and class to view students."}):s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"ID"}),s.jsx("th",{className:"px-4 py-3",children:"Student Name"}),s.jsx("th",{className:"px-4 py-3",children:"Fee Status"}),s.jsx("th",{className:"px-4 py-3 text-center",children:"Action"})]})}),s.jsx("tbody",{children:c.map(({student:y,isEligible:v,feeStatus:b})=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-3",children:y.id}),s.jsx("td",{className:"px-4 py-3 font-medium text-text-primary",children:y.name}),s.jsx("td",{className:"px-4 py-3",children:v?s.jsxs("span",{className:"flex items-center gap-1 text-green-400 font-semibold",children:[s.jsx(ih,{className:"w-4 h-4"})," Cleared"]}):s.jsxs("span",{className:"flex items-center gap-1 text-red-400 font-semibold",title:"Must clear dues for current month",children:[s.jsx(oh,{className:"w-4 h-4"})," ",b]})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsxs("button",{onClick:()=>j(y),disabled:!v,className:"bg-accent text-white px-3 py-1 rounded hover:bg-accent/90 disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center gap-2 mx-auto text-xs",children:[s.jsx(Bn,{className:"w-3 h-3"})," Print"]})})]},y.id))})]})})]})}):null},ty=e=>{if(!e)return"Invalid Date";const t=new Date(e);if(isNaN(t.getTime())){if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const[n,r,l]=e.split("-").map(Number);return new Date(Date.UTC(n,r-1,l)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}return e}return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},ny=e=>{if(!e)return"Invalid Time";const t=new Date(e);if(isNaN(t.getTime())){if(/^\d{1,2}:\d{2}$/.test(e)){const[n,r]=e.split(":").map(Number),l=new Date;return l.setHours(n,r),l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}return e}return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},sy=()=>{const{user:e}=Pe(),t=(e==null?void 0:e.role)==="Admin",[n,r]=f.useState([]),[l,a]=f.useState(!0),[o,c]=f.useState(!1),[i,d]=f.useState(!1),[m,u]=f.useState(!1),[p,j]=f.useState(!1),[y,v]=f.useState(null),b=async()=>{try{a(!0);const x=await pl();r(x)}catch(x){console.error("Failed to fetch exam data",x)}finally{a(!1)}};f.useEffect(()=>{b()},[]);const g=()=>{b(),j(!1),v(null)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Examination & Results"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Upcoming Exam Schedule"}),t&&s.jsx("button",{onClick:()=>{v(null),j(!0)},className:"bg-accent text-white px-3 py-1 rounded-md text-sm font-semibold hover:bg-accent/90",children:"Add New Exam"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Subject"}),s.jsx("th",{className:"px-4 py-2",children:"Class"}),s.jsx("th",{className:"px-4 py-2",children:"Date"}),s.jsx("th",{className:"px-4 py-2",children:"Time"}),t&&s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:t?5:4,className:"text-center py-4",children:"Loading schedule..."})}):n.map(x=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-2 font-medium text-text-primary",children:x.subject}),s.jsx("td",{className:"px-4 py-2",children:x.class}),s.jsx("td",{className:"px-4 py-2",children:ty(x.date)}),s.jsx("td",{className:"px-4 py-2",children:ny(x.time)}),t&&s.jsx("td",{className:"px-4 py-2 flex gap-2",children:s.jsx("button",{onClick:()=>{v(x),j(!0)},className:"p-1 hover:bg-background rounded",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]},x.id))})]})})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Manage Results"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-text-secondary",children:"Input marks including CT, MCQ, CQ, and Viva, then generate report cards."}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[t&&s.jsx("button",{onClick:()=>c(!0),className:"flex-1 bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors",children:"Input Results"}),s.jsx("button",{onClick:()=>d(!0),className:"flex-1 bg-secondary text-text-primary px-4 py-2 rounded-lg font-semibold hover:bg-secondary/80 transition-colors",children:"Generate Report Cards"}),s.jsxs("button",{onClick:()=>u(!0),className:"flex-1 bg-yellow-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-yellow-700 transition-colors flex items-center justify-center gap-2",children:[s.jsx(Xu,{className:"w-4 h-4"})," Generate Admit Cards"]})]})]})]})]}),o&&s.jsx(ry,{allExams:n,onClose:()=>c(!1)}),i&&s.jsx(ly,{allExams:n,onClose:()=>d(!1)}),m&&s.jsx(ey,{isOpen:m,onClose:()=>u(!1),allExams:n}),p&&s.jsx(Zg,{onClose:()=>{j(!1),v(null)},onSave:g,initialData:y})]})},ry=({allExams:e,onClose:t})=>{const[n,r]=f.useState(""),[l,a]=f.useState([]),[o,c]=f.useState(!1),i=f.useMemo(()=>e.find(u=>u.id===n),[e,n]);f.useEffect(()=>{i?(c(!0),Vo(i.id,i.class).then(u=>{a(u),c(!1)})):a([])},[i]);const d=(u,p,j)=>{const y=j===""?0:parseInt(j,10);a(v=>v.map(b=>{if(b.studentId===u){const g={...b,[p]:y||void 0},x=(g.ct||0)+(g.mcq||0)+(g.cq||0)+(g.viva||0),h=g.ct!==void 0||g.mcq!==void 0||g.cq!==void 0||g.viva!==void 0;return{...g,marks:h?x:null}}return b}))},m=async()=>{i&&(await tg(i.id,l),alert("Results saved successfully!"),t())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-5xl h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Input Exam Results"}),s.jsx("button",{onClick:t,className:"text-text-secondary hover:text-red-400",children:"Close"})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("select",{onChange:u=>r(u.target.value),className:"w-full md:w-1/2 bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[s.jsx("option",{value:"",children:"Select Exam to Input Marks"}),e.map(u=>s.jsxs("option",{value:u.id,children:[u.title," - ",u.subject," (Class ",u.class,")"]},u.id))]})}),s.jsx("div",{className:"flex-grow overflow-auto border border-secondary rounded-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary relative",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"Student Name"}),s.jsx("th",{className:"px-4 py-3 text-center w-24",children:"CT (10)"}),s.jsx("th",{className:"px-4 py-3 text-center w-24",children:"MCQ (30)"}),s.jsx("th",{className:"px-4 py-3 text-center w-24",children:"CQ (50)"}),s.jsx("th",{className:"px-4 py-3 text-center w-24",children:"Viva (10)"}),s.jsx("th",{className:"px-4 py-3 text-center w-24 font-bold text-accent",children:"Total"})]})}),s.jsx("tbody",{children:o?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-8",children:"Loading students..."})}):l.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-8",children:"Select an exam to load students."})}):l.map(u=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/30",children:[s.jsxs("td",{className:"px-4 py-2 font-medium text-text-primary",children:[u.studentName," ",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-text-secondary",children:u.studentId})]}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:u.ct??"",onChange:p=>d(u.studentId,"ct",p.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:u.mcq??"",onChange:p=>d(u.studentId,"mcq",p.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:u.cq??"",onChange:p=>d(u.studentId,"cq",p.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"0",placeholder:"-",value:u.viva??"",onChange:p=>d(u.studentId,"viva",p.target.value),className:"w-16 bg-background p-2 rounded-md text-text-primary text-center focus:ring-1 focus:ring-accent"})}),s.jsx("td",{className:"px-4 py-2 text-center font-bold text-lg text-accent",children:u.marks??"-"})]},u.studentId))})]})}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{onClick:m,disabled:!i,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold disabled:bg-gray-500",children:"Save Results"})]})]})})},ly=({allExams:e,onClose:t})=>{const[n,r]=f.useState(""),[l,a]=f.useState(new Map),[o,c]=f.useState(!1);f.useEffect(()=>{(async()=>{var m;if(n){c(!0);const u=await ze({class:n}),p=e.filter(y=>y.class===n),j=new Map;for(const y of u)j.set(y.id,{student:y,results:[]});for(const y of p){const v=await Vo(y.id,n);for(const b of v)j.has(b.studentId)&&((m=j.get(b.studentId))==null||m.results.push({subject:y.subject,marks:b.marks,ct:b.ct,mcq:b.mcq,cq:b.cq,viva:b.viva}))}a(j),c(!1)}else a(new Map)})()},[n,e]);const i=d=>{const m=l.get(d);if(!m)return;const u=Ke(),p=window.open("","_blank");let j=m.results.map(v=>`
            <tr>
                <td style="padding: 6px 10px; border: 1px solid #D4AF37; font-weight: bold; color: #1E5631;">${v.subject}</td>
                <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center;">${v.ct??"-"}</td>
                <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center;">${v.mcq??"-"}</td>
                <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center;">${v.cq??"-"}</td>
                <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center;">${v.viva??"-"}</td>
                <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center; font-weight: bold; background-color: #f0f0f0;">${v.marks??"N/A"}</td>
            </tr>
        `).join("");const y=`
            <html>
            <head>
                <title>Report Card - ${m.student.name}</title>
                <link rel="preconnect" href="https://fonts.googleapis.com">
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
                <style>
                  @media print {
                    html, body {
                      -webkit-print-color-adjust: exact !important;
                      print-color-adjust: exact !important;
                      height: 100%;
                      overflow: hidden;
                    }
                    @page { size: A4; margin: 0; }
                  }
                  body {
                    font-family: 'Playfair Display', serif;
                    color: #1E3A29;
                    background-color: #fff;
                    margin: 0;
                    padding: 20px;
                    box-sizing: border-box;
                  }
                  .container {
                    border: 3px solid #1E5631;
                    outline: 1px solid #D4AF37;
                    outline-offset: -5px;
                    padding: 30px;
                    height: 95vh;
                    box-sizing: border-box;
                    display: flex;
                    flex-direction: column;
                    position: relative;
                  }
                  .watermark {
                    position: absolute;
                    top: 50%; left: 50%;
                    transform: translate(-50%, -50%);
                    width: 60%;
                    height: 60%;
                    background: url('${u.logo}') no-repeat center center;
                    background-size: contain;
                    opacity: 0.08;
                    z-index: -1;
                  }
                  .bismillah {
                    text-align: center;
                    font-family: 'Amiri', serif;
                    font-size: 18px;
                    color: #1E5631;
                    margin-bottom: 5px;
                  }
                  .header {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    gap: 20px;
                    border-bottom: 2px solid #D4AF37;
                    padding-bottom: 15px;
                    margin-bottom: 20px;
                  }
                  .header img {
                    width: 60px;
                    height: 60px;
                    border-radius: 50%;
                    border: 2px solid #D4AF37;
                  }
                  .header-text { text-align: center; }
                  .header h1 {
                    font-family: 'Cinzel', serif;
                    font-size: 24px;
                    color: #1E5631;
                    margin: 0;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                    text-shadow: 1px 1px 0 #D4AF37;
                  }
                  .header p {
                    font-family: 'Playfair Display', serif;
                    font-style: italic;
                    color: #666;
                    margin: 2px 0 0;
                    font-size: 12px;
                  }
                  .report-title {
                    text-align: center;
                    font-family: 'Cinzel', serif;
                    font-size: 18px;
                    color: #D4AF37;
                    font-weight: bold;
                    margin-bottom: 20px;
                    text-decoration: underline;
                    text-underline-offset: 5px;
                  }
                  .student-info {
                    width: 100%;
                    margin-bottom: 20px;
                    font-size: 14px;
                  }
                  .student-info td {
                    padding: 5px;
                    border: none;
                  }
                  .info-label {
                    font-weight: bold;
                    color: #1E5631;
                    width: 120px;
                  }
                  table.results {
                    width: 100%;
                    border-collapse: collapse;
                    margin-bottom: auto; /* Push footer down */
                    font-size: 14px;
                  }
                  table.results th {
                    background-color: #1E5631;
                    color: #D4AF37;
                    padding: 8px;
                    font-family: 'Cinzel', serif;
                    font-size: 11px;
                    border: 1px solid #D4AF37;
                    text-transform: uppercase;
                  }
                  .footer {
                    margin-top: 20px;
                    display: flex;
                    justify-content: space-between;
                    padding: 0 50px;
                  }
                  .signature {
                    text-align: center;
                    border-top: 1px solid #1E5631;
                    padding-top: 5px;
                    width: 150px;
                    font-family: 'Cinzel', serif;
                    font-size: 12px;
                    color: #1E5631;
                  }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="watermark"></div>
                    <div class="bismillah">   </div>
                    
                    <div class="header">
                        <img src="${u.logo}" alt="logo">
                        <div class="header-text">
                             <h1>${u.name}</h1>
                             <p>${u.address}</p>
                        </div>
                    </div>
                    
                    <div class="report-title">Student Report Card</div>
                    
                    <table class="student-info">
                        <tr>
                            <td class="info-label">Student Name:</td>
                            <td>${m.student.name}</td>
                            <td class="info-label">Class:</td>
                            <td>${m.student.class} - ${m.student.section}</td>
                        </tr>
                        <tr>
                            <td class="info-label">Student ID:</td>
                            <td>${m.student.id}</td>
                            <td class="info-label">Date:</td>
                            <td>${new Date().toLocaleDateString()}</td>
                        </tr>
                    </table>
                    
                    <table class="results">
                        <thead>
                            <tr>
                                <th style="text-align: left; width: 40%;">Subject</th>
                                <th style="text-align: center;">CT</th>
                                <th style="text-align: center;">MCQ</th>
                                <th style="text-align: center;">CQ</th>
                                <th style="text-align: center;">Viva</th>
                                <th style="text-align: center;">Total</th>
                            </tr>
                        </thead>
                        <tbody>${j}</tbody>
                    </table>
                    
                    <div class="footer">
                        <div class="signature">Class Teacher</div>
                        <div class="signature">Principal</div>
                    </div>
                </div>
                <script>
                    window.onload = function() {
                        setTimeout(function() {
                             window.print();
                             window.close();
                        }, 500);
                    }
                <\/script>
            </body>
            </html>
        `;p==null||p.document.write(y),p==null||p.document.close()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Generate Report Cards"}),s.jsxs("select",{onChange:d=>r(d.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent mb-4",children:[s.jsx("option",{value:"",children:"Select Class"}),[...new Set(e.map(d=>d.class))].map(d=>s.jsxs("option",{value:d,children:["Class ",d]},d))]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:o?s.jsx("p",{children:"Loading results..."}):Array.from(l.values()).map(({student:d})=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-md mb-2",children:[s.jsx("span",{className:"text-text-primary",children:d.name}),s.jsxs("button",{onClick:()=>i(d.id),className:"text-accent hover:underline text-sm flex items-center gap-1",children:[s.jsx(Bn,{className:"w-4 h-4"})," Print Report"]})]},d.id))}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Close"})})]})})},ay=({isOpen:e,onClose:t,onAddEvent:n})=>{const[r,l]=f.useState(""),[a,o]=f.useState(""),[c,i]=f.useState("Academic"),[d,m]=f.useState("");if(!e)return null;const u=p=>{p.preventDefault(),n({title:r,date:a,type:c,description:d}),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Add New Event"}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("input",{type:"text",placeholder:"Event Title",value:r,onChange:p=>l(p.target.value),className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"date",value:a,onChange:p=>o(p.target.value),className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("select",{value:c,onChange:p=>i(p.target.value),className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0,children:[s.jsx("option",{children:"Academic"}),s.jsx("option",{children:"Sports"}),s.jsx("option",{children:"Cultural"}),s.jsx("option",{children:"Holiday"})]}),s.jsx("textarea",{placeholder:"Description",value:d,onChange:p=>m(p.target.value),rows:3,className:"col-span-2 bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Add Event"})]})]})]})})},oy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[l,a]=f.useState(!1);f.useEffect(()=>{(async()=>{try{r(!0);const d=await qo();t(d)}catch(d){console.error("Failed to fetch events",d)}finally{r(!1)}})()},[]);const o=async i=>{const d=await sg(i);t(m=>[d,...m])},c=i=>{switch(i){case"Academic":return"bg-blue-500/20 text-blue-400";case"Sports":return"bg-green-500/20 text-green-400";case"Cultural":return"bg-purple-500/20 text-purple-400";case"Holiday":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Events & Activity"}),s.jsxs("button",{onClick:()=>a(!0),className:"bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(Rn,{className:"w-5 h-5"}),"Add New Event"]})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Upcoming Events"}),s.jsx("div",{className:"space-y-4",children:n?s.jsx("p",{children:"Loading events..."}):e.map(i=>s.jsxs("div",{className:"p-4 bg-secondary rounded-md flex items-start gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-accent",children:new Date(i.date).getDate()}),s.jsx("p",{className:"text-sm text-text-secondary",children:new Date(i.date).toLocaleString("default",{month:"short"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:i.title}),s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${c(i.type)}`,children:i.type})]}),s.jsx("p",{className:"text-text-secondary mt-1 text-sm",children:i.description})]})]},i.id))})]}),s.jsx(ay,{isOpen:l,onClose:()=>a(!1),onAddEvent:o})]})},iy=({person:e,type:t,onClose:n})=>{const r=Ke(),l=f.useRef(null),a=()=>{const c=window.open("","_blank");c==null||c.document.write(`
            <html>
                <head>
                    <title>ID Card - ${e.name}</title>
                    <link rel="preconnect" href="https://fonts.googleapis.com">
                    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
                    <style>
                      @media print {
                        html, body {
                          -webkit-print-color-adjust: exact !important;
                          print-color-adjust: exact !important;
                          margin: 0;
                          padding: 0;
                        }
                        @page {
                            size: 2.13in 3.37in; /* Standard ID Card Size */
                            margin: 0;
                        }
                      }
                      body {
                        font-family: 'Playfair Display', serif;
                        background-color: #fff;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        height: 100vh;
                        margin: 0;
                      }
                      .card {
                        width: 2.13in;
                        height: 3.37in;
                        position: relative;
                        background: linear-gradient(135deg, #fdfbf7 0%, #ffffff 100%);
                        border: 1px solid #D4AF37;
                        overflow: hidden;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        text-align: center;
                        box-sizing: border-box;
                      }
                      /* Islamic Pattern Overlay */
                      .card::before {
                        content: '';
                        position: absolute;
                        top: 0; left: 0; right: 0; bottom: 0;
                        background-image: url('${r.logo}');
                        background-size: 80%;
                        background-position: center;
                        background-repeat: no-repeat;
                        opacity: 0.05;
                        z-index: 0;
                      }
                      .header-bg {
                        width: 100%;
                        height: 70px; /* Reduced from 90px */
                        background-color: #1E5631;
                        border-bottom: 3px solid #D4AF37;
                        position: absolute;
                        top: 0;
                        z-index: 1;
                        border-bottom-left-radius: 50% 15px;
                        border-bottom-right-radius: 50% 15px;
                      }
                      .content {
                        z-index: 2;
                        width: 100%;
                        padding-top: 10px;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                      }
                      .logo-container {
                        width: 50px;
                        height: 50px;
                        background: white;
                        border-radius: 50%;
                        border: 2px solid #D4AF37;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-bottom: 2px;
                        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                      }
                      .logo-container img {
                        width: 42px;
                        height: 42px;
                        border-radius: 50%;
                      }
                      .inst-name {
                        font-family: 'Cinzel', serif;
                        font-weight: 700;
                        color: #fff;
                        font-size: 9px;
                        margin-top: -55px; /* Pull up into header */
                        margin-bottom: 25px;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        text-shadow: 1px 1px 0 #000;
                        width: 90%;
                      }
                      .photo {
                        width: 70px;
                        height: 70px;
                        border-radius: 50%;
                        border: 3px solid #1E5631;
                        outline: 2px solid #D4AF37;
                        object-fit: cover;
                        margin-bottom: 5px;
                        background: white;
                      }
                      .name {
                        font-family: 'Cinzel', serif;
                        font-size: 14px;
                        font-weight: bold;
                        color: #1E5631;
                        margin: 2px 0 2px 0;
                        text-transform: uppercase;
                      }
                      .role {
                        font-size: 10px;
                        color: #D4AF37;
                        font-weight: bold;
                        margin-bottom: 5px;
                        background: #1E5631;
                        padding: 2px 8px;
                        border-radius: 10px;
                      }
                      .details {
                        font-size: 9px;
                        color: #333;
                        width: 90%;
                        text-align: left;
                        margin-top: 5px;
                        border-top: 1px solid #D4AF37;
                        padding-top: 5px;
                      }
                      .detail-row {
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 2px;
                      }
                      .label {
                        font-weight: bold;
                        color: #1E5631;
                      }
                      .footer-border {
                        position: absolute;
                        bottom: 0;
                        width: 100%;
                        height: 12px;
                        background-color: #1E5631;
                        border-top: 2px solid #D4AF37;
                      }
                      .bismillah {
                        position: absolute;
                        top: 2px;
                        width: 100%;
                        text-align: center;
                        font-family: 'Amiri', serif;
                        color: #D4AF37;
                        font-size: 8px;
                        z-index: 10;
                      }
                    </style>
                </head>
                <body>
                    <div class="card">
                        <div class="bismillah">   </div>
                        <div class="header-bg"></div>
                        <div class="content">
                            <div class="logo-container">
                                <img src="${r.logo}" alt="logo" />
                            </div>
                            <div class="inst-name">${r.name}</div>
                            
                            <img src="${e.photo}" alt="profile" class="photo" />
                            
                            <div class="name">${e.name}</div>
                            <div class="role">${o()?"STUDENT":e.role.toUpperCase()}</div>
                            
                            <div class="details">
                                <div class="detail-row">
                                    <span class="label">ID No:</span>
                                    <span>${e.id}</span>
                                </div>
                                ${o()?`
                                <div class="detail-row">
                                    <span class="label">Class:</span>
                                    <span>${e.class} - ${e.section}</span>
                                </div>
                                <div class="detail-row">
                                    <span class="label">Guardian:</span>
                                    <span>${e.guardianPhone}</span>
                                </div>
                                `:`
                                <div class="detail-row">
                                    <span class="label">Phone:</span>
                                    <span>${e.phone}</span>
                                </div>
                                `}
                                <div class="detail-row">
                                    <span class="label">Issued:</span>
                                    <span>${new Date().getFullYear()}</span>
                                </div>
                            </div>
                        </div>
                        <div class="footer-border"></div>
                    </div>
                    <script>
                         window.onload = function() {
                            setTimeout(function() {
                                window.print();
                                window.close();
                            }, 500);
                        }
                    <\/script>
                </body>
            </html>
        `),c==null||c.document.close()},o=c=>t==="students";return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg p-6 shadow-2xl w-full max-w-sm",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-text-primary text-center",children:"ID Card Preview"}),s.jsx("div",{ref:l,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-[2.13in] h-[3.37in] mx-auto relative overflow-hidden flex flex-col items-center border-2 border-accent",children:[s.jsx("div",{className:"absolute top-0 w-full h-16 bg-[#1E5631] border-b-2 border-[#D4AF37] rounded-b-[50%] z-0"}),s.jsx("div",{className:"z-10 mt-3 bg-white p-1 rounded-full border-2 border-[#D4AF37]",children:s.jsx("img",{src:r.logo,alt:"logo",className:"w-10 h-10 rounded-full"})}),s.jsx("h1",{className:"z-10 text-[9px] font-bold text-[#1E5631] font-serif uppercase tracking-widest mt-1 text-center px-2",children:r.name}),s.jsx("img",{src:e.photo,alt:"profile",className:"z-10 w-16 h-16 rounded-full mt-2 border-2 border-[#1E5631] object-cover"}),s.jsx("h2",{className:"z-10 text-xs font-bold text-[#1E5631] mt-2 uppercase font-serif",children:e.name}),s.jsx("span",{className:"z-10 text-[9px] bg-[#1E5631] text-[#D4AF37] px-2 py-0.5 rounded-full font-bold mb-2",children:o()?"STUDENT":e.role.toUpperCase()}),s.jsxs("div",{className:"z-10 w-full px-4 text-[9px] space-y-1 text-gray-800",children:[s.jsxs("div",{className:"flex justify-between border-b border-[#D4AF37]/30 pb-0.5",children:[s.jsx("span",{className:"font-bold text-[#1E5631]",children:"ID:"}),s.jsx("span",{children:e.id})]}),o()?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex justify-between border-b border-[#D4AF37]/30 pb-0.5",children:[s.jsx("span",{className:"font-bold text-[#1E5631]",children:"Class:"}),s.jsxs("span",{children:[e.class," - ",e.section]})]})}):s.jsxs("div",{className:"flex justify-between border-b border-[#D4AF37]/30 pb-0.5",children:[s.jsx("span",{className:"font-bold text-[#1E5631]",children:"Phone:"}),s.jsx("span",{children:e.phone})]})]}),s.jsx("div",{className:"absolute bottom-0 w-full h-3 bg-[#1E5631] border-t-2 border-[#D4AF37]"})]})}),s.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[s.jsx("button",{onClick:n,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Close"}),s.jsxs("button",{onClick:a,className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold flex items-center gap-2",children:[s.jsx(Bn,{className:"w-4 h-4"})," Print"]})]})]})})},cy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState([]),[l,a]=f.useState(!0),[o,c]=f.useState("students"),[i,d]=f.useState(""),[m,u]=f.useState(null);f.useEffect(()=>{(async()=>{a(!0);const[v,b]=await Promise.all([ze(),on()]);t(v),r(b),a(!1)})()},[]);const p=f.useMemo(()=>{const y=o==="students"?e:n;return i?y.filter(v=>v.name.toLowerCase().includes(i.toLowerCase())||v.id.toLowerCase().includes(i.toLowerCase())):y},[e,n,o,i]),j=y=>{u(y)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Generate ID Cards"}),s.jsxs("div",{className:"bg-primary p-4 rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary mb-4",children:["students","staff"].map(y=>s.jsx("button",{onClick:()=>c(y),className:`px-4 py-2 font-medium text-sm -mb-px border-b-2 ${o===y?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:y.charAt(0).toUpperCase()+y.slice(1)},y))}),s.jsx("input",{type:"text",placeholder:`Search ${o}...`,value:i,onChange:y=>d(y.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]}),s.jsx("div",{className:"bg-primary rounded-lg shadow-lg",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:o==="students"?"Class":"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),s.jsx("tbody",{children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center py-4",children:"Loading..."})}):p.map(y=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:y.name}),s.jsx("td",{className:"px-6 py-4",children:y.id}),s.jsx("td",{className:"px-6 py-4",children:o==="students"?`${y.class} - ${y.section}`:y.role}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>j(y),className:"font-medium text-accent hover:underline",children:"Generate"})})]},y.id))})]})})}),m&&s.jsx(iy,{person:m,type:o,onClose:()=>u(null)})]})},dy=({isOpen:e,onClose:t,onSave:n,initialData:r,teachers:l})=>{const[a,o]=f.useState((r==null?void 0:r.name)||""),[c,i]=f.useState((r==null?void 0:r.section)||""),[d,m]=f.useState((r==null?void 0:r.classTeacherId)||(l.length>0?l[0].id:""));if(!e)return null;const u=p=>{p.preventDefault();const j=l.find(y=>y.id===d);if(!j){alert("Please select a valid teacher.");return}n({name:a,section:c,classTeacherId:d,classTeacherName:j.name})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add"," Class"]}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"text",placeholder:"Class Name (e.g., Class 5)",value:a,onChange:p=>o(p.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",placeholder:"Section (e.g., A)",value:c,onChange:p=>i(p.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Class Teacher"}),s.jsx("select",{value:d,onChange:p=>m(p.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:l.map(p=>s.jsx("option",{value:p.id,children:p.name},p.id))})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save"})]})]})]})})},uy=e=>{if(!e)return"N/A";if(/^\d{2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),l=new Date;return l.setHours(n,r,0,0),l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},py=({classInfo:e,studentCount:t,isSelected:n,onClick:r,onEdit:l,isAdmin:a})=>s.jsxs("div",{onClick:r,className:`p-4 rounded-lg mb-2 cursor-pointer transition-colors ${n?"bg-accent text-white":"bg-secondary hover:bg-secondary/80"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-bold text-lg",children:[e.name," - ",e.section]}),s.jsx("p",{className:`text-sm ${n?"text-gray-200":"text-text-secondary"}`,children:e.classTeacherName})]}),a&&s.jsx("button",{onClick:l,className:`p-1 rounded-full ${n?"hover:bg-accent/80":"hover:bg-background"}`,children:s.jsx(Ye,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm",children:[s.jsx(tn,{className:"w-4 h-4"}),s.jsxs("span",{children:[t," Students"]})]})]}),my=({data:e})=>{const{classInfo:t,studentsInClass:n,timetableForClass:r}=e,l=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=Object.keys(r).length>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-bold text-accent",children:["Class ",t.name," - Section ",t.section]}),s.jsxs("p",{className:"text-text-secondary",children:["Class Teacher: ",t.classTeacherName]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[s.jsx(tn,{className:"w-5 h-5 text-accent"})," Student Roster (",n.length,")"]}),s.jsx("div",{className:"max-h-60 overflow-y-auto bg-secondary p-2 rounded-md",children:n.length>0?s.jsx("ul",{className:"divide-y divide-background",children:n.map(o=>s.jsxs("li",{className:"p-2 flex items-center gap-3",children:[s.jsx("img",{src:o.photo,alt:o.name,className:"w-8 h-8 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-text-primary",children:o.name}),s.jsxs("p",{className:"text-xs text-text-secondary",children:["ID: ",o.id]})]})]},o.id))}):s.jsx("p",{className:"text-center text-text-secondary p-4",children:"No students enrolled in this class."})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-xl font-semibold text-text-primary flex items-center gap-2",children:[s.jsx(Ho,{className:"w-5 h-5 text-accent"})," Weekly Timetable"]}),s.jsx("div",{className:"overflow-x-auto pb-2",children:a?s.jsx("div",{className:"flex space-x-4",children:l.filter(o=>{var c;return((c=r[o])==null?void 0:c.length)>0}).map(o=>s.jsxs("div",{className:"flex-shrink-0 w-52 bg-secondary p-3 rounded-lg",children:[s.jsx("h5",{className:"font-bold text-accent text-center mb-2",children:o}),s.jsx("div",{className:"space-y-2",children:r[o].map(c=>s.jsxs("div",{className:"bg-background p-2 rounded-md text-xs",children:[s.jsxs("p",{className:"font-semibold text-text-primary",children:[uy(c.time)," - ",c.subject]}),s.jsx("p",{className:"text-text-secondary",children:c.teacher})]},c.id))})]},o))}):s.jsx("p",{className:"text-center text-text-secondary p-4",children:"Timetable has not been set for this class."})})]})]})},fy=()=>{const{user:e}=Pe(),t=(e==null?void 0:e.role)==="Admin",[n,r]=f.useState([]),[l,a]=f.useState([]),[o,c]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState(!0),[p,j]=f.useState(!1),[y,v]=f.useState(null),[b,g]=f.useState(null),x=f.useCallback(async()=>{try{u(!0);const[S,k,D,E]=await Promise.all([Hn(),on(),ze(),Wo()]);r(S),a(k.filter(T=>T.role==="Teacher")),c(D),d(E),S.length>0&&!b&&g(S[0].id)}catch(S){console.error("Failed to fetch data",S)}finally{u(!1)}},[b]);f.useEffect(()=>{x()},[]);const h=f.useMemo(()=>{if(!b)return null;const S=n.find(T=>T.id===b);if(!S)return null;const k=o.filter(T=>T.class===S.name&&T.section===S.section),E=i.filter(T=>T.class===S.name).reduce((T,A)=>((T[A.day]=T[A.day]||[]).push(A),T[A.day].sort((U,H)=>U.time.localeCompare(H.time)),T),{});return{classInfo:S,studentsInClass:k,timetableForClass:E}},[b,n,o,i]),N=async S=>{const k=l.find(E=>E.id===S.classTeacherId);if(!k){alert("Selected teacher not found.");return}const D={...S,classTeacherName:k.name};y?await Ch({...D,id:y.id}):await kh(D),x(),w()},C=(S,k=null)=>{S.stopPropagation(),v(k),j(!0)},w=()=>{v(null),j(!1)};return m?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl",children:"Loading Class Management..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Manage Classes"})}),s.jsxs("div",{className:"flex gap-6 h-[calc(100vh-12rem)]",children:[s.jsxs("div",{className:"w-1/3 flex flex-col bg-primary rounded-lg shadow-lg",children:[s.jsxs("div",{className:"p-4 border-b border-secondary flex justify-between items-center",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary",children:["All Classes (",n.length,")"]}),t&&s.jsx("button",{onClick:S=>C(S),className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm",children:"Add New"})]}),s.jsx("div",{className:"overflow-y-auto flex-grow p-2",children:n.map(S=>{const k=o.filter(D=>D.class===S.name&&D.section===S.section).length;return s.jsx(py,{classInfo:S,studentCount:k,isSelected:b===S.id,onClick:()=>g(S.id),onEdit:D=>C(D,S),isAdmin:t},S.id)})})]}),s.jsx("div",{className:"w-2/3 bg-primary rounded-lg shadow-lg p-6 overflow-y-auto",children:h?s.jsx(my,{data:h}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("p",{className:"text-text-secondary",children:"Select a class to view its details or add a new one."})})})]}),p&&s.jsx(dy,{isOpen:p,onClose:w,onSave:N,initialData:y,teachers:l})]})},xy=()=>{const e=Ke();return s.jsxs("div",{className:"relative min-h-screen bg-background text-text-primary flex items-center justify-center overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 z-0 opacity-10",children:[s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCI+PHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1IDBMNy41IDE1TDE1IDMwTDIyLjUgMTVMMTUgMFoiIGZpbGw9IiMzOGIyYWMiLz48L3N2Zz4=')] bg-repeat animate-[spin_60s_linear_infinite]"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary to-background"})]}),s.jsxs("div",{className:"relative z-10 text-center p-8 bg-primary/50 backdrop-blur-sm rounded-2xl shadow-2xl max-w-2xl",children:[s.jsx("img",{src:e.logo,alt:"logo",className:"w-24 h-24 mx-auto mb-4 bg-white rounded-full p-2"}),s.jsx("h1",{className:"text-5xl font-bold text-accent mb-2",children:e.name}),s.jsx("p",{className:"text-xl text-text-secondary mb-8",children:e.tagline}),s.jsxs("div",{className:"text-2xl font-light text-text-primary mb-10",children:[s.jsx("p",{children:"   "}),s.jsx("p",{className:"text-lg text-text-secondary",children:"In the name of Allah, the Most Gracious, the Most Merciful"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[s.jsx(Fn,{to:"/login",className:"w-full sm:w-auto bg-accent text-white font-semibold px-8 py-3 rounded-lg hover:bg-accent/90 transition-transform transform hover:scale-105",children:"Portal Login"}),s.jsx(Fn,{to:"/results",className:"w-full sm:w-auto bg-secondary text-text-primary font-semibold px-8 py-3 rounded-lg hover:bg-secondary/80 transition-transform transform hover:scale-105",children:"Check Exam Results"})]})]}),s.jsx("footer",{className:"absolute bottom-4 text-center w-full text-text-secondary text-sm",children:s.jsxs("p",{children:[" ",new Date().getFullYear()," ",e.name,". All Rights Reserved."]})})]})},hy=()=>{const{login:e}=Pe(),t=Ke(),[n,r]=f.useState(""),[l,a]=f.useState(""),[o,c]=f.useState(""),[i,d]=f.useState(!1),m=async u=>{u.preventDefault(),c(""),d(!0);try{await e(n,l)}catch(p){c(p.message||"An unexpected error occurred.")}finally{d(!1)}};return s.jsxs("div",{className:"relative min-h-screen bg-background text-text-primary flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 z-0 opacity-5 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZHRoPSIzMCI+PHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1IDBMNy41IDE1TDE1IDMwTDIyLjUgMTVMMTUgMFoiIGZpbGw9IiMzOGIyYWMiLz48L3N2Zz4=')]"}),s.jsxs("div",{className:"relative z-10 w-full max-w-md bg-primary p-8 rounded-2xl shadow-2xl",children:[s.jsx(Fn,{to:"/",className:"absolute top-4 left-4 text-text-secondary hover:text-accent",children:" Back to Home"}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("img",{src:t.logo,alt:"logo",className:"w-20 h-20 mx-auto mb-4 bg-white rounded-full p-1.5"}),s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Portal Login"}),s.jsx("p",{className:"text-text-secondary",children:"Welcome back. Please login to your account."})]}),s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o&&s.jsx("p",{className:"text-red-400 bg-red-500/10 p-3 rounded-md text-center text-sm",children:o}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"User ID"}),s.jsx("input",{type:"text",placeholder:"Enter your User ID (e.g., MrNHH)",value:n,onChange:u=>r(u.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Password"}),s.jsx("input",{type:"password",placeholder:"",value:l,onChange:u=>a(u.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsx("button",{type:"submit",disabled:i,className:"w-full bg-accent text-white font-semibold py-3 rounded-lg hover:bg-accent/90 transition-colors flex items-center justify-center gap-2 disabled:bg-secondary disabled:cursor-not-allowed",children:i?"Logging in...":s.jsxs(s.Fragment,{children:[s.jsx(eh,{className:"w-5 h-5"})," Login"]})})]})]})]})},gy=()=>{const e=Ke(),[t,n]=f.useState([]),[r,l]=f.useState(!1),[a,o]=f.useState(null),[c,i]=f.useState(""),[d,m]=f.useState(""),[u,p]=f.useState(""),[j,y]=f.useState(null);f.useEffect(()=>{pl().then(n)},[]);const v=f.useMemo(()=>{const w=new Set(t.map(S=>S.title));return Array.from(w)},[t]),b=f.useMemo(()=>{if(!c)return[];const w=new Set(t.filter(S=>S.title===c).map(S=>S.class));return Array.from(w)},[t,c]),g=async w=>{if(w.preventDefault(),!c||!d||!u){o("Please select an exam, class, and enter a student ID.");return}l(!0),o(null),y(null);try{const S=await ng(c,d,u.trim());S?y(S):o("Result not found. Please check the details and try again.")}catch{o("An error occurred while fetching the result.")}finally{l(!1)}},x=(w,S)=>{if(w===null||w<0||S<=0)return{grade:"N/A",gpa:"N/A",color:"text-gray-400"};const k=w/S*100;return k>=80?{grade:"A+",gpa:"5.0",color:"text-green-400"}:k>=70?{grade:"A",gpa:"4.0",color:"text-green-400"}:k>=60?{grade:"A-",gpa:"3.5",color:"text-yellow-400"}:k>=50?{grade:"B",gpa:"3.0",color:"text-orange-400"}:k>=40?{grade:"C",gpa:"2.0",color:"text-red-400"}:k>=33?{grade:"D",gpa:"1.0",color:"text-red-400"}:{grade:"F",gpa:"0.0",color:"text-red-500"}},N=j?(w=>{const S=[];let k=!1;for(const A of w){const{gpa:U}=x(A.marks,A.totalMarks),H=parseFloat(U);isNaN(H)||(H===0&&(k=!0),S.push(H))}if(k||S.length===0)return{grade:"F",gpa:"0.00",color:"text-red-500"};const D=S.reduce((A,U)=>A+U,0)/S.length;let E="F",T="text-red-500";return D===5?(E="A+",T="text-green-400"):D>=4?(E="A",T="text-green-400"):D>=3.5?(E="A-",T="text-yellow-400"):D>=3?(E="B",T="text-orange-400"):D>=2?(E="C",T="text-red-400"):D>=1&&(E="D",T="text-red-400"),{grade:E,gpa:D.toFixed(2),color:T}})(j.results):null,C=()=>{if(!j||!N)return;const w=window.open("","_blank");if(!w){alert("Please allow popups to print the report card.");return}const S=j.results.map(D=>{const E=x(D.marks,D.totalMarks);return`
                <tr>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; font-weight: bold; color: #1E5631;">${D.subject}</td>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center;">${D.marks??"Absent"}</td>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center;">${D.totalMarks}</td>
                    <td style="padding: 6px 10px; border: 1px solid #D4AF37; text-align: center; font-weight: bold;">
                        ${E.gpa!=="N/A"?`${E.grade} (${E.gpa})`:"N/A"}
                    </td>
                </tr>
            `}).join(""),k=`
            <html>
            <head>
                <title>Result Slip - ${j.studentName}</title>
                <link rel="preconnect" href="https://fonts.googleapis.com">
                <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
                <style>
                    @media print {
                        html, body {
                          -webkit-print-color-adjust: exact !important;
                          print-color-adjust: exact !important;
                          height: 100%;
                          overflow: hidden;
                        }
                        @page { size: A4; margin: 0; }
                    }
                    body { font-family: 'Playfair Display', serif; color: #1E3A29; background-color: #fff; margin: 0; padding: 20px; box-sizing: border-box; }
                    .container {
                        border: 3px solid #1E5631;
                        outline: 1px solid #D4AF37;
                        outline-offset: -5px;
                        padding: 30px;
                        height: 95vh;
                        box-sizing: border-box;
                        display: flex;
                        flex-direction: column;
                        position: relative;
                    }
                    .watermark { 
                        position: absolute;
                        top: 50%; left: 50%;
                        transform: translate(-50%, -50%);
                        opacity: 0.08;
                        background-image: url('${e.logo}');
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size: contain;
                        width: 70%; height: 70%;
                        z-index: -1;
                    }
                    .bismillah {
                        text-align: center;
                        font-family: 'Amiri', serif;
                        font-size: 18px;
                        color: #1E5631;
                        margin-bottom: 5px;
                    }
                    .header {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        gap: 20px;
                        border-bottom: 2px solid #D4AF37;
                        padding-bottom: 10px;
                        margin-bottom: 15px;
                    }
                    .header img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #D4AF37; }
                    .header-text { text-align: center; }
                    .header h1 { 
                        font-family: 'Cinzel', serif; font-size: 22px; color: #1E5631; 
                        margin: 0; text-transform: uppercase; text-shadow: 1px 1px 0 #D4AF37; 
                    }
                    .header p { font-style: italic; color: #666; margin: 2px 0 0; font-size: 12px; }
                    
                    .result-title {
                        text-align: center; font-family: 'Cinzel', serif; font-size: 18px; color: #D4AF37;
                        font-weight: bold; margin-bottom: 15px; text-decoration: underline; text-underline-offset: 4px;
                    }
                    
                    .student-grid {
                        display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 15px;
                        border: 1px solid #D4AF37; padding: 10px; background-color: #fdfbf7; font-size: 14px;
                    }
                    .grid-label { font-weight: bold; color: #1E5631; margin-right: 5px; }
                    
                    table { width: 100%; border-collapse: collapse; margin-bottom: auto; font-size: 14px; }
                    th { 
                        background-color: #1E5631; color: #D4AF37; padding: 8px; 
                        font-family: 'Cinzel', serif; font-size: 12px; border: 1px solid #D4AF37;
                        text-transform: uppercase;
                    }
                    
                    .summary { 
                        margin-top: 15px; padding: 15px; background-color: #1E5631; color: #D4AF37;
                        border-radius: 4px; display: flex; justify-content: space-between; align-items: center;
                        border: 2px solid #D4AF37;
                    }
                    .footer { text-align: center; margin-top: 20px; font-size: 10px; color: #666; border-top: 1px solid #D4AF37; padding-top: 5px; }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="watermark"></div>
                    <div class="bismillah">   </div>
                    
                    <div class="header">
                        <img src="${e.logo}" alt="logo">
                        <div class="header-text">
                            <h1>${e.name}</h1>
                            <p>${e.address}</p>
                        </div>
                    </div>
                    
                    <div class="result-title">${j.examTitle} Result Sheet</div>
                    
                    <div class="student-grid">
                        <div class="grid-item"><span class="grid-label">Student Name:</span> ${j.studentName}</div>
                        <div class="grid-item"><span class="grid-label">Class:</span> ${j.className}</div>
                        <div class="grid-item"><span class="grid-label">Student ID:</span> ${j.studentId}</div>
                        <div class="grid-item"><span class="grid-label">Date:</span> ${new Date().toLocaleDateString()}</div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th style="text-align: left;">Subject</th>
                                <th style="text-align: center;">Marks Obtained</th>
                                <th style="text-align: center;">Total Marks</th>
                                <th style="text-align: center;">Grade (GPA)</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${S}
                        </tbody>
                    </table>
                    
                    <div class="summary">
                        <div>
                            <p style="margin: 0; font-size: 12px; text-transform: uppercase; color: #fff;">Total Marks</p>
                            <p style="margin: 0; font-size: 24px; font-weight: bold;">${j.totalMarksObtained} / ${j.overallTotalMarks}</p>
                        </div>
                        <div style="text-align: right;">
                            <p style="margin: 0; font-size: 12px; text-transform: uppercase; color: #fff;">Final GPA & Grade</p>
                            <p style="margin: 0; font-size: 24px; font-weight: bold;">
                                ${N.gpa}
                                <span style="font-size: 18px; margin-left: 5px;">(${N.grade})</span>
                            </p>
                        </div>
                    </div>
                    
                    <div class="footer">
                        This is a computer-generated document. No signature is required.
                    </div>
                </div>
                <script>
                    window.onload = function() {
                        setTimeout(function() {
                            window.print();
                            window.close();
                        }, 500);
                    }
                <\/script>
            </body>
            </html>
        `;w.document.write(k),w.document.close()};return s.jsx("div",{className:"min-h-screen bg-background text-text-primary p-4 sm:p-6 md:p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx(Fn,{to:"/",className:"text-accent hover:underline mb-8 inline-block",children:" Back to Home"}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("img",{src:e.logo,alt:"logo",className:"w-20 h-20 mx-auto mb-4 bg-white rounded-full p-1.5"}),s.jsx("h1",{className:"text-4xl font-bold text-text-primary",children:"Check Exam Results"}),s.jsx("p",{className:"text-text-secondary",children:"Enter the details below to view the result."})]}),s.jsx("div",{className:"bg-primary p-8 rounded-2xl shadow-2xl mb-8",children:s.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Exam Title"}),s.jsxs("select",{value:c,onChange:w=>{i(w.target.value),m("")},className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,children:[s.jsx("option",{value:"",children:"-- Select Exam --"}),v.map(w=>s.jsx("option",{value:w,children:w},w))]})]}),s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Class"}),s.jsxs("select",{value:d,onChange:w=>m(w.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0,disabled:!c,children:[s.jsx("option",{value:"",children:"-- Select Class --"}),b.map(w=>s.jsxs("option",{value:w,children:["Class ",w]},w))]})]}),s.jsxs("div",{className:"md:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Student ID"}),s.jsx("input",{type:"text",placeholder:"e.g., S001",value:u,onChange:w=>p(w.target.value),className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsx("button",{type:"submit",disabled:r,className:"md:col-span-1 w-full bg-accent text-white font-semibold py-3 rounded-lg hover:bg-accent/90 transition-colors flex items-center justify-center gap-2 disabled:bg-secondary",children:r?"Searching...":s.jsxs(s.Fragment,{children:[s.jsx(th,{className:"w-5 h-5"})," Search Result"]})})]})}),a&&s.jsx("div",{className:"text-center p-4 bg-red-500/20 text-red-400 rounded-lg",children:a}),j&&N&&s.jsxs("div",{className:"bg-primary p-8 rounded-2xl shadow-2xl animate-[fadeIn_0.5s]",children:[s.jsxs("div",{className:"border-b-2 border-secondary pb-4 mb-6 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-accent",children:[j.examTitle," - Report Card"]}),s.jsx("p",{className:"text-text-secondary",children:e.name})]}),s.jsxs("button",{onClick:C,className:"bg-accent text-white font-semibold px-4 py-2 rounded-lg hover:bg-accent/90 transition-colors flex items-center gap-2",children:[s.jsx(Bn,{className:"w-5 h-5"}),"Print Report"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-lg mb-6",children:[s.jsx("strong",{className:"text-text-secondary",children:"Student Name:"})," ",s.jsx("span",{className:"text-text-primary",children:j.studentName}),s.jsx("strong",{className:"text-text-secondary",children:"Student ID:"})," ",s.jsx("span",{className:"text-text-primary",children:j.studentId}),s.jsx("strong",{className:"text-text-secondary",children:"Class:"})," ",s.jsx("span",{className:"text-text-primary",children:j.className})]}),s.jsx("div",{className:"overflow-x-auto mb-6",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Subject"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Marks Obtained"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Total Marks"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Grade (GPA)"})]})}),s.jsx("tbody",{children:j.results.map((w,S)=>{const k=x(w.marks,w.totalMarks);return s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:w.subject}),s.jsx("td",{className:"px-6 py-4 text-center font-semibold text-text-primary",children:w.marks??"Absent"}),s.jsx("td",{className:"px-6 py-4 text-center",children:w.totalMarks}),s.jsx("td",{className:`px-6 py-4 text-center font-bold ${k.color}`,children:k.gpa!=="N/A"?`${k.grade} (${k.gpa})`:"N/A"})]},S)})})]})}),s.jsxs("div",{className:"bg-secondary rounded-lg p-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsx("p",{className:"text-text-secondary text-sm uppercase",children:"Total Marks Obtained"}),s.jsxs("p",{className:"text-4xl font-bold text-text-primary",children:[j.totalMarksObtained," / ",j.overallTotalMarks]})]}),s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("p",{className:"text-text-secondary text-sm uppercase",children:"GPA & Final Grade"}),s.jsxs("p",{className:`text-4xl font-bold ${N.color}`,children:[N.gpa,s.jsxs("span",{className:"text-2xl ml-2",children:["(",N.grade,")"]})]})]})]})]})]})})},gc=e=>{const t=e.getDate(),n=e.getMonth(),r=e.getFullYear(),l=["Boishakh","Jyoishtho","Asharh","Srabon","Bhadro","Ashshin","Kartik","Ogrohayon","Poush","Magh","Falgun","Chaitra"],a=[14,15,15,16,16,16,16,15,15,14,13,15];let o=0,c=0,i=n>3||n===3&&t>=14?r-593:r-594;if(t>=a[n])n<3?o=n+9:o=n-3,c=t-a[n]+1;else{n<3?o=n+8:o=n-4;let m=n===0?11:n-1,u=a[m];c=new Date(r,n,0).getDate()-u+t+1}const d=m=>m.toString().replace(/\d/g,u=>""[parseInt(u)]);return`${l[o]} ${d(c)}, ${d(i)}`},yc=e=>{const t=new Date(e);return t.setDate(t.getDate()-1),new Intl.DateTimeFormat("en-US-u-ca-islamic-umalqura",{day:"numeric",month:"long",year:"numeric"}).format(t)},vc=(e,t)=>{const n=e.getMonth()+1,r=e.getDate(),l=`${String(n).padStart(2,"0")}-${String(r).padStart(2,"0")}`,a={"02-21":"Int'l Mother Language Day","03-17":"Sheikh Mujib's Birthday","03-26":"Independence Day","04-14":"Pohela Boishakh (Bengali New Year)","05-01":"May Day","08-15":"National Mourning Day","12-16":"Victory Day","12-25":"Christmas Day"};return a[l]?a[l]:t.includes("Ramadan 1,")?"Start of Ramadan":t.includes("Shawwal 1,")?"Eid ul-Fitr":t.includes("Dhu al-Hijjah 10,")?"Eid ul-Adha":t.includes("Rabi I 12,")?"Eid-e-Miladunnabi":t.includes("Muharram 10,")?"Ashura":t.includes("Rajab 27,")?"Shab-e-Meraj":t.includes("Shaban 15,")?"Shab-e-Barat":null},Ht=e=>{if(!e)return"N/A";const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]},pp=e=>{if(!e)return"N/A";if(/^\d{2}:\d{2}(:\d{2})?$/.test(e)){const[n,r]=e.split(":").map(Number),l=new Date;return l.setHours(n,r,0,0),l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}const t=new Date(e);return isNaN(t.getTime())?e:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},sr=({title:e,value:t,icon:n,color:r})=>s.jsxs("div",{className:"bg-primary p-4 rounded-lg shadow-lg flex items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mr-4 ${r}`,children:s.jsx(n,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-text-secondary text-sm font-medium uppercase",children:e}),s.jsx("p",{className:"text-2xl font-bold text-text-primary",children:t})]})]}),yy=()=>{var C;const{user:e}=Pe(),[t,n]=f.useState(null),[r,l]=f.useState(!0),a=Qo(),[o,c]=f.useState(new Date),[i,d]=f.useState(null),m=qa.useMemo(()=>new Set(a.filter(w=>w.roles.includes("Student")).map(w=>w.href)),[a]);f.useEffect(()=>{e&&rg(e.id).then(w=>{n(w),l(!1)}).catch(w=>{console.error("Failed to load student profile",w),l(!1)})},[e]);const u=f.useMemo(()=>{const w=o.getFullYear(),S=o.getMonth();return new Date(w,S+1,0).getDate()},[o]),p=f.useMemo(()=>{const w=o.getFullYear(),S=o.getMonth();return new Date(w,S,1).getDay()},[o]),j=f.useMemo(()=>{const w=[],S=o.getFullYear(),k=o.getMonth();for(let D=0;D<p;D++)w.push(null);for(let D=1;D<=u;D++)w.push(new Date(S,k,D));return w},[o,u,p]),y=()=>c(new Date(o.getFullYear(),o.getMonth()-1,1)),v=()=>c(new Date(o.getFullYear(),o.getMonth()+1,1)),b=w=>{switch(w){case"Academic":return"bg-blue-500";case"Sports":return"bg-green-500";case"Cultural":return"bg-purple-500";case"Holiday":return"bg-red-500";default:return"bg-gray-500"}},g=w=>{const S=yc(w),k=gc(w),D=vc(w,S),E=Ht(w.toISOString()),T=(t==null?void 0:t.events.filter(A=>Ht(A.date)===E))||[];d({date:w,hijri:S,bengali:k,holiday:D,events:T})},x=f.useMemo(()=>{if(!(t!=null&&t.events))return[];const w=new Date;return w.setHours(0,0,0,0),t.events.filter(S=>new Date(S.date)>=w).sort((S,k)=>new Date(S.date).getTime()-new Date(k.date).getTime())},[t==null?void 0:t.events]);if(r)return s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl",children:"Loading Your Dashboard..."})});if(!t)return s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-xl text-red-400",children:"Could not load your profile."})});const h=t.attendance.total>0?Math.round(t.attendance.present/(t.attendance.present+t.attendance.absent)*100):100,N=m.size>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h2",{className:"text-3xl font-bold text-text-primary",children:["Welcome, ",t.student.name,"!"]}),!N&&s.jsx("div",{className:"bg-primary p-6 rounded-lg shadow-lg text-center",children:s.jsx("p",{className:"text-text-secondary",children:"You currently don't have access to any modules. Please contact an administrator if you believe this is an error."})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.has("/app/attendance")&&s.jsxs(s.Fragment,{children:[s.jsx(sr,{title:"Attendance",value:`${h}%`,icon:nh,color:"bg-green-500"}),s.jsx(sr,{title:"Days Absent",value:t.attendance.absent,icon:sh,color:"bg-red-500"})]}),m.has("/app/finance")&&s.jsx(sr,{title:"Fees Status",value:t.fees.status,icon:rh,color:t.fees.status==="Paid"?"bg-blue-500":"bg-yellow-500"}),m.has("/app/attendance")&&s.jsx(sr,{title:"Incidents",value:t.discipline.length,icon:Br,color:"bg-orange-500"})]}),m.has("/app/events")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-secondary pb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-text-primary",children:[s.jsx(Rn,{className:"w-6 h-6 text-accent"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Academic Calendar"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:y,className:"text-text-secondary hover:text-accent font-bold text-xl",children:"<"}),s.jsx("span",{className:"text-lg font-bold text-text-primary w-40 text-center",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:v,className:"text-text-secondary hover:text-accent font-bold text-xl",children:">"})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-2 text-center mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(w=>s.jsx("div",{className:"font-bold text-text-secondary text-sm",children:w},w))}),s.jsx("div",{className:"grid grid-cols-7 gap-2",children:j.map((w,S)=>{if(!w)return s.jsx("div",{className:"h-32 bg-transparent"},`empty-${S}`);const k=Ht(w.toISOString()),D=yc(w),E=D.split(",")[0],T=gc(w),A=vc(w,D),U=t.events.filter(xt=>Ht(xt.date)===k),H=U.length>0,_t=w.toDateString()===new Date().toDateString(),ft=w.getDay()===5;return s.jsxs("div",{onClick:()=>g(w),className:`h-32 p-1 rounded-md border border-secondary flex flex-col relative overflow-hidden transition-all hover:bg-secondary/50 cursor-pointer
                                    ${_t?"ring-2 ring-accent bg-secondary/30":""}
                                    ${ft?"bg-red-900/10":""}
                                `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:`font-bold text-lg ${ft?"text-red-400":"text-text-primary"}`,children:w.getDate()}),H&&s.jsx("div",{className:"flex gap-0.5 pt-1",children:U.slice(0,3).map((xt,I)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${b(xt.type)}`,title:xt.title},I))})]}),s.jsxs("div",{className:"flex flex-col text-[10px] text-text-secondary leading-tight opacity-90 gap-0.5",children:[s.jsx("span",{className:"text-green-600/90 font-medium truncate",children:E}),s.jsx("span",{className:"font-bengali text-yellow-600/90 truncate",children:T.split(",")[0]})]}),(A||H)&&s.jsx("div",{className:"mt-auto pt-1 w-full text-[9px] text-center font-bold",children:A?s.jsx("span",{className:"text-red-300 bg-red-500/20 block rounded-sm px-1 py-0.5 truncate",children:A}):s.jsx("span",{className:"text-blue-300 bg-blue-500/20 block rounded-sm px-1 py-0.5 truncate",children:U[0].title})})]},k)})}),s.jsxs("div",{className:"mt-4 flex gap-4 text-xs text-text-secondary justify-center flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})," Academic"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})," Sports"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})," Cultural"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})," Holiday"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-red-400 font-bold",children:"Fri"})," Weekend"]})]})]}),m.has("/app/academics")&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(Ho,{className:"w-5 h-5 text-accent"}),"This Week's Timetable"]}),s.jsx(vy,{timetable:t.timetable})]}),s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(ep,{className:"w-5 h-5 text-accent"}),"Homework Assignments"]}),s.jsx(jy,{homework:t.homework})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.has("/app/exams")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(Ku,{className:"w-5 h-5 text-accent"}),"Upcoming Exams"]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:(((C=t.upcomingExams)==null?void 0:C.length)??0)>0?t.upcomingExams.map(w=>s.jsx("div",{className:"bg-secondary p-3 rounded-md border-l-4 border-accent",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:w.title}),s.jsx("p",{className:"text-sm text-text-secondary",children:w.subject})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-bold text-text-primary",children:Ht(w.date)}),s.jsx("p",{className:"text-xs text-text-secondary",children:pp(w.time)})]})]})},w.id)):s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No upcoming exams scheduled."})})]}),m.has("/app/events")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(Rn,{className:"w-5 h-5 text-accent"}),"Upcoming Events"]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.length>0?x.map(w=>s.jsxs("div",{className:"bg-secondary p-3 rounded-md",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("p",{className:"font-semibold text-text-primary",children:w.title}),s.jsx("p",{className:"text-text-secondary",children:Ht(w.date)})]}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:w.description})]},w.id)):s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No upcoming events."})})]}),m.has("/app/attendance")&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsxs("h3",{className:"text-xl font-semibold text-text-primary mb-4 flex items-center gap-2",children:[s.jsx(Br,{className:"w-5 h-5 text-accent"}),"Discipline Log"]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.discipline.length>0?t.discipline.map(w=>s.jsxs("div",{className:"bg-secondary p-3 rounded-md",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("p",{className:"font-semibold text-text-primary",children:w.incidentType}),s.jsx("p",{className:"text-text-secondary",children:w.date})]}),s.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:[w.description," ",s.jsxs("strong",{className:"text-text-primary",children:["(Action: ",w.actionTaken,")"]})]})]},w.id)):s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No disciplinary incidents on record. Keep it up!"})})]})]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:s.jsxs("div",{className:"bg-primary rounded-lg shadow-2xl w-full max-w-md border border-secondary",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-secondary",children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Date Details"}),s.jsx("button",{onClick:()=>d(null),className:"text-text-secondary hover:text-red-400",children:s.jsx(dl,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"text-center bg-secondary p-4 rounded-lg",children:[s.jsx("h4",{className:"text-3xl font-bold text-accent",children:i.date.getDate()}),s.jsx("p",{className:"text-lg text-text-primary",children:i.date.toLocaleString("default",{month:"long",year:"numeric"})}),s.jsx("p",{className:"text-text-secondary",children:i.date.toLocaleString("default",{weekday:"long"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-green-400 font-semibold block mb-1",children:"Hijri Date"}),s.jsx("p",{className:"text-sm text-text-primary",children:i.hijri})]}),s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsx("span",{className:"text-xs text-yellow-400 font-semibold block mb-1",children:"Bengali Date"}),s.jsx("p",{className:"text-sm text-text-primary font-bengali",children:i.bengali})]})]}),s.jsxs("div",{className:"border-t border-secondary pt-4",children:[s.jsx("h5",{className:"font-semibold text-text-primary mb-2",children:"Holidays & Events"}),i.holiday?s.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg mb-2",children:s.jsxs("p",{className:"text-red-400 font-bold flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),i.holiday]})}):i.events.length===0&&s.jsx("p",{className:"text-text-secondary text-sm italic",children:"No holidays or events for this day."}),i.events.map(w=>s.jsxs("div",{className:`p-3 rounded-lg mb-2 border ${b(w.type).replace("bg-","border-").replace("500","500/50")} bg-secondary`,children:[s.jsx("p",{className:"text-text-primary font-semibold",children:w.title}),s.jsx("p",{className:"text-xs text-text-secondary",children:w.description}),s.jsx("span",{className:`inline-block mt-1 text-[10px] px-2 py-0.5 rounded-full text-white ${b(w.type)}`,children:w.type})]},w.id))]})]})]})})]})},vy=({timetable:e})=>{const t=f.useMemo(()=>{var l;const r={};for(const a of e)r[a.day]||(r[a.day]=[]),(l=r[a.day])==null||l.push(a);return Object.values(r).forEach(a=>{a&&a.sort((o,c)=>o.time.localeCompare(c.time))}),r},[e]),n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.length===0?s.jsx("p",{className:"text-text-secondary text-center py-4",children:"Your timetable is not available."}):s.jsx("div",{className:"overflow-x-auto pb-2",children:s.jsx("div",{className:"flex space-x-4",children:n.filter(r=>{var l;return((l=t[r])==null?void 0:l.length)??!1}).map(r=>{var l;return s.jsxs("div",{className:"flex-shrink-0 w-60 bg-secondary p-3 rounded-lg",children:[s.jsx("h4",{className:"font-bold text-accent text-center mb-2",children:r}),s.jsx("div",{className:"space-y-2",children:(l=t[r])==null?void 0:l.map(a=>s.jsxs("div",{className:"bg-background p-2 rounded-md text-sm",children:[s.jsxs("p",{className:"font-semibold text-text-primary",children:[pp(a.time)," - ",a.subject]}),s.jsx("p",{className:"text-text-secondary",children:a.teacher})]},a.id))})]},r)})})})},jy=({homework:e})=>e.length===0?s.jsx("p",{className:"text-text-secondary text-center py-4",children:"No homework assignments. Great job!"}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.map(t=>s.jsxs("div",{className:"bg-secondary p-3 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-accent font-semibold",children:t.subject}),s.jsx("h4",{className:"font-semibold text-text-primary",children:t.title})]}),s.jsxs("p",{className:"text-text-secondary font-medium flex-shrink-0 pl-2",children:["Due: ",Ht(t.dueDate)]})]}),s.jsx("p",{className:"text-sm text-text-secondary mt-1",children:t.description})]},t.id))}),wy=()=>s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center bg-background p-4",children:[s.jsx(Br,{className:"w-24 h-24 text-red-500 mb-6"}),s.jsx("h1",{className:"text-4xl font-bold text-text-primary mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-lg text-text-secondary",children:"You do not have permission to view this page."}),s.jsx(Fn,{to:"/app",className:"mt-6 bg-accent text-white font-semibold px-6 py-2 rounded-lg hover:bg-accent/90 transition-colors",children:"Go to My Dashboard"})]}),jc=35*1024,by=({isOpen:e,onClose:t,onSave:n})=>{const[r,l]=f.useState(Ke());if(!e)return null;const a=i=>{const{name:d,value:m}=i.target;l(u=>({...u,[d]:m}))},o=i=>{var m;const d=(m=i.target.files)==null?void 0:m[0];if(d){if(d.size>jc){alert(`File is too large. Please select an image smaller than ${jc/1024}KB to avoid errors.`);return}const u=new FileReader;u.onloadend=()=>{l(p=>({...p,logo:u.result}))},u.readAsDataURL(d)}},c=async i=>{i.preventDefault(),await mg(r),n(),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:"Edit Institution Details"}),s.jsxs("form",{onSubmit:c,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:r.logo,alt:"logo preview",className:"w-20 h-20 rounded-full bg-white p-1"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"logo-upload",className:"block text-sm font-medium text-text-secondary",children:"Logo"}),s.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:o,className:"text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-accent file:text-white hover:file:bg-accent/90"})]})]}),s.jsx("input",{type:"text",name:"name",placeholder:"Madrasa Name",value:r.name,onChange:a,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"text",name:"tagline",placeholder:"Tagline",value:r.tagline,onChange:a,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsx("textarea",{name:"address",placeholder:"Address",value:r.address,onChange:a,rows:3,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:r.phone,onChange:a,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:r.email,onChange:a,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save Changes"})]})]})]})})},Ny=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[l,a]=f.useState({name:(r==null?void 0:r.name)||"",startDate:(r==null?void 0:r.startDate)||"",endDate:(r==null?void 0:r.endDate)||""});if(!e)return null;const o=i=>{a({...l,[i.target.name]:i.target.value})},c=async i=>{i.preventDefault(),r?await hh({...r,...l}):await xh(l),n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-lg",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add"," Academic Session"]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Session Name (e.g., 2024-2025)",value:l.name,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Start Date"}),s.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"End Date"}),s.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:o,className:"w-full bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:"Save Session"})]})]})]})})},Sy=({users:e,onEdit:t})=>s.jsx("div",{className:"overflow-x-auto bg-secondary rounded-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-background/30",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Username / ID"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Contact"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(n=>s.jsxs("tr",{className:"border-b border-primary hover:bg-primary/50",children:[s.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-text-primary whitespace-nowrap flex items-center gap-3",children:[s.jsx("img",{src:n.photo,alt:n.name,className:"w-8 h-8 rounded-full object-cover"}),n.name]}),s.jsx("td",{className:"px-6 py-4",children:n.username}),s.jsx("td",{className:"px-6 py-4",children:n.role}),s.jsx("td",{className:"px-6 py-4",children:n.email||n.phone||"N/A"}),s.jsx("td",{className:"px-6 py-4 flex items-center gap-4",children:s.jsx("button",{onClick:()=>t(n),className:"p-1 hover:bg-background rounded",title:"Edit User",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]},n.id))})]})}),wc=35*1024,ky=({isOpen:e,onClose:t,onSave:n,initialData:r})=>{const[l,a]=f.useState({name:"",username:"",password:"",role:"Student",email:"",phone:"",address:"",photo:""}),[o,c]=f.useState(null);if(f.useEffect(()=>{r?(a({name:r.name,username:r.username,password:"",role:r.role,email:r.email||"",phone:r.phone||"",address:r.address||"",photo:r.photo||""}),c(r.photo)):(a({name:"",username:"",password:"",role:"Student",email:"",phone:"",address:"",photo:""}),c(nn))},[r]),!e)return null;const i=u=>{a({...l,[u.target.name]:u.target.value})},d=u=>{var j;const p=(j=u.target.files)==null?void 0:j[0];if(p){if(p.size>wc){alert(`File is too large. Please select an image smaller than ${wc/1024}KB to avoid errors.`);return}const y=new FileReader;y.onloadend=()=>{const v=y.result;a(b=>({...b,photo:v})),c(v)},y.readAsDataURL(p)}},m=async u=>{u.preventDefault();const p={...l};if(r&&!p.password)delete p.password;else if(!r&&!p.password){alert("Password is required for new users.");return}r?await jh({...r,...p}):await vh(p),n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",children:s.jsxs("div",{className:"bg-primary rounded-lg p-8 shadow-2xl w-full max-w-2xl",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-text-primary",children:[r?"Edit":"Add New"," User"]}),s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"w-1/3 space-y-2",children:[s.jsx("img",{src:o||nn,alt:"preview",className:"w-32 h-32 rounded-full object-cover mx-auto border-2 border-accent"}),s.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"text-sm text-text-secondary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-secondary file:text-text-primary hover:file:bg-accent hover:file:text-white"})]}),s.jsxs("div",{className:"w-2/3 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:l.name,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",required:!0}),s.jsx("input",{type:"text",name:"username",placeholder:"Username / Login ID",value:l.username,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0}),s.jsx("input",{type:"password",name:"password",placeholder:r?"New Password (optional)":"Password",value:l.password,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),s.jsxs("select",{name:"role",value:l.role,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2",disabled:!!r,children:[s.jsx("option",{value:"Student",children:"Student"}),s.jsx("option",{value:"Teacher",children:"Teacher"}),s.jsx("option",{value:"Admin",children:"Admin"})]}),s.jsx("p",{className:"text-xs text-text-secondary col-span-2 -mt-2",children:"Role cannot be changed after creation."}),s.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:l.email,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2"}),s.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:l.phone,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2"}),s.jsx("input",{type:"text",name:"address",placeholder:"Address",value:l.address,onChange:i,className:"bg-secondary p-3 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent col-span-2"})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 rounded-md text-text-primary bg-secondary hover:bg-secondary/80",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md text-white bg-accent hover:bg-accent/80 font-semibold",children:r?"Save Changes":"Create User"})]})]})]})})},bc=e=>e?e.split("T")[0]:"",Cy=()=>{const[e,t]=f.useState("general"),n=()=>{switch(e){case"general":return s.jsx(Ey,{});case"sessions":return s.jsx(Py,{});case"roles":return s.jsx(Dy,{});case"users":return s.jsx(Iy,{});case"data":return s.jsx(Ly,{});default:return null}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Administration Panel"}),s.jsxs("div",{className:"bg-primary rounded-lg shadow-lg",children:[s.jsx("div",{className:"flex border-b border-secondary",children:["general","sessions","roles","users","data"].map(r=>s.jsx("button",{onClick:()=>t(r),className:`px-4 py-3 font-medium text-sm -mb-px border-b-2 ${e===r?"border-accent text-accent":"border-transparent text-text-secondary hover:text-text-primary"}`,children:r.charAt(0).toUpperCase()+r.slice(1).replace("-"," ")},r))}),s.jsx("div",{className:"p-6 min-h-[500px]",children:n()})]})]})},Ey=()=>{const[e,t]=f.useState(Ke()),[n,r]=f.useState(!1),l=()=>{t({...Ls})};return s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"General Settings"}),s.jsxs("div",{className:"bg-secondary p-6 rounded-lg max-w-2xl",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("img",{src:e.logo,alt:"logo",className:"w-20 h-20 rounded-full mr-6 bg-white p-1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text-primary text-2xl",children:e.name}),s.jsx("p",{className:"text-text-secondary text-md",children:e.tagline})]})]}),s.jsxs("div",{className:"text-sm text-text-primary space-y-2 border-t border-background pt-4",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Address:"})," ",e.address]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",e.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",e.email]})]}),s.jsx("button",{onClick:()=>r(!0),className:"w-full mt-6 bg-accent text-white px-4 py-2 rounded-lg font-semibold hover:bg-accent/80 transition-colors",children:"Edit Details"})]}),s.jsx(by,{isOpen:n,onClose:()=>r(!1),onSave:l})]})},Py=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[l,a]=f.useState(!1),[o,c]=f.useState(null),i=f.useCallback(async()=>{r(!0),fh().then(u=>{t(u),r(!1)})},[]);f.useEffect(()=>{i()},[i]);const d=async u=>{await gh(u),i()},m=(u=null)=>{c(u),a(!0)};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Academic Sessions"}),s.jsx("button",{onClick:()=>m(),className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm",children:"Add New Session"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Session Name"}),s.jsx("th",{className:"px-4 py-2",children:"Start Date"}),s.jsx("th",{className:"px-4 py-2",children:"End Date"}),s.jsx("th",{className:"px-4 py-2",children:"Status"}),s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center p-4",children:"Loading..."})}):e.map(u=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[s.jsx("td",{className:"px-4 py-2 font-medium text-text-primary",children:u.name}),s.jsx("td",{className:"px-4 py-2",children:bc(u.startDate)}),s.jsx("td",{className:"px-4 py-2",children:bc(u.endDate)}),s.jsx("td",{className:"px-4 py-2",children:u.isActive?s.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-500/20 text-green-400",children:"Active"}):s.jsx("button",{onClick:()=>d(u.id),className:"text-xs text-accent hover:underline",children:"Set Active"})}),s.jsx("td",{className:"px-4 py-2 flex gap-2",children:s.jsx("button",{onClick:()=>m(u),className:"p-1 hover:bg-background rounded",children:s.jsx(Ye,{className:"w-4 h-4 text-yellow-400"})})})]},u.id))})]})}),l&&s.jsx(Ny,{isOpen:l,onClose:()=>a(!1),onSave:()=>{i(),a(!1)},initialData:o})]})},Dy=()=>{const[e,t]=f.useState(()=>Hr()),n=(a,o,c)=>{t(i=>i.map(d=>{if(d.href===a){const m=c?[...new Set([...d.roles,o])]:d.roles.filter(u=>u!==o);return{...d,roles:m}}return d}))},r=()=>{cg(e),alert("Permissions updated successfully!")},l=()=>{dg(),t(Hr()),alert("Permissions have been reset to default.")};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Roles & Permissions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:l,className:"bg-secondary text-text-primary px-3 py-1.5 rounded-md font-semibold hover:bg-secondary/80 text-sm",children:"Reset to Defaults"}),s.jsx("button",{onClick:r,className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm",children:"Save Changes"})]})]}),s.jsx("p",{className:"text-text-secondary mb-6 text-sm",children:"Control which modules are accessible to Teacher and Student roles. Admin access is informational and cannot be changed."}),s.jsx("div",{className:"overflow-x-auto bg-secondary rounded-lg",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-primary",children:[s.jsx("thead",{className:"text-xs uppercase",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3",children:"Module"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Admin Access"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Teacher Access"}),s.jsx("th",{className:"px-6 py-3 text-center",children:"Student Access"})]})}),s.jsx("tbody",{children:e.map(a=>s.jsxs("tr",{className:"border-t border-background",children:[s.jsxs("td",{className:"px-6 py-4 font-semibold flex items-center gap-3",children:[s.jsx(a.icon,{className:"w-5 h-5 text-accent"}),a.label]}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,disabled:!0,className:"w-5 h-5 opacity-50"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:a.roles.includes("Teacher"),onChange:o=>n(a.href,"Teacher",o.target.checked),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent cursor-pointer"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:a.roles.includes("Student"),onChange:o=>n(a.href,"Student",o.target.checked),className:"w-5 h-5 bg-background border-secondary rounded text-accent focus:ring-accent cursor-pointer"})})]},a.href))})]})})]})},Iy=()=>{const[e,t]=f.useState([]),[n,r]=f.useState(!0),[l,a]=f.useState(!1),[o,c]=f.useState(null),i=f.useCallback(async()=>{try{r(!0);const p=await sp();t(p)}catch(p){console.error("Failed to fetch users",p)}finally{r(!1)}},[]);f.useEffect(()=>{i()},[i]);const d=(p=null)=>{c(p),a(!0)},m=()=>{c(null),a(!1)},u=()=>{i(),m()};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"User Management"}),s.jsxs("button",{onClick:()=>d(),className:"bg-accent text-white px-3 py-1.5 rounded-md font-semibold hover:bg-accent/90 text-sm flex items-center gap-2",children:[s.jsx(Zu,{className:"w-4 h-4"})," Add New User"]})]}),n?s.jsx("p",{children:"Loading users..."}):s.jsx(Sy,{users:e,onEdit:d}),l&&s.jsx(ky,{isOpen:l,onClose:m,onSave:u,initialData:o})]})},Ly=()=>{const e=()=>{window.confirm("Are you sure you want to start a data backup?")&&alert("Simulating data backup... Backup completed successfully!")},t=()=>{window.confirm("WARNING: Restoring data will overwrite current information. Are you sure you want to proceed?")&&alert("Simulating data restore... Restore completed successfully!")};return s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Data Management"}),s.jsxs("div",{className:"bg-secondary p-6 rounded-lg max-w-md space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:"Backup Data"}),s.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Create a backup of the entire system's data."}),s.jsx("button",{onClick:e,className:"bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-600 transition-colors",children:"Start Backup"})]}),s.jsxs("div",{className:"border-t border-background pt-4",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:"Restore Data"}),s.jsx("p",{className:"text-sm text-text-secondary mb-2",children:"Restore data from a previous backup. This action is irreversible."}),s.jsx("button",{onClick:t,className:"bg-red-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-600 transition-colors",children:"Restore from Backup"})]})]})]})},Nc=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]}catch{return e}},Ay=e=>{switch(e){case"Pending":return"bg-yellow-500/20 text-yellow-400";case"Approved":return"bg-green-500/20 text-green-400";case"Rejected":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},Sc=({requests:e,isAdminView:t,onApprove:n,onReject:r})=>e.length===0?s.jsx("p",{className:"text-text-secondary text-center py-4",children:t?"No leave requests found.":"You have no leave history."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm text-left text-text-secondary",children:[s.jsx("thead",{className:"text-xs text-text-primary uppercase bg-secondary",children:s.jsxs("tr",{children:[t&&s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Staff Name"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Start Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"End Date"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Reason"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),t&&s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(l=>s.jsxs("tr",{className:"border-b border-secondary hover:bg-secondary/50",children:[t&&s.jsx("td",{className:"px-6 py-4 font-medium text-text-primary",children:l.staffName}),s.jsx("td",{className:"px-6 py-4",children:Nc(l.startDate)}),s.jsx("td",{className:"px-6 py-4",children:Nc(l.endDate)}),s.jsx("td",{className:"px-6 py-4 max-w-xs truncate",children:l.reason}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ay(l.status)}`,children:l.status})}),t&&s.jsx("td",{className:"px-6 py-4",children:l.status==="Pending"&&n&&r&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>n(l.id),className:"p-1.5 bg-green-500/20 text-green-400 rounded-full hover:bg-green-500/40",title:"Approve",children:s.jsx(ah,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(l.id),className:"p-1.5 bg-red-500/20 text-red-400 rounded-full hover:bg-red-500/40",title:"Reject",children:s.jsx(dl,{className:"w-4 h-4"})})]})})]},l.id))})]})}),Ty=()=>{const{user:e}=Pe(),[t,n]=f.useState([]),[r,l]=f.useState(!0),[a,o]=f.useState(""),[c,i]=f.useState(""),[d,m]=f.useState(""),u=f.useCallback(async()=>{try{l(!0);const v=await ip();n(v)}catch(v){console.error("Failed to fetch leave requests",v)}finally{l(!1)}},[]);f.useEffect(()=>{u()},[u]);const p=async v=>{if(v.preventDefault(),!e||!a||!c||!d){alert("Please fill all fields.");return}await lg({staffId:e.id,staffName:e.name,startDate:a,endDate:c,reason:d}),o(""),i(""),m(""),u()},j=async(v,b)=>{await ag(v,b),u()},y=f.useMemo(()=>e?t.filter(v=>v.staffId===e.id):[],[t,e]);return r?s.jsx("div",{className:"text-center p-8",children:"Loading leave information..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:"Leave Management"}),(e==null?void 0:e.role)==="Admin"&&s.jsxs("div",{className:"bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"All Staff Leave Requests"}),s.jsx(Sc,{requests:t,isAdminView:!0,onApprove:v=>j(v,"Approved"),onReject:v=>j(v,"Rejected")})]}),(e==null?void 0:e.role)==="Teacher"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 bg-primary p-6 rounded-lg shadow-lg h-fit",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Apply for Leave"}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Start Date"}),s.jsx("input",{type:"date",value:a,onChange:v=>o(v.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"End Date"}),s.jsx("input",{type:"date",value:c,onChange:v=>i(v.target.value),className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-text-secondary mb-1 block",children:"Reason"}),s.jsx("textarea",{value:d,onChange:v=>m(v.target.value),rows:4,placeholder:"Reason for leave...",className:"w-full bg-secondary p-2 rounded-md text-text-primary focus:outline-none focus:ring-2 focus:ring-accent",required:!0})]}),s.jsx("button",{type:"submit",className:"w-full bg-accent text-white font-semibold py-2.5 rounded-lg hover:bg-accent/90 transition-colors",children:"Submit Request"})]})]}),s.jsxs("div",{className:"lg:col-span-2 bg-primary p-6 rounded-lg shadow-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"My Leave History"}),s.jsx(Sc,{requests:y,isAdminView:!1})]})]})]})},My=()=>s.jsxs("div",{className:"flex h-screen bg-background font-sans",children:[s.jsx(fg,{}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(xg,{}),s.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-background p-6",children:s.jsx(Uo,{})})]})]}),zy=()=>{const{user:e}=Pe(),t=Qo(),n=r=>{var l;return((l=t.find(a=>a.href===r))==null?void 0:l.roles)||["Admin"]};return s.jsxs(zx,{children:[s.jsx(q,{path:"/",element:e?s.jsx(Wt,{to:"/app"}):s.jsx(xy,{})}),s.jsx(q,{path:"/login",element:e?s.jsx(Wt,{to:"/app"}):s.jsx(hy,{})}),s.jsx(q,{path:"/results",element:s.jsx(gy,{})}),s.jsx(q,{path:"/app",element:s.jsx(ce,{roles:["Admin","Teacher","Student"],children:(e==null?void 0:e.role)==="Student"?s.jsx(Wt,{to:"/app/student-dashboard"}):s.jsx(Wt,{to:"/app/dashboard"})})}),s.jsxs(q,{element:s.jsx(ce,{roles:["Admin","Teacher"],children:s.jsx(My,{})}),children:[s.jsx(q,{path:"/app/dashboard",element:s.jsx(ce,{roles:n("/app/dashboard"),children:s.jsx(yg,{})})}),s.jsx(q,{path:"/app/students",element:s.jsx(ce,{roles:n("/app/students"),children:s.jsx(wg,{})})}),s.jsx(q,{path:"/app/classes",element:s.jsx(ce,{roles:n("/app/classes"),children:s.jsx(fy,{})})}),s.jsx(q,{path:"/app/academics",element:s.jsx(ce,{roles:n("/app/academics"),children:s.jsx(Ig,{})})}),s.jsx(q,{path:"/app/attendance",element:s.jsx(ce,{roles:n("/app/attendance"),children:s.jsx(zg,{})})}),s.jsx(q,{path:"/app/communication",element:s.jsx(ce,{roles:n("/app/communication"),children:s.jsx(Vg,{})})}),s.jsx(q,{path:"/app/exams",element:s.jsx(ce,{roles:n("/app/exams"),children:s.jsx(sy,{})})}),s.jsx(q,{path:"/app/events",element:s.jsx(ce,{roles:n("/app/events"),children:s.jsx(oy,{})})}),s.jsx(q,{path:"/app/leave",element:s.jsx(ce,{roles:n("/app/leave"),children:s.jsx(Ty,{})})}),s.jsx(q,{path:"/app/staff",element:s.jsx(ce,{roles:n("/app/staff"),children:s.jsx(Sg,{})})}),s.jsx(q,{path:"/app/finance",element:s.jsx(ce,{roles:n("/app/finance"),children:s.jsx(Ug,{})})}),s.jsx(q,{path:"/app/transport",element:s.jsx(ce,{roles:n("/app/transport"),children:s.jsx(Gg,{})})}),s.jsx(q,{path:"/app/inventory",element:s.jsx(ce,{roles:n("/app/inventory"),children:s.jsx(Kg,{})})}),s.jsx(q,{path:"/app/id-cards",element:s.jsx(ce,{roles:n("/app/id-cards"),children:s.jsx(cy,{})})}),s.jsx(q,{path:"/app/administration",element:s.jsx(ce,{roles:n("/app/administration"),children:s.jsx(Cy,{})})})]}),s.jsx(q,{element:s.jsx(ce,{roles:["Student"],children:s.jsx(gg,{})}),children:s.jsx(q,{path:"/app/student-dashboard",element:s.jsx(yy,{})})}),s.jsx(q,{path:"/unauthorized",element:s.jsx(wy,{})}),s.jsx(q,{path:"*",element:s.jsx(Wt,{to:e?"/app":"/",replace:!0})})]})},Fy=()=>{const[e,t]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{await Promise.all([pg(),dh()])}finally{t(!1)}})()},[]),e?s.jsx("div",{className:"flex justify-center items-center h-screen bg-background text-text-primary",children:s.jsx("p",{className:"text-xl animate-pulse",children:"Loading Institution & Caching Data..."})}):s.jsx(Hx,{children:s.jsx(og,{children:s.jsx(zy,{})})})},mp=document.getElementById("root");if(!mp)throw new Error("Could not find root element to mount to");const Ry=Ul.createRoot(mp);Ry.render(s.jsx(qa.StrictMode,{children:s.jsx(Fy,{})}));
